<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TimeLink v20.1 - TL3 ê³µìœ  ì¦‰ì‹œ í‘œì‹œ!</title>

<style>
/* ===== ì „ì²´ ìŠ¤íƒ€ì¼ (ì›ë³¸ ìœ ì§€) ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --warning: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
  --danger: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%);
  --dark: #1a1a2e;
  --light: #f8f9fa;
  --shadow: 0 10px 40px rgba(0,0,0,0.1);
  --shadow-lg: 0 20px 60px rgba(0,0,0,0.2);
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  color: var(--dark);
}

/* ===== ë¡œê·¸ì¸ ===== */
.auth-container {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 20px;
}

.auth-box {
  background: white;
  padding: 50px;
  border-radius: 30px;
  box-shadow: var(--shadow-lg);
  max-width: 450px;
  width: 100%;
  text-align: center;
}

.logo h1 {
  background: var(--primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 3rem;
  font-weight: 800;
  margin-bottom: 10px;
}

.version-badge {
  background: var(--secondary);
  color: white;
  padding: 10px 20px;
  border-radius: 25px;
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 30px;
}

.google-login-btn {
  background: #4285F4;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: 1.2rem;
  padding: 20px;
  border-radius: 50px;
  margin: 30px 0;
  border: none;
  cursor: pointer;
  width: 100%;
}

.google-login-btn:hover {
  background: #3367D6;
  transform: translateY(-3px);
}

/* ===== ë©”ì¸ ì•± ===== */
.app-container {
  display: none;
  max-width: 1600px;
  margin: 0 auto;
  padding: 20px;
}

.app-header {
  background: white;
  padding: 25px 40px;
  border-radius: 25px;
  margin-bottom: 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: var(--shadow);
}

.header-left h1 {
  background: var(--primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 2rem;
  font-weight: 800;
}

.header-right {
  display: flex;
  gap: 30px;
  align-items: center;
}

.balance-cards {
  display: flex;
  gap: 16px;
}

.balance-card {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  padding: 12px 20px;
  border-radius: 15px;
  text-align: center;
}

.balance-card .label {
  font-size: 11px;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 6px;
}

.balance-card .amount {
  font-size: 22px;
  font-weight: 800;
  background: var(--primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.user-profile {
  display: flex;
  align-items: center;
  gap: 15px;
}

.avatar-circle {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 800;
  font-size: 20px;
}

.btn-logout {
  background: var(--secondary);
  color: white;
  padding: 12px 25px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
}

.btn-logout:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(245, 87, 108, 0.3);
}

/* ===== íƒ­ ===== */
.tabs {
  display: flex;
  gap: 15px;
  margin-bottom: 30px;
  overflow-x: auto;
  padding-bottom: 10px;
  flex-wrap: wrap;
}

.tab {
  background: white;
  padding: 18px 30px;
  border-radius: 15px;
  cursor: pointer;
  font-weight: 700;
  transition: all 0.3s;
  box-shadow: var(--shadow);
  white-space: nowrap;
  border: none;
}

.tab:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.15);
}

.tab.active {
  background: var(--primary);
  color: white;
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}

/* ===== ì¹´ë“œ ===== */
.card {
  background: white;
  padding: 40px;
  border-radius: 25px;
  margin-bottom: 30px;
  box-shadow: var(--shadow);
}

.card h2 {
  font-size: 1.8rem;
  margin-bottom: 25px;
  background: var(--primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ===== í†µê³„ ===== */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-bottom: 30px;
}

.stat-card {
  background: white;
  padding: 30px;
  border-radius: 20px;
  box-shadow: var(--shadow);
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 5px;
  background: var(--primary);
}

.stat-card .icon {
  font-size: 2.5rem;
  margin-bottom: 15px;
}

.stat-card .label {
  font-size: 13px;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 10px;
}

.stat-card .value {
  font-size: 2.5rem;
  font-weight: 800;
  background: var(--primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ===== íŒŒì¼ ì—…ë¡œë“œ ===== */
.upload-zone {
  border: 3px dashed #667eea;
  border-radius: 20px;
  padding: 60px 40px;
  text-align: center;
  background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
  cursor: pointer;
  transition: all 0.3s;
  margin-bottom: 30px;
}

.upload-zone:hover {
  border-color: #764ba2;
  background: linear-gradient(135deg, #e8ecff 0%, #d8dcff 100%);
  transform: scale(1.02);
}

.upload-zone .icon {
  font-size: 5rem;
  margin-bottom: 20px;
}

/* ===== íŒŒì¼ ëª©ë¡ ===== */
.file-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 25px;
}

.file-card {
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow);
  border-top: 5px solid #667eea;
  transition: all 0.3s;
}

.file-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 20px 50px rgba(0,0,0,0.15);
}

.file-thumbnail {
  height: 180px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 4rem;
  color: white;
  position: relative;
}

.badge {
  position: absolute;
  top: 16px;
  right: 16px;
  padding: 6px 16px;
  border-radius: 30px;
  font-size: 12px;
  font-weight: 700;
  color: white;
}

.badge-mining { background: #4facfe; }
.badge-no-tl { background: #f43f5e; }
.badge-shared { background: #ff9800; }

.file-info {
  padding: 25px;
}

.file-name {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 6px;
  color: #333;
}

.file-artist {
  color: #666;
  font-size: 0.95rem;
  margin-bottom: 20px;
}

.copyright-info {
  background: #f8f9fa;
  padding: 16px;
  border-radius: 12px;
  margin-bottom: 20px;
  font-size: 13px;
  border-left: 4px solid #667eea;
}

.file-stats {
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
  font-size: 14px;
  color: #666;
}

.tl-progress {
  width: 100%;
  height: 6px;
  background: #e0e0e0;
  border-radius: 10px;
  overflow: hidden;
  margin: 16px 0;
}

.tl-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #667eea, #764ba2);
  transition: width 0.3s;
}

.tl-progress-empty {
  height: 100%;
  background: #f43f5e;
  width: 100%;
}

.file-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 20px;
}

.btn-play, .btn-charge, .btn-share, .btn-play-disabled {
  padding: 14px;
  border: none;
  border-radius: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s;
  color: white;
  font-size: 14px;
}

.btn-play {
  background: var(--success);
}

.btn-play-disabled {
  background: #999;
  cursor: not-allowed;
  opacity: 0.7;
}

.btn-charge {
  background: var(--warning);
}

.btn-share {
  background: var(--primary);
  grid-column: span 2;
}

.btn-play:hover:not(.btn-play-disabled), 
.btn-charge:hover, 
.btn-share:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

/* ===== ê³µìœ  í”Œë ˆì´ìŠ¤ ===== */
.share-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 20px;
  margin-bottom: 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.share-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-bottom: 30px;
}

.share-stat-card {
  background: white;
  padding: 25px;
  border-radius: 15px;
  text-align: center;
  box-shadow: var(--shadow);
}

.share-stat-value {
  font-size: 2rem;
  font-weight: 800;
  color: #667eea;
  margin-top: 8px;
}

.share-filter {
  display: flex;
  gap: 12px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 10px 24px;
  border: 2px solid #e0e0e0;
  border-radius: 30px;
  background: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.filter-btn:hover {
  border-color: #667eea;
}

.filter-btn.active {
  background: var(--primary);
  color: white;
  border-color: transparent;
}

/* ===== ë¼ë””ì˜¤ ===== */
.radio-header {
  background: linear-gradient(135deg, #1db954 0%, #1ed760 100%);
  color: white;
  padding: 40px;
  border-radius: 25px;
  margin-bottom: 30px;
}

.radio-channel-card {
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow);
}

.channel-header {
  background: linear-gradient(135deg, #1db954 0%, #1ed760 100%);
  color: white;
  padding: 20px;
}

/* ===== ìƒì—…ë°©ì†¡ ===== */
.commercial-header {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  padding: 40px;
  border-radius: 25px;
  margin-bottom: 30px;
}

/* ===== ì°¨ëŸ‰ ===== */
.car-contribution-box {
  background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
  color: white;
  padding: 40px;
  border-radius: 25px;
  margin-bottom: 30px;
}

/* ===== ê¸ˆë¦¬ì €ë¸Œ ===== */
.gold-reserve-card {
  background: linear-gradient(135deg, #f7b731 0%, #ffda79 100%);
  color: white;
  padding: 40px;
  border-radius: 25px;
  margin-bottom: 30px;
}

/* ===== TON ===== */
.ton-card {
  background: linear-gradient(135deg, #0088CC 0%, #00A8E8 100%);
  color: white;
  padding: 40px;
  border-radius: 25px;
  margin-bottom: 30px;
}

/* ===== ì±„êµ´ ===== */
.mining-limit-box {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 15px;
  border-left: 8px solid #ff9800;
  margin-bottom: 24px;
}

.mining-progress {
  width: 100%;
  height: 8px;
  background: #e0e0e0;
  border-radius: 10px;
  overflow: hidden;
  margin: 16px 0;
}

.mining-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffd700, #ffa500);
  transition: width 0.3s;
}

/* ===== ì¶©ì „ ì˜µì…˜ ===== */
.charge-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.charge-card {
  background: white;
  border: 3px solid #e0e0e0;
  border-radius: 20px;
  padding: 35px;
  text-align: center;
  transition: all 0.3s;
  cursor: pointer;
}

.charge-card:hover {
  border-color: #667eea;
  transform: translateY(-5px);
}

.charge-card .icon {
  font-size: 4rem;
  margin-bottom: 20px;
}

.charge-card .amount {
  font-size: 2rem;
  font-weight: 800;
  background: var(--success);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ===== í”Œë ˆì´ì–´ ëª¨ë‹¬ ===== */
.player-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  z-index: 2000;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.player-content {
  background: white;
  padding: 40px;
  border-radius: 30px;
  max-width: 550px;
  width: 90%;
  text-align: center;
}

.player-title {
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 10px;
  color: #333;
}

.player-artist {
  color: #666;
  font-size: 1.2rem;
  margin-bottom: 20px;
}

.player-copyright {
  background: #f0f4ff;
  padding: 16px;
  border-radius: 12px;
  margin-bottom: 24px;
  font-size: 14px;
  text-align: left;
  border-left: 4px solid #667eea;
}

.player-tl-info {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 15px;
  margin-bottom: 24px;
}

.player-tl-amount {
  font-size: 2.5rem;
  font-weight: 800;
  color: #667eea;
}

.player-progress {
  width: 100%;
  height: 8px;
  background: #e0e0e0;
  border-radius: 4px;
  overflow: hidden;
  margin: 20px 0;
}

.player-progress-fill {
  height: 100%;
  background: var(--success);
  width: 0%;
  transition: width 0.2s linear;
}

.player-time {
  display: flex;
  justify-content: space-between;
  color: #666;
  font-size: 13px;
  margin-bottom: 24px;
}

.player-controls {
  display: flex;
  gap: 12px;
  justify-content: center;
}

/* ===== ì¶©ì „ ëª¨ë‹¬ ===== */
.charge-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  z-index: 1500;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.charge-content {
  background: white;
  padding: 40px;
  border-radius: 30px;
  max-width: 500px;
  width: 90%;
  text-align: center;
}

.charge-content h2 {
  margin-bottom: 24px;
  background: var(--primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.charge-content input {
  width: 100%;
  padding: 15px;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  font-size: 16px;
  margin-bottom: 16px;
}

/* ===== í† ìŠ¤íŠ¸ ===== */
.toast {
  position: fixed;
  top: 30px;
  right: 30px;
  background: white;
  padding: 18px 28px;
  border-radius: 100px;
  box-shadow: var(--shadow-lg);
  display: none;
  z-index: 3000;
  min-width: 320px;
  border-left: 6px solid #4CAF50;
  animation: slideIn 0.3s;
}

@keyframes slideIn {
  from { transform: translateX(400px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

.toast.success { border-left-color: #4CAF50; }
.toast.error { border-left-color: #f44336; }
.toast.warning { border-left-color: #ff9800; }

/* ===== ì¶©ì „ ê²½ê³  ===== */
.charge-warning {
  background: #fff3cd;
  border-left: 8px solid #ff9800;
  padding: 20px;
  border-radius: 15px;
  margin-bottom: 30px;
  display: flex;
  align-items: center;
  gap: 15px;
}

.charge-warning-icon {
  font-size: 2.5rem;
}

.charge-warning-text {
  color: #856404;
  font-weight: 700;
}

/* ===== ë°ëª¨ ë°°ì§€ ===== */
.demo-badge {
  background: #ff9800;
  color: white;
  padding: 5px 15px;
  border-radius: 30px;
  font-size: 12px;
  font-weight: 700;
  display: inline-block;
  margin-left: 10px;
}

/* ===== ë°˜ì‘í˜• ===== */
@media (max-width: 768px) {
  .app-header {
    flex-direction: column;
    gap: 20px;
  }
  
  .header-right {
    flex-direction: column;
    width: 100%;
  }
  
  .balance-cards {
    flex-direction: column;
  }
  
  .tabs {
    overflow-x: auto;
    flex-wrap: nowrap;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .share-stats {
    grid-template-columns: 1fr;
  }
  
  .file-list {
    grid-template-columns: 1fr;
  }
}
</style>
</head>
<body>

<!-- í† ìŠ¤íŠ¸ -->
<div id="toast" class="toast"></div>

<!-- ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ -->
<audio id="audioPlayer" style="display: none;"></audio>

<!-- ===== ë¡œê·¸ì¸ í™”ë©´ ===== -->
<div id="authContainer" class="auth-container">
  <div class="auth-box">
    <div class="logo">
      <h1>â° TimeLink</h1>
      <p>TL3 íŒŒì¼ - ê³µìœ í•˜ë©´ ì¦‰ì‹œ í‘œì‹œ!</p>
    </div>
    <div class="version-badge">
      ğŸš€ v20.1 - TL3 ê³µìœ  ì¦‰ì‹œ í‘œì‹œ! <span class="demo-badge">DEMO</span>
    </div>
    
    <button class="google-login-btn" onclick="demoGoogleLogin()">
      <span style="font-size:1.8rem;">ğŸ”</span> Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ (ë°ëª¨)
    </button>
    
    <p style="color:#666; margin-top:30px; font-size:0.95rem;">
      â€» ë°ëª¨ ëª¨ë“œì—ì„œëŠ” ì‹¤ì œ Google ë¡œê·¸ì¸ ì—†ì´<br>
      <strong>í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œ ì¦‰ì‹œ ë¡œê·¸ì¸</strong>ë©ë‹ˆë‹¤.
    </p>
  </div>
</div>

<!-- ===== ë©”ì¸ ì•± ===== -->
<div id="appContainer" class="app-container" style="display:none;">
  
  <!-- í—¤ë” -->
  <div class="app-header">
    <div class="header-left">
      <h1>â° TimeLink</h1>
      <span class="demo-badge" style="margin-left:15px;">ë°ëª¨ ëª¨ë“œ</span>
    </div>
    <div class="header-right">
      <div class="balance-cards">
        <div class="balance-card">
          <div class="label">ğŸ’° ë‚´ ì§€ê°‘</div>
          <div class="amount" id="tlBalance">15,000</div>
        </div>
        <div class="balance-card">
          <div class="label">ğŸª™ ë³´ìœ  TLC</div>
          <div class="amount" id="tlcBalance">1,250.75</div>
        </div>
        <div class="balance-card">
          <div class="label">ğŸ“Š ê¸°ì—¬ì§€ìˆ˜</div>
          <div class="amount" id="contributionIndex">4.75</div>
        </div>
      </div>
      <div class="user-profile">
        <div class="avatar-circle" id="userAvatar">G</div>
        <div>
          <div style="font-weight:700;" id="currentUsername">Google íˆ¬ìì</div>
          <div style="font-size:12px; color:#f5576c;" id="userStatus">ğŸ¢ ì‚¬ì—…ì (ë°ëª¨)</div>
        </div>
      </div>
      <button class="btn-logout" onclick="demoLogout()">ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  </div>

  <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
  <div class="tabs">
    <div class="tab active" onclick="switchTab('dashboard')">ğŸ“Š ëŒ€ì‹œë³´ë“œ</div>
    <div class="tab" onclick="switchTab('upload')">ğŸ“¤ TL3 ìƒì„±</div>
    <div class="tab" onclick="switchTab('library')">ğŸµ ë‚´ TL3 íŒŒì¼</div>
    <div class="tab" onclick="switchTab('shareplace')">ğŸ”„ ê³µìœ  í”Œë ˆì´ìŠ¤</div>
    <div class="tab" onclick="switchTab('radio')">ğŸ“» ë¼ë””ì˜¤</div>
    <div class="tab" onclick="switchTab('commercial')">ğŸ“º ìƒì—…ë°©ì†¡</div>
    <div class="tab" onclick="switchTab('charge')">ğŸ’° ì§€ê°‘ ì¶©ì „</div>
    <div class="tab" onclick="switchTab('mining')">â›ï¸ TLC ì±„êµ´</div>
    <div class="tab" onclick="switchTab('car')">ğŸš— ì°¨ëŸ‰</div>
    <div class="tab" onclick="switchTab('gold')">ğŸ† ê¸ˆë¦¬ì €ë¸Œ</div>
    <div class="tab" onclick="switchTab('ton')">â¬¡ TON TLC</div>
  </div>

  <!-- ===== 1. ëŒ€ì‹œë³´ë“œ ===== -->
  <div id="tabDashboard" class="tab-content active">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="icon">ğŸ’°</div>
        <div class="label">ë‚´ ì§€ê°‘</div>
        <div class="value" id="dashTL">15,000</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸª™</div>
        <div class="label">ë³´ìœ  TLC</div>
        <div class="value" id="dashTLC">1,250.75</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸ“Š</div>
        <div class="label">ê¸°ì—¬ì§€ìˆ˜</div>
        <div class="value" id="dashIndex">4.75</div>
      </div>
      <div class="stat-card">
        <div class="icon">â›ï¸</div>
        <div class="label">ì±„êµ´ í•œë„</div>
        <div class="value" id="dashMiningLimit">7,500 TL</div>
      </div>
    </div>
    
    <!-- ì¶©ì „ í•„ìˆ˜ ê²½ê³  -->
    <div class="charge-warning">
      <div class="charge-warning-icon">âš ï¸</div>
      <div class="charge-warning-text">
        <h3 style="color:#856404; margin-bottom:5px;">TL3 íŒŒì¼ = ì¶©ì „ í•„ìˆ˜!</h3>
        <p style="color:#856404;">ì¬ìƒí•˜ë ¤ë©´ ë°˜ë“œì‹œ TLì„ ì¶©ì „í•´ì•¼ í•©ë‹ˆë‹¤. ì¶©ì „ ì—†ì´ëŠ” ì¬ìƒ ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.</p>
      </div>
    </div>
  </div>

  <!-- ===== 2. TL3 íŒŒì¼ ìƒì„± ===== -->
  <div id="tabUpload" class="tab-content">
    <div class="card">
      <h2>ğŸ“¤ TL3 íŒŒì¼ ìƒì„±</h2>
      <div style="background:#e8f5e9; padding:15px; border-radius:15px; margin-bottom:20px;">
        <p style="color:#2e7d32; font-weight:700;">âœ… TL3 íŒŒì¼ ìƒì„±ì€ ë¬´ë£Œì…ë‹ˆë‹¤!</p>
      </div>
      <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
        <div class="icon">â˜ï¸</div>
        <h3 style="color:#333; margin-bottom:10px;">í´ë¦­í•˜ì—¬ ìŒì•… íŒŒì¼ ì„ íƒ</h3>
        <p style="color:#666;">MP3, WAV, FLAC (ìµœëŒ€ 100MB)</p>
      </div>
      <input type="file" id="fileInput" style="display:none;" accept="audio/*">
      
      <div id="uploadForm" style="display:none; margin-top:30px;">
        <div class="form-group" style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ê³¡ ì œëª©</label>
          <input type="text" id="songTitle" placeholder="ë…¸ë˜ ì œëª©" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
        </div>
        <div class="form-group" style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì•„í‹°ìŠ¤íŠ¸</label>
          <input type="text" id="songArtist" placeholder="ì•„í‹°ìŠ¤íŠ¸ ì´ë¦„" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
        </div>
        <div class="form-group" style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì¥ë¥´</label>
          <select id="songGenre" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
            <option value="pop">íŒ</option>
            <option value="rock">ë¡</option>
            <option value="hiphop">í™í•©</option>
            <option value="jazz">ì¬ì¦ˆ</option>
            <option value="classical">í´ë˜ì‹</option>
            <option value="electronic">ì¼ë ‰íŠ¸ë¡œë‹‰</option>
            <option value="rnb">R&B</option>
            <option value="ballad">ë°œë¼ë“œ</option>
          </select>
        </div>
        
        <div style="background:#f0f4ff; padding:24px; border-radius:15px; margin-bottom:24px;">
          <h3 style="margin-bottom:20px; color:#667eea;">ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</h3>
          <div class="form-group" style="margin-bottom:20px;">
            <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì €ì‘ê¶Œì</label>
            <input type="text" id="copyrightOwner" value="Google íˆ¬ìì" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ìˆ˜ìµ ë¶„ë°° ê³„ì•½</label>
            <select id="revenueShare" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
              <option value="73">7:3 ê³„ì•½ - ì±„êµ´ê¶Œ ì—†ìŒ</option>
              <option value="55" selected>5:5 ê³„ì•½ - ì±„êµ´ê¶Œ ìˆìŒ â›ï¸</option>
            </select>
          </div>
        </div>
        
        <button class="btn btn-primary" onclick="uploadFile()" style="width:100%; padding:18px; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; border:none; border-radius:15px; font-weight:700; cursor:pointer;">âœ¨ TL3 íŒŒì¼ ìƒì„± (ë¬´ë£Œ)</button>
      </div>
    </div>
  </div>

  <!-- ===== 3. ğŸ”¥ ë‚´ TL3 íŒŒì¼ ===== -->
  <div id="tabLibrary" class="tab-content">
    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <h2>ğŸµ ë‚´ TL3 íŒŒì¼</h2>
        <div>
          <span style="background:#4facfe; color:white; padding:8px 16px; border-radius:30px;">5:5 = ì±„êµ´ê°€ëŠ¥</span>
          <span style="background:#fa709a; color:white; padding:8px 16px; border-radius:30px; margin-left:10px;">7:3 = ì±„êµ´ë¶ˆê°€</span>
        </div>
      </div>
      <div id="fileList" class="file-list"></div>
      <div id="emptyLibrary" style="text-align:center; padding:60px; color:#999; display:none;">
        <div style="font-size:4rem; margin-bottom:20px;">ğŸµ</div>
        <h3>ìƒì„±í•œ TL3 íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p style="margin-top:10px;">ìŒì•… íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ TL3 íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”!</p>
        <button class="btn btn-primary" onclick="switchTab('upload')" style="margin-top:20px; padding:14px 40px;">ì²« TL3 íŒŒì¼ ìƒì„±</button>
      </div>
    </div>
  </div>

  <!-- ===== 4. ğŸ”¥ ê³µìœ  í”Œë ˆì´ìŠ¤ (ë‚´ê°€ ê³µìœ í•œ íŒŒì¼ ì¦‰ì‹œ í‘œì‹œ!) ===== -->
  <div id="tabShareplace" class="tab-content">
    <div class="share-header">
      <div>
        <h2 style="color:white; margin-bottom:10px;">ğŸ”„ ê³µìœ  í”Œë ˆì´ìŠ¤</h2>
        <p style="color:rgba(255,255,255,0.9);">
          <strong style="font-size:1.2rem;">âœ¨ ë‚´ê°€ ê³µìœ í•œ TL3 íŒŒì¼ì´ ì¦‰ì‹œ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤! âœ¨</strong>
        </p>
      </div>
      <div style="background:rgba(255,255,255,0.2); padding:12px 28px; border-radius:30px;">
        <span id="sharedCount" style="font-weight:700; color:white;">0</span>ê°œ ê³µìœ ë¨
      </div>
    </div>
    
    <div style="background:rgba(245,158,11,0.1); border-left:8px solid #ff9800; padding:20px; border-radius:15px; margin-bottom:32px;">
      <p style="color:#fbbf24; font-weight:700;">ğŸ’° ë‚´ TL3 íŒŒì¼ ê³µìœ  ì‹œ 5,000 TL ì°¨ê° (ë‚´ ì§€ê°‘ â†’ í”Œë«í¼ ìˆ˜ìµ)</p>
    </div>

    <div class="share-stats">
      <div class="share-stat-card">
        <div style="color:#666;">ì „ì²´ ê³µìœ </div>
        <div class="share-stat-value" id="totalSharedCount">0</div>
      </div>
      <div class="share-stat-card">
        <div style="color:#666;">7:3 ê³„ì•½</div>
        <div class="share-stat-value" id="shared73Count">0</div>
      </div>
      <div class="share-stat-card">
        <div style="color:#666;">5:5 ê³„ì•½</div>
        <div class="share-stat-value" id="shared55Count">0</div>
      </div>
    </div>

    <div class="share-filter">
      <button class="filter-btn active" onclick="filterSharePlace('all')">ì „ì²´</button>
      <button class="filter-btn" onclick="filterSharePlace('73')">7:3 ê³„ì•½</button>
      <button class="filter-btn" onclick="filterSharePlace('55')">5:5 ê³„ì•½</button>
      <button class="filter-btn" onclick="filterSharePlace('mining')">ì±„êµ´ ê°€ëŠ¥</button>
    </div>

    <!-- ğŸ”¥ğŸ”¥ğŸ”¥ ê³µìœ ëœ TL3 íŒŒì¼ ëª©ë¡ (ì—¬ê¸°ì— ë‚´ê°€ ê³µìœ í•œ íŒŒì¼ì´ ì¦‰ì‹œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤!) ğŸ”¥ğŸ”¥ğŸ”¥ -->
    <div id="sharedMusicList" class="file-list"></div>
    <div id="emptyShared" style="text-align:center; padding:60px; color:#999; display:block;">
      <div style="font-size:4rem; margin-bottom:20px;">ğŸ”„</div>
      <h3>ì•„ì§ ê³µìœ ëœ TL3 íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤</h3>
      <p style="margin-top:10px;">ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ íŒŒì¼ì„ ê³µìœ í•´ë³´ì„¸ìš”!</p>
    </div>
  </div>

  <!-- ===== 5. ë¼ë””ì˜¤ ===== -->
  <div id="tabRadio" class="tab-content">
    <div class="radio-header">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:10px;">ğŸ“» TimeLink Radio</h2>
          <p style="color:rgba(255,255,255,0.9);">24ì‹œê°„ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°</p>
          <p style="color:rgba(255,255,255,0.9); margin-top:10px;"><strong>ğŸ§ 1ì´ˆ ì¬ìƒ = ë‚´ ì§€ê°‘ 1TL ì†Œëª¨</strong></p>
        </div>
        <div style="background:rgba(255,255,255,0.2); padding:12px 28px; border-radius:40px;">ğŸ”´ LIVE 24/7</div>
      </div>
    </div>
    <div id="radioChannels" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:24px;"></div>
  </div>

  <!-- ===== 6. ìƒì—…ë°©ì†¡ ===== -->
  <div id="tabCommercial" class="tab-content">
    <div class="commercial-header">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:10px;">ğŸ“º TimeLink Commercial</h2>
          <p style="color:rgba(255,255,255,0.9);">ì‚¬ì—…ì ë“±ë¡ í¬ë¦¬ì—ì´í„° ì „ìš©</p>
          <p style="color:rgba(255,255,255,0.9); margin-top:10px;"><strong>ğŸ§ 1ì´ˆ ì¬ìƒ = ë‚´ ì§€ê°‘ 1TL ì†Œëª¨</strong></p>
        </div>
        <div style="background:rgba(255,255,255,0.2); padding:12px 28px; border-radius:40px;">ğŸ’° BUSINESS ONLY</div>
      </div>
    </div>
    <div id="commercialChannels" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:24px;"></div>
  </div>

  <!-- ===== 7. ì§€ê°‘ ì¶©ì „ ===== -->
  <div id="tabCharge" class="tab-content">
    <div class="card">
      <h2>ğŸ’° ë‚´ ì§€ê°‘ ì¶©ì „</h2>
      <p style="color:#666; margin-bottom:20px;">TL3 íŒŒì¼ì— ì¶©ì „í•  TLì„ ë‚´ ì§€ê°‘ì— ì¶”ê°€í•˜ì„¸ìš”!</p>
      <div class="charge-options">
        <div class="charge-card" onclick="watchAd()">
          <div class="icon">ğŸ“º</div>
          <h3>ê´‘ê³  ì‹œì²­</h3>
          <div class="amount">+10 TL</div>
          <p style="color:#666;">30ì´ˆ ê´‘ê³  ì‹œì²­</p>
        </div>
        <div class="charge-card" onclick="chargeTL(1000)">
          <div class="icon">ğŸ’³</div>
          <h3>ì†Œì•¡ ì¶©ì „</h3>
          <div class="amount">+1,000 TL</div>
          <p style="color:#666;">$1.00</p>
        </div>
        <div class="charge-card" onclick="chargeTL(5000)">
          <div class="icon">ğŸ</div>
          <h3>í”„ë¦¬ë¯¸ì—„ íŒ©</h3>
          <div class="amount">+5,000 TL</div>
          <p style="color:#666;">$4.00 (20% í• ì¸)</p>
        </div>
        <div class="charge-card" onclick="chargeTL(10000)">
          <div class="icon">ğŸ‘‘</div>
          <h3>VIP íŒ¨í‚¤ì§€</h3>
          <div class="amount">+10,000 TL</div>
          <p style="color:#666;">$7.50 (25% í• ì¸)</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 8. ì±„êµ´ ===== -->
  <div id="tabMining" class="tab-content">
    <div class="card">
      <h2>â›ï¸ TLC ì±„êµ´</h2>
      <div class="mining-limit-box">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div>
            <div style="font-weight:700; font-size:1.2rem; margin-bottom:10px;">âš ï¸ ì±„êµ´ í•œë„: ë³´ìœ  TLì˜ 50%</div>
            <div style="font-size:2rem; font-weight:800; color:#ff9800;" id="miningLimitAmount">7,500 / 15,000 TL</div>
          </div>
          <div>
            <div style="color:#666; margin-bottom:5px;">ë‚´ ê¸°ì—¬ì§€ìˆ˜</div>
            <div style="font-size:2rem; font-weight:800; color:#667eea;" id="miningIndexDisplay">4.75</div>
          </div>
        </div>
        <div class="mining-progress">
          <div class="mining-progress-fill" id="miningProgressFill" style="width:50%;"></div>
        </div>
      </div>
      <div id="miningPermissionCheck" style="background:#fff3cd; padding:20px; border-radius:15px; margin:30px 0;">
        <div style="display:flex; align-items:center; gap:15px;">
          <span style="font-size:2rem;">â›ï¸</span>
          <div>
            <span style="font-weight:700; color:#10b981;" id="miningPermissionMessage">âœ… ì±„êµ´ê¶Œ ìˆìŠµë‹ˆë‹¤! (5:5 ê³„ì•½ íŒŒì¼ ë³´ìœ ì¤‘)</span>
            <p style="color:#856404; font-size:14px; margin-top:5px;">* 5:5 ê³„ì•½ TL3 íŒŒì¼ì„ ë³´ìœ í•´ì•¼ ì±„êµ´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
          </div>
        </div>
      </div>
      <div style="margin-top:30px;">
        <div class="form-group" style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì±„êµ´í•  TL ì–‘ (ìµœëŒ€ <span id="maxMiningLabel">7,500</span> TL)</label>
          <input type="number" id="miningAmount" placeholder="500" min="1" value="500" style="width:100%; padding:18px; border:2px solid #e0e0e0; border-radius:12px; font-size:18px;">
        </div>
        <div style="background:#f8f9fa; padding:25px; border-radius:15px; margin:20px 0;">
          <h3 style="margin-bottom:15px;">ğŸ“Š ì±„êµ´ ì˜ˆìƒëŸ‰</h3>
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span style="color:#666;">íˆ¬ì… TL:</span>
            <strong id="previewInput" style="color:#333;">500 TL</strong>
          </div>
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span style="color:#666;">ê¸°ì—¬ì§€ìˆ˜:</span>
            <strong id="previewIndex" style="color:#333;">4.75x</strong>
          </div>
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span style="color:#666;">íšë“ TLC:</span>
            <strong id="previewOutput" style="color:#10b981;">237.50 TLC</strong>
          </div>
        </div>
        <button class="btn btn-primary" onclick="executeMining()" style="width:100%; padding:20px; font-size:1.2rem; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; border:none; border-radius:15px; font-weight:700; cursor:pointer;">â›ï¸ TLC ì±„êµ´ ì‹¤í–‰</button>
      </div>
    </div>
  </div>

  <!-- ===== 9. ì°¨ëŸ‰ ===== -->
  <div id="tabCar" class="tab-content">
    <div class="car-contribution-box">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <div>
          <h2 style="color:white; margin-bottom:15px;">ğŸš— ì°¨ëŸ‰ ì²­ì·¨</h2>
          <p style="color:rgba(255,255,255,0.9); font-size:1.2rem;">
            <strong style="font-size:2.5rem;">1ë¶„ = 10 TL</strong> ê¸°ì—¬ë„ (ì¼ë°˜ì˜ 2ë°°!)
          </p>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:24px; border-radius:20px; text-align:center;">
          <div style="font-size:14px; opacity:0.9; margin-bottom:8px;">ë‚´ ëˆ„ì  ìš´ì „ ì²­ì·¨</div>
          <div style="font-size:2.8rem; font-weight:800; color:white;" id="userTotalDrivingTime">120ë¶„</div>
        </div>
      </div>
      
      <div style="background:rgba(255,255,255,0.1); padding:32px; border-radius:20px; margin-bottom:32px;">
        <h3 style="color:white; margin-bottom:24px;">ğŸš˜ ì°¨ëŸ‰ ë“±ë¡</h3>
        <div style="display:flex; gap:16px; flex-wrap:wrap;">
          <input type="text" id="carModel" placeholder="ì°¨ëŸ‰ ëª¨ë¸ (ì˜ˆ: Tesla Model 3)" style="flex:2; min-width:200px; padding:16px; border-radius:12px; border:none;">
          <input type="text" id="carPlate" placeholder="ë²ˆí˜¸íŒ" style="flex:1; min-width:140px; padding:16px; border-radius:12px; border:none;">
          <button class="btn btn-primary" onclick="registerCar()" style="background:white; color:#3498db; width:auto; padding:16px 32px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— ë“±ë¡</button>
        </div>
        <div id="carList" style="margin-top:24px; color:rgba(255,255,255,0.8);"></div>
      </div>
      
      <div style="display:flex; gap:20px; flex-wrap:wrap;">
        <button class="btn btn-primary" onclick="addDrivingMinutes(10)" style="background:white; color:#3498db; flex:1; padding:18px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— +10ë¶„ (100 TL)</button>
        <button class="btn btn-primary" onclick="addDrivingMinutes(30)" style="background:white; color:#3498db; flex:1; padding:18px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— +30ë¶„ (300 TL)</button>
        <button class="btn btn-primary" onclick="addDrivingMinutes(60)" style="background:white; color:#3498db; flex:1; padding:18px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— +60ë¶„ (600 TL)</button>
      </div>
    </div>
  </div>

  <!-- ===== 10. ê¸ˆë¦¬ì €ë¸Œ ===== -->
  <div id="tabGold" class="tab-content">
    <div class="gold-reserve-card">
      <h2 style="color:white; font-size:2rem; margin-bottom:16px;">ğŸ† ê¸ˆ ë‹´ë³´ ë¦¬ì €ë¸Œ</h2>
      <p style="color:rgba(255,255,255,0.9); font-size:1.1rem;">í”Œë«í¼ ìˆ˜ìµì˜ 10%ë¥¼ ì‹¤ë¬¼ ê¸ˆìœ¼ë¡œ êµ¬ë§¤í•˜ì—¬ ì˜êµ¬ ë³´ê´€</p>
    </div>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="icon">ğŸ†</div>
        <div class="label">ì´ ê¸ˆ ë³´ìœ ëŸ‰</div>
        <div class="value">10.24 g</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸ’µ</div>
        <div class="label">ê¸ˆ ê°€ì¹˜ (USD)</div>
        <div class="value">$665</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸ“ˆ</div>
        <div class="label">ê¸ˆ ì‹œì„¸</div>
        <div class="value">$65/g</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸ”’</div>
        <div class="label">ë‹´ë³´ ë¹„ìœ¨</div>
        <div class="value">245%</div>
      </div>
    </div>
  </div>

  <!-- ===== 11. TON TLC ===== -->
  <div id="tabTon" class="tab-content">
    <div class="ton-card">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:32px;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:12px;">â¬¡ TON TLC Coin</h2>
          <p style="color:rgba(255,255,255,0.9);">TON ë¸”ë¡ì²´ì¸ ê¸°ë°˜ TLC ì½”ì¸</p>
        </div>
        <span style="background:rgba(255,255,255,0.2); padding:6px 18px; border-radius:100px; font-size:12px; font-weight:600;">TON Testnet</span>
      </div>
      <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px,1fr)); gap:28px;">
        <div style="background:rgba(255,255,255,0.1); padding:28px; border-radius:20px;">
          <div style="font-size:14px; opacity:0.9; margin-bottom:12px;">ë‚´ TLC ì”ì•¡</div>
          <div style="font-size:2.8rem; font-weight:800; color:white;" id="tonTLCBalance">1,250.75</div>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:28px; border-radius:20px;">
          <div style="font-size:14px; opacity:0.9; margin-bottom:12px;">TON ì§€ê°‘</div>
          <div style="font-size:1rem; font-family:monospace; background:rgba(0,0,0,0.3); padding:12px; border-radius:12px; color:rgba(255,255,255,0.8);" id="tonWalletAddress">ì—°ê²°ë˜ì§€ ì•ŠìŒ</div>
          <button class="btn btn-primary" onclick="connectWallet()" style="margin-top:24px; background:white; color:#0088CC; width:100%; padding:16px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸ”— TON ì§€ê°‘ ì—°ê²°</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== í”Œë ˆì´ì–´ ëª¨ë‹¬ ===== -->
<div id="playerModal" class="player-modal">
  <div class="player-content">
    <div class="player-title" id="playerTitle">Now Playing</div>
    <div class="player-artist" id="playerArtist">Artist</div>
    
    <div class="player-copyright" id="playerCopyright">
      <strong>ğŸ“‹ TL3 íŒŒì¼ ì •ë³´</strong><br>
      <span id="copyrightOwner">ì €ì‘ê¶Œì: </span><br>
      <span id="contractType">ê³„ì•½ ìœ í˜•: </span><br>
      <span id="miningRight">ì±„êµ´ê¶Œ: </span>
    </div>
    
    <div class="player-tl-info">
      <div style="color:#666; margin-bottom:10px;">â³ ì¶©ì „ëœ TL</div>
      <div class="player-tl-amount" id="playerTL">0 TL</div>
      <div style="color:#999; font-size:14px; margin-top:8px;" id="playerTimeRemaining">0ë¶„ 0ì´ˆ ë‚¨ìŒ</div>
    </div>
    
    <div class="player-progress">
      <div id="playerProgress" class="player-progress-fill"></div>
    </div>
    
    <div class="player-time">
      <span id="playerCurrentTime">0:00</span>
      <span id="playerTotalTime">0:00</span>
    </div>
    
    <div class="player-controls">
      <button class="btn btn-primary" onclick="togglePlayPause()" id="playPauseBtn" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; padding:14px 24px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">â¸ï¸ ì¼ì‹œì •ì§€</button>
      <button class="btn btn-secondary" onclick="closePlayer()" style="background:white; color:#667eea; border:2px solid #667eea; padding:14px 24px; border-radius:12px; font-weight:700; cursor:pointer;">â¹ï¸ ì¢…ë£Œ</button>
      <button class="btn btn-warning" onclick="openChargeModalFromPlayer()" style="background:linear-gradient(135deg, #fa709a 0%, #fee140 100%); color:white; padding:14px 24px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸ’° ì¶©ì „</button>
    </div>
  </div>
</div>

<!-- ===== ì¶©ì „ ëª¨ë‹¬ ===== -->
<div id="chargeModal" class="charge-modal">
  <div class="charge-content">
    <h2>ğŸ’° TL3 íŒŒì¼ ì¶©ì „</h2>
    <div class="form-group" style="margin-bottom:20px;">
      <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì¶©ì „í•  TL ì–‘ (1ì´ˆ = 1TL)</label>
      <input type="number" id="chargeAmount" placeholder="1000" min="100" step="100" value="1000">
      <p style="color:#666; font-size:14px; margin-top:12px;">
        í˜„ì¬ ë‚´ ì§€ê°‘: <strong id="currentTLBalance">15,000</strong> TL
      </p>
    </div>
    <div style="display:flex; gap:16px;">
      <button class="btn btn-primary" onclick="chargeFile()" style="flex:1; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; padding:16px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">âš¡ ì¶©ì „í•˜ê¸°</button>
      <button class="btn btn-secondary" onclick="closeChargeModal()" style="flex:1; background:white; color:#667eea; border:2px solid #667eea; padding:16px; border-radius:12px; font-weight:700; cursor:pointer;">ì·¨ì†Œ</button>
    </div>
  </div>
</div>

<!-- ===== ê´‘ê³  ëª¨ë‹¬ ===== -->
<div id="adModal" class="player-modal" style="display:none;">
  <div class="player-content" style="max-width:500px;">
    <h2 style="margin-bottom:30px; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">ğŸ“º ê´‘ê³  ì‹œì²­ ì¤‘</h2>
    <div style="width:100%; height:240px; background:linear-gradient(145deg, #2a1a3a, #1e1e1e); border-radius:20px; display:flex; align-items:center; justify-content:center; font-size:4rem; color:rgba(255,255,255,0.3); margin-bottom:24px;">ğŸ¬</div>
    <div style="font-size:2rem; font-weight:800; color:#333; margin-bottom:16px; text-align:center;" id="adTimer">30ì´ˆ</div>
    <p style="color:#666; text-align:center; margin-bottom:28px;">ê´‘ê³  ì¢…ë£Œ ì‹œ <strong style="color:#667eea;">10 TL</strong> ë‚´ ì§€ê°‘ì— ì§€ê¸‰</p>
    <button class="btn btn-secondary" onclick="closeAdModal()" style="width:100%; background:white; color:#667eea; border:2px solid #667eea; padding:16px; border-radius:12px; font-weight:700; cursor:pointer;">ì·¨ì†Œ</button>
  </div>
</div>

<script>
// ============================================================================
// TimeLink v20.1 - TL3 ê³µìœ  ì¦‰ì‹œ í‘œì‹œ! (ë“œë””ì–´ ì™„ì„±!)
// ============================================================================

// ----- ì „ì—­ ë³€ìˆ˜ -----
let tl3Files = [];
let sharedFiles = [];
let currentUser = null;
let adInterval = null;
let currentFilter = 'all';
let radioInterval = null;
let commercialInterval = null;
let playInterval = null;
let currentPlayTime = 0;
let currentPlayTotal = 0;
let currentPlayingFile = null;
let currentPlayingFileId = null;
let audioPlayer = null;

// ==================== ğŸ”¥ ë°ëª¨ Google ë¡œê·¸ì¸ ====================
function demoGoogleLogin() {
  console.log('ğŸ”¥ ë°ëª¨ Google ë¡œê·¸ì¸ ì‹¤í–‰');
  
  currentUser = {
    id: 'user_' + Date.now(),
    username: 'Google íˆ¬ìì',
    email: 'investor@gmail.com',
    isBusiness: true,
    tlBalance: 15000,
    tlcBalance: 1250.75,
    totalChargedTL: 15000,
    listenMinutes: 450,
    drivingMinutes: 120,
    contributionIndex: 4.75,
    cars: []
  };

  document.getElementById('authContainer').style.display = 'none';
  document.getElementById('appContainer').style.display = 'block';
  
  // UI ì—…ë°ì´íŠ¸
  document.getElementById('currentUsername').textContent = currentUser.username;
  document.getElementById('userAvatar').textContent = 'G';
  document.getElementById('userStatus').innerHTML = 'ğŸ¢ ì‚¬ì—…ì (ë°ëª¨)';
  document.getElementById('userStatus').style.color = '#f5576c';
  document.getElementById('currentTLBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('tlBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('dashTL').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('tlcBalance').textContent = currentUser.tlcBalance.toFixed(2);
  document.getElementById('dashTLC').textContent = currentUser.tlcBalance.toFixed(2);
  document.getElementById('contributionIndex').textContent = currentUser.contributionIndex.toFixed(2);
  document.getElementById('dashIndex').textContent = currentUser.contributionIndex.toFixed(2);
  
  const maxMining = Math.floor(currentUser.tlBalance * 0.5);
  document.getElementById('dashMiningLimit').textContent = maxMining + ' TL';
  document.getElementById('miningLimitAmount').textContent = maxMining + ' / ' + currentUser.tlBalance + ' TL';
  document.getElementById('maxMiningLabel').textContent = maxMining;
  document.getElementById('miningIndexDisplay').textContent = currentUser.contributionIndex.toFixed(2);
  document.getElementById('tonTLCBalance').textContent = currentUser.tlcBalance.toFixed(2);
  document.getElementById('userTotalDrivingTime').textContent = (currentUser.drivingMinutes || 0) + 'ë¶„';
  
  showToast('âœ… Google ë¡œê·¸ì¸ ì„±ê³µ!', 'success');
  
  // ë°ëª¨ ë°ì´í„° ì´ˆê¸°í™”
  initializeDemoData();
  loadLibrary();
  loadSharedMusic();
  initRadioChannels();
  initCommercialChannels();
}

// ==================== ë°ëª¨ ë¡œê·¸ì•„ì›ƒ ====================
function demoLogout() {
  if (playInterval) clearInterval(playInterval);
  if (audioPlayer) { audioPlayer.pause(); audioPlayer.src = ''; }
  if (radioInterval) clearInterval(radioInterval);
  if (commercialInterval) clearInterval(commercialInterval);
  
  currentUser = null;
  tl3Files = [];
  sharedFiles = [];
  
  document.getElementById('authContainer').style.display = 'flex';
  document.getElementById('appContainer').style.display = 'none';
  showToast('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
}

// ==================== ë°ëª¨ ë°ì´í„° ì´ˆê¸°í™” ====================
function initializeDemoData() {
  if (tl3Files.length === 0) {
    const dummyAudioData = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAA8AAAGQAApCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJD/+5REAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
    
    tl3Files.push({
      id: 'tl3_1',
      title: 'Dynamite - BTS',
      artist: 'BTS',
      genre: 'pop',
      fileData: dummyAudioData,
      revenueShare: '55',
      miningAllowed: true,
      remainingTL: 5000,
      totalTL: 5000,
      creatorId: currentUser.id,
      creatorName: currentUser.username,
      copyrightOwner: currentUser.username,
      contractType: '5:5 ê³„ì•½',
      isShared: false,
      sharedId: null
    });
    
    tl3Files.push({
      id: 'tl3_2',
      title: 'Butter - BTS',
      artist: 'BTS',
      genre: 'pop',
      fileData: dummyAudioData,
      revenueShare: '55',
      miningAllowed: true,
      remainingTL: 0,
      totalTL: 0,
      creatorId: currentUser.id,
      creatorName: currentUser.username,
      copyrightOwner: currentUser.username,
      contractType: '5:5 ê³„ì•½',
      isShared: false,
      sharedId: null
    });
  }
}

// ==================== í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ====================
function showToast(message, type = 'success') {
  const toast = document.getElementById('toast');
  toast.textContent = message;
  toast.className = 'toast ' + type;
  toast.style.display = 'block';
  
  setTimeout(() => {
    toast.style.display = 'none';
  }, 3000);
}

// ==================== íƒ­ ì „í™˜ ====================
function switchTab(tabName) {
  const tabs = document.querySelectorAll('.tab');
  const contents = document.querySelectorAll('.tab-content');
  
  tabs.forEach(tab => tab.classList.remove('active'));
  contents.forEach(content => content.classList.remove('active'));
  
  event.target.classList.add('active');
  document.getElementById('tab' + tabName.charAt(0).toUpperCase() + tabName.slice(1)).classList.add('active');
  
  if (tabName === 'library') loadLibrary();
  if (tabName === 'shareplace') loadSharedMusic();
  if (tabName === 'radio') initRadioChannels();
  if (tabName === 'commercial') initCommercialChannels();
}

// ==================== TL ì¶©ì „ (ë‚´ ì§€ê°‘) ====================
function chargeTL(amount) {
  if (!currentUser) return;
  
  currentUser.tlBalance += amount;
  currentUser.totalChargedTL += amount;
  
  document.getElementById('tlBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('dashTL').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('currentTLBalance').textContent = currentUser.tlBalance.toLocaleString();
  
  showToast(`âœ… ${amount.toLocaleString()} TL ì¶©ì „ ì™„ë£Œ!`, 'success');
}

// ==================== íŒŒì¼ ì—…ë¡œë“œ ====================
let selectedFile = null;
let selectedFileData = null;

document.getElementById('fileInput')?.addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;
  
  selectedFile = file;
  
  const reader = new FileReader();
  reader.onload = function(e) {
    selectedFileData = e.target.result;
    document.getElementById('uploadForm').style.display = 'block';
    document.getElementById('songTitle').value = file.name.replace(/\.[^/.]+$/, "");
    document.getElementById('songArtist').value = currentUser?.username || 'ì•„í‹°ìŠ¤íŠ¸';
    document.getElementById('copyrightOwner').value = currentUser?.username || '';
  };
  reader.readAsDataURL(file);
});

function uploadFile() {
  if (!selectedFile || !selectedFileData) {
    showToast('íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”', 'error');
    return;
  }
  
  if (!currentUser) return;
  
  const title = document.getElementById('songTitle').value;
  const artist = document.getElementById('songArtist').value || currentUser.username;
  const genre = document.getElementById('songGenre').value;
  const revenueShare = document.getElementById('revenueShare').value;
  const copyrightOwner = document.getElementById('copyrightOwner').value || currentUser.username;
  
  if (!title) {
    showToast('ê³¡ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
    return;
  }
  
  const newTL3File = {
    id: 'tl3_' + Date.now(),
    title: title,
    artist: artist,
    genre: genre,
    fileData: selectedFileData,
    revenueShare: revenueShare,
    miningAllowed: revenueShare === '55',
    remainingTL: 0,
    totalTL: 0,
    creatorId: currentUser.id,
    creatorName: currentUser.username,
    copyrightOwner: copyrightOwner,
    contractType: revenueShare === '55' ? '5:5 ê³„ì•½' : '7:3 ê³„ì•½',
    isShared: false,
    sharedId: null
  };
  
  tl3Files.push(newTL3File);
  
  showToast('âœ… TL3 íŒŒì¼ ìƒì„± ì™„ë£Œ! (TL ì¶©ì „ í•„ìš”)', 'success');
  
  document.getElementById('uploadForm').style.display = 'none';
  selectedFile = null;
  selectedFileData = null;
  
  loadLibrary();
}

// ==================== ğŸ”¥ ë‚´ TL3 íŒŒì¼ ë¡œë“œ ====================
function loadLibrary() {
  const container = document.getElementById('fileList');
  const emptyMsg = document.getElementById('emptyLibrary');
  
  if (!container || !currentUser) return;
  
  const myFiles = tl3Files.filter(f => f.creatorId === currentUser.id);
  
  if (myFiles.length === 0) {
    container.innerHTML = '';
    emptyMsg.style.display = 'block';
    return;
  }
  
  emptyMsg.style.display = 'none';
  
  container.innerHTML = myFiles.map(file => {
    const percent = file.totalTL > 0 ? (file.remainingTL / file.totalTL) * 100 : 0;
    const playableMinutes = Math.floor(file.remainingTL / 60);
    const playableSeconds = file.remainingTL % 60;
    const hasTL = file.remainingTL > 0;
    
    return `
      <div class="file-card">
        <div class="file-thumbnail">
          ğŸµ
          ${file.isShared ? `<span class="badge badge-shared" style="top:16px; left:16px;">âœ… ê³µìœ ë¨</span>` : ''}
          ${!hasTL ? 
            `<span class="badge badge-no-tl" style="top:16px; right:16px;">âš ï¸ ì¶©ì „ í•„ìš”</span>` : 
            `<span class="badge badge-mining" style="top:16px; right:16px;">${file.revenueShare === '55' ? '5:5' : '7:3'}</span>`
          }
        </div>
        <div class="file-info">
          <div class="file-name">${file.title}</div>
          <div class="file-artist">${file.artist}</div>
          
          <div class="copyright-info">
            <strong>ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</strong><br>
            ì €ì‘ê¶Œì: ${file.copyrightOwner}<br>
            ê³„ì•½: ${file.contractType}<br>
            ì±„êµ´ê¶Œ: ${file.miningAllowed ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}
          </div>
          
          <div class="file-stats">
            <span>â±ï¸ ì¶©ì „ëœ TL</span>
            <span style="font-weight: 700; color: ${hasTL ? (file.remainingTL < 60 ? '#ff9800' : '#667eea') : '#f43f5e'};">${file.remainingTL} TL</span>
          </div>
          <div class="file-stats">
            <span>ğŸ§ ì¬ìƒ ê°€ëŠ¥ ì‹œê°„</span>
            <span>${hasTL ? `${playableMinutes}ë¶„ ${playableSeconds}ì´ˆ` : '0ë¶„ 0ì´ˆ (ì¶©ì „ í•„ìš”)'}</span>
          </div>
          
          <div class="tl-progress">
            ${hasTL ? 
              `<div class="tl-progress-fill" style="width: ${percent}%;"></div>` : 
              `<div class="tl-progress-empty"></div>`
            }
          </div>
          
          <div class="file-actions">
            ${hasTL ? 
              `<button class="btn-play" onclick="playMyMusic('${file.id}')">â–¶ï¸ ì¬ìƒ (1ì´ˆ = 1TL)</button>` : 
              `<button class="btn-play-disabled" disabled>âŒ ì¶©ì „ í•„ìš”</button>`
            }
            <button class="btn-charge" onclick="openChargeModal('${file.id}')">âš¡ TL ì¶©ì „</button>
            ${file.isShared ? 
              `<button class="btn-share" style="background:#999; grid-column:span 2;" disabled>âœ… ì´ë¯¸ ê³µìœ ë¨</button>` :
              `<button class="btn-share" onclick="shareToPlace('${file.id}')">ğŸ”„ ê³µìœ  (5,000TL)</button>`
            }
          </div>
        </div>
      </div>
    `;
  }).join('');
}

// ==================== ğŸ”¥ğŸ”¥ğŸ”¥ ê³µìœ  í”Œë ˆì´ìŠ¤ì— ê³µìœ  (ì¦‰ì‹œ í‘œì‹œ!) ====================
function shareToPlace(fileId) {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  const file = tl3Files.find(f => f.id === fileId);
  if (!file) {
    showToast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
    return;
  }
  
  if (file.isShared) {
    showToast('ì´ë¯¸ ê³µìœ ëœ TL3 íŒŒì¼ì…ë‹ˆë‹¤', 'warning');
    return;
  }
  
  if (currentUser.tlBalance < 5000) {
    showToast(`âŒ ë‚´ ì§€ê°‘ì— TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤! (ë³´ìœ : ${currentUser.tlBalance} TL)`, 'error');
    return;
  }
  
  // âœ… ë‚´ ì§€ê°‘ì—ì„œ 5,000 TL ì°¨ê°
  currentUser.tlBalance -= 5000;
  document.getElementById('tlBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('dashTL').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('currentTLBalance').textContent = currentUser.tlBalance.toLocaleString();
  
  // âœ… íŒŒì¼ì„ ê³µìœ  ìƒíƒœë¡œ ë³€ê²½
  file.isShared = true;
  
  // âœ… ê³µìœ  íŒŒì¼ ìƒì„± (ì—¬ê¸°ê°€ í•µì‹¬!!!)
  const sharedFile = {
    id: 'shared_' + Date.now(),
    originalId: file.id,
    title: file.title,
    artist: file.artist,
    genre: file.genre,
    creatorId: file.creatorId,
    creatorName: file.creatorName,
    copyrightOwner: file.copyrightOwner,
    revenueShare: file.revenueShare,
    miningAllowed: file.miningAllowed,
    contractType: file.contractType,
    remainingTL: file.remainingTL,
    sharedAt: new Date().toISOString(),
    playCount: 0
  };
  
  // âœ… ê³µìœ  íŒŒì¼ ë°°ì—´ì— ì¶”ê°€
  sharedFiles.push(sharedFile);
  
  // âœ… ê³µìœ  í”Œë ˆì´ìŠ¤ ì¦‰ì‹œ ì—…ë°ì´íŠ¸!
  loadSharedMusic();
  
  // âœ… ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—…ë°ì´íŠ¸ (ê³µìœ ë¨ í‘œì‹œ)
  loadLibrary();
  
  showToast(`ğŸ”„ "${file.title}" ê³µìœ  ì™„ë£Œ! (5,000 TL ì°¨ê°)`, 'success');
  
  // âœ… ê³µìœ  í”Œë ˆì´ìŠ¤ íƒ­ìœ¼ë¡œ ì´ë™
  switchTab('shareplace');
}

// ==================== ğŸ”¥ ê³µìœ  í”Œë ˆì´ìŠ¤ ìŒì•… ë¡œë“œ (ë‚´ê°€ ê³µìœ í•œ íŒŒì¼ ì¦‰ì‹œ í‘œì‹œ!) ====================
function loadSharedMusic() {
  const container = document.getElementById('sharedMusicList');
  const emptyMsg = document.getElementById('emptyShared');
  const totalCount = document.getElementById('totalSharedCount');
  const count73 = document.getElementById('shared73Count');
  const count55 = document.getElementById('shared55Count');
  const sharedCount = document.getElementById('sharedCount');
  
  if (!container || !currentUser) return;
  
  // ğŸ”¥ğŸ”¥ğŸ”¥ ë‹¤ë¥¸ ì‚¬ëŒì´ ê³µìœ í•œ íŒŒì¼ + ë‚´ê°€ ê³µìœ í•œ íŒŒì¼ ëª¨ë‘ í‘œì‹œ!
  // (ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë‹¤ë¥¸ ì‚¬ëŒ íŒŒì¼ë§Œ ë³´ì—¬ì•¼ í•˜ì§€ë§Œ, ë°ëª¨ì—ì„œëŠ” ë‚´ íŒŒì¼ë„ ë³´ì´ê²Œ í•¨)
  const allSharedFiles = sharedFiles;
  
  if (totalCount) totalCount.textContent = allSharedFiles.length;
  if (count73) count73.textContent = allSharedFiles.filter(f => f.revenueShare === '73').length;
  if (count55) count55.textContent = allSharedFiles.filter(f => f.revenueShare === '55').length;
  if (sharedCount) sharedCount.textContent = allSharedFiles.length;
  
  if (allSharedFiles.length === 0) {
    container.innerHTML = '';
    emptyMsg.style.display = 'block';
    return;
  }
  
  emptyMsg.style.display = 'none';
  
  let filteredFiles = allSharedFiles;
  if (currentFilter === '73') {
    filteredFiles = allSharedFiles.filter(f => f.revenueShare === '73');
  } else if (currentFilter === '55') {
    filteredFiles = allSharedFiles.filter(f => f.revenueShare === '55');
  } else if (currentFilter === 'mining') {
    filteredFiles = allSharedFiles.filter(f => f.miningAllowed === true);
  }
  
  // ìµœì‹ ìˆœ ì •ë ¬
  filteredFiles.sort((a, b) => new Date(b.sharedAt) - new Date(a.sharedAt));
  
  container.innerHTML = filteredFiles.map(file => {
    const isMine = file.creatorId === currentUser.id;
    
    return `
      <div class="file-card">
        <div class="file-thumbnail">
          ğŸµ
          ${isMine ? `<span class="badge badge-shared" style="top:16px; left:16px;">ğŸ“¤ ë‚´ê°€ ê³µìœ </span>` : ''}
        </div>
        <div class="file-info">
          <div class="file-name">${file.title}</div>
          <div class="file-artist">${file.artist}</div>
          
          <div class="copyright-info">
            <strong>ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</strong><br>
            ì €ì‘ê¶Œì: ${file.copyrightOwner}<br>
            ê³„ì•½: ${file.contractType}<br>
            ì±„êµ´ê¶Œ: ${file.miningAllowed ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}
          </div>
          
          <div class="file-stats">
            <span>â±ï¸ ì¶©ì „ëœ TL</span>
            <span style="font-weight: 700; color: ${file.remainingTL > 0 ? '#667eea' : '#f43f5e'};">${file.remainingTL || 0} TL</span>
          </div>
          <div style="color: #666; font-size: 13px; margin-bottom: 15px;">
            ğŸ‘¤ ê³µìœ : ${file.creatorName} Â· ${new Date(file.sharedAt).toLocaleDateString()}
            ${isMine ? ' Â· â­ ë‚´ íŒŒì¼' : ''}
          </div>
          
          ${file.remainingTL > 0 ? 
            `<button class="btn-play" onclick="playSharedMusic('${file.id}')" style="width: 100%;">ğŸ§ ì¬ìƒ (1ì´ˆ = 1TL)</button>` :
            `<button class="btn-play-disabled" disabled style="width: 100%;">âŒ ì¶©ì „ í•„ìš”</button>`
          }
        </div>
      </div>
    `;
  }).join('');
}

// ==================== ê³µìœ  ìŒì•… ì¬ìƒ ====================
function playSharedMusic(sharedId) {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  const sharedFile = sharedFiles.find(f => f.id === sharedId);
  if (!sharedFile) {
    showToast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
    return;
  }
  
  const originalFile = tl3Files.find(f => f.id === sharedFile.originalId);
  if (!originalFile) {
    showToast('ì›ë³¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
    return;
  }
  
  playMyMusic(originalFile.id);
}

// ==================== ê³µìœ  í”Œë ˆì´ìŠ¤ í•„í„° ====================
function filterSharePlace(filter) {
  currentFilter = filter;
  
  const btns = document.querySelectorAll('.filter-btn');
  btns.forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
  
  loadSharedMusic();
}

// ==================== ì¶©ì „ ëª¨ë‹¬ ====================
function openChargeModal(fileId) {
  currentPlayingFileId = fileId;
  document.getElementById('currentTLBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('chargeModal').style.display = 'flex';
}

function openChargeModalFromPlayer() {
  if (currentPlayingFile) {
    openChargeModal(currentPlayingFile.id);
  }
}

function closeChargeModal() {
  document.getElementById('chargeModal').style.display = 'none';
  document.getElementById('chargeAmount').value = '1000';
  currentPlayingFileId = null;
}

// ==================== TL3 íŒŒì¼ ì¶©ì „ ====================
function chargeFile() {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  const amount = parseInt(document.getElementById('chargeAmount').value);
  if (!amount || amount <= 0) {
    showToast('ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
    return;
  }
  
  if (!currentPlayingFileId) {
    showToast('íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”', 'error');
    return;
  }
  
  const file = tl3Files.find(f => f.id === currentPlayingFileId);
  if (!file) {
    showToast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
    return;
  }
  
  if (currentUser.tlBalance < amount) {
    showToast(`ë‚´ ì§€ê°‘ì— TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤! (ë³´ìœ : ${currentUser.tlBalance} TL)`, 'error');
    return;
  }
  
  currentUser.tlBalance -= amount;
  file.remainingTL += amount;
  file.totalTL += amount;
  
  // ê³µìœ ëœ íŒŒì¼ì´ ìˆìœ¼ë©´ remainingTLë„ ì—…ë°ì´íŠ¸
  if (file.isShared && file.sharedId) {
    const sharedFile = sharedFiles.find(f => f.id === file.sharedId);
    if (sharedFile) {
      sharedFile.remainingTL = file.remainingTL;
    }
  }
  
  document.getElementById('tlBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('dashTL').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('currentTLBalance').textContent = currentUser.tlBalance.toLocaleString();
  
  closeChargeModal();
  loadLibrary();
  loadSharedMusic(); // ê³µìœ  í”Œë ˆì´ìŠ¤ë„ ì—…ë°ì´íŠ¸!
  
  const minutes = Math.floor(amount / 60);
  const seconds = amount % 60;
  showToast(`âœ… ${amount} TL ì¶©ì „ ì™„ë£Œ! (${minutes}ë¶„ ${seconds}ì´ˆ ì¬ìƒ ê°€ëŠ¥)`, 'success');
}

// ==================== ë‚´ ìŒì•… ì¬ìƒ ====================
function playMyMusic(fileId) {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  const file = tl3Files.find(f => f.id === fileId);
  if (!file) {
    showToast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
    return;
  }
  
  if (file.remainingTL < 1) {
    showToast('âš ï¸ TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤! ì¶©ì „í•´ì£¼ì„¸ìš”.', 'warning');
    return;
  }
  
  if (playInterval) clearInterval(playInterval);
  if (audioPlayer) {
    audioPlayer.pause();
    audioPlayer.src = '';
  }
  
  currentPlayingFile = file;
  currentPlayTime = 0;
  currentPlayTotal = file.remainingTL;
  
  audioPlayer = document.getElementById('audioPlayer');
  audioPlayer.src = file.fileData;
  audioPlayer.load();
  audioPlayer.play().catch(e => console.log('ìë™ ì¬ìƒ ì°¨ë‹¨ë¨:', e));
  
  document.getElementById('playerTitle').textContent = file.title;
  document.getElementById('playerArtist').textContent = file.artist;
  document.getElementById('copyrightOwner').innerHTML = `<strong>ì €ì‘ê¶Œì:</strong> ${file.copyrightOwner}`;
  document.getElementById('contractType').innerHTML = `<strong>ê³„ì•½ ìœ í˜•:</strong> ${file.contractType}`;
  document.getElementById('miningRight').innerHTML = `<strong>ì±„êµ´ê¶Œ:</strong> ${file.miningAllowed ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`;
  document.getElementById('playerTL').textContent = file.remainingTL + ' TL';
  document.getElementById('playerTimeRemaining').textContent = `ì•½ ${Math.floor(file.remainingTL / 60)}ë¶„ ${file.remainingTL % 60}ì´ˆ ë‚¨ìŒ`;
  document.getElementById('playerCurrentTime').textContent = '0:00';
  document.getElementById('playerTotalTime').textContent = formatTime(file.remainingTL);
  document.getElementById('playerProgress').style.width = '0%';
  document.getElementById('playPauseBtn').innerHTML = 'â¸ï¸ ì¼ì‹œì •ì§€';
  document.getElementById('playerModal').style.display = 'flex';
  
  playInterval = setInterval(() => {
    if (!currentPlayingFile || !audioPlayer) {
      clearInterval(playInterval);
      return;
    }
    
    currentPlayingFile.remainingTL -= 1;
    currentPlayTime++;
    
    document.getElementById('playerTL').textContent = currentPlayingFile.remainingTL + ' TL';
    document.getElementById('playerTimeRemaining').textContent = `ì•½ ${Math.floor(currentPlayingFile.remainingTL / 60)}ë¶„ ${currentPlayingFile.remainingTL % 60}ì´ˆ ë‚¨ìŒ`;
    document.getElementById('playerCurrentTime').textContent = formatTime(currentPlayTime);
    
    const progressPercent = (currentPlayTime / currentPlayTotal) * 100;
    document.getElementById('playerProgress').style.width = Math.min(progressPercent, 100) + '%';
    
    if (currentPlayingFile.remainingTL <= 0 || currentPlayTime >= currentPlayTotal) {
      closePlayer();
      showToast(`ğŸµ ì¬ìƒ ì™„ë£Œ! (${currentPlayTime}ì´ˆ ì†Œëª¨)`, 'success');
    }
  }, 1000);
  
  audioPlayer.onended = function() {
    closePlayer();
  };
}

// ==================== ì¬ìƒ/ì¼ì‹œì •ì§€ í† ê¸€ ====================
function togglePlayPause() {
  if (!audioPlayer) return;
  
  if (audioPlayer.paused) {
    audioPlayer.play();
    document.getElementById('playPauseBtn').innerHTML = 'â¸ï¸ ì¼ì‹œì •ì§€';
  } else {
    audioPlayer.pause();
    document.getElementById('playPauseBtn').innerHTML = 'â–¶ï¸ ì¬ìƒ';
  }
}

// ==================== í”Œë ˆì´ì–´ ë‹«ê¸° ====================
function closePlayer() {
  if (playInterval) {
    clearInterval(playInterval);
    playInterval = null;
  }
  if (audioPlayer) {
    audioPlayer.pause();
    audioPlayer.src = '';
  }
  currentPlayingFile = null;
  currentPlayTime = 0;
  currentPlayingFileId = null;
  document.getElementById('playerModal').style.display = 'none';
  
  loadLibrary();
  loadSharedMusic();
}

// ==================== ì‹œê°„ í¬ë§· ====================
function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins}:${secs.toString().padStart(2, '0')}`;
}

// ==================== ê´‘ê³  ì‹œì²­ ====================
function watchAd() {
  if (!currentUser) return;
  
  document.getElementById('adModal').style.display = 'flex';
  let seconds = 30;
  document.getElementById('adTimer').textContent = seconds + 'ì´ˆ';
  
  adInterval = setInterval(() => {
    seconds--;
    document.getElementById('adTimer').textContent = seconds + 'ì´ˆ';
    
    if (seconds <= 0) {
      clearInterval(adInterval);
      
      currentUser.tlBalance += 10;
      currentUser.totalChargedTL += 10;
      
      document.getElementById('adModal').style.display = 'none';
      document.getElementById('tlBalance').textContent = currentUser.tlBalance.toLocaleString();
      document.getElementById('dashTL').textContent = currentUser.tlBalance.toLocaleString();
      document.getElementById('currentTLBalance').textContent = currentUser.tlBalance.toLocaleString();
      
      showToast('âœ… 10 TL ì§€ê¸‰ ì™„ë£Œ!', 'success');
    }
  }, 1000);
}

function closeAdModal() {
  if (adInterval) clearInterval(adInterval);
  document.getElementById('adModal').style.display = 'none';
}

// ==================== ì±„êµ´ ====================
function executeMining() {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  const amount = parseInt(document.getElementById('miningAmount').value) || 0;
  
  if (!amount || amount <= 0) {
    showToast('ì±„êµ´í•  TL ì–‘ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
    return;
  }
  
  if (amount > currentUser.tlBalance) {
    showToast('ë‚´ ì§€ê°‘ì— TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  const maxMining = Math.floor(currentUser.tlBalance * 0.5);
  if (amount > maxMining) {
    showToast(`ì±„êµ´ í•œë„ëŠ” ë³´ìœ  TLì˜ 50% (${maxMining} TL)ì…ë‹ˆë‹¤`, 'error');
    return;
  }
  
  const tlcAmount = amount * 0.1 * currentUser.contributionIndex;
  
  currentUser.tlBalance -= amount;
  currentUser.tlcBalance += tlcAmount;
  
  document.getElementById('tlBalance').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('tlcBalance').textContent = currentUser.tlcBalance.toFixed(2);
  document.getElementById('dashTL').textContent = currentUser.tlBalance.toLocaleString();
  document.getElementById('dashTLC').textContent = currentUser.tlcBalance.toFixed(2);
  document.getElementById('tonTLCBalance').textContent = currentUser.tlcBalance.toFixed(2);
  
  showToast(`âœ… ì±„êµ´ ì„±ê³µ! ${tlcAmount.toFixed(2)} TLC íšë“!`, 'success');
}

// ==================== ì°¨ëŸ‰ ====================
function registerCar() {
  if (!currentUser) return;
  
  const model = document.getElementById('carModel').value;
  const plate = document.getElementById('carPlate').value;
  
  if (!model) {
    showToast('ì°¨ëŸ‰ ëª¨ë¸ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
    return;
  }
  
  if (!currentUser.cars) currentUser.cars = [];
  
  currentUser.cars.push({
    model: model,
    plate: plate || 'ë¯¸ë“±ë¡'
  });
  
  showToast('ğŸš— ì°¨ëŸ‰ ë“±ë¡ ì™„ë£Œ!', 'success');
  
  const carList = document.getElementById('carList');
  if (carList) {
    carList.innerHTML = currentUser.cars.map(car => 
      `<p style="color: white; margin: 5px 0;">ğŸš˜ ${car.model} (${car.plate})</p>`
    ).join('');
  }
}

function addDrivingMinutes(minutes) {
  if (!currentUser) return;
  
  if (!currentUser.cars || currentUser.cars.length === 0) {
    showToast('ì°¨ëŸ‰ì„ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš”', 'warning');
    return;
  }
  
  currentUser.drivingMinutes = (currentUser.drivingMinutes || 0) + minutes;
  document.getElementById('userTotalDrivingTime').textContent = currentUser.drivingMinutes + 'ë¶„';
  
  showToast(`ğŸš— ìš´ì „ ì²­ì·¨ ${minutes}ë¶„ ì™„ë£Œ! (+${minutes * 10} TL ê¸°ì—¬ë„)`, 'success');
}

// ==================== TON ====================
function connectWallet() {
  showToast('TON ì§€ê°‘ ì—°ê²° ê¸°ëŠ¥ì€ í…ŒìŠ¤íŠ¸ë„·ì—ì„œ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤', 'info');
  document.getElementById('tonWalletAddress').innerHTML = 'EQD...x5Lp7vK (í…ŒìŠ¤íŠ¸ ì§€ê°‘)';
}

// ==================== ë¼ë””ì˜¤ ====================
function initRadioChannels() {
  const container = document.getElementById('radioChannels');
  if (!container) return;
  
  const channels = [
    { name: 'TimeLink Pop', genre: 'pop', freq: '107.7', listeners: 1234 },
    { name: 'TimeLink Rock', genre: 'rock', freq: '107.9', listeners: 892 },
    { name: 'TimeLink Hip-Hop', genre: 'hiphop', freq: '108.1', listeners: 1567 },
    { name: 'TimeLink Jazz', genre: 'jazz', freq: '108.3', listeners: 645 }
  ];
  
  container.innerHTML = channels.map(ch => `
    <div class="radio-channel-card">
      <div class="channel-header">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <h3 style="color:white;">${ch.name}</h3>
          <span style="background:rgba(255,255,255,0.2); padding:5px 15px; border-radius:30px;">ğŸ‘¥ ${ch.listeners}</span>
        </div>
        <div style="display:flex; justify-content:space-between; margin-top:10px;">
          <span>FM ${ch.freq}</span>
          <span>ğŸ”´ LIVE</span>
        </div>
      </div>
      <div class="channel-playlist">
        <div class="now-playing" style="padding:15px; background:#f0f9ff; border-left:4px solid #1db954; margin-bottom:15px; border-radius:12px;">
          <div style="display:flex; justify-content:space-between;">
            <div>
              <div style="font-weight:700;" id="radio-${ch.genre}-title">Dynamite - BTS</div>
              <div style="color:#666;" id="radio-${ch.genre}-artist">BTS</div>
            </div>
            <span style="color:#1db954;">ğŸµ</span>
          </div>
        </div>
        <button class="btn-play" onclick="playRadio('${ch.genre}')" style="width:100%;">ğŸ§ ì¬ìƒ (1ì´ˆ = 1TL)</button>
      </div>
    </div>
  `).join('');
  
  startRadioStreaming();
}

function startRadioStreaming() {
  if (radioInterval) clearInterval(radioInterval);
  
  radioInterval = setInterval(() => {
    const songs = [
      { title: 'Dynamite - BTS', artist: 'BTS' },
      { title: 'Butter - BTS', artist: 'BTS' },
      { title: 'Blinding Lights - The Weeknd', artist: 'The Weeknd' }
    ];
    
    const genres = ['pop', 'rock', 'hiphop', 'jazz'];
    
    genres.forEach(genre => {
      const randomSong = songs[Math.floor(Math.random() * songs.length)];
      const titleEl = document.getElementById(`radio-${genre}-title`);
      const artistEl = document.getElementById(`radio-${genre}-artist`);
      
      if (titleEl) titleEl.textContent = randomSong.title;
      if (artistEl) artistEl.textContent = randomSong.artist;
    });
  }, 10000);
}

function playRadio(genre) {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  showToast('ğŸ“» ë¼ë””ì˜¤ë¥¼ ì¬ìƒí•©ë‹ˆë‹¤.', 'info');
}

// ==================== ìƒì—…ë°©ì†¡ ====================
function initCommercialChannels() {
  const container = document.getElementById('commercialChannels');
  if (!container) return;
  
  const channels = [
    { name: 'TimeLink Business 1', freq: '109.1', listeners: 567, revenue: 12340 },
    { name: 'TimeLink Business 2', freq: '109.3', listeners: 432, revenue: 9870 }
  ];
  
  container.innerHTML = channels.map(ch => `
    <div class="commercial-channel-card">
      <div class="commercial-channel-header" style="background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding:20px; color:white;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <h3 style="color:white;">${ch.name}</h3>
          <span style="background:rgba(255,255,255,0.2); padding:5px 15px; border-radius:30px;">ğŸ¢ BUSINESS</span>
        </div>
        <div style="display:flex; justify-content:space-between; margin-top:10px;">
          <span>FM ${ch.freq}</span>
          <span>ğŸ‘¥ ${ch.listeners}</span>
        </div>
      </div>
      <div class="channel-playlist" style="padding:20px;">
        <div style="background:#f8f9fa; padding:15px; border-radius:12px; margin-bottom:15px;">
          <span style="background:rgba(245,87,108,0.1); padding:6px 16px; border-radius:30px; font-size:13px;">ğŸ’° ìˆ˜ìµ: ${ch.revenue} TL</span>
        </div>
        <button class="btn-business-play" onclick="playCommercial()" style="width:100%; padding:14px; background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color:white; border:none; border-radius:12px; font-weight:700;">ğŸ§ ì¬ìƒ</button>
      </div>
    </div>
  `).join('');
}

function playCommercial() {
  if (!currentUser) {
    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
    return;
  }
  
  if (!currentUser.isBusiness) {
    showToast('ğŸ“º ìƒì—…ë°©ì†¡ì€ ì‚¬ì—…ì ì „ìš©ì…ë‹ˆë‹¤', 'warning');
    return;
  }
  
  showToast('ğŸ“º ìƒì—…ë°©ì†¡ì„ ì¬ìƒí•©ë‹ˆë‹¤.', 'info');
}

// ==================== í˜ì´ì§€ ë¡œë“œ ====================
window.onload = function() {
  console.log('ğŸš€ TimeLink v20.1 - TL3 ê³µìœ  ì¦‰ì‹œ í‘œì‹œ!');
  audioPlayer = document.getElementById('audioPlayer');
  
  document.getElementById('authContainer').style.display = 'flex';
  document.getElementById('appContainer').style.display = 'none';
  
  initRadioChannels();
  initCommercialChannels();
};
</script>

</body>
</html>
