<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeLink Global ‚Äî TL3 File Economy Platform</title>
    
    <!-- Google Fonts & Font Awesome -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Ïù¥Ï†Ñ CSSÏôÄ ÎèôÏùº */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-card: #1a1a1a;
            --bg-card-hover: #222222;
            --bg-nav: rgba(17, 17, 17, 0.95);
            --bg-modal: #1e1e1e;
            
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --text-tertiary: #6a6a6a;
            
            --accent: #8a2be2;
            --accent-glow: rgba(138, 43, 226, 0.3);
            --accent-light: #9d4edd;
            --success: #1db954;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            
            --border-color: rgba(255, 255, 255, 0.08);
            --border-hover: rgba(255, 255, 255, 0.15);
            
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.6);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 28px;
            --radius-full: 9999px;
            
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 20px;
            border: 2px solid var(--bg-secondary);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #444;
        }

        /* Auth Container */
        .auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: radial-gradient(circle at 20% 30%, #1a0b2e, #0a0a0a 80%);
            position: relative;
            overflow: hidden;
        }

        .auth-container::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.05"><path d="M20 20 L80 20 L80 80 L20 80 Z" fill="none" stroke="%238a2be2" stroke-width="1"/><circle cx="50" cy="50" r="10" fill="%238a2be2"/></svg>');
            background-size: 60px 60px;
            pointer-events: none;
        }

        .auth-box {
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 48px 40px;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            max-width: 480px;
            width: 100%;
            border: 1px solid var(--border-color);
            animation: fadeUp 0.6s ease;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .logo h1 {
            font-size: 3.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #b983ff, #8a2be2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
            margin-bottom: 8px;
        }

        .logo p {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 400;
        }

        .version-badge {
            background: rgba(138, 43, 226, 0.2);
            color: #c084fc;
            padding: 10px 24px;
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 32px;
            border: 1px solid rgba(138, 43, 226, 0.3);
            backdrop-filter: blur(4px);
            letter-spacing: 0.3px;
        }

        .google-login-btn {
            background: #4285F4;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 18px 24px;
            border-radius: var(--radius-full);
            margin: 30px 0;
            border: none;
            cursor: pointer;
            width: 100%;
            transition: var(--transition);
            box-shadow: 0 8px 20px rgba(66, 133, 244, 0.3);
        }

        .google-login-btn:hover {
            background: #3367D6;
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(66, 133, 244, 0.5);
        }

        /* Main App Container */
        .app-container {
            display: none;
            max-width: 1600px;
            margin: 0 auto;
            padding: 24px 32px;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Header */
        .app-header {
            background: rgba(17, 17, 17, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 20px 32px;
            border-radius: var(--radius-xl);
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .header-left h1 {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #b983ff, #8a2be2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .header-right {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .balance-cards {
            display: flex;
            gap: 16px;
        }

        .balance-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 20px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(8px);
            transition: var(--transition);
            min-width: 130px;
        }

        .balance-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent);
        }

        .balance-card .label {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 6px;
        }

        .balance-card .amount {
            font-size: 22px;
            font-weight: 800;
            color: white;
            line-height: 1.2;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-full);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            cursor: pointer;
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent);
        }

        .avatar-circle {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8a2be2, #6b21a5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 2px 8px rgba(138, 43, 226, 0.3);
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 700;
            color: white;
            font-size: 14px;
        }

        .user-status {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .btn-logout {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-logout:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
            border-color: #ef4444;
            transform: translateY(-2px);
        }

        /* Tab Navigation */
        .tabs-container {
            position: sticky;
            top: 100px;
            z-index: 90;
            margin-bottom: 32px;
            background: rgba(17, 17, 17, 0.7);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-full);
            padding: 6px;
            border: 1px solid var(--border-color);
            overflow-x: auto;
            white-space: nowrap;
            display: flex;
        }

        .tabs {
            display: flex;
            gap: 4px;
            width: 100%;
        }

        .tab {
            padding: 12px 24px;
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
            transition: var(--transition);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: none;
            white-space: nowrap;
        }

        .tab:hover {
            color: white;
            background: rgba(255, 255, 255, 0.05);
        }

        .tab.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 12px rgba(138, 43, 226, 0.4);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .card:hover {
            border-color: var(--accent);
            box-shadow: var(--shadow-md);
        }

        .card h2 {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 24px;
            background: linear-gradient(135deg, #fff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 28px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: var(--accent);
            opacity: 0.7;
        }

        .stat-card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-4px);
            border-color: var(--accent);
        }

        .stat-card .icon {
            font-size: 2.2rem;
            margin-bottom: 16px;
        }

        .stat-card .label {
            font-size: 12px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            color: white;
            line-height: 1.1;
        }

        /* Upload Zone */
        .upload-zone {
            border: 2px dashed var(--accent);
            background: rgba(138, 43, 226, 0.05);
            border-radius: var(--radius-lg);
            padding: 60px 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 30px;
        }

        .upload-zone:hover {
            border-color: var(--accent-light);
            background: rgba(138, 43, 226, 0.1);
            transform: scale(1.02);
        }

        .upload-zone .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.7);
        }

        .upload-zone h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: white;
        }

        .upload-zone p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* TL3 File Card */
        .file-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 28px;
        }

        .file-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .file-card:hover {
            transform: translateY(-6px);
            border-color: var(--accent);
            box-shadow: var(--shadow-md);
        }

        .file-thumbnail {
            height: 180px;
            background: linear-gradient(145deg, #2a1a3a, #1e1e1e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.8);
            position: relative;
        }

        .badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 6px 16px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 700;
            color: white;
            backdrop-filter: blur(4px);
        }

        .badge-mining { background: rgba(79, 172, 254, 0.9); }
        .badge-no-tl { background: rgba(239, 68, 68, 0.9); }
        .badge-shared { background: rgba(245, 158, 11, 0.9); }
        .badge-copyright { 
            background: rgba(139, 92, 246, 0.9); 
            left: 16px;
            right: auto;
        }

        .file-info {
            padding: 24px;
        }

        .file-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: white;
        }

        .file-artist {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 20px;
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            border-left: 4px solid;
            line-height: 1.6;
        }

        .info-panel strong {
            color: white;
        }

        .copyright-panel { border-left-color: #8b5cf6; }
        .contract-panel { border-left-color: var(--accent); }
        .tl-panel { border-left-color: var(--warning); }

        .file-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .tl-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: 16px 0;
        }

        .tl-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            transition: width 0.3s ease;
        }

        .tl-progress-empty {
            height: 100%;
            background: var(--danger);
            width: 100%;
        }

        .file-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .btn-play, .btn-charge, .btn-share, .btn-play-disabled {
            padding: 14px 10px;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            color: white;
        }

        .btn-play {
            background: var(--success);
        }

        .btn-play:hover {
            background: #1ed760;
            transform: translateY(-2px);
        }

        .btn-play-disabled {
            background: #333;
            color: #999;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn-charge {
            background: var(--warning);
            color: black;
        }

        .btn-charge:hover {
            background: #fbbf24;
            transform: translateY(-2px);
        }

        .btn-share {
            background: var(--accent);
            grid-column: span 2;
        }

        .btn-share:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        /* Share Place */
        .share-header {
            background: linear-gradient(145deg, #1e1e2a, #15151f);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .share-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .share-stat-card {
            background: var(--bg-card);
            padding: 24px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .share-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: white;
            margin-top: 8px;
        }

        .share-filter {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 24px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            background: transparent;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 14px;
            transition: var(--transition);
            cursor: pointer;
        }

        .filter-btn:hover {
            border-color: var(--accent);
            color: white;
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Radio / Commercial */
        .radio-header {
            background: linear-gradient(145deg, #1db954, #169c46);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
        }

        .commercial-header {
            background: linear-gradient(145deg, #f093fb, #f5576c);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
        }

        .radio-channel-card,
        .commercial-channel-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .radio-channel-card:hover,
        .commercial-channel-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
        }

        .channel-header {
            padding: 20px;
            background: linear-gradient(145deg, #1db954, #169c46);
            color: white;
        }

        .commercial-channel-header {
            background: linear-gradient(145deg, #f093fb, #f5576c);
            padding: 20px;
            color: white;
        }

        .radio-channels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
        }

        .channel-playlist {
            padding: 24px;
        }

        .now-playing {
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border-radius: var(--radius-md);
            margin-bottom: 16px;
            border-left: 4px solid var(--success);
        }

        /* Car Section */
        .car-contribution-box {
            background: linear-gradient(145deg, #1e3a4a, #0e2a36);
            border-radius: var(--radius-xl);
            padding: 40px;
            color: white;
            margin-bottom: 32px;
        }

        .car-listening-time {
            font-size: 2.8rem;
            font-weight: 800;
            color: white;
        }

        /* Mining */
        .mining-limit-box {
            background: rgba(255, 255, 255, 0.03);
            padding: 28px;
            border-radius: var(--radius-lg);
            border-left: 6px solid var(--warning);
            margin-bottom: 24px;
        }

        .mining-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: 16px 0;
        }

        .mining-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffa500);
            transition: width 0.3s ease;
        }

        /* Gold Reserve */
        .gold-reserve-card {
            background: linear-gradient(145deg, #b8860b, #8b6914);
            border-radius: var(--radius-xl);
            padding: 40px;
            color: white;
            margin-bottom: 32px;
        }

        /* TON */
        .ton-card {
            background: linear-gradient(145deg, #0088CC, #006699);
            border-radius: var(--radius-xl);
            padding: 40px;
            color: white;
            margin-bottom: 32px;
        }

        .ton-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 18px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
        }

        /* Charge Options */
        .charge-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .charge-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 28px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
        }

        .charge-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .charge-card .icon {
            font-size: 3.2rem;
            margin-bottom: 16px;
        }

        .charge-card h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: white;
        }

        .charge-card .amount {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(12px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-modal);
            border-radius: var(--radius-xl);
            padding: 40px;
            max-width: 520px;
            width: 100%;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .player-content {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .player-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
        }

        .player-artist {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 24px;
        }

        .player-panel {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            border-left: 6px solid;
        }

        .player-tl-amount {
            font-size: 2.8rem;
            font-weight: 800;
            color: white;
            line-height: 1.2;
        }

        .player-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: 24px 0;
        }

        .player-progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.2s linear;
        }

        .player-time {
            display: flex;
            justify-content: space-between;
            color: var(--text-tertiary);
            font-size: 13px;
            margin-bottom: 24px;
        }

        .player-controls {
            display: flex;
            gap: 16px;
            justify-content: center;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 15px;
            color: white;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(138, 43, 226, 0.1);
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 30px;
            right: 30px;
            background: var(--bg-modal);
            backdrop-filter: blur(10px);
            padding: 16px 24px;
            border-radius: var(--radius-full);
            border-left: 6px solid var(--success);
            box-shadow: var(--shadow-lg);
            display: none;
            z-index: 3000;
            min-width: 320px;
            color: white;
            font-weight: 500;
            border: 1px solid var(--border-color);
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .toast.success { border-left-color: var(--success); }
        .toast.error { border-left-color: var(--danger); }
        .toast.warning { border-left-color: var(--warning); }
        .toast.info { border-left-color: var(--info); }

        /* Demo Badge */
        .demo-badge {
            background: var(--warning);
            color: black;
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 700;
            display: inline-block;
            margin-left: 12px;
            text-transform: uppercase;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .app-container { padding: 20px; }
            .header-right { gap: 16px; }
            .balance-cards { flex-direction: column; gap: 8px; }
        }

        @media (max-width: 768px) {
            .app-header { flex-direction: column; align-items: stretch; }
            .header-right { flex-direction: column; width: 100%; }
            .tabs-container { top: auto; }
            .stats-grid { grid-template-columns: 1fr; }
            .share-stats { grid-template-columns: 1fr; }
            .file-list { grid-template-columns: 1fr; }
            .radio-channels { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>

<!-- Audio Player -->
<audio id="audioPlayer" style="display: none;"></audio>

<!-- Charge Modal -->
<div id="chargeModal" class="modal">
    <div class="modal-content">
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #b983ff, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üí∞ Charge TL3 File
        </h2>
        <div class="form-group">
            <label>TL Amount (1 TL = 1 second)</label>
            <input type="number" id="chargeAmount" placeholder="1000" min="100" step="100" value="1000">
            <p style="color: var(--text-secondary); font-size: 14px; margin-top: 12px;">
                Your wallet balance: <strong id="currentTLBalance" style="color: white;">25,000</strong> TL
            </p>
            <p style="color: var(--text-secondary); font-size: 12px; margin-top: 8px;">
                üíµ 10 TL = 1Ïõê | 1,000 TL = 100Ïõê
            </p>
        </div>
        <div style="display: flex; gap: 16px;">
            <button class="btn-play" onclick="TimeLinkSystem.file.charge()" style="flex: 1; background: var(--accent);">‚ö° Charge</button>
            <button class="btn-play" onclick="TimeLinkSystem.ui.closeChargeModal()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">Cancel</button>
        </div>
    </div>
</div>

<!-- Purchase TL Modal -->
<div id="purchaseModal" class="modal">
    <div class="modal-content">
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #b983ff, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üíµ Purchase TL
        </h2>
        <p style="color: var(--text-secondary); margin-bottom: 24px;">
            1 TL = 0.1Ïõê (10 TL = 1Ïõê) ¬∑ Î≥¥ÎÑàÏä§ Ï†ïÏ±Ö: ÎåÄÎüâ Íµ¨Îß§ Ïãú ÏµúÎåÄ 20% Ï∂îÍ∞Ä ÏßÄÍ∏â
        </p>
        <div id="purchasePackages" style="display: grid; grid-template-columns: 1fr; gap: 16px; margin-bottom: 24px;">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
        </div>
        <div style="display: flex; gap: 16px;">
            <button class="btn-play" onclick="TimeLinkSystem.ui.closePurchaseModal()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">Close</button>
        </div>
    </div>
</div>

<!-- Player Modal -->
<div id="playerModal" class="modal">
    <div class="modal-content player-content">
        <div class="player-title" id="playerTitle">Now Playing</div>
        <div class="player-artist" id="playerArtist">Artist</div>
        
        <!-- Copyright Panel -->
        <div class="player-panel" style="border-left-color: #8b5cf6;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: #8b5cf6;">üìã Copyright</span>
                <span style="background: #8b5cf6; color: white; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;">Blockchain</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div><span style="color: var(--text-secondary);">Owner</span><br><strong id="playerCopyrightOwner" style="color: white;">Global Investor</strong></div>
                <div><span style="color: var(--text-secondary);">Reg. No.</span><br><strong id="playerCopyrightNumber" style="color: white;">CR-2024-001234</strong></div>
            </div>
        </div>
        
        <!-- Contract Panel -->
        <div class="player-panel" style="border-left-color: var(--accent);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: var(--accent);">üìä Revenue Share</span>
                <span style="background: var(--accent); color: white; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;" id="playerContractType">5:5 Contract</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div><span style="color: var(--text-secondary);">Creator</span><br><strong id="playerCreatorShare" style="color: white;">50%</strong></div>
                <div><span style="color: var(--text-secondary);">Platform</span><br><strong id="playerPlatformShare" style="color: white;">50%</strong></div>
            </div>
        </div>
        
        <!-- TL Panel -->
        <div class="player-panel" style="border-left-color: var(--warning);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: var(--warning);">‚è≥ TL Balance</span>
                <span style="background: var(--warning); color: black; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;">1s = 1TL</span>
            </div>
            <div class="player-tl-amount" id="playerTL">5,000 TL</div>
            <div style="color: var(--text-secondary); font-size: 14px;" id="playerTimeRemaining">‚âà 83 min 20 sec left</div>
        </div>
        
        <!-- Revenue Panel -->
        <div class="player-panel" style="border-left-color: var(--info);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: var(--info);">üí∞ Live Revenue</span>
                <span style="background: var(--info); color: white; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;">1s = 0.1TL</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div>
                    <span style="color: var(--text-secondary);">Creator</span>
                    <br><strong style="font-size: 1.3rem; color: var(--info);" id="playerCreatorRevenue">0.05 TL</strong>
                </div>
                <div>
                    <span style="color: var(--text-secondary);">Platform</span>
                    <br><strong style="font-size: 1.3rem; color: var(--info);" id="playerPlatformRevenue">0.05 TL</strong>
                </div>
            </div>
            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(59,130,246,0.2);">
                <span style="color: var(--text-secondary);">Session Total</span>
                <br><strong id="playerTotalRevenue" style="color: white;">0.00 TL</strong>
            </div>
        </div>
        
        <!-- Progress -->
        <div class="player-progress">
            <div id="playerProgress" class="player-progress-fill" style="width: 0%;"></div>
        </div>
        
        <div class="player-time">
            <span id="playerCurrentTime">0:00</span>
            <span id="playerTotalTime">83:20</span>
        </div>
        
        <!-- Controls -->
        <div class="player-controls">
            <button class="btn-play" onclick="TimeLinkSystem.player.togglePlayPause()" id="playPauseBtn" style="flex: 1;">‚è∏Ô∏è Pause</button>
            <button class="btn-play" onclick="TimeLinkSystem.player.stop()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">‚èπÔ∏è Stop</button>
            <button class="btn-play" onclick="TimeLinkSystem.player.openChargeModal()" style="flex: 1; background: var(--warning); color: black;">üí∞ Charge</button>
        </div>
    </div>
</div>

<!-- Ad Watch Modal -->
<div id="adModal" class="modal">
    <div class="modal-content" style="text-align: center;">
        <div style="font-size: 4rem; margin-bottom: 24px;">üì∫</div>
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 16px;">Watch Ad & Earn TL</h2>
        <p style="color: var(--text-secondary); margin-bottom: 24px;">
            30Ï¥à Í¥ëÍ≥† ÏãúÏ≤≠ = <strong style="color: var(--success); font-size: 1.5rem;">30 TL</strong><br>
            <span style="font-size: 0.9rem;">ÏùåÏïÖ 30Ï¥à Î¨¥Î£å Ï≤≠Ï∑® Í∞ÄÎä•</span>
        </p>
        <p style="color: var(--text-secondary); margin-bottom: 24px;">
            Ïò§Îäò ÎÇ®ÏùÄ Î≥¥ÏÉÅ: <strong id="todayAdRewardRemaining">600 TL</strong> / 600 TL
        </p>
        <div style="display: flex; gap: 16px;">
            <button class="btn-play" onclick="TimeLinkSystem.ad.watch()" style="flex: 1; background: var(--success);">üì∫ Í¥ëÍ≥† ÏãúÏ≤≠ÌïòÍ≥† 30TL Î∞õÍ∏∞</button>
            <button class="btn-play" onclick="TimeLinkSystem.ui.closeAdModal()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">Îã´Í∏∞</button>
        </div>
    </div>
</div>

<!-- Login Page -->
<div id="authContainer" class="auth-container">
    <div class="auth-box">
        <div class="logo">
            <h1>‚è∞ TimeLink</h1>
            <p>TL3 File ‚Äî Charge to Play Economy</p>
        </div>
        <div class="version-badge">
            üöÄ v20.1 Global ¬∑ Investor Demo <span class="demo-badge">DEMO</span>
        </div>
        
        <button class="google-login-btn" onclick="TimeLinkSystem.demo.login()">
            <i class="fab fa-google"></i> Continue with Google
        </button>
        
        <div style="background: rgba(255,255,255,0.03); border-radius: var(--radius-lg); padding: 20px; margin-top: 20px;">
            <h3 style="color: white; margin-bottom: 16px;">üí∞ TL Economy</h3>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: var(--text-secondary);">1Ï¥à Ïû¨ÏÉù</span>
                <span style="color: white; font-weight: 700;">1 TL ÏÜåÎ™®</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: var(--text-secondary);">1 TL Í∞ÄÍ≤©</span>
                <span style="color: white; font-weight: 700;">0.1Ïõê (10 TL = 1Ïõê)</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: var(--text-secondary);">1ÏãúÍ∞Ñ Ï≤≠Ï∑®</span>
                <span style="color: white; font-weight: 700;">3,600 TL = 360Ïõê</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: var(--text-secondary);">30Ï¥à Í¥ëÍ≥† Î≥¥ÏÉÅ</span>
                <span style="color: var(--success); font-weight: 700;">30 TL (ÏùåÏïÖ 30Ï¥à Î¨¥Î£å)</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
                <span style="color: var(--text-secondary);">ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ ÏàòÏùµ</span>
                <span style="color: var(--accent); font-weight: 700;">SpotifyÏùò 1.8~2.5Î∞∞</span>
            </div>
        </div>
        
        <p style="color: var(--text-secondary); margin-top: 30px; font-size: 0.85rem; text-align: center;">
            ‚ö° Time-Based Digital Asset Protocol | 1s Play = 1TL Burn<br>
            <strong style="color: white;">All algorithms simulated: Copyright, TL Charging, Revenue Distribution, TLC Mining, Gold Reserve</strong>
        </p>
    </div>
</div>

<!-- Main Application -->
<div id="appContainer" class="app-container" style="display: none;">
    
    <!-- Header -->
    <div class="app-header">
        <div class="header-left">
            <h1>‚è∞ TimeLink Global</h1>
            <span class="demo-badge">1TL = 0.1Ïõê</span>
        </div>
        <div class="header-right">
            <div class="balance-cards">
                <div class="balance-card" onclick="TimeLinkSystem.ui.openPurchaseModal()" style="cursor: pointer;">
                    <div class="label">üí∞ TL Wallet</div>
                    <div class="amount" id="walletBalance">25,000</div>
                    <div style="font-size: 10px; color: var(--accent);">Ï∂©Ï†ÑÌïòÍ∏∞ ‚ñ∂</div>
                </div>
                <div class="balance-card">
                    <div class="label">ü™ô TLC Token</div>
                    <div class="amount" id="tlcBalance">1,250.75</div>
                </div>
                <div class="balance-card">
                    <div class="label">üìä Contribution</div>
                    <div class="amount" id="contributionIndex">4.75x</div>
                </div>
            </div>
            <div class="user-profile">
                <div class="avatar-circle" id="userAvatar">G</div>
                <div class="user-info">
                    <div class="user-name" id="currentUsername">Global Investor</div>
                    <div class="user-status" id="userStatus">üè¢ Business</div>
                </div>
            </div>
            <button class="btn-logout" onclick="TimeLinkSystem.demo.logout()">Logout</button>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="tabs-container">
        <div class="tabs">
            <button class="tab active" onclick="TimeLinkSystem.ui.switchTab('dashboard')">üìä Dashboard</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('upload')">üì§ Create TL3</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('library')">üéµ My TL3 Files</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('shareplace')">üîÑ Share Place</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('radio')">üìª Radio</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('commercial')">üì∫ Commercial</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('mining')">‚õèÔ∏è TLC Mining</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('car')">üöó Car</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('gold')">üèÜ Gold Reserve</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('ton')">‚¨° TON Chain</button>
        </div>
    </div>

    <!-- 1. Dashboard -->
    <div id="tabDashboard" class="tab-content active">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon">üí∞</div>
                <div class="label">TL Wallet</div>
                <div class="value" id="dashWallet">25,000</div>
                <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">‚âà 2,500Ïõê</div>
            </div>
            <div class="stat-card">
                <div class="icon">ü™ô</div>
                <div class="label">TLC Balance</div>
                <div class="value" id="dashTLC">1,250.75</div>
            </div>
            <div class="stat-card">
                <div class="icon">üìä</div>
                <div class="label">Contribution Index</div>
                <div class="value" id="dashIndex">4.75x</div>
            </div>
            <div class="stat-card">
                <div class="icon">‚õèÔ∏è</div>
                <div class="label">Mining Limit</div>
                <div class="value" id="dashMiningLimit">7,500 TL</div>
                <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">ÏûîÏï°Ïùò 30%</div>
            </div>
        </div>
        
        <!-- Platform Stats -->
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px;">
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center; border: 1px solid var(--border-color);">
                <div style="font-size: 2rem; margin-bottom: 10px;">üìª</div>
                <div style="font-weight: 700; color: var(--text-secondary);">Radio Listeners</div>
                <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="radioListeners">1,234</div>
            </div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center; border: 1px solid var(--border-color);">
                <div style="font-size: 2rem; margin-bottom: 10px;">üì∫</div>
                <div style="font-weight: 700; color: var(--text-secondary);">Commercial Viewers</div>
                <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="commercialViewers">567</div>
            </div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center; border: 1px solid var(--border-color);">
                <div style="font-size: 2rem; margin-bottom: 10px;">üöó</div>
                <div style="font-weight: 700; color: var(--text-secondary);">Registered Cars</div>
                <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="registeredCars">2</div>
            </div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center; border: 1px solid var(--border-color);">
                <div style="font-size: 2rem; margin-bottom: 10px;">‚õèÔ∏è</div>
                <div style="font-weight: 700; color: var(--text-secondary);">Today's Mining</div>
                <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="todayMining">0 TLC</div>
            </div>
        </div>
        
        <!-- TL3 Protocol Explanation -->
        <div style="background: linear-gradient(145deg, #1e1e2a, #15151f); padding: 32px; border-radius: var(--radius-xl); border: 1px solid var(--border-color); margin-bottom: 30px;">
            <h2 style="color: white; margin-bottom: 24px;">üß† TL3 File Protocol</h2>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; text-align: center;">
                <div>
                    <div style="font-size: 2.5rem; margin-bottom: 12px;">‚è±Ô∏è</div>
                    <div style="font-weight: 700; color: white;">Time-Based Asset</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">1s play = 1TL burn</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">1s play = 0.1TL revenue</div>
                </div>
                <div>
                    <div style="font-size: 2.5rem; margin-bottom: 12px;">üìã</div>
                    <div style="font-weight: 700; color: white;">Copyright + Contract</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">5:5 = mining allowed</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">7:3 = mining not allowed</div>
                </div>
                <div>
                    <div style="font-size: 2.5rem; margin-bottom: 12px;">üí∞</div>
                    <div style="font-weight: 700; color: white;">Revenue Distribution</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">Creator 50~70%</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">SpotifyÏùò 1.8~2.5Î∞∞</div>
                </div>
                <div>
                    <div style="font-size: 2.5rem; margin-bottom: 12px;">üì∫</div>
                    <div style="font-weight: 700; color: white;">Ad Reward</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">30Ï¥à = 30 TL</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">ÏùåÏïÖ 30Ï¥à Î¨¥Î£å</div>
                </div>
            </div>
        </div>
        
        <!-- TL Purchase Guide -->
        <div style="background: rgba(138, 43, 226, 0.1); border: 1px solid var(--accent); border-radius: var(--radius-xl); padding: 24px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <div>
                <h3 style="color: white; margin-bottom: 8px;">üíµ TL Íµ¨Îß§ Î≥¥ÎÑàÏä§</h3>
                <p style="color: var(--text-secondary);">ÎåÄÎüâ Íµ¨Îß§ Ïãú ÏµúÎåÄ 20% Ï∂îÍ∞Ä TL ÏßÄÍ∏â!</p>
            </div>
            <button class="btn-play" onclick="TimeLinkSystem.ui.openPurchaseModal()" style="background: var(--accent); padding: 14px 32px;">üí∞ TL Ï∂©Ï†ÑÌïòÍ∏∞</button>
        </div>
    </div>

    <!-- 2. Create TL3 File -->
    <div id="tabUpload" class="tab-content">
        <div class="card">
            <h2>üì§ Create TL3 File</h2>
            <div style="background: rgba(16, 185, 129, 0.1); border-left: 6px solid var(--success); padding: 20px; border-radius: var(--radius-lg); margin-bottom: 28px;">
                <p style="color: #34d399; font-weight: 700;">‚úÖ TL3 file creation is FREE</p>
                <p style="color: var(--text-secondary); font-size: 14px; margin-top: 8px;">
                    1. Extract MP3 metadata<br>
                    2. Generate copyright hash (SHA-256)<br>
                    3. Register on blockchain<br>
                    4. Set revenue contract (5:5 / 7:3)<br>
                    5. Create TL3 file (initial TL = 0)
                </p>
                <p style="color: var(--accent); font-size: 13px; margin-top: 12px;">
                    ‚ú® ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ ÏàòÏùµ: SpotifyÏùò 1.8Î∞∞ (5:5) ~ 2.5Î∞∞ (7:3)
                </p>
            </div>
            <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                <div class="icon">‚òÅÔ∏è</div>
                <h3>Click to select audio file</h3>
                <p>MP3, WAV, FLAC (max 100MB)</p>
            </div>
            <input type="file" id="fileInput" style="display: none;" accept="audio/*">
            
            <div id="uploadForm" style="display: none; margin-top: 32px;">
                <div class="form-group">
                    <label>Song Title</label>
                    <input type="text" id="songTitle" placeholder="Song title">
                </div>
                <div class="form-group">
                    <label>Artist</label>
                    <input type="text" id="songArtist" placeholder="Artist name">
                </div>
                
                <div style="background: rgba(139, 92, 246, 0.1); padding: 24px; border-radius: var(--radius-lg); margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px; color: #8b5cf6;">üìã Copyright Information</h3>
                    <div class="form-group">
                        <label>Copyright Owner</label>
                        <input type="text" id="copyrightOwner" value="Global Investor">
                    </div>
                    <div class="form-group">
                        <label>Registration Number</label>
                        <input type="text" id="copyrightNumber" readonly style="background: rgba(0,0,0,0.2);">
                    </div>
                </div>
                
                <div style="background: rgba(138, 43, 226, 0.1); padding: 24px; border-radius: var(--radius-lg); margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px; color: var(--accent);">üìä Revenue Contract</h3>
                    <div class="form-group">
                        <label>Contract Type</label>
                        <select id="revenueShare">
                            <option value="55">5:5 Contract ‚Äî Mining Allowed (Creator 50% / Platform 50%)</option>
                            <option value="73">7:3 Contract ‚Äî Mining Not Allowed (Creator 70% / Platform 30%)</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 20px; margin-top: 16px;">
                        <div style="flex: 1; background: rgba(255,255,255,0.03); padding: 16px; border-radius: var(--radius-md);">
                            <span style="color: var(--text-secondary);">5:5 Í≥ÑÏïΩ ÏàòÏùµ (1Í≥° 3Î∂Ñ)</span>
                            <div style="font-size: 1.3rem; font-weight: 700; color: white;">9.00 TL</div>
                            <div style="font-size: 11px; color: var(--text-secondary);">SpotifyÏùò 1.8Î∞∞</div>
                        </div>
                        <div style="flex: 1; background: rgba(255,255,255,0.03); padding: 16px; border-radius: var(--radius-md);">
                            <span style="color: var(--text-secondary);">7:3 Í≥ÑÏïΩ ÏàòÏùµ (1Í≥° 3Î∂Ñ)</span>
                            <div style="font-size: 1.3rem; font-weight: 700; color: white;">12.60 TL</div>
                            <div style="font-size: 11px; color: var(--text-secondary);">SpotifyÏùò 2.5Î∞∞</div>
                        </div>
                    </div>
                </div>
                
                <button class="btn-play" onclick="TimeLinkSystem.file.create()" style="width: 100%; padding: 18px; background: var(--accent); font-size: 1.1rem;">
                    ‚ú® Create TL3 File & Register Copyright
                </button>
            </div>
        </div>
    </div>

    <!-- 3. My TL3 Files -->
    <div id="tabLibrary" class="tab-content">
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                <h2 style="margin-bottom: 0;">üéµ My TL3 Files</h2>
                <div style="display: flex; gap: 12px;">
                    <span style="background: #4facfe; color: white; padding: 8px 18px; border-radius: var(--radius-full); font-size: 13px; font-weight: 700;">5:5 = Mining</span>
                    <span style="background: #fa709a; color: white; padding: 8px 18px; border-radius: var(--radius-full); font-size: 13px; font-weight: 700;">7:3 = No Mining</span>
                </div>
            </div>
            <div id="fileList" class="file-list"></div>
            <div id="emptyLibrary" style="text-align: center; padding: 80px 20px; color: var(--text-tertiary); display: none;">
                <div style="font-size: 5rem; margin-bottom: 20px;">üéµ</div>
                <h3 style="color: white; margin-bottom: 12px;">No TL3 files yet</h3>
                <p style="margin-bottom: 28px;">Create your first TL3 file with copyright registration</p>
                <button class="btn-play" onclick="TimeLinkSystem.ui.switchTab('upload')" style="width: auto; padding: 14px 40px; background: var(--accent);">Create TL3 File</button>
            </div>
        </div>
    </div>

    <!-- 4. Share Place -->
    <div id="tabShareplace" class="tab-content">
        <div class="share-header">
            <div>
                <h2 style="color: white;">üîÑ Share Place</h2>
                <p style="color: rgba(255,255,255,0.9); margin-top: 8px;">
                    <strong>Share cost: 5,000 TL (500Ïõê) ¬∑ ÌÉÄÏù∏ Ïû¨ÏÉù Ïãú 0.01 TL/Ï¥à ÏàòÏùµ</strong>
                </p>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding: 12px 28px; border-radius: var(--radius-full);">
                <span style="font-weight: 700; color: white;" id="sharedCount">0</span> shared files
            </div>
        </div>

        <div class="share-stats">
            <div class="share-stat-card">
                <div style="color: var(--text-secondary);">Total Shared</div>
                <div class="share-stat-value" id="totalSharedCount">0</div>
            </div>
            <div class="share-stat-card">
                <div style="color: var(--text-secondary);">5:5 Contract</div>
                <div class="share-stat-value" id="shared55Count">0</div>
            </div>
            <div class="share-stat-card">
                <div style="color: var(--text-secondary);">7:3 Contract</div>
                <div class="share-stat-value" id="shared73Count">0</div>
            </div>
        </div>

        <div class="share-filter">
            <button class="filter-btn active" onclick="TimeLinkSystem.share.filter('all', event)">All</button>
            <button class="filter-btn" onclick="TimeLinkSystem.share.filter('55', event)">5:5 Contract</button>
            <button class="filter-btn" onclick="TimeLinkSystem.share.filter('73', event)">7:3 Contract</button>
            <button class="filter-btn" onclick="TimeLinkSystem.share.filter('mining', event)">Mining Allowed</button>
        </div>

        <div id="sharedMusicList" class="file-list"></div>
    </div>

    <!-- 5. Radio -->
    <div id="tabRadio" class="tab-content">
        <div class="radio-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="color: white; font-size: 2rem;">üìª TimeLink Radio</h2>
                    <p style="color: rgba(255,255,255,0.9);">24/7 live streaming from Share Place</p>
                    <p style="color: rgba(255,255,255,0.9); margin-top: 12px;">
                        <strong>üéß 1Ï¥à = 0.5 TL ¬∑ 1Î∂Ñ = 30 TL (3Ïõê) ¬∑ 1ÏãúÍ∞Ñ = 1,800 TL (180Ïõê)</strong>
                    </p>
                </div>
                <span style="background: rgba(255,255,255,0.2); padding: 12px 28px; border-radius: var(--radius-full);">üî¥ LIVE 24/7</span>
            </div>
        </div>
        <div id="radioChannels" class="radio-channels"></div>
    </div>

    <!-- 6. Commercial Broadcast -->
    <div id="tabCommercial" class="tab-content">
        <div class="commercial-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="color: white; font-size: 2rem;">üì∫ TimeLink Commercial</h2>
                    <p style="color: rgba(255,255,255,0.9);">Business registered creators only</p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: var(--radius-lg);">
                            <div style="font-size: 12px;">Basic</div>
                            <div style="font-size: 1.5rem; font-weight: 700;">50,000 TL</div>
                            <div style="font-size: 11px;">Ïõî 5,000Ïõê</div>
                            <div style="font-size: 12px; margin-top: 8px;">1,000Î™Ö/ÏãúÍ∞Ñ</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.15); padding: 16px; border-radius: var(--radius-lg); border: 1px solid white;">
                            <div style="font-size: 12px;">Pro</div>
                            <div style="font-size: 1.5rem; font-weight: 700;">200,000 TL</div>
                            <div style="font-size: 11px;">Ïõî 20,000Ïõê</div>
                            <div style="font-size: 12px; margin-top: 8px;">5,000Î™Ö/ÏãúÍ∞Ñ</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: var(--radius-lg);">
                            <div style="font-size: 12px;">Enterprise</div>
                            <div style="font-size: 1.5rem; font-weight: 700;">1,000,000 TL</div>
                            <div style="font-size: 11px;">Ïõî 100,000Ïõê</div>
                            <div style="font-size: 12px; margin-top: 8px;">30,000Î™Ö/ÏãúÍ∞Ñ</div>
                        </div>
                    </div>
                </div>
                <span style="background: rgba(255,255,255,0.2); padding: 12px 28px; border-radius: var(--radius-full);">üí∞ BUSINESS ONLY</span>
            </div>
        </div>
        <div id="commercialChannels" class="radio-channels"></div>
        
        <div id="businessApplySection" class="card" style="text-align: center;">
            <h3 style="color: white;">Register as Business</h3>
            <p style="color: var(--text-secondary); margin: 20px 0;">Business registration required for commercial broadcast</p>
            <button class="btn-play" onclick="TimeLinkSystem.business.apply()" style="width: auto; padding: 14px 48px; background: var(--accent);">Apply for Business</button>
        </div>
    </div>

    <!-- 7. TLC Mining -->
    <div id="tabMining" class="tab-content">
        <div class="card">
            <h2>‚õèÔ∏è TLC Mining</h2>
            
            <div class="mining-limit-box">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 700; font-size: 1.2rem; margin-bottom: 10px; color: white;">‚ö†Ô∏è Mining Limit: 30% of your TL</div>
                        <div style="font-size: 2rem; font-weight: 800; color: var(--warning);" id="miningLimitAmount">7,500 / 25,000 TL</div>
                    </div>
                    <div>
                        <div style="color: var(--text-secondary); margin-bottom: 5px;">Contribution Index</div>
                        <div style="font-size: 2rem; font-weight: 800; color: white;" id="miningIndexDisplay">4.75x</div>
                    </div>
                </div>
                <div class="mining-progress">
                    <div class="mining-progress-fill" style="width: 30%;"></div>
                </div>
                <p style="color: var(--text-secondary); font-size: 13px; margin-top: 12px;">
                    üíé Ï±ÑÍµ¥Î•†: 1 TL ‚Üí 0.01 TLC (1% Ï†ÑÌôòÏú®) ¬∑ Ïª®Ìä∏Î¶¨Î∑∞ÏÖò ÏßÄÏàò 1.0x~5.0x
                </p>
            </div>

            <div id="miningPermissionCheck" style="background: rgba(245, 158, 11, 0.1); border-left: 6px solid var(--warning); padding: 24px; border-radius: var(--radius-lg); margin: 32px 0;">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 2.5rem;">‚õèÔ∏è</span>
                    <div>
                        <span style="font-weight: 700; color: #fbbf24;" id="miningPermissionMessage">‚úÖ Mining rights: 5:5 contract file detected</span>
                        <p style="color: var(--text-secondary); font-size: 14px; margin-top: 6px;">* Only TL3 files with 5:5 contract can be used for mining</p>
                    </div>
                </div>
            </div>

            <div style="margin-top: 24px;">
                <div class="form-group">
                    <label>TL to mine (max <span id="maxMiningLabel">7,500</span> TL)</label>
                    <input type="number" id="miningAmount" placeholder="1000" min="1" value="1000">
                </div>
                
                <div style="background: rgba(255,255,255,0.03); padding: 24px; border-radius: var(--radius-lg); margin: 24px 0;">
                    <h3 style="margin-bottom: 20px; color: white;">üìä Mining Preview</h3>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span style="color: var(--text-secondary);">Input TL:</span>
                        <strong style="color: white;" id="previewInput">1,000 TL</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span style="color: var(--text-secondary);">Contribution Index:</span>
                        <strong style="color: white;" id="previewIndex">4.75x</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span style="color: var(--text-secondary);">TLC to receive:</span>
                        <strong style="color: var(--success);" id="previewOutput">47.50 TLC</strong>
                    </div>
                </div>

                <button class="btn-play" onclick="TimeLinkSystem.mining.execute()" style="width: 100%; padding: 20px; font-size: 1.2rem; background: linear-gradient(135deg, #ffd700, #ffa500); color: black; font-weight: 800;">
                    ‚õèÔ∏è Execute Mining
                </button>
            </div>
        </div>
    </div>

    <!-- 8. Car Listening -->
    <div id="tabCar" class="tab-content">
        <div class="car-contribution-box">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                <div>
                    <h2 style="color: white;">üöó Car Listening</h2>
                    <p style="color: rgba(255,255,255,0.9); font-size: 1.3rem;">
                        <strong style="font-size: 2.5rem;">1Î∂Ñ = 6 TL</strong> Î≥¥ÏÉÅ (Ïû¨ÏÉù ÏàòÏùµ 100% ÌôòÏõê)
                    </p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 24px; border-radius: var(--radius-lg); text-align: center;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">My total driving</div>
                    <div class="car-listening-time" id="userTotalDrivingTime">1,240 min</div>
                    <div style="font-size: 12px; margin-top: 4px;">ÌöçÎìù TL: 7,440 TL</div>
                </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.05); padding: 32px; border-radius: var(--radius-lg); margin-bottom: 32px;">
                <h3 style="color: white; margin-bottom: 24px;">üöò Register Car</h3>
                <p style="color: var(--text-secondary); margin-bottom: 16px;">
                    Îì±Î°ùÎπÑ: <strong>10,000 TL (1,000Ïõê)</strong> ¬∑ 1ÌöåÏÑ±
                </p>
                <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                    <input type="text" id="carModel" placeholder="Car model (e.g., Tesla Model 3)" style="flex: 2; min-width: 200px; padding: 16px; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: rgba(0,0,0,0.3); color: white;">
                    <input type="text" id="carPlate" placeholder="License plate" style="flex: 1; min-width: 140px; padding: 16px; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: rgba(0,0,0,0.3); color: white;">
                    <button class="btn-play" onclick="TimeLinkSystem.car.register()" style="background: white; color: #1e3a4a; width: auto; padding: 16px 32px;">üöó Register (10,000 TL)</button>
                </div>
                <div id="carList" style="margin-top: 24px; color: rgba(255,255,255,0.8);"></div>
            </div>
            
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <button class="btn-play" onclick="TimeLinkSystem.car.addDrivingMinutes(10)" style="background: white; color: #1e3a4a; flex: 1; padding: 18px; font-weight: 700;">üöó +10Î∂Ñ (60 TL Î≥¥ÏÉÅ)</button>
                <button class="btn-play" onclick="TimeLinkSystem.car.addDrivingMinutes(30)" style="background: white; color: #1e3a4a; flex: 1; padding: 18px; font-weight: 700;">üöó +30Î∂Ñ (180 TL Î≥¥ÏÉÅ)</button>
                <button class="btn-play" onclick="TimeLinkSystem.car.addDrivingMinutes(60)" style="background: white; color: #1e3a4a; flex: 1; padding: 18px; font-weight: 700;">üöó +60Î∂Ñ (360 TL Î≥¥ÏÉÅ)</button>
            </div>
            <p style="color: var(--text-secondary); font-size: 12px; margin-top: 20px; text-align: center;">
                ‚Äª Ïõî ÏµúÎåÄ Î≥¥ÏÉÅ: 10,800 TL (30ÏãúÍ∞Ñ Ï≤≠Ï∑®)
            </p>
        </div>
    </div>

    <!-- 9. Gold Reserve -->
    <div id="tabGold" class="tab-content">
        <div class="gold-reserve-card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="color: white; font-size: 2rem;">üèÜ Gold Backed Reserve</h2>
                    <p style="color: rgba(255,255,255,0.9); font-size: 1.1rem;">
                        <strong style="font-size: 1.5rem;">10%</strong> of platform revenue ‚Üí physical gold
                    </p>
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: var(--radius-lg); text-align: center;">
                    <div style="font-size: 14px; opacity: 0.9;">Collateral Ratio</div>
                    <div style="font-size: 2.5rem; font-weight: 800; color: white;" id="goldCollateralRatio">245%</div>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 30px;">
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: var(--radius-lg);">
                    <div style="font-size: 12px; opacity: 0.9;">Total Gold</div>
                    <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="goldAmount">10.24 g</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: var(--radius-lg);">
                    <div style="font-size: 12px; opacity: 0.9;">Gold Value (USD)</div>
                    <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="goldValue">$665</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: var(--radius-lg);">
                    <div style="font-size: 12px; opacity: 0.9;">Platform Revenue</div>
                    <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="platformRevenue">$6,650</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: var(--radius-lg);">
                    <div style="font-size: 12px; opacity: 0.9;">Gold Investment</div>
                    <div style="font-size: 1.8rem; font-weight: 800; color: white;" id="goldInvestment">$665</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>üìä Gold Purchase History (Blockchain)</h2>
            <div id="goldTransactionList" style="max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>

    <!-- 10. TON Blockchain -->
    <div id="tabTon" class="tab-content">
        <div class="ton-card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                <div>
                    <h2 style="color: white; font-size: 2rem;">‚¨° TON TLC Coin</h2>
                    <p style="color: rgba(255,255,255,0.9);">TON blockchain based TLC token</p>
                </div>
                <span class="ton-badge">TON Testnet</span>
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px;">
                <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: var(--radius-lg);">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 12px;">My TLC Balance</div>
                    <div style="font-size: 2.8rem; font-weight: 800; color: white;" id="tonTLCBalance">1,250.75</div>
                    <div style="margin-top: 16px; color: rgba(255,255,255,0.8);">Ìù¨Í∑ÄÏÑ±: TLÏùò 1%Îßå Ï±ÑÍµ¥ Í∞ÄÎä•</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: var(--radius-lg);">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 12px;">TON Wallet</div>
                    <div style="font-size: 0.9rem; font-family: monospace; background: rgba(0,0,0,0.3); padding: 12px; border-radius: var(--radius-md); color: rgba(255,255,255,0.9);" id="tonWalletAddress">
                        EQD4XhVpE_y6hF6lQr4YgB7KZQhJx2qQ8CQnQXq3Zx5Lp7vK
                    </div>
                    <button class="btn-play" onclick="TimeLinkSystem.ton.connect()" style="margin-top: 24px; background: white; color: #0088CC; width: 100%; padding: 16px; font-weight: 700;">
                        üîó Connect TON Wallet
                    </button>
                </div>
            </div>
            <div style="margin-top: 30px; background: rgba(255,255,255,0.1); padding: 24px; border-radius: var(--radius-lg);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="color: white; font-weight: 700;">Send TLC</span>
                    <span style="color: rgba(255,255,255,0.8); font-size: 13px;">Fee: 0.1 TON</span>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 16px;">
                    <input type="text" id="tonSendAddress" placeholder="TON wallet address" style="flex: 2; padding: 14px; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: rgba(0,0,0,0.2); color: white;">
                    <input type="number" id="tonSendAmount" placeholder="Amount" style="flex: 1; padding: 14px; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: rgba(0,0,0,0.2); color: white;">
                    <button class="btn-play" onclick="TimeLinkSystem.ton.send()" style="background: white; color: #0088CC; padding: 14px 24px; font-weight: 700;">Send</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ============================================================================
// TimeLink Global v20.1 - Complete TL3 File Economy Platform
// Í≤ΩÏ†ú Î™®Îç∏: 1TL = 0.1Ïõê, 1Ï¥à Ïû¨ÏÉù = 1TL ÏÜåÎ™®, 1Ï¥à Ïû¨ÏÉù = 0.1TL ÏàòÏùµ
// ============================================================================

// ============================================================================
// ECONOMIC CONSTANTS - ÏµúÏ¢Ö ÌôïÏ†ï
// ============================================================================
const ECONOMY = {
    // Í∏∞Î≥∏ Îã®ÏúÑ (FIXED)
    TL_PER_SECOND: 1,              // 1Ï¥à Ïû¨ÏÉù = 1 TL ÏÜåÎ™®
    TL_PRICE_KRW: 0.1,            // 1 TL = 0.1Ïõê (10 TL = 1Ïõê)
    
    // Ïû¨ÏÉù ÏàòÏùµ (1Ï¥à Í∏∞Ï§Ä)
    REVENUE_PER_SECOND: 0.1,      // 1Ï¥à Ïû¨ÏÉù = 0.1 TL ÏàòÏùµ Ï∞ΩÏ∂ú
    CONTRACT_55_CREATOR: 0.05,    // 5:5 Í≥ÑÏïΩ - ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ 0.05 TL
    CONTRACT_55_PLATFORM: 0.05,   // 5:5 Í≥ÑÏïΩ - ÌîåÎû´Ìèº 0.05 TL
    CONTRACT_73_CREATOR: 0.07,    // 7:3 Í≥ÑÏïΩ - ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ 0.07 TL
    CONTRACT_73_PLATFORM: 0.03,   // 7:3 Í≥ÑÏïΩ - ÌîåÎû´Ìèº 0.03 TL
    
    // Í¥ëÍ≥† Í≤ΩÏ†ú
    AD_30SEC_REWARD: 30,          // 30Ï¥à Í¥ëÍ≥† Î≥¥ÏÉÅ = 30 TL (ÏùåÏïÖ 30Ï¥à Î¨¥Î£å)
    AD_30SEC_COST: 60,           // Í¥ëÍ≥†Ï£º Îã®Í∞Ä = 60 TL (ÌîåÎû´Ìèº ÏàòÏùµ 30 TL)
    AD_DAILY_MAX_REWARD: 600,    // ÏùºÏùº ÏµúÎåÄ Í¥ëÍ≥† Î≥¥ÏÉÅ = 600 TL (10Î∂Ñ Î¨¥Î£å)
    
    // ÏûêÎèôÏ∞® Ï≤≠Ï∑®
    CAR_REGISTRATION_FEE: 10000,  // Ï∞®Îüâ Îì±Î°ùÎπÑ = 10,000 TL (1,000Ïõê)
    CAR_REWARD_PER_MINUTE: 6,     // 1Î∂Ñ Ï≤≠Ï∑® Î≥¥ÏÉÅ = 6 TL (Ïû¨ÏÉù ÏàòÏùµ 100% ÌôòÏõê)
    CAR_MONTHLY_MAX_REWARD: 10800, // Ïõî ÏµúÎåÄ Î≥¥ÏÉÅ = 10,800 TL (30ÏãúÍ∞Ñ)
    
    // ÎùºÎîîÏò§ Ï≤≠Ï∑® (Ìï†Ïù∏)
    RADIO_COST_PER_SECOND: 0.5,   // 1Ï¥à Ï≤≠Ï∑® = 0.5 TL (50% Ìï†Ïù∏)
    RADIO_COST_PER_MINUTE: 30,    // 1Î∂Ñ Ï≤≠Ï∑® = 30 TL = 3Ïõê
    RADIO_COST_PER_HOUR: 1800,    // 1ÏãúÍ∞Ñ Ï≤≠Ï∑® = 1,800 TL = 180Ïõê
    
    // ÏÉÅÏóÖ Î∞©ÏÜ° (B2B)
    COMMERCIAL_BASIC_MONTHLY: 50000,     // Basic: 50,000 TL/Ïõî
    COMMERCIAL_PRO_MONTHLY: 200000,      // Pro: 200,000 TL/Ïõî
    COMMERCIAL_ENTERPRISE_MONTHLY: 1000000, // Enterprise: 1,000,000 TL/Ïõî
    
    // TLC Ï±ÑÍµ¥
    MINING_BASE_RATE: 0.01,       // 1 TL Îãπ 0.01 TLC (1% Ï†ÑÌôòÏú®)
    MINING_MAX_CONTRIBUTION: 5.0, // ÏµúÎåÄ Ïª®Ìä∏Î¶¨Î∑∞ÏÖò ÏßÄÏàò 5.0x
    MINING_LIMIT_RATIO: 0.3,      // Ï±ÑÍµ¥ ÌïúÎèÑ = ÏßÄÍ∞ë ÏûîÏï° 30%
    
    // Share Place
    SHARE_COST: 5000,            // Í≥µÏú† ÎπÑÏö© = 5,000 TL
    SHARE_REVENUE_PER_SECOND: 0.01, // ÌÉÄÏù∏ Ïû¨ÏÉù Ïãú ÏàòÏùµ = 0.01 TL/Ï¥à
    
    // TL Íµ¨Îß§ Ìå®ÌÇ§ÏßÄ (Î≥¥ÎÑàÏä§ Ìè¨Ìï®)
    PACKAGES: [
        { id: 'micro', name: 'ÎßàÏù¥ÌÅ¨Î°ú', tl: 1000, price: 100, bonus: 0, desc: 'Ï≤¥ÌóòÏö©' },
        { id: 'starter', name: 'Ïä§ÌÉÄÌÑ∞', tl: 10000, price: 1000, bonus: 0, desc: 'Í∏∞Î≥∏' },
        { id: 'regular', name: 'Î†àÍ∑§Îü¨', tl: 50000, price: 5000, bonus: 5000, desc: '+5,000 TL Î≥¥ÎÑàÏä§' },
        { id: 'pro', name: 'ÌîÑÎ°ú', tl: 200000, price: 20000, bonus: 30000, desc: '+30,000 TL Î≥¥ÎÑàÏä§' },
        { id: 'enterprise', name: 'ÏóîÌÑ∞ÌîÑÎùºÏù¥Ï¶à', tl: 1000000, price: 100000, bonus: 200000, desc: '+200,000 TL Î≥¥ÎÑàÏä§' }
    ]
};

// ============================================================================
// 1. Blockchain Simulation Module
// ============================================================================
const Blockchain = {
    records: [],
    
    async record(data) {
        const record = {
            id: '0x' + Math.random().toString(16).substr(2, 16) + Date.now().toString(16),
            timestamp: Date.now(),
            ...data
        };
        this.records.push(record);
        console.log('‚úÖ Blockchain record:', record);
        return record;
    },
    
    async getRecordsByType(type) {
        return this.records.filter(r => r.type === type);
    },
    
    async findByHash(hash) {
        return this.records.find(r => r.hash === hash);
    },
    
    getFileHistory(fileId) {
        return this.records.filter(r => r.file_id === fileId);
    },
    
    getAllRecords() {
        return this.records;
    }
};

// ============================================================================
// 2. Copyright Registry Module
// ============================================================================
const CopyrightRegistry = {
    registrations: [],
    
    async register(data) {
        const hash = await this.generateHash(data);
        const registration = {
            id: 'CR-' + Date.now() + '-' + Math.random().toString(36).substr(2, 8).toUpperCase(),
            certificate_id: 'CERT-' + Date.now() + '-' + Math.floor(Math.random() * 1000),
            ...data,
            hash: hash,
            verified: true,
            verified_at: new Date().toISOString(),
            expires_at: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString()
        };
        
        this.registrations.push(registration);
        
        await Blockchain.record({
            type: 'COPYRIGHT_REGISTERED',
            registration_id: registration.id,
            owner: registration.owner_id,
            title: registration.title,
            hash: hash,
            timestamp: Date.now()
        });
        
        return registration;
    },
    
    async generateHash(data) {
        const content = data.title + data.artist + data.owner_id + Date.now() + Math.random();
        let hash = 0;
        for (let i = 0; i < content.length; i++) {
            hash = ((hash << 5) - hash) + content.charCodeAt(i);
            hash |= 0;
        }
        return '0x' + Math.abs(hash).toString(16).padStart(16, '0');
    },
    
    async verify(certificateId) {
        return this.registrations.some(r => r.certificate_id === certificateId);
    },
    
    getByOwner(ownerId) {
        return this.registrations.filter(r => r.owner_id === ownerId);
    }
};

// ============================================================================
// 3. TL Wallet Module
// ============================================================================
class TLWallet {
    constructor(userId) {
        this.userId = userId;
        this.balance = 25000; // Ï¥àÍ∏∞ TL: 25,000 TL (2,500Ïõê)
        this.tlcBalance = 1250.75;
        this.transactions = [];
        this.todayAdReward = 0; // Ïò§Îäò Í¥ëÍ≥† Î≥¥ÏÉÅ ÎàÑÏ†Å
        this.monthlyCarReward = 0; // Ïù¥Î≤à Îã¨ Ï∞®Îüâ Î≥¥ÏÉÅ ÎàÑÏ†Å
    }
    
    async charge(amount) {
        this.balance += amount;
        
        const transaction = {
            id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            type: 'CHARGE',
            amount: amount,
            balance_before: this.balance - amount,
            balance_after: this.balance,
            timestamp: new Date().toISOString()
        };
        
        this.transactions.push(transaction);
        
        await Blockchain.record({
            type: 'WALLET_CHARGED',
            user: this.userId,
            amount: amount,
            tx_id: transaction.id,
            timestamp: Date.now()
        });
        
        return transaction;
    }
    
    async withdraw(amount, reason, target) {
        if (this.balance < amount) {
            throw new Error('Insufficient TL balance');
        }
        
        this.balance -= amount;
        
        const transaction = {
            id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            type: reason,
            amount: amount,
            target: target,
            balance_before: this.balance + amount,
            balance_after: this.balance,
            timestamp: new Date().toISOString()
        };
        
        this.transactions.push(transaction);
        
        await Blockchain.record({
            type: 'WALLET_WITHDRAWN',
            user: this.userId,
            amount: amount,
            reason: reason,
            target: target,
            tx_id: transaction.id,
            timestamp: Date.now()
        });
        
        return transaction;
    }
    
    async addAdReward(amount) {
        if (this.todayAdReward + amount > ECONOMY.AD_DAILY_MAX_REWARD) {
            throw new Error(`Daily ad reward limit exceeded (max: ${ECONOMY.AD_DAILY_MAX_REWARD} TL)`);
        }
        
        this.balance += amount;
        this.todayAdReward += amount;
        
        const transaction = {
            id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            type: 'AD_REWARD',
            amount: amount,
            balance_before: this.balance - amount,
            balance_after: this.balance,
            timestamp: new Date().toISOString()
        };
        
        this.transactions.push(transaction);
        return transaction;
    }
    
    async addCarReward(amount) {
        if (this.monthlyCarReward + amount > ECONOMY.CAR_MONTHLY_MAX_REWARD) {
            throw new Error(`Monthly car reward limit exceeded (max: ${ECONOMY.CAR_MONTHLY_MAX_REWARD} TL)`);
        }
        
        this.balance += amount;
        this.monthlyCarReward += amount;
        
        const transaction = {
            id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            type: 'CAR_REWARD',
            amount: amount,
            balance_before: this.balance - amount,
            balance_after: this.balance,
            timestamp: new Date().toISOString()
        };
        
        this.transactions.push(transaction);
        return transaction;
    }
    
    getBalance() {
        return this.balance;
    }
    
    getBalanceKRW() {
        return (this.balance * ECONOMY.TL_PRICE_KRW).toFixed(0);
    }
    
    getTLCBalance() {
        return this.tlcBalance;
    }
    
    getTodayAdRewardRemaining() {
        return Math.max(0, ECONOMY.AD_DAILY_MAX_REWARD - this.todayAdReward);
    }
    
    resetDailyAdReward() {
        this.todayAdReward = 0;
    }
    
    resetMonthlyCarReward() {
        this.monthlyCarReward = 0;
    }
}

// ============================================================================
// 4. TL3 File Class
// ============================================================================
class TL3File {
    constructor(data) {
        this.id = 'tl3_' + Date.now() + '_' + Math.random().toString(36).substr(2, 12);
        this.metadata = {
            title: data.title || 'Untitled',
            artist: data.artist || 'Unknown Artist',
            duration: data.duration || 180,
            copyright: data.copyright,
            contract: data.contract
        };
        this.token = {
            balance: 0,
            total_charged: 0,
            total_consumed: 0,
            last_charge_at: null,
            last_play_at: null
        };
        this.ledger = [];
        this.royalty = {
            total_revenue: 0,
            creator_earned: 0,
            platform_earned: 0,
            pending_settlement: 0,
            last_settlement: null
        };
        this.audio = {
            url: data.audioUrl || (data.file ? URL.createObjectURL(data.file) : null),
            encrypted: false
        };
        this.creatorId = data.creatorId;
        this.creatorName = data.creatorName;
        this.isShared = false;
        this.sharedId = null;
        this.sharedAt = null;
        this.createdAt = new Date().toISOString();
    }
    
    async charge(amount) {
        this.token.balance += amount;
        this.token.total_charged += amount;
        this.token.last_charge_at = new Date().toISOString();
        
        const transaction = {
            tx_id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            type: 'charge',
            amount: amount,
            balance_before: this.token.balance - amount,
            balance_after: this.token.balance,
            timestamp: new Date().toISOString()
        };
        
        this.ledger.push(transaction);
        return transaction;
    }
    
    async consume(amount) {
        if (this.token.balance < amount) {
            throw new Error('Insufficient TL balance');
        }
        
        this.token.balance -= amount;
        this.token.total_consumed += amount;
        this.token.last_play_at = new Date().toISOString();
        
        const transaction = {
            tx_id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            type: 'play',
            amount: amount,
            balance_before: this.token.balance + amount,
            balance_after: this.token.balance,
            timestamp: new Date().toISOString()
        };
        
        this.ledger.push(transaction);
        return transaction;
    }
    
    addRevenue(amount, creatorShare, platformShare) {
        this.royalty.total_revenue += amount;
        this.royalty.creator_earned += creatorShare;
        this.royalty.platform_earned += platformShare;
        this.royalty.pending_settlement += creatorShare;
    }
    
    getCreatorEarningsPerSong() {
        // 3Î∂Ñ(180Ï¥à) Í∏∞Ï§Ä ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ ÏàòÏùµ
        const seconds = 180;
        const revenue = seconds * ECONOMY.REVENUE_PER_SECOND;
        
        if (this.metadata.contract.type === '55') {
            return revenue * 0.5; // 9 TL
        } else {
            return revenue * 0.7; // 12.6 TL
        }
    }
}

// ============================================================================
// 5. Revenue Distribution & Gold Reserve Module
// ============================================================================
const RoyaltyDistributor = {
    goldReserve: {
        totalGold: 10.24,
        goldPrice: 65,
        platformRevenue: 6650,
        goldInvestment: 665,
        transactions: [
            {
                timestamp: Date.now() - 86400000 * 7,
                usdAmount: 650,
                grams: 10,
                pricePerGram: 65,
                type: 'initial'
            },
            {
                timestamp: Date.now() - 86400000 * 3,
                usdAmount: 15,
                grams: 0.24,
                pricePerGram: 62.5,
                type: 'purchase'
            }
        ]
    },
    
    async distribute(contract, revenue, creatorId) {
        const creatorShare = revenue * contract.creator_share;
        const platformShare = revenue * contract.platform_share;
        
        this.goldReserve.platformRevenue += platformShare * ECONOMY.TL_PRICE_KRW * 0.01; // USD ÌôòÏÇ∞ (Îã®ÏàúÌôî)
        this.goldReserve.goldInvestment = this.goldReserve.platformRevenue * 0.1;
        
        const gramsAdded = this.goldReserve.goldInvestment / this.goldReserve.goldPrice;
        this.goldReserve.totalGold += gramsAdded;
        
        if (gramsAdded > 0.001) {
            this.goldReserve.transactions.push({
                timestamp: new Date().toISOString(),
                usdAmount: this.goldReserve.goldInvestment,
                grams: gramsAdded,
                pricePerGram: this.goldReserve.goldPrice,
                type: 'purchase'
            });
        }
        
        await Blockchain.record({
            type: 'REVENUE_DISTRIBUTED',
            creator_id: creatorId,
            revenue: revenue,
            creator_share: creatorShare,
            platform_share: platformShare,
            gold_purchase: gramsAdded,
            timestamp: Date.now()
        });
        
        return {
            creator_share: creatorShare,
            platform_share: platformShare,
            gold_purchase: gramsAdded
        };
    },
    
    getGoldStats() {
        const totalValue = this.goldReserve.totalGold * this.goldReserve.goldPrice;
        const collateralRatio = (totalValue / 10000) * 100;
        
        return {
            totalGold: this.goldReserve.totalGold.toFixed(2) + ' g',
            totalValue: '$' + Math.floor(totalValue).toLocaleString(),
            goldPrice: '$' + this.goldReserve.goldPrice.toFixed(2) + '/g',
            collateralRatio: Math.floor(collateralRatio) + '%',
            platformRevenue: '$' + Math.floor(this.goldReserve.platformRevenue).toLocaleString(),
            goldInvestment: '$' + Math.floor(this.goldReserve.goldInvestment).toLocaleString()
        };
    },
    
    getTransactions() {
        return this.goldReserve.transactions;
    }
};

// ============================================================================
// 6. Mining System Module
// ============================================================================
const MiningSystem = {
    contributionIndex: 4.75,
    
    calculate(amount, contributionIndex, hasMiningRight) {
        if (!hasMiningRight) return 0;
        const baseRate = ECONOMY.MINING_BASE_RATE;
        return amount * baseRate * contributionIndex;
    },
    
    getMaxMining(balance) {
        return Math.floor(balance * ECONOMY.MINING_LIMIT_RATIO);
    },
    
    setContributionIndex(index) {
        this.contributionIndex = Math.min(index, ECONOMY.MINING_MAX_CONTRIBUTION);
    }
};

// ============================================================================
// 7. Car System Module
// ============================================================================
const CarSystem = {
    cars: [
        { model: 'Tesla Model 3', plate: 'ABC123' },
        { model: 'Hyundai Ioniq 5', plate: 'XYZ789' }
    ],
    totalDrivingMinutes: 1240,
    
    addCar(model, plate) {
        const newCar = { model, plate: plate || 'Unregistered' };
        this.cars.push(newCar);
        return newCar;
    },
    
    addDrivingMinutes(minutes) {
        this.totalDrivingMinutes += minutes;
        return this.totalDrivingMinutes;
    },
    
    getReward(minutes) {
        return minutes * ECONOMY.CAR_REWARD_PER_MINUTE;
    },
    
    getCars() {
        return this.cars;
    }
};

// ============================================================================
// 8. Radio / Commercial System Module
// ============================================================================
const RadioSystem = {
    channels: [
        { name: 'TimeLink Pop', genre: 'pop', freq: '107.7', listeners: 1234, currentSong: 'Dynamite - BTS' },
        { name: 'TimeLink Rock', genre: 'rock', freq: '107.9', listeners: 892, currentSong: 'Bohemian Rhapsody - Queen' },
        { name: 'TimeLink Hip-Hop', genre: 'hiphop', freq: '108.1', listeners: 1567, currentSong: 'Savage - aespa' },
        { name: 'TimeLink Jazz', genre: 'jazz', freq: '108.3', listeners: 645, currentSong: 'Fly Me To The Moon' }
    ],
    
    commercialChannels: [
        { name: 'TimeLink Business 1', freq: '109.1', listeners: 567, revenue: 12340 },
        { name: 'TimeLink Business 2', freq: '109.3', listeners: 432, revenue: 9870 }
    ],
    
    getChannels() {
        return this.channels;
    },
    
    getCommercialChannels() {
        return this.commercialChannels;
    },
    
    getRadioCost(seconds) {
        return seconds * ECONOMY.RADIO_COST_PER_SECOND;
    }
};

// ============================================================================
// 9. TON System Module
// ============================================================================
const TONSystem = {
    walletAddress: 'EQD4XhVpE_y6hF6lQr4YgB7KZQhJx2qQ8CQnQXq3Zx5Lp7vK',
    balance: 1250.75,
    connected: false,
    
    connect() {
        this.connected = true;
        return this.walletAddress;
    },
    
    send(to, amount) {
        if (!this.connected) {
            throw new Error('Wallet not connected');
        }
        if (amount > this.balance) {
            throw new Error('Insufficient TLC balance');
        }
        this.balance -= amount;
        return { success: true, tx: 'ton_tx_' + Date.now() };
    }
};

// ============================================================================
// 10. Ad System Module
// ============================================================================
const AdSystem = {
    async watchAd(userId, wallet) {
        try {
            await wallet.addAdReward(ECONOMY.AD_30SEC_REWARD);
            
            await Blockchain.record({
                type: 'AD_WATCHED',
                user: userId,
                reward: ECONOMY.AD_30SEC_REWARD,
                timestamp: Date.now()
            });
            
            return {
                success: true,
                reward: ECONOMY.AD_30SEC_REWARD
            };
        } catch (error) {
            throw error;
        }
    }
};

// ============================================================================
// 11. Main System Controller
// ============================================================================
const TimeLinkSystem = {
    currentUser: null,
    wallet: null,
    files: [],
    sharedFiles: [],
    currentPlayingFile: null,
    playInterval: null,
    audioPlayer: null,
    currentPlayTime: 0,
    currentFilter: 'all',
    
    // ===== Demo Login =====
    demo: {
        login: function() {
            TimeLinkSystem.currentUser = {
                id: 'user_' + Date.now(),
                username: 'Global Investor',
                email: 'investor@timelink.io',
                isBusiness: true
            };
            
            TimeLinkSystem.wallet = new TLWallet(TimeLinkSystem.currentUser.id);
            
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            
            // UI Update
            TimeLinkSystem.ui.updateAllUI();
            TimeLinkSystem.demo.initializeData();
            TimeLinkSystem.ui.updateLibrary();
            TimeLinkSystem.ui.updateSharePlace();
            TimeLinkSystem.radio.initChannels();
            TimeLinkSystem.radio.initCommercialChannels();
            TimeLinkSystem.ui.updateGoldReserve();
            TimeLinkSystem.ui.updateCarList();
            TimeLinkSystem.ui.initPurchasePackages();
            
            TimeLinkSystem.ui.showToast('‚úÖ Welcome to TimeLink Global! (1TL = 0.1Ïõê)', 'success');
        },
        
        logout: function() {
            if (TimeLinkSystem.playInterval) {
                clearInterval(TimeLinkSystem.playInterval);
                TimeLinkSystem.playInterval = null;
            }
            if (TimeLinkSystem.audioPlayer) {
                TimeLinkSystem.audioPlayer.pause();
                TimeLinkSystem.audioPlayer.src = '';
            }
            
            TimeLinkSystem.currentUser = null;
            TimeLinkSystem.wallet = null;
            TimeLinkSystem.files = [];
            TimeLinkSystem.sharedFiles = [];
            
            document.getElementById('authContainer').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
        },
        
        initializeData: function() {
            if (TimeLinkSystem.files.length === 0) {
                const dummyAudioData = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAA8AAAGQAApCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJD/+5REAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
                
                const file1 = new TL3File({
                    title: 'Dynamite',
                    artist: 'BTS',
                    duration: 210,
                    file: new File([dummyAudioData], 'dynamite.mp3'),
                    audioUrl: dummyAudioData,
                    creatorId: TimeLinkSystem.currentUser.id,
                    creatorName: TimeLinkSystem.currentUser.username,
                    copyright: {
                        owner_id: TimeLinkSystem.currentUser.id,
                        owner_name: TimeLinkSystem.currentUser.username,
                        registration_number: 'CR-2024-001234',
                        registration_date: new Date().toISOString()
                    },
                    contract: {
                        type: '55',
                        creator_share: ECONOMY.CONTRACT_55_CREATOR / ECONOMY.REVENUE_PER_SECOND,
                        platform_share: ECONOMY.CONTRACT_55_PLATFORM / ECONOMY.REVENUE_PER_SECOND,
                        mining_allowed: true
                    }
                });
                
                file1.token.balance = 5000;
                file1.token.total_charged = 5000;
                
                const file2 = new TL3File({
                    title: 'Butter',
                    artist: 'BTS',
                    duration: 200,
                    file: new File([dummyAudioData], 'butter.mp3'),
                    audioUrl: dummyAudioData,
                    creatorId: TimeLinkSystem.currentUser.id,
                    creatorName: TimeLinkSystem.currentUser.username,
                    copyright: {
                        owner_id: TimeLinkSystem.currentUser.id,
                        owner_name: TimeLinkSystem.currentUser.username,
                        registration_number: 'CR-2024-001235',
                        registration_date: new Date().toISOString()
                    },
                    contract: {
                        type: '73',
                        creator_share: ECONOMY.CONTRACT_73_CREATOR / ECONOMY.REVENUE_PER_SECOND,
                        platform_share: ECONOMY.CONTRACT_73_PLATFORM / ECONOMY.REVENUE_PER_SECOND,
                        mining_allowed: false
                    }
                });
                
                file2.token.balance = 0;
                file2.token.total_charged = 0;
                
                TimeLinkSystem.files.push(file1, file2);
            }
        }
    },
    
    // ===== File Management =====
    file: {
        selectedFile: null,
        selectedFileData: null,
        
        handleSelect: function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            TimeLinkSystem.file.selectedFile = file;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                TimeLinkSystem.file.selectedFileData = e.target.result;
                document.getElementById('uploadForm').style.display = 'block';
                document.getElementById('songTitle').value = file.name.replace(/\.[^/.]+$/, "");
                document.getElementById('songArtist').value = TimeLinkSystem.currentUser?.username || 'Artist';
                document.getElementById('copyrightOwner').value = TimeLinkSystem.currentUser?.username || '';
                document.getElementById('copyrightNumber').value = 'CR-' + Date.now();
            };
            reader.readAsDataURL(file);
        },
        
        create: async function() {
            if (!TimeLinkSystem.file.selectedFile || !TimeLinkSystem.file.selectedFileData) {
                TimeLinkSystem.ui.showToast('Please select an audio file', 'error');
                return;
            }
            
            const title = document.getElementById('songTitle').value;
            const artist = document.getElementById('songArtist').value || TimeLinkSystem.currentUser.username;
            const revenueShare = document.getElementById('revenueShare').value;
            const copyrightOwner = document.getElementById('copyrightOwner').value || TimeLinkSystem.currentUser.username;
            const copyrightNumber = document.getElementById('copyrightNumber').value || ('CR-' + Date.now());
            
            if (!title) {
                TimeLinkSystem.ui.showToast('Please enter song title', 'error');
                return;
            }
            
            TimeLinkSystem.ui.showToast('üìã Registering copyright on blockchain...', 'info');
            
            const copyright = await CopyrightRegistry.register({
                owner_id: TimeLinkSystem.currentUser.id,
                owner_name: copyrightOwner,
                title: title,
                artist: artist,
                registration_number: copyrightNumber
            });
            
            const contract = {
                type: revenueShare,
                creator_share: revenueShare === '55' ? 0.5 : 0.7,
                platform_share: revenueShare === '55' ? 0.5 : 0.3,
                mining_allowed: revenueShare === '55'
            };
            
            const tl3File = new TL3File({
                title: title,
                artist: artist,
                duration: 180,
                file: TimeLinkSystem.file.selectedFile,
                audioUrl: TimeLinkSystem.file.selectedFileData,
                creatorId: TimeLinkSystem.currentUser.id,
                creatorName: TimeLinkSystem.currentUser.username,
                copyright: copyright,
                contract: contract
            });
            
            TimeLinkSystem.files.push(tl3File);
            
            TimeLinkSystem.ui.showToast(`‚úÖ TL3 file created! (Copyright: ${copyright.id})`, 'success');
            
            document.getElementById('uploadForm').style.display = 'none';
            document.getElementById('fileInput').value = '';
            TimeLinkSystem.file.selectedFile = null;
            TimeLinkSystem.file.selectedFileData = null;
            
            TimeLinkSystem.ui.updateLibrary();
            TimeLinkSystem.ui.switchTab('library');
        },
        
        charge: async function() {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            const amount = parseInt(document.getElementById('chargeAmount').value);
            if (!amount || amount <= 0) {
                TimeLinkSystem.ui.showToast('Enter valid amount', 'error');
                return;
            }
            
            if (!TimeLinkSystem.player.currentFileId) {
                TimeLinkSystem.ui.showToast('Please select a file', 'error');
                return;
            }
            
            const file = TimeLinkSystem.files.find(f => f.id === TimeLinkSystem.player.currentFileId);
            if (!file) {
                TimeLinkSystem.ui.showToast('File not found', 'error');
                return;
            }
            
            try {
                await TimeLinkSystem.wallet.withdraw(amount, 'FILE_CHARGE', file.id);
                await file.charge(amount);
                
                await Blockchain.record({
                    type: 'TL_CHARGED',
                    file_id: file.id,
                    amount: amount,
                    charger: TimeLinkSystem.currentUser.id,
                    timestamp: Date.now()
                });
                
                TimeLinkSystem.ui.updateAllUI();
                TimeLinkSystem.ui.closeChargeModal();
                TimeLinkSystem.ui.updateLibrary();
                
                if (TimeLinkSystem.player.currentFileId === file.id) {
                    document.getElementById('playerTL').textContent = file.token.balance.toLocaleString() + ' TL';
                    const minutes = Math.floor(file.token.balance / 60);
                    const seconds = file.token.balance % 60;
                    document.getElementById('playerTimeRemaining').textContent = `‚âà ${minutes}min ${seconds}sec left`;
                    document.getElementById('playerTotalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
                
                const minutes = Math.floor(amount / 60);
                const seconds = amount % 60;
                TimeLinkSystem.ui.showToast(`‚úÖ Charged ${amount.toLocaleString()} TL (${minutes}min ${seconds}sec)`, 'success');
                
            } catch (error) {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            }
        },
        
        purchaseTL: function(packageId) {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            const pkg = ECONOMY.PACKAGES.find(p => p.id === packageId);
            if (!pkg) return;
            
            const totalTL = pkg.tl + pkg.bonus;
            
            TimeLinkSystem.wallet.charge(totalTL);
            TimeLinkSystem.ui.showToast(`‚úÖ Purchased ${totalTL.toLocaleString()} TL (${pkg.price}Ïõê)`, 'success');
            TimeLinkSystem.ui.updateAllUI();
            TimeLinkSystem.ui.closePurchaseModal();
        }
    },
    
    // ===== Share Place =====
    share: {
        filter: function(filter, event) {
            TimeLinkSystem.currentFilter = filter;
            
            const btns = document.querySelectorAll('.share-filter .filter-btn');
            btns.forEach(btn => btn.classList.remove('active'));
            if (event) event.target.classList.add('active');
            
            TimeLinkSystem.ui.updateSharePlace();
        },
        
        shareFile: async function(fileId) {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            const file = TimeLinkSystem.files.find(f => f.id === fileId);
            if (!file) return;
            
            if (file.isShared) {
                TimeLinkSystem.ui.showToast('Already shared', 'warning');
                return;
            }
            
            if (TimeLinkSystem.wallet.balance < ECONOMY.SHARE_COST) {
                TimeLinkSystem.ui.showToast(`Insufficient TL: need ${ECONOMY.SHARE_COST.toLocaleString()} TL`, 'error');
                return;
            }
            
            try {
                await TimeLinkSystem.wallet.withdraw(ECONOMY.SHARE_COST, 'SHARE', file.id);
                
                file.isShared = true;
                file.sharedId = 'share_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);
                file.sharedAt = new Date().toISOString();
                
                TimeLinkSystem.ui.updateLibrary();
                TimeLinkSystem.ui.updateSharePlace();
                TimeLinkSystem.ui.switchTab('shareplace');
                
                TimeLinkSystem.ui.showToast(`üîÑ "${file.metadata.title}" shared! (${ECONOMY.SHARE_COST.toLocaleString()} TL deducted)`, 'success');
                
            } catch (error) {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            }
        }
    },
    
    // ===== Player =====
    player: {
        currentFileId: null,
        isPlaying: false,
        
        play: function(fileId) {
            const file = TimeLinkSystem.files.find(f => f.id === fileId);
            if (!file) return;
            
            if (file.token.balance <= 0) {
                TimeLinkSystem.ui.showToast('‚ö†Ô∏è TL insufficient. Please charge.', 'warning');
                return;
            }
            
            if (TimeLinkSystem.playInterval) {
                clearInterval(TimeLinkSystem.playInterval);
                TimeLinkSystem.playInterval = null;
            }
            
            TimeLinkSystem.player.currentFileId = file.id;
            TimeLinkSystem.currentPlayingFile = file;
            TimeLinkSystem.currentPlayTime = 0;
            
            // Update player UI
            document.getElementById('playerTitle').textContent = file.metadata.title;
            document.getElementById('playerArtist').textContent = file.metadata.artist;
            document.getElementById('playerCopyrightOwner').textContent = file.metadata.copyright.owner_name;
            document.getElementById('playerCopyrightNumber').textContent = file.metadata.copyright.registration_number;
            document.getElementById('playerContractType').textContent = file.metadata.contract.type === '55' ? '5:5 Contract' : '7:3 Contract';
            document.getElementById('playerCreatorShare').textContent = (file.metadata.contract.creator_share * 100) + '%';
            document.getElementById('playerPlatformShare').textContent = (file.metadata.contract.platform_share * 100) + '%';
            document.getElementById('playerTL').textContent = file.token.balance.toLocaleString() + ' TL';
            
            const minutes = Math.floor(file.token.balance / 60);
            const seconds = file.token.balance % 60;
            document.getElementById('playerTimeRemaining').textContent = `‚âà ${minutes}min ${seconds}sec left`;
            document.getElementById('playerTotalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('playerCreatorRevenue').textContent = '0.00 TL';
            document.getElementById('playerPlatformRevenue').textContent = '0.00 TL';
            document.getElementById('playerTotalRevenue').textContent = '0.00 TL';
            document.getElementById('playerProgress').style.width = '0%';
            document.getElementById('playerCurrentTime').textContent = '0:00';
            
            TimeLinkSystem.audioPlayer = document.getElementById('audioPlayer');
            TimeLinkSystem.audioPlayer.src = file.audio.url;
            TimeLinkSystem.audioPlayer.load();
            TimeLinkSystem.audioPlayer.play().catch(e => {
                TimeLinkSystem.ui.showToast('Audio playback failed', 'error');
            });
            
            TimeLinkSystem.player.isPlaying = true;
            document.getElementById('playPauseBtn').innerHTML = '‚è∏Ô∏è Pause';
            document.getElementById('playerModal').style.display = 'flex';
            
            let totalRevenue = 0;
            
            TimeLinkSystem.playInterval = setInterval(async () => {
                if (!TimeLinkSystem.currentPlayingFile || !TimeLinkSystem.player.isPlaying) return;
                
                try {
                    await file.consume(1);
                    TimeLinkSystem.currentPlayTime++;
                    
                    document.getElementById('playerTL').textContent = file.token.balance.toLocaleString() + ' TL';
                    
                    const remainingMinutes = Math.floor(file.token.balance / 60);
                    const remainingSeconds = file.token.balance % 60;
                    document.getElementById('playerTimeRemaining').textContent = `‚âà ${remainingMinutes}min ${remainingSeconds}sec left`;
                    document.getElementById('playerCurrentTime').textContent = `${Math.floor(TimeLinkSystem.currentPlayTime / 60)}:${(TimeLinkSystem.currentPlayTime % 60).toString().padStart(2, '0')}`;
                    
                    const progressPercent = (TimeLinkSystem.currentPlayTime / (file.token.balance + TimeLinkSystem.currentPlayTime)) * 100;
                    document.getElementById('playerProgress').style.width = Math.min(progressPercent, 100) + '%';
                    
                    const revenue = ECONOMY.REVENUE_PER_SECOND;
                    const distribution = await RoyaltyDistributor.distribute(
                        file.metadata.contract,
                        revenue,
                        file.creatorId
                    );
                    
                    file.addRevenue(revenue, distribution.creator_share, distribution.platform_share);
                    totalRevenue += revenue;
                    
                    document.getElementById('playerCreatorRevenue').textContent = distribution.creator_share.toFixed(2) + ' TL';
                    document.getElementById('playerPlatformRevenue').textContent = distribution.platform_share.toFixed(2) + ' TL';
                    document.getElementById('playerTotalRevenue').textContent = totalRevenue.toFixed(2) + ' TL';
                    
                    if (file.token.balance <= 0) {
                        TimeLinkSystem.player.stop();
                        TimeLinkSystem.ui.showToast('‚ö†Ô∏è TL exhausted', 'warning');
                    }
                } catch (e) {
                    TimeLinkSystem.player.stop();
                }
            }, 1000);
            
            TimeLinkSystem.audioPlayer.onended = function() {
                TimeLinkSystem.player.stop();
            };
        },
        
        togglePlayPause: function() {
            if (!TimeLinkSystem.audioPlayer) return;
            
            if (TimeLinkSystem.audioPlayer.paused) {
                TimeLinkSystem.audioPlayer.play();
                TimeLinkSystem.player.isPlaying = true;
                document.getElementById('playPauseBtn').innerHTML = '‚è∏Ô∏è Pause';
            } else {
                TimeLinkSystem.audioPlayer.pause();
                TimeLinkSystem.player.isPlaying = false;
                document.getElementById('playPauseBtn').innerHTML = '‚ñ∂Ô∏è Play';
            }
        },
        
        stop: function() {
            if (TimeLinkSystem.playInterval) {
                clearInterval(TimeLinkSystem.playInterval);
                TimeLinkSystem.playInterval = null;
            }
            if (TimeLinkSystem.audioPlayer) {
                TimeLinkSystem.audioPlayer.pause();
                TimeLinkSystem.audioPlayer.src = '';
            }
            TimeLinkSystem.currentPlayingFile = null;
            TimeLinkSystem.currentPlayTime = 0;
            TimeLinkSystem.player.isPlaying = false;
            TimeLinkSystem.player.currentFileId = null;
            
            document.getElementById('playerModal').style.display = 'none';
            TimeLinkSystem.ui.updateLibrary();
        },
        
        openChargeModal: function(fileId) {
            if (fileId) {
                TimeLinkSystem.player.currentFileId = fileId;
            }
            if (TimeLinkSystem.wallet) {
                document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            }
            document.getElementById('chargeModal').style.display = 'flex';
        }
    },
    
    // ===== Radio =====
    radio: {
        initChannels: function() {
            const container = document.getElementById('radioChannels');
            if (!container) return;
            
            container.innerHTML = RadioSystem.channels.map(ch => `
                <div class="radio-channel-card">
                    <div class="channel-header">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: white;">${ch.name}</h3>
                            <span style="background: rgba(255,255,255,0.2); padding: 6px 16px; border-radius: var(--radius-full); font-size: 12px;">üî¥ LIVE</span>
                        </div>
                        <p style="color: rgba(255,255,255,0.9);">${ch.freq} MHz ¬∑ ${ch.listeners} listeners</p>
                        <p style="color: rgba(255,255,255,0.9); margin-top: 8px;"><strong>Now:</strong> ${ch.currentSong}</p>
                    </div>
                    <div class="channel-playlist">
                        <div class="now-playing">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: white; font-weight: 600;">üéµ 1Ï¥à = 0.5 TL (50% Ìï†Ïù∏)</span>
                                <span style="color: var(--success);">1Î∂Ñ = 30 TL</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button class="btn-play" onclick="TimeLinkSystem.radio.tune('${ch.name}')" style="flex: 2;">üìª Tune In</button>
                            <button class="btn-play" onclick="TimeLinkSystem.radio.viewPlaylist('${ch.name}')" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">üìã List</button>
                        </div>
                    </div>
                </div>
            `).join('');
        },
        
        initCommercialChannels: function() {
            const container = document.getElementById('commercialChannels');
            if (!container) return;
            
            container.innerHTML = RadioSystem.commercialChannels.map(ch => `
                <div class="commercial-channel-card">
                    <div class="commercial-channel-header">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: white;">${ch.name}</h3>
                            <span style="background: rgba(255,255,255,0.2); padding: 6px 16px; border-radius: var(--radius-full); font-size: 12px;">üí∞ BUSINESS</span>
                        </div>
                        <p style="color: rgba(255,255,255,0.9);">${ch.freq} MHz ¬∑ ${ch.listeners} viewers</p>
                        <p style="color: rgba(255,255,255,0.9); margin-top: 8px;"><strong>Revenue:</strong> $${ch.revenue.toLocaleString()}</p>
                    </div>
                    <div class="channel-playlist">
                        <button class="btn-play" onclick="TimeLinkSystem.radio.tuneCommercial('${ch.name}')" style="width: 100%; background: var(--accent);">üì∫ Start Commercial</button>
                    </div>
                </div>
            `).join('');
        },
        
        tune: function(channelName) {
            TimeLinkSystem.ui.showToast(`üìª Tuned to ${channelName} (1Ï¥à = 0.5 TL)`, 'info');
        },
        
        tuneCommercial: function(channelName) {
            if (!TimeLinkSystem.currentUser?.isBusiness) {
                TimeLinkSystem.ui.showToast('‚ö†Ô∏è Business account required for commercial broadcast', 'error');
                return;
            }
            TimeLinkSystem.ui.showToast(`üì∫ Commercial broadcast on ${channelName}`, 'success');
        },
        
        viewPlaylist: function(channelName) {
            TimeLinkSystem.ui.showToast(`üìã ${channelName} playlist - 20 songs in rotation`, 'info');
        }
    },
    
    // ===== Ad System =====
    ad: {
        watch: async function() {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            try {
                const result = await AdSystem.watchAd(TimeLinkSystem.currentUser.id, TimeLinkSystem.wallet);
                TimeLinkSystem.ui.updateAllUI();
                TimeLinkSystem.ui.showToast(`üì∫ Ad watched! +${result.reward} TL earned`, 'success');
                TimeLinkSystem.ui.closeAdModal();
            } catch (error) {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            }
        }
    },
    
    // ===== Mining System =====
    mining: {
        execute: async function() {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            const amount = parseInt(document.getElementById('miningAmount').value);
            if (!amount || amount <= 0) {
                TimeLinkSystem.ui.showToast('Enter valid amount', 'error');
                return;
            }
            
            const maxMining = MiningSystem.getMaxMining(TimeLinkSystem.wallet.balance);
            if (amount > maxMining) {
                TimeLinkSystem.ui.showToast(`Mining limit: ${maxMining.toLocaleString()} TL (30% of wallet)`, 'error');
                return;
            }
            
            const hasMiningRight = TimeLinkSystem.files.some(f => 
                f.metadata.contract && f.metadata.contract.mining_allowed === true
            );
            
            if (!hasMiningRight) {
                TimeLinkSystem.ui.showToast('‚ö†Ô∏è Need 5:5 contract file for mining', 'error');
                return;
            }
            
            try {
                await TimeLinkSystem.wallet.withdraw(amount, 'MINING_BURN', 'mining_system');
                
                const tlcEarned = MiningSystem.calculate(amount, MiningSystem.contributionIndex, hasMiningRight);
                TimeLinkSystem.wallet.tlcBalance += tlcEarned;
                
                await Blockchain.record({
                    type: 'MINING_EXECUTED',
                    user: TimeLinkSystem.currentUser.id,
                    burn_amount: amount,
                    tlc_earned: tlcEarned,
                    contribution_index: MiningSystem.contributionIndex,
                    timestamp: Date.now()
                });
                
                TimeLinkSystem.ui.updateAllUI();
                TimeLinkSystem.mining.updatePreview();
                TimeLinkSystem.ui.showToast(`‚õèÔ∏è Mined ${tlcEarned.toFixed(2)} TLC from ${amount.toLocaleString()} TL!`, 'success');
                
            } catch (error) {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            }
        },
        
        updatePreview: function() {
            const amount = parseInt(document.getElementById('miningAmount')?.value) || 0;
            const maxMining = MiningSystem.getMaxMining(TimeLinkSystem.wallet?.balance || 0);
            const hasMiningRight = TimeLinkSystem.files.some(f => 
                f.metadata.contract && f.metadata.contract.mining_allowed === true
            );
            
            if (amount > maxMining) {
                document.getElementById('miningAmount').value = maxMining;
            }
            
            document.getElementById('previewInput').innerHTML = (amount || 0).toLocaleString() + ' TL';
            document.getElementById('previewIndex').innerHTML = MiningSystem.contributionIndex.toFixed(2) + 'x';
            
            const output = MiningSystem.calculate(amount, MiningSystem.contributionIndex, hasMiningRight);
            document.getElementById('previewOutput').innerHTML = output.toFixed(2) + ' TLC';
            
            const message = hasMiningRight ? 
                '‚úÖ Mining rights: 5:5 contract file detected' : 
                '‚ùå Mining rights: No 5:5 contract file (mining disabled)';
            document.getElementById('miningPermissionMessage').innerHTML = message;
        }
    },
    
    // ===== Car System =====
    car: {
        register: function() {
            const model = document.getElementById('carModel')?.value;
            const plate = document.getElementById('carPlate')?.value;
            
            if (!model) {
                TimeLinkSystem.ui.showToast('Please enter car model', 'error');
                return;
            }
            
            if (TimeLinkSystem.wallet.balance < ECONOMY.CAR_REGISTRATION_FEE) {
                TimeLinkSystem.ui.showToast(`Insufficient TL: need ${ECONOMY.CAR_REGISTRATION_FEE.toLocaleString()} TL`, 'error');
                return;
            }
            
            TimeLinkSystem.wallet.withdraw(ECONOMY.CAR_REGISTRATION_FEE, 'CAR_REGISTRATION', model).then(() => {
                CarSystem.addCar(model, plate);
                TimeLinkSystem.ui.updateCarList();
                TimeLinkSystem.ui.updateAllUI();
                TimeLinkSystem.ui.showToast(`üöó ${model} registered! (${ECONOMY.CAR_REGISTRATION_FEE.toLocaleString()} TL)`, 'success');
                
                document.getElementById('carModel').value = '';
                document.getElementById('carPlate').value = '';
            }).catch(error => {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            });
        },
        
        addDrivingMinutes: function(minutes) {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            if (CarSystem.cars.length === 0) {
                TimeLinkSystem.ui.showToast('Please register a car first', 'error');
                return;
            }
            
            const reward = CarSystem.getReward(minutes);
            
            TimeLinkSystem.wallet.addCarReward(reward).then(() => {
                CarSystem.addDrivingMinutes(minutes);
                
                document.getElementById('userTotalDrivingTime').textContent = CarSystem.totalDrivingMinutes.toLocaleString() + ' min';
                TimeLinkSystem.ui.updateAllUI();
                
                TimeLinkSystem.ui.showToast(`üöò Added ${minutes} minutes driving (+${reward} TL)`, 'success');
            }).catch(error => {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            });
        }
    },
    
    // ===== Business System =====
    business: {
        apply: function() {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            TimeLinkSystem.currentUser.isBusiness = true;
            document.getElementById('userStatus').innerHTML = 'üè¢ Business';
            document.getElementById('businessApplySection').style.display = 'none';
            
            TimeLinkSystem.ui.showToast('‚úÖ Business account activated! Commercial broadcast available.', 'success');
        }
    },
    
    // ===== TON System =====
    ton: {
        connect: function() {
            TONSystem.connect();
            TimeLinkSystem.ui.showToast('üîó TON Wallet connected: ' + TONSystem.walletAddress.substring(0, 10) + '...', 'success');
        },
        
        send: function() {
            const address = document.getElementById('tonSendAddress')?.value;
            const amount = parseFloat(document.getElementById('tonSendAmount')?.value);
            
            if (!address) {
                TimeLinkSystem.ui.showToast('Please enter TON wallet address', 'error');
                return;
            }
            
            if (!amount || amount <= 0) {
                TimeLinkSystem.ui.showToast('Please enter valid amount', 'error');
                return;
            }
            
            try {
                const result = TONSystem.send(address, amount);
                TimeLinkSystem.wallet.tlcBalance -= amount;
                TimeLinkSystem.ui.updateAllUI();
                TimeLinkSystem.ui.showToast(`‚úÖ Sent ${amount} TLC to ${address.substring(0, 10)}...`, 'success');
            } catch (error) {
                TimeLinkSystem.ui.showToast(error.message, 'error');
            }
        }
    },
    
    // ===== UI Management =====
    ui: {
        switchTab: function(tab) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));
            
            const activeTab = Array.from(tabs).find(t => t.getAttribute('onclick')?.includes(tab));
            if (activeTab) activeTab.classList.add('active');
            
            const contentId = `tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`;
            const content = document.getElementById(contentId);
            if (content) content.classList.add('active');
            
            if (tab === 'mining') {
                TimeLinkSystem.mining.updatePreview();
            } else if (tab === 'gold') {
                TimeLinkSystem.ui.updateGoldReserve();
            } else if (tab === 'library') {
                TimeLinkSystem.ui.updateLibrary();
            } else if (tab === 'shareplace') {
                TimeLinkSystem.ui.updateSharePlace();
            }
        },
        
        updateAllUI: function() {
            if (!TimeLinkSystem.wallet) return;
            
            document.getElementById('walletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            document.getElementById('dashWallet').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            
            const maxMining = MiningSystem.getMaxMining(TimeLinkSystem.wallet.balance);
            document.getElementById('dashMiningLimit').textContent = maxMining.toLocaleString() + ' TL';
            document.getElementById('miningLimitAmount').textContent = maxMining.toLocaleString() + ' / ' + TimeLinkSystem.wallet.balance.toLocaleString() + ' TL';
            document.getElementById('maxMiningLabel').textContent = maxMining.toLocaleString();
            
            document.getElementById('tlcBalance').textContent = TimeLinkSystem.wallet.tlcBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('dashTLC').textContent = TimeLinkSystem.wallet.tlcBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('tonTLCBalance').textContent = TimeLinkSystem.wallet.tlcBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            
            document.getElementById('contributionIndex').textContent = MiningSystem.contributionIndex.toFixed(2) + 'x';
            document.getElementById('dashIndex').textContent = MiningSystem.contributionIndex.toFixed(2) + 'x';
            document.getElementById('miningIndexDisplay').textContent = MiningSystem.contributionIndex.toFixed(2) + 'x';
            
            document.getElementById('radioListeners').textContent = RadioSystem.channels.reduce((acc, ch) => acc + ch.listeners, 0).toLocaleString();
            document.getElementById('commercialViewers').textContent = RadioSystem.commercialChannels.reduce((acc, ch) => acc + ch.listeners, 0).toLocaleString();
            document.getElementById('registeredCars').textContent = CarSystem.cars.length.toLocaleString();
            document.getElementById('userTotalDrivingTime').textContent = CarSystem.totalDrivingMinutes.toLocaleString() + ' min';
            
            const remainingAdReward = TimeLinkSystem.wallet.getTodayAdRewardRemaining();
            if (document.getElementById('todayAdRewardRemaining')) {
                document.getElementById('todayAdRewardRemaining').textContent = remainingAdReward.toLocaleString();
            }
        },
        
        updateLibrary: function() {
            const container = document.getElementById('fileList');
            const emptyLib = document.getElementById('emptyLibrary');
            
            if (!TimeLinkSystem.files || TimeLinkSystem.files.length === 0) {
                container.innerHTML = '';
                emptyLib.style.display = 'block';
                return;
            }
            
            emptyLib.style.display = 'none';
            
            container.innerHTML = TimeLinkSystem.files.map(file => {
                const consumedPercent = file.token.total_charged > 0 ? 
                    (file.token.total_consumed / file.token.total_charged * 100).toFixed(1) : 0;
                const creatorEarnings = file.getCreatorEarningsPerSong();
                
                return `
                <div class="file-card">
                    <div class="file-thumbnail">
                        üéµ
                        ${file.metadata.contract.mining_allowed ? 
                            '<span class="badge badge-mining">‚õèÔ∏è Mining Allowed</span>' : 
                            '<span class="badge badge-no-tl">‚õî No Mining</span>'}
                        <span class="badge badge-copyright">¬© ${file.metadata.copyright.owner_name || 'Registered'}</span>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${file.metadata.title}</div>
                        <div class="file-artist">${file.metadata.artist}</div>
                        
                        <div class="info-panel copyright-panel">
                            <strong>üìã Copyright</strong><br>
                            Owner: ${file.metadata.copyright.owner_name}<br>
                            Reg: ${file.metadata.copyright.registration_number}
                        </div>
                        
                        <div class="info-panel contract-panel">
                            <strong>üìä Revenue Contract</strong><br>
                            ${file.metadata.contract.type === '55' ? '5:5 Creator 50% / Platform 50%' : '7:3 Creator 70% / Platform 30%'}
                            <div style="margin-top: 8px; color: var(--success);">1Í≥°(3Î∂Ñ) ÏàòÏùµ: ${creatorEarnings.toFixed(2)} TL</div>
                            <div style="font-size: 11px; color: var(--text-secondary);">SpotifyÏùò ${file.metadata.contract.type === '55' ? '1.8' : '2.5'}Î∞∞</div>
                        </div>
                        
                        <div class="info-panel tl-panel">
                            <strong>‚è≥ TL Balance</strong><br>
                            <span style="font-size: 1.4rem; color: white;">${file.token.balance.toLocaleString()}</span> TL
                            <span style="margin-left: 8px; font-size: 11px; color: var(--text-secondary);">‚âà ${(file.token.balance * ECONOMY.TL_PRICE_KRW).toFixed(0)}Ïõê</span>
                        </div>
                        
                        ${file.token.total_charged > 0 ? `
                            <div class="tl-progress">
                                <div class="tl-progress-fill" style="width: ${consumedPercent}%;"></div>
                            </div>
                            <div class="file-stats">
                                <span>üìä Charged: ${file.token.total_charged.toLocaleString()} TL</span>
                                <span>‚è±Ô∏è Played: ${file.token.total_consumed.toLocaleString()}s (${consumedPercent}%)</span>
                            </div>
                        ` : `
                            <div class="tl-progress">
                                <div class="tl-progress-empty"></div>
                            </div>
                            <div class="file-stats">
                                <span>üìä Never charged</span>
                                <span>‚è±Ô∏è 0s played</span>
                            </div>
                        `}
                        
                        <div class="file-actions">
                            ${file.token.balance > 0 ? 
                                `<button class="btn-play" onclick="TimeLinkSystem.player.play('${file.id}')">‚ñ∂Ô∏è Play</button>` : 
                                `<button class="btn-play-disabled" disabled>‚õî No TL</button>`
                            }
                            <button class="btn-charge" onclick="TimeLinkSystem.player.openChargeModal('${file.id}')">üí∞ Charge</button>
                            ${!file.isShared ? 
                                `<button class="btn-share" onclick="TimeLinkSystem.share.shareFile('${file.id}')">üîÑ Share to Place</button>` : 
                                `<button class="btn-share" style="background: #333; cursor: default;" disabled>‚úÖ Shared</button>`
                            }
                        </div>
                    </div>
                </div>
            `}).join('');
        },
        
        updateSharePlace: function() {
            const container = document.getElementById('sharedMusicList');
            
            TimeLinkSystem.sharedFiles = TimeLinkSystem.files.filter(f => f.isShared).map(file => ({
                id: file.sharedId,
                originalId: file.id,
                title: file.metadata.title,
                artist: file.metadata.artist,
                creatorId: file.creatorId,
                creatorName: file.creatorName,
                copyrightOwner: file.metadata.copyright.owner_name,
                contractType: file.metadata.contract.type === '55' ? '5:5 Contract' : '7:3 Contract',
                miningAllowed: file.metadata.contract.mining_allowed,
                remainingTL: file.token.balance,
                sharedAt: file.sharedAt
            }));
            
            document.getElementById('sharedCount').textContent = TimeLinkSystem.sharedFiles.length;
            document.getElementById('totalSharedCount').textContent = TimeLinkSystem.sharedFiles.length;
            document.getElementById('shared55Count').textContent = TimeLinkSystem.sharedFiles.filter(f => f.contractType === '5:5 Contract').length;
            document.getElementById('shared73Count').textContent = TimeLinkSystem.sharedFiles.filter(f => f.contractType === '7:3 Contract').length;
            
            let filteredFiles = TimeLinkSystem.sharedFiles;
            if (TimeLinkSystem.currentFilter === '55') {
                filteredFiles = filteredFiles.filter(f => f.contractType === '5:5 Contract');
            } else if (TimeLinkSystem.currentFilter === '73') {
                filteredFiles = filteredFiles.filter(f => f.contractType === '7:3 Contract');
            } else if (TimeLinkSystem.currentFilter === 'mining') {
                filteredFiles = filteredFiles.filter(f => f.miningAllowed);
            }
            
            if (filteredFiles.length === 0) {
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 60px; color: var(--text-tertiary);">üì≠ No shared files found</div>';
                return;
            }
            
            container.innerHTML = filteredFiles.map(file => `
                <div class="file-card">
                    <div class="file-thumbnail">
                        üéµ
                        ${file.miningAllowed ? 
                            '<span class="badge badge-mining">‚õèÔ∏è Mining</span>' : 
                            '<span class="badge badge-no-tl">‚õî No Mining</span>'}
                        <span class="badge badge-shared">üîÑ Shared</span>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${file.title}</div>
                        <div class="file-artist">${file.artist}</div>
                        
                        <div class="info-panel copyright-panel">
                            <strong>¬© Copyright Owner</strong><br>
                            ${file.copyrightOwner}
                        </div>
                        
                        <div class="info-panel contract-panel">
                            <strong>üìã Contract</strong><br>
                            ${file.contractType}
                        </div>
                        
                        <div class="info-panel tl-panel">
                            <strong>‚è≥ Remaining TL</strong><br>
                            <span style="font-size: 1.4rem; color: white;">${file.remainingTL.toLocaleString()}</span> TL
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <span style="color: var(--text-secondary);">Shared by: ${file.creatorName}</span><br>
                            <span style="color: var(--text-secondary); font-size: 12px;">${new Date(file.sharedAt).toLocaleDateString()}</span>
                        </div>
                        
                        <div style="margin-top: 16px; background: rgba(255,255,255,0.03); padding: 12px; border-radius: var(--radius-md);">
                            <span style="color: var(--text-secondary);">ÌÉÄÏù∏ Ïû¨ÏÉù Ïãú ÏàòÏùµ:</span>
                            <span style="color: var(--success); font-weight: 700;">0.01 TL/Ï¥à</span>
                        </div>
                        
                        <button class="btn-play" onclick="TimeLinkSystem.radio.tune('Share Place: ${file.title}')" style="width: 100%; margin-top: 20px; background: var(--accent);">
                            üìª Listen in Radio (0.5 TL/Ï¥à)
                        </button>
                    </div>
                </div>
            `).join('');
        },
        
        updateGoldReserve: function() {
            const stats = RoyaltyDistributor.getGoldStats();
            
            document.getElementById('goldAmount').textContent = stats.totalGold;
            document.getElementById('goldValue').textContent = stats.totalValue;
            document.getElementById('platformRevenue').textContent = stats.platformRevenue;
            document.getElementById('goldInvestment').textContent = stats.goldInvestment;
            document.getElementById('goldCollateralRatio').textContent = stats.collateralRatio;
            
            const container = document.getElementById('goldTransactionList');
            if (container) {
                const transactions = RoyaltyDistributor.getTransactions();
                container.innerHTML = transactions.slice(-5).reverse().map(tx => `
                    <div style="display: flex; justify-content: space-between; padding: 16px; border-bottom: 1px solid var(--border-color);">
                        <div>
                            <span style="color: white; font-weight: 600;">${tx.type === 'initial' ? 'üèÜ Initial Reserve' : 'üí∞ Gold Purchase'}</span>
                            <br><span style="color: var(--text-secondary); font-size: 12px;">${new Date(tx.timestamp).toLocaleDateString()}</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="color: white; font-weight: 700;">${tx.grams.toFixed(2)} g</span>
                            <br><span style="color: var(--text-secondary);">$${tx.usdAmount}</span>
                        </div>
                    </div>
                `).join('');
                
                if (transactions.length === 0) {
                    container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-tertiary);">üì≠ No transactions yet</div>';
                }
            }
        },
        
        updateCarList: function() {
            const container = document.getElementById('carList');
            if (container) {
                const cars = CarSystem.getCars();
                container.innerHTML = cars.map(car => 
                    `<p style="color: white; margin: 5px 0;">üöò ${car.model} (${car.plate})</p>`
                ).join('');
            }
        },
        
        initPurchasePackages: function() {
            const container = document.getElementById('purchasePackages');
            if (!container) return;
            
            container.innerHTML = ECONOMY.PACKAGES.map(pkg => {
                const totalTL = pkg.tl + pkg.bonus;
                return `
                    <div class="charge-card" onclick="TimeLinkSystem.file.purchaseTL('${pkg.id}')">
                        <div class="icon">üí∞</div>
                        <h3>${pkg.name}</h3>
                        <div class="amount">${totalTL.toLocaleString()} TL</div>
                        <div style="color: white; font-size: 1.2rem; margin-bottom: 8px;">${pkg.price}Ïõê</div>
                        ${pkg.bonus > 0 ? 
                            `<div style="background: var(--success); color: white; padding: 4px 12px; border-radius: var(--radius-full); display: inline-block; font-size: 12px;">
                                +${pkg.bonus.toLocaleString()} TL Î≥¥ÎÑàÏä§
                            </div>` : 
                            ''}
                        <div style="color: var(--text-secondary); font-size: 12px; margin-top: 12px;">${pkg.desc}</div>
                    </div>
                `;
            }).join('');
        },
        
        openAdModal: function() {
            if (!TimeLinkSystem.currentUser) {
                TimeLinkSystem.ui.showToast('Please login', 'error');
                return;
            }
            
            const remaining = TimeLinkSystem.wallet.getTodayAdRewardRemaining();
            if (remaining <= 0) {
                TimeLinkSystem.ui.showToast('Ïò§Îäò Í¥ëÍ≥† Î≥¥ÏÉÅÏùÑ Î™®Îëê Î∞õÏïòÏäµÎãàÎã§ (600 TL)', 'warning');
                return;
            }
            
            document.getElementById('todayAdRewardRemaining').textContent = remaining.toLocaleString();
            document.getElementById('adModal').style.display = 'flex';
        },
        
        closeAdModal: function() {
            document.getElementById('adModal').style.display = 'none';
        },
        
        openPurchaseModal: function() {
            TimeLinkSystem.ui.initPurchasePackages();
            document.getElementById('purchaseModal').style.display = 'flex';
        },
        
        closePurchaseModal: function() {
            document.getElementById('purchaseModal').style.display = 'none';
        },
        
        closeChargeModal: function() {
            document.getElementById('chargeModal').style.display = 'none';
        },
        
        showToast: function(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
    }
};

// ===== Event Listeners =====
document.addEventListener('DOMContentLoaded', function() {
    // File input listener
    const fileInput = document.getElementById('fileInput');
    if (fileInput) {
        fileInput.addEventListener('change', function(e) {
            TimeLinkSystem.file.handleSelect(e);
        });
    }
    
    // Mining amount listener
    const miningInput = document.getElementById('miningAmount');
    if (miningInput) {
        miningInput.addEventListener('input', function() {
            TimeLinkSystem.mining.updatePreview();
        });
    }
    
    // Close modals when clicking outside
    window.addEventListener('click', function(e) {
        if (e.target.classList.contains('modal')) {
            e.target.style.display = 'none';
        }
    });
    
    // Initialize copyright number
    const copyrightNumber = document.getElementById('copyrightNumber');
    if (copyrightNumber) {
        copyrightNumber.value = 'CR-' + Date.now();
    }
    
    // Initialize default data
    TimeLinkSystem.ui.initPurchasePackages();
    TimeLinkSystem.ui.updateCarList();
    
    // Daily reset (simulated)
    setInterval(() => {
        if (TimeLinkSystem.wallet) {
            TimeLinkSystem.wallet.resetDailyAdReward();
        }
    }, 86400000); // 24ÏãúÍ∞ÑÎßàÎã§ Î¶¨ÏÖã
});

// ===== Export for console debugging =====
window.TimeLinkSystem = TimeLinkSystem;
window.ECONOMY = ECONOMY;
window.Blockchain = Blockchain;
window.CopyrightRegistry = CopyrightRegistry;
window.RoyaltyDistributor = RoyaltyDistributor;
window.MiningSystem = MiningSystem;
window.CarSystem = CarSystem;
window.RadioSystem = RadioSystem;
window.TONSystem = TONSystem;
window.AdSystem = AdSystem;
</script>

</body>
</html>
