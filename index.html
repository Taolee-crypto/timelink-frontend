<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimeLink v20.1 - TL3 íŒŒì¼ ì™„ì „ì²´ + ëª¨ë“  ê¸°ëŠ¥</title>
  
  <style>
    /* ===== ì „ì²´ ìŠ¤íƒ€ì¼ ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --warning: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      --danger: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%);
      --dark: #1a1a2e;
      --light: #f8f9fa;
      --shadow: 0 10px 40px rgba(0,0,0,0.1);
      --shadow-lg: 0 20px 60px rgba(0,0,0,0.2);
      --radio: linear-gradient(135deg, #1db954 0%, #1ed760 100%);
      --car: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
      --ton: linear-gradient(135deg, #0088CC 0%, #00A8E8 100%);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: var(--dark);
    }

    /* ===== ë¡œê·¸ì¸ ===== */
    .auth-container {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }

    .auth-box {
      background: white;
      padding: 50px;
      border-radius: 30px;
      box-shadow: var(--shadow-lg);
      max-width: 450px;
      width: 100%;
      text-align: center;
    }

    .logo h1 {
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 3rem;
      font-weight: 800;
      margin-bottom: 10px;
    }

    .version-badge {
      background: var(--secondary);
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 30px;
    }

    .google-login-btn {
      background: #4285F4;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 1.2rem;
      padding: 20px;
      border-radius: 50px;
      margin: 30px 0;
      border: none;
      cursor: pointer;
      width: 100%;
    }

    .google-login-btn:hover {
      background: #3367D6;
      transform: translateY(-3px);
    }

    /* ===== ë©”ì¸ ì•± ===== */
    .app-container {
      display: none;
      max-width: 1600px;
      margin: 0 auto;
      padding: 20px;
    }

    .app-header {
      background: white;
      padding: 25px 40px;
      border-radius: 25px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow);
    }

    .header-left h1 {
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2rem;
      font-weight: 800;
    }

    .header-right {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .balance-cards {
      display: flex;
      gap: 16px;
    }

    .balance-card {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 12px 20px;
      border-radius: 15px;
      text-align: center;
    }

    .balance-card .label {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 6px;
    }

    .balance-card .amount {
      font-size: 22px;
      font-weight: 800;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .avatar-circle {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 800;
      font-size: 20px;
    }

    .btn-logout {
      background: var(--secondary);
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
    }

    .btn-logout:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(245, 87, 108, 0.3);
    }

    /* ===== íƒ­ ===== */
    .tabs {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      overflow-x: auto;
      padding-bottom: 10px;
      flex-wrap: wrap;
    }

    .tab {
      background: white;
      padding: 18px 30px;
      border-radius: 15px;
      cursor: pointer;
      font-weight: 700;
      transition: all 0.3s;
      box-shadow: var(--shadow);
      white-space: nowrap;
      border: none;
    }

    .tab:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }

    .tab.active {
      background: var(--primary);
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ===== ì¹´ë“œ ===== */
    .card {
      background: white;
      padding: 40px;
      border-radius: 25px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
    }

    .card h2 {
      font-size: 1.8rem;
      margin-bottom: 25px;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* ===== í†µê³„ ===== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: var(--primary);
    }

    .stat-card .icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    .stat-card .label {
      font-size: 13px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 10px;
    }

    .stat-card .value {
      font-size: 2.5rem;
      font-weight: 800;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* ===== íŒŒì¼ ì—…ë¡œë“œ ===== */
    .upload-zone {
      border: 3px dashed #667eea;
      border-radius: 20px;
      padding: 60px 40px;
      text-align: center;
      background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 30px;
    }

    .upload-zone:hover {
      border-color: #764ba2;
      background: linear-gradient(135deg, #e8ecff 0%, #d8dcff 100%);
      transform: scale(1.02);
    }

    .upload-zone .icon {
      font-size: 5rem;
      margin-bottom: 20px;
    }

    /* ===== íŒŒì¼ ëª©ë¡ ===== */
    .file-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
      gap: 25px;
    }

    .file-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: var(--shadow);
      border-top: 5px solid #667eea;
      transition: all 0.3s;
    }

    .file-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 50px rgba(0,0,0,0.15);
    }

    .file-thumbnail {
      height: 180px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      color: white;
      position: relative;
    }

    .badge {
      position: absolute;
      top: 16px;
      right: 16px;
      padding: 6px 16px;
      border-radius: 30px;
      font-size: 12px;
      font-weight: 700;
      color: white;
    }

    .badge-mining { background: #4facfe; }
    .badge-no-tl { background: #f43f5e; }
    .badge-shared { background: #ff9800; }
    .badge-copyright { 
      background: #8b5cf6; 
      left: 16px;
      right: auto;
    }

    .file-info {
      padding: 25px;
    }

    .file-name {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 6px;
      color: #333;
    }

    .file-artist {
      color: #666;
      font-size: 0.95rem;
      margin-bottom: 15px;
    }

    .copyright-info {
      background: #f0f4ff;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      font-size: 13px;
      border-left: 4px solid #8b5cf6;
    }

    .contract-info {
      background: #f8f9fa;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      font-size: 13px;
      border-left: 4px solid #667eea;
    }

    .tl-info {
      background: #fff3cd;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      font-size: 13px;
      border-left: 4px solid #ff9800;
    }

    .file-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 14px;
      color: #666;
    }

    .tl-progress {
      width: 100%;
      height: 6px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      margin: 16px 0;
    }

    .tl-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transition: width 0.3s;
    }

    .tl-progress-empty {
      height: 100%;
      background: #f43f5e;
      width: 100%;
    }

    .file-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 20px;
    }

    .btn-play, .btn-charge, .btn-share, .btn-play-disabled {
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      color: white;
      font-size: 14px;
    }

    .btn-play {
      background: var(--success);
    }

    .btn-play-disabled {
      background: #999;
      cursor: not-allowed;
      opacity: 0.7;
    }

    .btn-charge {
      background: var(--warning);
    }

    .btn-share {
      background: var(--primary);
      grid-column: span 2;
    }

    .btn-play:hover:not(.btn-play-disabled), 
    .btn-charge:hover, 
    .btn-share:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    /* ===== ê³µìœ  í”Œë ˆì´ìŠ¤ ===== */
    .share-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 20px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .share-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .share-stat-card {
      background: white;
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      box-shadow: var(--shadow);
    }

    .share-stat-value {
      font-size: 2rem;
      font-weight: 800;
      color: #667eea;
      margin-top: 8px;
    }

    .share-filter {
      display: flex;
      gap: 12px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 10px 24px;
      border: 2px solid #e0e0e0;
      border-radius: 30px;
      background: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .filter-btn:hover {
      border-color: #667eea;
    }

    .filter-btn.active {
      background: var(--primary);
      color: white;
      border-color: transparent;
    }

    /* ===== ë¼ë””ì˜¤ ===== */
    .radio-header {
      background: var(--radio);
      color: white;
      padding: 40px;
      border-radius: 25px;
      margin-bottom: 30px;
    }

    .radio-channel-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: var(--shadow);
    }

    .channel-header {
      background: var(--radio);
      color: white;
      padding: 20px;
    }

    .channel-playlist {
      padding: 20px;
    }

    .now-playing {
      background: #f0f9ff;
      padding: 15px;
      border-radius: 15px;
      margin-bottom: 15px;
      border-left: 4px solid #1db954;
    }

    .radio-channels {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 24px;
    }

    /* ===== ìƒì—…ë°©ì†¡ ===== */
    .commercial-header {
      background: var(--secondary);
      color: white;
      padding: 40px;
      border-radius: 25px;
      margin-bottom: 30px;
    }

    .commercial-channel-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: var(--shadow);
    }

    .commercial-channel-header {
      background: var(--secondary);
      color: white;
      padding: 20px;
    }

    .business-badge {
      background: rgba(255,255,255,0.2);
      padding: 5px 15px;
      border-radius: 30px;
      font-size: 12px;
      font-weight: 600;
    }

    /* ===== ì°¨ëŸ‰ ===== */
    .car-contribution-box {
      background: var(--car);
      color: white;
      padding: 40px;
      border-radius: 25px;
      margin-bottom: 30px;
    }

    .car-listening-time {
      font-size: 2.8rem;
      font-weight: 800;
      color: white;
    }

    /* ===== ì±„êµ´ ===== */
    .mining-limit-box {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 15px;
      border-left: 8px solid #ff9800;
      margin-bottom: 24px;
    }

    .mining-progress {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      margin: 16px 0;
    }

    .mining-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffd700, #ffa500);
      transition: width 0.3s;
    }

    /* ===== ì¶©ì „ ì˜µì…˜ ===== */
    .charge-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .charge-card {
      background: white;
      border: 3px solid #e0e0e0;
      border-radius: 20px;
      padding: 35px;
      text-align: center;
      transition: all 0.3s;
      cursor: pointer;
    }

    .charge-card:hover {
      border-color: #667eea;
      transform: translateY(-5px);
    }

    .charge-card .icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .charge-card .amount {
      font-size: 2rem;
      font-weight: 800;
      background: var(--success);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* ===== ê¸ˆë¦¬ì €ë¸Œ ===== */
    .gold-reserve-card {
      background: linear-gradient(135deg, #f7b731 0%, #ffda79 100%);
      color: white;
      padding: 40px;
      border-radius: 25px;
      margin-bottom: 30px;
    }

    /* ===== TON ===== */
    .ton-card {
      background: var(--ton);
      color: white;
      padding: 40px;
      border-radius: 25px;
      margin-bottom: 30px;
    }

    .ton-badge {
      background: rgba(255,255,255,0.2);
      padding: 8px 20px;
      border-radius: 30px;
      font-size: 12px;
      font-weight: 600;
    }

    /* ===== í”Œë ˆì´ì–´ ëª¨ë‹¬ ===== */
    .player-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.95);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .player-content {
      background: white;
      padding: 40px;
      border-radius: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .player-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 5px;
      color: #333;
    }

    .player-artist {
      color: #666;
      font-size: 1.2rem;
      margin-bottom: 20px;
    }

    .player-copyright-panel {
      background: #f0f4ff;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      border-left: 6px solid #8b5cf6;
    }

    .player-contract-panel {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      border-left: 6px solid #667eea;
    }

    .player-tl-panel {
      background: #fff3cd;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      border-left: 6px solid #ff9800;
    }

    .player-tl-amount {
      font-size: 2.8rem;
      font-weight: 800;
      color: #667eea;
      margin-bottom: 8px;
    }

    .player-revenue-panel {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      border-left: 6px solid #2196F3;
    }

    .player-progress {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      margin: 20px 0;
    }

    .player-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      width: 0%;
      transition: width 0.2s linear;
    }

    .player-time {
      display: flex;
      justify-content: space-between;
      color: #666;
      font-size: 14px;
      margin-bottom: 24px;
    }

    .player-controls {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    /* ===== ì¶©ì „ ëª¨ë‹¬ ===== */
    .charge-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      z-index: 1500;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .charge-content {
      background: white;
      padding: 40px;
      border-radius: 30px;
      max-width: 500px;
      width: 90%;
    }

    .charge-content h2 {
      margin-bottom: 24px;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .charge-content input {
      width: 100%;
      padding: 16px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-size: 16px;
      margin-bottom: 16px;
    }

    /* ===== í† ìŠ¤íŠ¸ ===== */
    .toast {
      position: fixed;
      top: 30px;
      right: 30px;
      background: white;
      padding: 18px 28px;
      border-radius: 100px;
      box-shadow: var(--shadow-lg);
      display: none;
      z-index: 3000;
      min-width: 350px;
      border-left: 6px solid #4CAF50;
      animation: slideIn 0.3s;
    }

    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .toast.success { border-left-color: #4CAF50; }
    .toast.error { border-left-color: #f44336; }
    .toast.warning { border-left-color: #ff9800; }
    .toast.info { border-left-color: #2196F3; }

    /* ===== ë°ëª¨ ë°°ì§€ ===== */
    .demo-badge {
      background: #ff9800;
      color: white;
      padding: 5px 15px;
      border-radius: 30px;
      font-size: 12px;
      font-weight: 700;
      display: inline-block;
      margin-left: 10px;
    }

    /* ===== ë°˜ì‘í˜• ===== */
    @media (max-width: 768px) {
      .app-header {
        flex-direction: column;
        gap: 20px;
      }
      
      .header-right {
        flex-direction: column;
        width: 100%;
      }
      
      .balance-cards {
        flex-direction: column;
      }
      
      .tabs {
        overflow-x: auto;
        flex-wrap: nowrap;
      }
      
      .file-list {
        grid-template-columns: 1fr;
      }
      
      .radio-channels {
        grid-template-columns: 1fr;
      }
      
      .share-stats {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<!-- í† ìŠ¤íŠ¸ -->
<div id="toast" class="toast"></div>

<!-- ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ -->
<audio id="audioPlayer" style="display: none;"></audio>

<!-- ===== ë¡œê·¸ì¸ í™”ë©´ ===== -->
<div id="authContainer" class="auth-container">
  <div class="auth-box">
    <div class="logo">
      <h1>â° TimeLink</h1>
      <p>TL3 íŒŒì¼ + ìë™ì°¨ + ë¼ë””ì˜¤ + ìƒì—…ë°©ì†¡ + ì±„êµ´ + ê¸ˆë¦¬ì €ë¸Œ</p>
    </div>
    <div class="version-badge">
      ğŸš€ v20.1 - ëª¨ë“  ê¸°ëŠ¥ í†µí•© <span class="demo-badge">DEMO</span>
    </div>
    
    <button class="google-login-btn" onclick="TimeLinkSystem.demo.login()">
      <span style="font-size:1.8rem;">ğŸ”</span> Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ (ë°ëª¨)
    </button>
    
    <p style="color:#666; margin-top:30px; font-size:0.95rem;">
      â€» ë°ëª¨ ëª¨ë“œ: ëª¨ë“  ì•Œê³ ë¦¬ì¦˜ì´ ì‹œë®¬ë ˆì´ì…˜ë©ë‹ˆë‹¤.<br>
      <strong>TL3 + ìë™ì°¨ + ë¼ë””ì˜¤ + ìƒì—…ë°©ì†¡ + ì±„êµ´ + ê¸ˆë¦¬ì €ë¸Œ + TON</strong>
    </p>
  </div>
</div>

<!-- ===== ë©”ì¸ ì•± ===== -->
<div id="appContainer" class="app-container" style="display:none;">
  
  <!-- í—¤ë” -->
  <div class="app-header">
    <div class="header-left">
      <h1>â° TimeLink</h1>
      <span class="demo-badge" style="margin-left:15px;">ëª¨ë“  ê¸°ëŠ¥ í†µí•©</span>
    </div>
    <div class="header-right">
      <div class="balance-cards">
        <div class="balance-card">
          <div class="label">ğŸ’° ë‚´ ì§€ê°‘</div>
          <div class="amount" id="walletBalance">25,000</div>
        </div>
        <div class="balance-card">
          <div class="label">ğŸª™ ë³´ìœ  TLC</div>
          <div class="amount" id="tlcBalance">1,250.75</div>
        </div>
        <div class="balance-card">
          <div class="label">ğŸ“Š ê¸°ì—¬ì§€ìˆ˜</div>
          <div class="amount" id="contributionIndex">4.75</div>
        </div>
      </div>
      <div class="user-profile">
        <div class="avatar-circle" id="userAvatar">G</div>
        <div>
          <div style="font-weight:700;" id="currentUsername">Google íˆ¬ìì</div>
          <div style="font-size:12px; color:#f5576c;" id="userStatus">ğŸ¢ ì‚¬ì—…ì (ë°ëª¨)</div>
        </div>
      </div>
      <button class="btn-logout" onclick="TimeLinkSystem.demo.logout()">ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  </div>

  <!-- ===== íƒ­ ë„¤ë¹„ê²Œì´ì…˜ - ëª¨ë“  ê¸°ëŠ¥ í¬í•¨! ===== -->
  <div class="tabs">
    <div class="tab active" onclick="TimeLinkSystem.ui.switchTab('dashboard')">ğŸ“Š ëŒ€ì‹œë³´ë“œ</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('upload')">ğŸ“¤ TL3 ìƒì„±</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('library')">ğŸµ ë‚´ TL3 íŒŒì¼</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('shareplace')">ğŸ”„ ê³µìœ  í”Œë ˆì´ìŠ¤</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('radio')">ğŸ“» ë¼ë””ì˜¤</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('commercial')">ğŸ“º ìƒì—…ë°©ì†¡</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('mining')">â›ï¸ TLC ì±„êµ´</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('car')">ğŸš— ì°¨ëŸ‰ ì²­ì·¨</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('gold')">ğŸ† ê¸ˆë¦¬ì €ë¸Œ</div>
    <div class="tab" onclick="TimeLinkSystem.ui.switchTab('ton')">â¬¡ TON TLC</div>
  </div>

  <!-- ===== 1. ëŒ€ì‹œë³´ë“œ ===== -->
  <div id="tabDashboard" class="tab-content active">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="icon">ğŸ’°</div>
        <div class="label">ë‚´ ì§€ê°‘</div>
        <div class="value" id="dashWallet">25,000</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸª™</div>
        <div class="label">ë³´ìœ  TLC</div>
        <div class="value" id="dashTLC">1,250.75</div>
      </div>
      <div class="stat-card">
        <div class="icon">ğŸ“Š</div>
        <div class="label">ê¸°ì—¬ì§€ìˆ˜</div>
        <div class="value" id="dashIndex">4.75</div>
      </div>
      <div class="stat-card">
        <div class="icon">â›ï¸</div>
        <div class="label">ì±„êµ´ í•œë„</div>
        <div class="value" id="dashMiningLimit">12,500 TL</div>
      </div>
    </div>
    
    <!-- ì‹œìŠ¤í…œ í†µê³„ -->
    <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-bottom:30px;">
      <div style="background:white; padding:20px; border-radius:15px; text-align:center; box-shadow:var(--shadow);">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸ“»</div>
        <div style="font-weight:700;">ë¼ë””ì˜¤ ì²­ì·¨ì</div>
        <div style="font-size:1.8rem; font-weight:800; color:#667eea;">1,234</div>
      </div>
      <div style="background:white; padding:20px; border-radius:15px; text-align:center; box-shadow:var(--shadow);">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸ“º</div>
        <div style="font-weight:700;">ìƒì—…ë°©ì†¡ ì‹œì²­</div>
        <div style="font-size:1.8rem; font-weight:800; color:#f5576c;">567</div>
      </div>
      <div style="background:white; padding:20px; border-radius:15px; text-align:center; box-shadow:var(--shadow);">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸš—</div>
        <div style="font-weight:700;">ì°¨ëŸ‰ ë“±ë¡</div>
        <div style="font-size:1.8rem; font-weight:800; color:#3498db;">892</div>
      </div>
      <div style="background:white; padding:20px; border-radius:15px; text-align:center; box-shadow:var(--shadow);">
        <div style="font-size:2rem; margin-bottom:10px;">â›ï¸</div>
        <div style="font-weight:700;">ì˜¤ëŠ˜ ì±„êµ´ëŸ‰</div>
        <div style="font-size:1.8rem; font-weight:800; color:#ff9800;">2,345 TLC</div>
      </div>
    </div>
    
    <!-- ì•Œê³ ë¦¬ì¦˜ ì„¤ëª… -->
    <div style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding:30px; border-radius:20px; color:white; margin-bottom:30px;">
      <h2 style="color:white; margin-bottom:20px;">ğŸ§  TimeLink í†µí•© ì‹œìŠ¤í…œ</h2>
      <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:20px; text-align:center;">
        <div>
          <div style="font-size:2.5rem;">ğŸµ</div>
          <div style="font-weight:700;">TL3 íŒŒì¼</div>
          <div style="font-size:0.9rem; color:#ffd700;">MP3 + ì‹œê°„ + ì €ì‘ê¶Œ</div>
        </div>
        <div>
          <div style="font-size:2.5rem;">ğŸ“»</div>
          <div style="font-weight:700;">ë¼ë””ì˜¤</div>
          <div style="font-size:0.9rem; color:#ffd700;">1ì´ˆ = 1TL ì†Œëª¨</div>
        </div>
        <div>
          <div style="font-size:2.5rem;">ğŸš—</div>
          <div style="font-weight:700;">ì°¨ëŸ‰ ì²­ì·¨</div>
          <div style="font-size:0.9rem; color:#ffd700;">1ë¶„ = 10TL ê¸°ì—¬ë„</div>
        </div>
        <div>
          <div style="font-size:2.5rem;">â›ï¸</div>
          <div style="font-weight:700;">TLC ì±„êµ´</div>
          <div style="font-size:0.9rem; color:#ffd700;">ë³´ìœ  TL 50% í•œë„</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 2. TL3 íŒŒì¼ ìƒì„± ===== -->
  <div id="tabUpload" class="tab-content">
    <div class="card">
      <h2>ğŸ“¤ TL3 íŒŒì¼ ìƒì„±</h2>
      <div style="background:#e8f5e9; padding:15px; border-radius:15px; margin-bottom:20px;">
        <p style="color:#2e7d32; font-weight:700;">âœ… TL3 íŒŒì¼ ìƒì„± ì•Œê³ ë¦¬ì¦˜</p>
        <p style="color:#2e7d32; font-size:14px; margin-top:8px;">
          1. MP3 íŒŒì¼ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ<br>
          2. ì €ì‘ê¶Œ í•´ì‹œ ìƒì„± (SHA-256)<br>
          3. ë¸”ë¡ì²´ì¸ì— ì €ì‘ê¶Œ ë“±ë¡<br>
          4. ìˆ˜ìµ ë¶„ë°° ê³„ì•½ ì„¤ì • (5:5 / 7:3)<br>
          5. TL3 íŒŒì¼ ìƒì„± (ì´ˆê¸° TL = 0)
        </p>
      </div>
      <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
        <div class="icon">â˜ï¸</div>
        <h3 style="color:#333; margin-bottom:10px;">í´ë¦­í•˜ì—¬ ìŒì•… íŒŒì¼ ì„ íƒ</h3>
        <p style="color:#666;">MP3, WAV, FLAC (ìµœëŒ€ 100MB)</p>
      </div>
      <input type="file" id="fileInput" style="display:none;" accept="audio/*">
      
      <div id="uploadForm" style="display:none; margin-top:30px;">
        <div style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ê³¡ ì œëª©</label>
          <input type="text" id="songTitle" placeholder="ë…¸ë˜ ì œëª©" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
        </div>
        <div style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì•„í‹°ìŠ¤íŠ¸</label>
          <input type="text" id="songArtist" placeholder="ì•„í‹°ìŠ¤íŠ¸ ì´ë¦„" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
        </div>
        
        <div style="background:#f0f4ff; padding:24px; border-radius:15px; margin-bottom:24px;">
          <h3 style="margin-bottom:20px; color:#8b5cf6;">ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</h3>
          <div style="margin-bottom:20px;">
            <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì €ì‘ê¶Œì</label>
            <input type="text" id="copyrightOwner" value="Google íˆ¬ìì" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
          </div>
          <div style="margin-bottom:20px;">
            <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì €ì‘ê¶Œ ë“±ë¡ ë²ˆí˜¸</label>
            <input type="text" id="copyrightNumber" value="CR-" + Date.now() style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px; background:#f8f9fa;" readonly>
          </div>
        </div>
        
        <div style="background:#f8f9fa; padding:24px; border-radius:15px; margin-bottom:24px;">
          <h3 style="margin-bottom:20px; color:#667eea;">ğŸ“Š ìˆ˜ìµ ë¶„ë°° ê³„ì•½</h3>
          <div style="margin-bottom:20px;">
            <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ê³„ì•½ ìœ í˜•</label>
            <select id="revenueShare" style="width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:12px;">
              <option value="55">5:5 ê³„ì•½ - ì±„êµ´ê¶Œ ìˆìŒ (í¬ë¦¬ì—ì´í„° 50% / í”Œë«í¼ 50%)</option>
              <option value="73">7:3 ê³„ì•½ - ì±„êµ´ê¶Œ ì—†ìŒ (í¬ë¦¬ì—ì´í„° 70% / í”Œë«í¼ 30%)</option>
            </select>
          </div>
        </div>
        
        <button class="btn btn-primary" onclick="TimeLinkSystem.file.create()" style="width:100%; padding:18px; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; border:none; border-radius:15px; font-weight:700; cursor:pointer;">
          âœ¨ TL3 íŒŒì¼ ìƒì„± (ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰)
        </button>
      </div>
    </div>
  </div>

  <!-- ===== 3. ë‚´ TL3 íŒŒì¼ ===== -->
  <div id="tabLibrary" class="tab-content">
    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <h2>ğŸµ ë‚´ TL3 íŒŒì¼</h2>
        <div>
          <span style="background:#4facfe; color:white; padding:8px 16px; border-radius:30px;">5:5 = ì±„êµ´ê¶Œ O</span>
          <span style="background:#fa709a; color:white; padding:8px 16px; border-radius:30px; margin-left:10px;">7:3 = ì±„êµ´ê¶Œ X</span>
        </div>
      </div>
      <div id="fileList" class="file-list"></div>
      <div id="emptyLibrary" style="text-align:center; padding:60px; color:#999; display:none;">
        <div style="font-size:4rem; margin-bottom:20px;">ğŸµ</div>
        <h3>ìƒì„±í•œ TL3 íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p style="margin-top:10px;">TL3 íŒŒì¼ì„ ìƒì„±í•˜ê³  ì €ì‘ê¶Œì„ ë“±ë¡í•˜ì„¸ìš”!</p>
        <button class="btn btn-primary" onclick="TimeLinkSystem.ui.switchTab('upload')" style="margin-top:20px; padding:14px 40px;">ì²« TL3 íŒŒì¼ ìƒì„±</button>
      </div>
    </div>
  </div>

  <!-- ===== 4. ê³µìœ  í”Œë ˆì´ìŠ¤ ===== -->
  <div id="tabShareplace" class="tab-content">
    <div class="share-header">
      <div>
        <h2 style="color:white; margin-bottom:10px;">ğŸ”„ ê³µìœ  í”Œë ˆì´ìŠ¤</h2>
        <p style="color:rgba(255,255,255,0.9);">
          <strong>ê³µìœ  ë¹„ìš©: 5,000 TL (ë‚´ ì§€ê°‘ â†’ í”Œë«í¼ ìˆ˜ìµ)</strong>
        </p>
      </div>
      <div style="background:rgba(255,255,255,0.2); padding:12px 28px; border-radius:30px;">
        <span id="sharedCount" style="font-weight:700; color:white;">0</span>ê°œ ê³µìœ ë¨
      </div>
    </div>

    <div class="share-stats">
      <div class="share-stat-card">
        <div style="color:#666;">ì „ì²´ ê³µìœ </div>
        <div class="share-stat-value" id="totalSharedCount">0</div>
      </div>
      <div class="share-stat-card">
        <div style="color:#666;">5:5 ê³„ì•½</div>
        <div class="share-stat-value" id="shared55Count">0</div>
      </div>
      <div class="share-stat-card">
        <div style="color:#666;">7:3 ê³„ì•½</div>
        <div class="share-stat-value" id="shared73Count">0</div>
      </div>
    </div>

    <div class="share-filter">
      <button class="filter-btn active" onclick="TimeLinkSystem.share.filter('all')">ì „ì²´</button>
      <button class="filter-btn" onclick="TimeLinkSystem.share.filter('55')">5:5 ê³„ì•½</button>
      <button class="filter-btn" onclick="TimeLinkSystem.share.filter('73')">7:3 ê³„ì•½</button>
      <button class="filter-btn" onclick="TimeLinkSystem.share.filter('mining')">ì±„êµ´ ê°€ëŠ¥</button>
    </div>

    <div id="sharedMusicList" class="file-list"></div>
  </div>

  <!-- ===== 5. ë¼ë””ì˜¤ ===== -->
  <div id="tabRadio" class="tab-content">
    <div class="radio-header">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:10px;">ğŸ“» TimeLink Radio</h2>
          <p style="color:rgba(255,255,255,0.9);">ê³µìœ  í”Œë ˆì´ìŠ¤ ìŒì•… 24ì‹œê°„ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°</p>
          <p style="color:rgba(255,255,255,0.9); margin-top:10px;"><strong>ğŸ§ 1ì´ˆ ì¬ìƒ = ë‚´ ì§€ê°‘ 1TL ì†Œëª¨</strong></p>
        </div>
        <div style="background:rgba(255,255,255,0.2); padding:12px 28px; border-radius:40px;">ğŸ”´ LIVE 24/7</div>
      </div>
    </div>
    <div id="radioChannels" class="radio-channels"></div>
  </div>

  <!-- ===== 6. ìƒì—…ë°©ì†¡ ===== -->
  <div id="tabCommercial" class="tab-content">
    <div class="commercial-header">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:10px;">ğŸ“º TimeLink Commercial</h2>
          <p style="color:rgba(255,255,255,0.9);">ì‚¬ì—…ì ë“±ë¡ í¬ë¦¬ì—ì´í„° ì „ìš©</p>
          <p style="color:rgba(255,255,255,0.9); margin-top:10px;"><strong>ğŸ§ 1ì´ˆ ì¬ìƒ = ë‚´ ì§€ê°‘ 1TL ì†Œëª¨</strong></p>
        </div>
        <div style="background:rgba(255,255,255,0.2); padding:12px 28px; border-radius:40px;">ğŸ’° BUSINESS ONLY</div>
      </div>
    </div>
    <div id="commercialChannels" class="radio-channels"></div>
    
    <div id="businessApplySection" class="card" style="text-align:center; display:none;">
      <h3>ì‚¬ì—…ì ë“±ë¡í•˜ê¸°</h3>
      <p style="color:#666; margin:20px 0;">ìƒì—…ë°©ì†¡ì„ ì´ìš©í•˜ë ¤ë©´ ì‚¬ì—…ì ë“±ë¡ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
      <button class="btn btn-business" onclick="TimeLinkSystem.business.apply()" style="width:auto; padding:15px 40px; background:var(--secondary); color:white; border:none; border-radius:12px; font-weight:700;">ì‚¬ì—…ì ì‹ ì²­</button>
    </div>
  </div>

  <!-- ===== 7. TLC ì±„êµ´ ===== -->
  <div id="tabMining" class="tab-content">
    <div class="card">
      <h2>â›ï¸ TLC ì±„êµ´</h2>
      
      <div class="mining-limit-box">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div>
            <div style="font-weight:700; font-size:1.2rem; margin-bottom:10px;">âš ï¸ ì±„êµ´ í•œë„: ë³´ìœ  TLì˜ 50%</div>
            <div style="font-size:2rem; font-weight:800; color:#ff9800;" id="miningLimitAmount">12,500 / 25,000 TL</div>
          </div>
          <div>
            <div style="color:#666; margin-bottom:5px;">ë‚´ ê¸°ì—¬ì§€ìˆ˜</div>
            <div style="font-size:2rem; font-weight:800; color:#667eea;" id="miningIndexDisplay">4.75</div>
          </div>
        </div>
        <div class="mining-progress">
          <div class="mining-progress-fill" style="width:50%;"></div>
        </div>
      </div>

      <div id="miningPermissionCheck" style="background:#fff3cd; padding:20px; border-radius:15px; margin:30px 0;">
        <div style="display:flex; align-items:center; gap:15px;">
          <span style="font-size:2rem;">â›ï¸</span>
          <div>
            <span style="font-weight:700; color:#10b981;" id="miningPermissionMessage">âœ… ì±„êµ´ê¶Œ ìˆìŠµë‹ˆë‹¤! (5:5 ê³„ì•½ íŒŒì¼ ë³´ìœ ì¤‘)</span>
            <p style="color:#856404; font-size:14px; margin-top:5px;">* 5:5 ê³„ì•½ TL3 íŒŒì¼ì„ ë³´ìœ í•´ì•¼ ì±„êµ´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
          </div>
        </div>
      </div>

      <div style="margin-top:30px;">
        <div style="margin-bottom:20px;">
          <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì±„êµ´í•  TL ì–‘ (ìµœëŒ€ <span id="maxMiningLabel">12,500</span> TL)</label>
          <input type="number" id="miningAmount" placeholder="1000" min="1" value="1000" style="width:100%; padding:18px; border:2px solid #e0e0e0; border-radius:12px; font-size:18px;">
        </div>
        
        <div style="background:#f8f9fa; padding:25px; border-radius:15px; margin:20px 0;">
          <h3 style="margin-bottom:15px;">ğŸ“Š ì±„êµ´ ì˜ˆìƒëŸ‰</h3>
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span style="color:#666;">íˆ¬ì… TL:</span>
            <strong id="previewInput">1,000 TL</strong>
          </div>
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span style="color:#666;">ê¸°ì—¬ì§€ìˆ˜:</span>
            <strong id="previewIndex">4.75x</strong>
          </div>
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span style="color:#666;">íšë“ TLC:</span>
            <strong id="previewOutput" style="color:#10b981;">475.00 TLC</strong>
          </div>
        </div>

        <button class="btn btn-primary" onclick="TimeLinkSystem.mining.execute()" style="width:100%; padding:20px; font-size:1.2rem; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; border:none; border-radius:15px; font-weight:700; cursor:pointer;">
          â›ï¸ TLC ì±„êµ´ ì‹¤í–‰
        </button>
      </div>
    </div>
  </div>

  <!-- ===== 8. ì°¨ëŸ‰ ì²­ì·¨ ===== -->
  <div id="tabCar" class="tab-content">
    <div class="car-contribution-box">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <div>
          <h2 style="color:white; margin-bottom:15px;">ğŸš— ì°¨ëŸ‰ ì²­ì·¨</h2>
          <p style="color:rgba(255,255,255,0.9); font-size:1.2rem;">
            <strong style="font-size:2.5rem;">1ë¶„ = 10 TL</strong> ê¸°ì—¬ë„ (ì¼ë°˜ì˜ 2ë°°!)
          </p>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:24px; border-radius:20px; text-align:center;">
          <div style="font-size:14px; opacity:0.9; margin-bottom:8px;">ë‚´ ëˆ„ì  ìš´ì „ ì²­ì·¨</div>
          <div class="car-listening-time" id="userTotalDrivingTime">1,240ë¶„</div>
        </div>
      </div>
      
      <div style="background:rgba(255,255,255,0.1); padding:32px; border-radius:20px; margin-bottom:32px;">
        <h3 style="color:white; margin-bottom:24px;">ğŸš˜ ì°¨ëŸ‰ ë“±ë¡</h3>
        <div style="display:flex; gap:16px; flex-wrap:wrap;">
          <input type="text" id="carModel" placeholder="ì°¨ëŸ‰ ëª¨ë¸ (ì˜ˆ: Tesla Model 3)" style="flex:2; min-width:200px; padding:16px; border-radius:12px; border:none;">
          <input type="text" id="carPlate" placeholder="ë²ˆí˜¸íŒ" style="flex:1; min-width:140px; padding:16px; border-radius:12px; border:none;">
          <button class="btn btn-primary" onclick="TimeLinkSystem.car.register()" style="background:white; color:#3498db; width:auto; padding:16px 32px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— ë“±ë¡</button>
        </div>
        <div id="carList" style="margin-top:24px; color:white;">
          <p style="color:white; margin:5px 0;">ğŸš˜ Tesla Model 3 (123ê°€ 4567)</p>
          <p style="color:white; margin:5px 0;">ğŸš˜ Hyundai Ioniq 5 (567ë‚˜ 8901)</p>
        </div>
      </div>
      
      <div style="display:flex; gap:20px; flex-wrap:wrap;">
        <button class="btn btn-primary" onclick="TimeLinkSystem.car.addDrivingMinutes(10)" style="background:white; color:#3498db; flex:1; padding:18px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— +10ë¶„ (100 TL)</button>
        <button class="btn btn-primary" onclick="TimeLinkSystem.car.addDrivingMinutes(30)" style="background:white; color:#3498db; flex:1; padding:18px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— +30ë¶„ (300 TL)</button>
        <button class="btn btn-primary" onclick="TimeLinkSystem.car.addDrivingMinutes(60)" style="background:white; color:#3498db; flex:1; padding:18px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">ğŸš— +60ë¶„ (600 TL)</button>
      </div>
    </div>
  </div>

  <!-- ===== 9. ê¸ˆë¦¬ì €ë¸Œ ===== -->
  <div id="tabGold" class="tab-content">
    <div class="gold-reserve-card">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:16px;">ğŸ† ê¸ˆ ë‹´ë³´ ë¦¬ì €ë¸Œ</h2>
          <p style="color:rgba(255,255,255,0.9); font-size:1.1rem;">
            í”Œë«í¼ ìˆ˜ìµì˜ <strong style="font-size:1.5rem;">10%</strong>ë¥¼ ì‹¤ë¬¼ ê¸ˆìœ¼ë¡œ êµ¬ë§¤
          </p>
        </div>
        <div style="background:rgba(255,255,255,0.2); padding:20px; border-radius:20px; text-align:center;">
          <div style="font-size:14px; opacity:0.9;">ì‹¤ì‹œê°„ ë‹´ë³´ìœ¨</div>
          <div style="font-size:2.5rem; font-weight:800; color:white;" id="goldCollateralRatio">245%</div>
        </div>
      </div>
      <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-top:30px;">
        <div style="background:rgba(255,255,255,0.1); padding:20px; border-radius:15px;">
          <div style="font-size:12px; opacity:0.9;">ì´ ê¸ˆ ë³´ìœ ëŸ‰</div>
          <div style="font-size:1.8rem; font-weight:800; color:white;" id="goldAmount">10.24 g</div>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:20px; border-radius:15px;">
          <div style="font-size:12px; opacity:0.9;">ê¸ˆ ê°€ì¹˜ (USD)</div>
          <div style="font-size:1.8rem; font-weight:800; color:white;" id="goldValue">$665</div>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:20px; border-radius:15px;">
          <div style="font-size:12px; opacity:0.9;">í”Œë«í¼ ìˆ˜ìµ</div>
          <div style="font-size:1.8rem; font-weight:800; color:white;" id="platformRevenue">$6,650</div>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:20px; border-radius:15px;">
          <div style="font-size:12px; opacity:0.9;">ê¸ˆ íˆ¬ì (10%)</div>
          <div style="font-size:1.8rem; font-weight:800; color:white;" id="goldInvestment">$665</div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>ğŸ“Š ê¸ˆ êµ¬ë§¤ ë‚´ì—­ (ë¸”ë¡ì²´ì¸ ê¸°ë¡)</h2>
      <div id="goldTransactionList" style="max-height:300px; overflow-y:auto;"></div>
    </div>
  </div>

  <!-- ===== 10. TON TLC ===== -->
  <div id="tabTon" class="tab-content">
    <div class="ton-card">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:32px;">
        <div>
          <h2 style="color:white; font-size:2rem; margin-bottom:12px;">â¬¡ TON TLC Coin</h2>
          <p style="color:rgba(255,255,255,0.9);">TON ë¸”ë¡ì²´ì¸ ê¸°ë°˜ TLC ì½”ì¸</p>
        </div>
        <span class="ton-badge">TON Testnet</span>
      </div>
      <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:30px;">
        <div style="background:rgba(255,255,255,0.1); padding:30px; border-radius:20px;">
          <div style="font-size:14px; opacity:0.9; margin-bottom:12px;">ë‚´ TLC ì”ì•¡</div>
          <div style="font-size:2.8rem; font-weight:800; color:white;" id="tonTLCBalance">1,250.75</div>
          <div style="margin-top:16px; color:rgba(255,255,255,0.8);">â‰ˆ $12.50 USD</div>
        </div>
        <div style="background:rgba(255,255,255,0.1); padding:30px; border-radius:20px;">
          <div style="font-size:14px; opacity:0.9; margin-bottom:12px;">TON ì§€ê°‘</div>
          <div style="font-size:0.9rem; font-family:monospace; background:rgba(0,0,0,0.3); padding:12px; border-radius:12px; color:rgba(255,255,255,0.9);" id="tonWalletAddress">
            EQD4XhVpE_y6hF6lQr4YgB7KZQhJx2qQ8CQnQXq3Zx5Lp7vK
          </div>
          <button class="btn btn-primary" onclick="TimeLinkSystem.ton.connect()" style="margin-top:24px; background:white; color:#0088CC; width:100%; padding:16px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">
            ğŸ”— TON ì§€ê°‘ ì—°ê²°
          </button>
        </div>
      </div>
      <div style="margin-top:30px; background:rgba(255,255,255,0.1); padding:20px; border-radius:15px;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <span style="color:white;">TLC ì „ì†¡</span>
          <span style="color:rgba(255,255,255,0.8); font-size:13px;">ìˆ˜ìˆ˜ë£Œ 0.1 TON</span>
        </div>
        <div style="display:flex; gap:12px; margin-top:16px;">
          <input type="text" placeholder="TON ì§€ê°‘ ì£¼ì†Œ" style="flex:2; padding:14px; border-radius:10px; border:none;">
          <input type="number" placeholder="ìˆ˜ëŸ‰" style="flex:1; padding:14px; border-radius:10px; border:none;">
          <button class="btn btn-primary" style="background:white; color:#0088CC; padding:14px 24px; border-radius:10px; border:none; font-weight:700;">ì „ì†¡</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== í”Œë ˆì´ì–´ ëª¨ë‹¬ ===== -->
<div id="playerModal" class="player-modal">
  <div class="player-content">
    <div class="player-title" id="playerTitle">Now Playing</div>
    <div class="player-artist" id="playerArtist">Artist</div>
    
    <!-- ì €ì‘ê¶Œ ì •ë³´ íŒ¨ë„ -->
    <div class="player-copyright-panel" id="playerCopyrightPanel">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-weight:700; color:#8b5cf6;">ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</span>
        <span style="background:#8b5cf6; color:white; padding:4px 12px; border-radius:30px; font-size:11px;">ë¸”ë¡ì²´ì¸ ë“±ë¡</span>
      </div>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
        <div><span style="color:#666;">ì €ì‘ê¶Œì</span><br><strong id="playerCopyrightOwner">Google íˆ¬ìì</strong></div>
        <div><span style="color:#666;">ë“±ë¡ë²ˆí˜¸</span><br><strong id="playerCopyrightNumber">CR-2024-001234</strong></div>
      </div>
    </div>
    
    <!-- ê³„ì•½ ì •ë³´ íŒ¨ë„ -->
    <div class="player-contract-panel" id="playerContractPanel">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-weight:700; color:#667eea;">ğŸ“Š ìˆ˜ìµ ë¶„ë°° ê³„ì•½</span>
        <span style="background:#667eea; color:white; padding:4px 12px; border-radius:30px; font-size:11px;" id="playerContractType">5:5 ê³„ì•½</span>
      </div>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
        <div><span style="color:#666;">í¬ë¦¬ì—ì´í„° ëª«</span><br><strong id="playerCreatorShare">50%</strong></div>
        <div><span style="color:#666;">í”Œë«í¼ ëª«</span><br><strong id="playerPlatformShare">50%</strong></div>
      </div>
    </div>
    
    <!-- TL ì •ë³´ íŒ¨ë„ -->
    <div class="player-tl-panel">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-weight:700; color:#ff9800;">â³ TL ì”ì•¡</span>
        <span style="background:#ff9800; color:white; padding:4px 12px; border-radius:30px; font-size:11px;">1ì´ˆ = 1TL ì†Œëª¨</span>
      </div>
      <div class="player-tl-amount" id="playerTL">5,000 TL</div>
      <div style="color:#666; font-size:14px;" id="playerTimeRemaining">ì•½ 83ë¶„ 20ì´ˆ ë‚¨ìŒ</div>
    </div>
    
    <!-- ìˆ˜ìµ ì •ë³´ íŒ¨ë„ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸) -->
    <div class="player-revenue-panel" id="playerRevenuePanel">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-weight:700; color:#2196F3;">ğŸ’° ì‹¤ì‹œê°„ ìˆ˜ìµ</span>
        <span style="background:#2196F3; color:white; padding:4px 12px; border-radius:30px; font-size:11px;">1ì´ˆ = 0.1TL</span>
      </div>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
        <div>
          <span style="color:#666;">í¬ë¦¬ì—ì´í„°</span>
          <br><strong style="font-size:1.3rem; color:#2196F3;" id="playerCreatorRevenue">0.05 TL</strong>
        </div>
        <div>
          <span style="color:#666;">í”Œë«í¼</span>
          <br><strong style="font-size:1.3rem; color:#2196F3;" id="playerPlatformRevenue">0.05 TL</strong>
        </div>
      </div>
      <div style="margin-top:12px; padding-top:12px; border-top:1px solid rgba(33,150,243,0.2);">
        <span style="color:#666;">ì´ë²ˆ ì„¸ì…˜ ì´ ìˆ˜ìµ</span>
        <br><strong id="playerTotalRevenue">0.00 TL</strong>
      </div>
    </div>
    
    <!-- ì¬ìƒ ì§„í–‰ë°” -->
    <div class="player-progress">
      <div id="playerProgress" class="player-progress-fill"></div>
    </div>
    
    <div class="player-time">
      <span id="playerCurrentTime">0:00</span>
      <span id="playerTotalTime">83:20</span>
    </div>
    
    <div class="player-controls">
      <button class="btn btn-primary" onclick="TimeLinkSystem.player.togglePlayPause()" id="playPauseBtn" style="flex:1;">â¸ï¸ ì¼ì‹œì •ì§€</button>
      <button class="btn btn-secondary" onclick="TimeLinkSystem.player.stop()" style="flex:1; background:white; color:#667eea; border:2px solid #667eea;">â¹ï¸ ì¢…ë£Œ</button>
      <button class="btn btn-warning" onclick="TimeLinkSystem.player.openChargeModal()" style="flex:1; background:linear-gradient(135deg, #fa709a 0%, #fee140 100%); color:white;">ğŸ’° ì¶©ì „</button>
    </div>
  </div>
</div>

<!-- ===== ì¶©ì „ ëª¨ë‹¬ ===== -->
<div id="chargeModal" class="charge-modal">
  <div class="charge-content">
    <h2>ğŸ’° TL3 íŒŒì¼ ì¶©ì „</h2>
    <div style="margin-bottom:20px;">
      <label style="display:block; margin-bottom:8px; color:#333; font-weight:600;">ì¶©ì „í•  TL ì–‘ (1ì´ˆ = 1TL)</label>
      <input type="number" id="chargeAmount" placeholder="1000" min="100" step="100" value="1000">
      <p style="color:#666; font-size:14px; margin-top:12px;">
        í˜„ì¬ ë‚´ ì§€ê°‘: <strong id="currentTLBalance">25,000</strong> TL<br>
        ì¶©ì „ ì•Œê³ ë¦¬ì¦˜: ì§€ê°‘ ì°¨ê° â†’ íŒŒì¼ balance ì¦ê°€ â†’ ê±°ë˜ ì›ì¥ ê¸°ë¡
      </p>
    </div>
    <div style="display:flex; gap:16px;">
      <button class="btn btn-primary" onclick="TimeLinkSystem.file.charge()" style="flex:1; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; padding:16px; border:none; border-radius:12px; font-weight:700; cursor:pointer;">
        âš¡ ì¶©ì „ ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰
      </button>
      <button class="btn btn-secondary" onclick="TimeLinkSystem.ui.closeChargeModal()" style="flex:1; background:white; color:#667eea; border:2px solid #667eea; padding:16px; border-radius:12px; font-weight:700; cursor:pointer;">
        ì·¨ì†Œ
      </button>
    </div>
  </div>
</div>

<script>
// ============================================================================
// TimeLink v20.1 - TL3 íŒŒì¼ + ìë™ì°¨ + ë¼ë””ì˜¤ + ìƒì—…ë°©ì†¡ + ì±„êµ´ + ê¸ˆë¦¬ì €ë¸Œ + TON
// ëª¨ë“  ê¸°ëŠ¥ì´ ì™„ì „íˆ í†µí•©ëœ ë‹¨ì¼ ì‹¤í–‰ ì½”ë“œ
// ============================================================================

// ============================================================================
// 1. ë¸”ë¡ì²´ì¸ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“ˆ
// ============================================================================
const Blockchain = {
  records: [],
  
  async record(data) {
    const record = {
      id: '0x' + Math.random().toString(16).substr(2, 16),
      timestamp: Date.now(),
      ...data
    };
    this.records.push(record);
    console.log('âœ… ë¸”ë¡ì²´ì¸ ê¸°ë¡:', record);
    return record;
  },
  
  async findByHash(hash) {
    return this.records.find(r => r.hash === hash);
  },
  
  getFileHistory(fileId) {
    return this.records.filter(r => r.file_id === fileId);
  }
};

// ============================================================================
// 2. ì €ì‘ê¶Œ ë“±ë¡ì†Œ ëª¨ë“ˆ
// ============================================================================
const CopyrightRegistry = {
  registrations: [],
  
  async register(data) {
    const hash = await this.generateHash(data);
    const registration = {
      id: 'CR-' + Date.now() + '-' + Math.random().toString(36).substr(2, 6),
      certificate_id: 'CERT-' + Date.now(),
      ...data,
      hash: hash,
      verified: true,
      verified_at: new Date().toISOString(),
      expires_at: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString()
    };
    
    this.registrations.push(registration);
    
    await Blockchain.record({
      type: 'COPYRIGHT_REGISTERED',
      registration_id: registration.id,
      owner: registration.owner_id,
      title: registration.title,
      hash: hash,
      timestamp: Date.now()
    });
    
    return registration;
  },
  
  async generateHash(data) {
    const content = data.title + data.artist + data.owner_id + Date.now();
    return '0x' + Array.from(content)
      .reduce((hash, char) => (hash << 5) - hash + char.charCodeAt(0), 0)
      .toString(16);
  },
  
  async verify(certificateId) {
    return this.registrations.some(r => r.certificate_id === certificateId);
  }
};

// ============================================================================
// 3. TL ì§€ê°‘ ëª¨ë“ˆ
// ============================================================================
class TLWallet {
  constructor(userId) {
    this.userId = userId;
    this.balance = 25000;
    this.transactions = [];
  }
  
  async charge(amount) {
    this.balance += amount;
    
    const transaction = {
      id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),
      type: 'CHARGE',
      amount: amount,
      balance_before: this.balance - amount,
      balance_after: this.balance,
      timestamp: new Date().toISOString()
    };
    
    this.transactions.push(transaction);
    
    await Blockchain.record({
      type: 'WALLET_CHARGED',
      user: this.userId,
      amount: amount,
      tx_id: transaction.id,
      timestamp: Date.now()
    });
    
    return transaction;
  }
  
  async withdraw(amount, reason, target) {
    if (this.balance < amount) {
      throw new Error('ì”ì•¡ ë¶€ì¡±');
    }
    
    this.balance -= amount;
    
    const transaction = {
      id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),
      type: reason,
      amount: amount,
      target: target,
      balance_before: this.balance + amount,
      balance_after: this.balance,
      timestamp: new Date().toISOString()
    };
    
    this.transactions.push(transaction);
    
    await Blockchain.record({
      type: 'WALLET_WITHDRAWN',
      user: this.userId,
      amount: amount,
      reason: reason,
      target: target,
      tx_id: transaction.id,
      timestamp: Date.now()
    });
    
    return transaction;
  }
}

// ============================================================================
// 4. TL3 íŒŒì¼ ëª¨ë“ˆ
// ============================================================================
class TL3File {
  constructor(data) {
    this.id = 'tl3_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);
    this.metadata = {
      title: data.title,
      artist: data.artist,
      duration: data.duration || 180,
      copyright: data.copyright,
      contract: data.contract
    };
    this.token = {
      balance: 0,
      total_charged: 0,
      total_consumed: 0,
      last_charge_at: null,
      last_play_at: null
    };
    this.ledger = [];
    this.royalty = {
      total_revenue: 0,
      creator_earned: 0,
      platform_earned: 0,
      pending_settlement: 0,
      last_settlement: null
    };
    this.audio = {
      url: data.audioUrl || URL.createObjectURL(data.file),
      encrypted: false
    };
    this.creatorId = data.creatorId;
    this.creatorName = data.creatorName;
    this.isShared = false;
    this.sharedId = null;
    this.sharedAt = null;
    this.createdAt = new Date().toISOString();
  }
  
  async charge(amount) {
    this.token.balance += amount;
    this.token.total_charged += amount;
    this.token.last_charge_at = new Date().toISOString();
    
    const transaction = {
      tx_id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),
      type: 'charge',
      amount: amount,
      balance_before: this.token.balance - amount,
      balance_after: this.token.balance,
      timestamp: new Date().toISOString()
    };
    
    this.ledger.push(transaction);
    return transaction;
  }
  
  async consume(amount) {
    this.token.balance -= amount;
    this.token.total_consumed += amount;
    this.token.last_play_at = new Date().toISOString();
    
    const transaction = {
      tx_id: 'tx_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),
      type: 'play',
      amount: amount,
      balance_before: this.token.balance + amount,
      balance_after: this.token.balance,
      timestamp: new Date().toISOString()
    };
    
    this.ledger.push(transaction);
    return transaction;
  }
  
  addRevenue(amount, creatorShare, platformShare) {
    this.royalty.total_revenue += amount;
    this.royalty.creator_earned += creatorShare;
    this.royalty.platform_earned += platformShare;
    this.royalty.pending_settlement += creatorShare;
  }
}

// ============================================================================
// 5. ìˆ˜ìµ ë¶„ë°° ë° ê¸ˆë¦¬ì €ë¸Œ ëª¨ë“ˆ
// ============================================================================
const RoyaltyDistributor = {
  goldReserve: {
    totalGold: 10.24,
    goldPrice: 65,
    platformRevenue: 6650,
    goldInvestment: 665,
    transactions: [
      {
        timestamp: Date.now() - 86400000 * 7,
        usdAmount: 650,
        grams: 10,
        pricePerGram: 65,
        type: 'initial'
      },
      {
        timestamp: Date.now() - 86400000 * 3,
        usdAmount: 15,
        grams: 0.24,
        pricePerGram: 62.5,
        type: 'purchase'
      }
    ]
  },
  
  async distribute(contract, revenue, creatorId) {
    // ê³„ì•½ ì¡°ê±´ì— ë”°ë¥¸ ë¶„ë°°
    const creatorShare = revenue * contract.creator_share;
    const platformShare = revenue * contract.platform_share;
    
    // í”Œë«í¼ ìˆ˜ìµì˜ 10%ëŠ” ê¸ˆ êµ¬ë§¤
    this.goldReserve.platformRevenue += platformShare * 0.01;
    this.goldReserve.goldInvestment = this.goldReserve.platformRevenue * 0.1;
    
    const gramsAdded = this.goldReserve.goldInvestment / this.goldReserve.goldPrice;
    this.goldReserve.totalGold += gramsAdded;
    
    if (gramsAdded > 0) {
      this.goldReserve.transactions.push({
        timestamp: new Date().toISOString(),
        usdAmount: this.goldReserve.goldInvestment,
        grams: gramsAdded,
        pricePerGram: this.goldReserve.goldPrice
      });
    }
    
    return {
      creator_share: creatorShare,
      platform_share: platformShare,
      gold_purchase: gramsAdded
    };
  },
  
  getGoldStats() {
    const totalValue = this.goldReserve.totalGold * this.goldReserve.goldPrice;
    const collateralRatio = (totalValue / 10000) * 100;
    
    return {
      totalGold: this.goldReserve.totalGold.toFixed(2) + ' g',
      totalValue: '$' + totalValue.toFixed(0),
      goldPrice: '$' + this.goldReserve.goldPrice.toFixed(2) + '/g',
      collateralRatio: collateralRatio.toFixed(0) + '%',
      platformRevenue: '$' + this.goldReserve.platformRevenue.toFixed(0),
      goldInvestment: '$' + this.goldReserve.goldInvestment.toFixed(0)
    };
  }
};

// ============================================================================
// 6. ì±„êµ´ ì‹œìŠ¤í…œ ëª¨ë“ˆ
// ============================================================================
const MiningSystem = {
  contributionIndex: 4.75,
  
  calculate(amount, contributionIndex, hasMiningRight) {
    if (!hasMiningRight) return 0;
    const maxMining = 0.5; // 50% í•œë„
    const baseRate = 0.1; // 10%
    return amount * baseRate * contributionIndex;
  },
  
  getMaxMining(balance) {
    return Math.floor(balance * 0.5);
  }
};

// ============================================================================
// 7. ì°¨ëŸ‰ ì‹œìŠ¤í…œ ëª¨ë“ˆ
// ============================================================================
const CarSystem = {
  cars: [
    { model: 'Tesla Model 3', plate: '123ê°€ 4567' },
    { model: 'Hyundai Ioniq 5', plate: '567ë‚˜ 8901' }
  ],
  totalDrivingMinutes: 1240,
  
  addCar(model, plate) {
    this.cars.push({ model, plate: plate || 'ë¯¸ë“±ë¡' });
    return this.cars;
  },
  
  addDrivingMinutes(minutes) {
    this.totalDrivingMinutes += minutes;
    return this.totalDrivingMinutes;
  },
  
  getContribution(minutes) {
    return minutes * 10; // 1ë¶„ = 10 TL ê¸°ì—¬ë„
  }
};

// ============================================================================
// 8. ë¼ë””ì˜¤/ìƒì—…ë°©ì†¡ ëª¨ë“ˆ
// ============================================================================
const RadioSystem = {
  channels: [
    { name: 'TimeLink Pop', genre: 'pop', freq: '107.7', listeners: 1234, currentSong: 'Dynamite - BTS' },
    { name: 'TimeLink Rock', genre: 'rock', freq: '107.9', listeners: 892, currentSong: 'Bohemian Rhapsody - Queen' },
    { name: 'TimeLink Hip-Hop', genre: 'hiphop', freq: '108.1', listeners: 1567, currentSong: 'Savage - aespa' },
    { name: 'TimeLink Jazz', genre: 'jazz', freq: '108.3', listeners: 645, currentSong: 'Fly Me To The Moon' }
  ],
  
  commercialChannels: [
    { name: 'TimeLink Business 1', freq: '109.1', listeners: 567, revenue: 12340 },
    { name: 'TimeLink Business 2', freq: '109.3', listeners: 432, revenue: 9870 }
  ]
};

// ============================================================================
// 9. TON ë¸”ë¡ì²´ì¸ ëª¨ë“ˆ
// ============================================================================
const TONSystem = {
  walletAddress: 'EQD4XhVpE_y6hF6lQr4YgB7KZQhJx2qQ8CQnQXq3Zx5Lp7vK',
  balance: 1250.75,
  
  connect() {
    return this.walletAddress;
  }
};

// ============================================================================
// 10. ë©”ì¸ ì‹œìŠ¤í…œ ì»¨íŠ¸ë¡¤ëŸ¬
// ============================================================================
const TimeLinkSystem = {
  // ìƒíƒœ ë³€ìˆ˜
  currentUser: null,
  wallet: null,
  files: [],
  sharedFiles: [],
  currentPlayingFile: null,
  playInterval: null,
  audioPlayer: null,
  currentPlayTime: 0,
  currentFilter: 'all',
  
  // ===== ë°ëª¨ ë¡œê·¸ì¸ =====
  demo: {
    login: function() {
      TimeLinkSystem.currentUser = {
        id: 'user_' + Date.now(),
        username: 'Google íˆ¬ìì',
        email: 'investor@gmail.com',
        isBusiness: true
      };
      
      TimeLinkSystem.wallet = new TLWallet(TimeLinkSystem.currentUser.id);
      
      document.getElementById('authContainer').style.display = 'none';
      document.getElementById('appContainer').style.display = 'block';
      
      // UI ì—…ë°ì´íŠ¸
      document.getElementById('currentUsername').textContent = TimeLinkSystem.currentUser.username;
      document.getElementById('userAvatar').textContent = 'G';
      document.getElementById('userStatus').innerHTML = 'ğŸ¢ ì‚¬ì—…ì (ë°ëª¨)';
      document.getElementById('walletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
      document.getElementById('dashWallet').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
      document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
      document.getElementById('dashMiningLimit').textContent = (TimeLinkSystem.wallet.balance * 0.5).toLocaleString() + ' TL';
      document.getElementById('miningLimitAmount').textContent = (TimeLinkSystem.wallet.balance * 0.5).toLocaleString() + ' / ' + TimeLinkSystem.wallet.balance.toLocaleString() + ' TL';
      document.getElementById('maxMiningLabel').textContent = (TimeLinkSystem.wallet.balance * 0.5).toLocaleString();
      
      TimeLinkSystem.demo.initializeData();
      TimeLinkSystem.ui.updateLibrary();
      TimeLinkSystem.ui.updateSharePlace();
      TimeLinkSystem.radio.initChannels();
      TimeLinkSystem.radio.initCommercialChannels();
      TimeLinkSystem.ui.updateGoldReserve();
      
      TimeLinkSystem.ui.showToast('âœ… ë¡œê·¸ì¸ ì„±ê³µ! ëª¨ë“  ê¸°ëŠ¥ í†µí•© ë°ëª¨', 'success');
    },
    
    logout: function() {
      if (TimeLinkSystem.playInterval) {
        clearInterval(TimeLinkSystem.playInterval);
      }
      if (TimeLinkSystem.audioPlayer) {
        TimeLinkSystem.audioPlayer.pause();
      }
      TimeLinkSystem.currentUser = null;
      TimeLinkSystem.wallet = null;
      TimeLinkSystem.files = [];
      TimeLinkSystem.sharedFiles = [];
      
      document.getElementById('authContainer').style.display = 'flex';
      document.getElementById('appContainer').style.display = 'none';
    },
    
    initializeData: function() {
      // í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
      if (TimeLinkSystem.files.length === 0) {
        const dummyAudioData = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAA8AAAGQAApCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJD/+5REAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
        
        const file1 = new TL3File({
          title: 'Dynamite - BTS',
          artist: 'BTS',
          duration: 210,
          file: new File([dummyAudioData], 'dynamite.mp3'),
          audioUrl: dummyAudioData,
          creatorId: TimeLinkSystem.currentUser.id,
          creatorName: TimeLinkSystem.currentUser.username,
          copyright: {
            owner_id: TimeLinkSystem.currentUser.id,
            owner_name: TimeLinkSystem.currentUser.username,
            registration_number: 'CR-2024-001234',
            registration_date: new Date().toISOString()
          },
          contract: {
            type: '55',
            creator_share: 0.5,
            platform_share: 0.5,
            mining_allowed: true
          }
        });
        
        file1.token.balance = 5000;
        file1.token.total_charged = 5000;
        
        const file2 = new TL3File({
          title: 'Butter - BTS',
          artist: 'BTS',
          duration: 200,
          file: new File([dummyAudioData], 'butter.mp3'),
          audioUrl: dummyAudioData,
          creatorId: TimeLinkSystem.currentUser.id,
          creatorName: TimeLinkSystem.currentUser.username,
          copyright: {
            owner_id: TimeLinkSystem.currentUser.id,
            owner_name: TimeLinkSystem.currentUser.username,
            registration_number: 'CR-2024-001235',
            registration_date: new Date().toISOString()
          },
          contract: {
            type: '55',
            creator_share: 0.5,
            platform_share: 0.5,
            mining_allowed: true
          }
        });
        
        file2.token.balance = 0;
        file2.token.total_charged = 0;
        
        TimeLinkSystem.files.push(file1, file2);
      }
    }
  },
  
  // ===== íŒŒì¼ ê´€ë¦¬ =====
  file: {
    selectedFile: null,
    selectedFileData: null,
    
    handleSelect: function(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      TimeLinkSystem.file.selectedFile = file;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        TimeLinkSystem.file.selectedFileData = e.target.result;
        document.getElementById('uploadForm').style.display = 'block';
        document.getElementById('songTitle').value = file.name.replace(/\.[^/.]+$/, "");
        document.getElementById('songArtist').value = TimeLinkSystem.currentUser?.username || 'ì•„í‹°ìŠ¤íŠ¸';
        document.getElementById('copyrightOwner').value = TimeLinkSystem.currentUser?.username || '';
        document.getElementById('copyrightNumber').value = 'CR-' + Date.now();
      };
      reader.readAsDataURL(file);
    },
    
    create: async function() {
      if (!TimeLinkSystem.file.selectedFile || !TimeLinkSystem.file.selectedFileData) {
        TimeLinkSystem.ui.showToast('íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”', 'error');
        return;
      }
      
      const title = document.getElementById('songTitle').value;
      const artist = document.getElementById('songArtist').value || TimeLinkSystem.currentUser.username;
      const revenueShare = document.getElementById('revenueShare').value;
      const copyrightOwner = document.getElementById('copyrightOwner').value || TimeLinkSystem.currentUser.username;
      const copyrightNumber = document.getElementById('copyrightNumber').value;
      
      if (!title) {
        TimeLinkSystem.ui.showToast('ê³¡ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
        return;
      }
      
      // 1. ì €ì‘ê¶Œ ë“±ë¡
      TimeLinkSystem.ui.showToast('ğŸ“‹ ì €ì‘ê¶Œ ë“±ë¡ ì¤‘...', 'info');
      
      const copyright = await CopyrightRegistry.register({
        owner_id: TimeLinkSystem.currentUser.id,
        owner_name: copyrightOwner,
        title: title,
        artist: artist,
        registration_number: copyrightNumber
      });
      
      // 2. ê³„ì•½ ì„¤ì •
      const contract = {
        type: revenueShare,
        creator_share: revenueShare === '55' ? 0.5 : 0.7,
        platform_share: revenueShare === '55' ? 0.5 : 0.3,
        mining_allowed: revenueShare === '55'
      };
      
      // 3. TL3 íŒŒì¼ ìƒì„±
      const tl3File = new TL3File({
        title: title,
        artist: artist,
        duration: 180,
        file: TimeLinkSystem.file.selectedFile,
        audioUrl: TimeLinkSystem.file.selectedFileData,
        creatorId: TimeLinkSystem.currentUser.id,
        creatorName: TimeLinkSystem.currentUser.username,
        copyright: copyright,
        contract: contract
      });
      
      TimeLinkSystem.files.push(tl3File);
      
      TimeLinkSystem.ui.showToast(`âœ… TL3 íŒŒì¼ ìƒì„± ì™„ë£Œ! (ì €ì‘ê¶Œ ë“±ë¡: ${copyright.id})`, 'success');
      
      document.getElementById('uploadForm').style.display = 'none';
      TimeLinkSystem.file.selectedFile = null;
      TimeLinkSystem.file.selectedFileData = null;
      
      TimeLinkSystem.ui.updateLibrary();
      TimeLinkSystem.ui.switchTab('library');
    },
    
    charge: async function() {
      if (!TimeLinkSystem.currentUser) {
        TimeLinkSystem.ui.showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
        return;
      }
      
      const amount = parseInt(document.getElementById('chargeAmount').value);
      if (!amount || amount <= 0) {
        TimeLinkSystem.ui.showToast('ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
        return;
      }
      
      if (!TimeLinkSystem.player.currentFileId) {
        TimeLinkSystem.ui.showToast('íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”', 'error');
        return;
      }
      
      const file = TimeLinkSystem.files.find(f => f.id === TimeLinkSystem.player.currentFileId);
      if (!file) {
        TimeLinkSystem.ui.showToast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
        return;
      }
      
      try {
        // 1. ì§€ê°‘ì—ì„œ ì¶œê¸ˆ
        await TimeLinkSystem.wallet.withdraw(amount, 'FILE_CHARGE', file.id);
        
        // 2. íŒŒì¼ì— TL ì¶©ì „
        await file.charge(amount);
        
        // 3. ë¸”ë¡ì²´ì¸ ê¸°ë¡
        await Blockchain.record({
          type: 'TL_CHARGED',
          file_id: file.id,
          amount: amount,
          charger: TimeLinkSystem.currentUser.id,
          timestamp: Date.now()
        });
        
        // UI ì—…ë°ì´íŠ¸
        document.getElementById('walletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
        document.getElementById('dashWallet').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
        document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
        
        TimeLinkSystem.ui.closeChargeModal();
        TimeLinkSystem.ui.updateLibrary();
        
        TimeLinkSystem.ui.showToast(`âœ… ${amount} TL ì¶©ì „ ì™„ë£Œ!`, 'success');
        
      } catch (error) {
        TimeLinkSystem.ui.showToast(error.message, 'error');
      }
    }
  },
  
  // ===== ê³µìœ  í”Œë ˆì´ìŠ¤ =====
  share: {
    filter: function(filter) {
      TimeLinkSystem.currentFilter = filter;
      
      const btns = document.querySelectorAll('.share-filter .filter-btn');
      btns.forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      TimeLinkSystem.ui.updateSharePlace();
    },
    
    shareFile: async function(fileId) {
      if (!TimeLinkSystem.currentUser) {
        TimeLinkSystem.ui.showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
        return;
      }
      
      const file = TimeLinkSystem.files.find(f => f.id === fileId);
      if (!file) return;
      
      if (file.isShared) {
        TimeLinkSystem.ui.showToast('ì´ë¯¸ ê³µìœ ëœ íŒŒì¼ì…ë‹ˆë‹¤', 'warning');
        return;
      }
      
      if (TimeLinkSystem.wallet.balance < 5000) {
        TimeLinkSystem.ui.showToast(`TL ë¶€ì¡±: 5,000 TL í•„ìš” (í˜„ì¬: ${TimeLinkSystem.wallet.balance} TL)`, 'error');
        return;
      }
      
      try {
        // 1. ê³µìœ  ë¹„ìš© ì°¨ê°
        await TimeLinkSystem.wallet.withdraw(5000, 'SHARE', file.id);
        
        // 2. íŒŒì¼ ìƒíƒœ ë³€ê²½
        file.isShared = true;
        file.sharedId = 'share_' + Date.now();
        file.sharedAt = new Date().toISOString();
        
        // 3. ê³µìœ  í”Œë ˆì´ìŠ¤ì— ë“±ë¡
        TimeLinkSystem.sharedFiles.push({
          id: file.sharedId,
          originalId: file.id,
          title: file.metadata.title,
          artist: file.metadata.artist,
          creatorId: file.creatorId,
          creatorName: file.creatorName,
          copyrightOwner: file.metadata.copyright.owner_name,
          contractType: file.metadata.contract.type === '55' ? '5:5 ê³„ì•½' : '7:3 ê³„ì•½',
          miningAllowed: file.metadata.contract.mining_allowed,
          remainingTL: file.token.balance,
          sharedAt: file.sharedAt
        });
        
        // UI ì—…ë°ì´íŠ¸
        document.getElementById('walletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
        document.getElementById('dashWallet').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
        
        TimeLinkSystem.ui.updateLibrary();
        TimeLinkSystem.ui.updateSharePlace();
        TimeLinkSystem.ui.switchTab('shareplace');
        
        TimeLinkSystem.ui.showToast(`ğŸ”„ "${file.metadata.title}" ê³µìœ  ì™„ë£Œ! (5,000 TL ì°¨ê°)`, 'success');
        
      } catch (error) {
        TimeLinkSystem.ui.showToast(error.message, 'error');
      }
    }
  },
  
  // ===== í”Œë ˆì´ì–´ =====
  player: {
    currentFileId: null,
    isPlaying: false,
    
    play: function(fileId) {
      const file = TimeLinkSystem.files.find(f => f.id === fileId);
      if (!file) return;
      
      if (file.token.balance <= 0) {
        TimeLinkSystem.ui.showToast('âš ï¸ TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤! ì¶©ì „í•´ì£¼ì„¸ìš”.', 'warning');
        return;
      }
      
      TimeLinkSystem.player.currentFileId = file.id;
      TimeLinkSystem.currentPlayingFile = file;
      TimeLinkSystem.currentPlayTime = 0;
      
      // í”Œë ˆì´ì–´ UI ì—…ë°ì´íŠ¸
      document.getElementById('playerTitle').textContent = file.metadata.title;
      document.getElementById('playerArtist').textContent = file.metadata.artist;
      document.getElementById('playerCopyrightOwner').textContent = file.metadata.copyright.owner_name;
      document.getElementById('playerCopyrightNumber').textContent = file.metadata.copyright.registration_number;
      document.getElementById('playerContractType').textContent = file.metadata.contract.type === '55' ? '5:5 ê³„ì•½' : '7:3 ê³„ì•½';
      document.getElementById('playerCreatorShare').textContent = (file.metadata.contract.creator_share * 100) + '%';
      document.getElementById('playerPlatformShare').textContent = (file.metadata.contract.platform_share * 100) + '%';
      document.getElementById('playerTL').textContent = file.token.balance.toLocaleString() + ' TL';
      
      const minutes = Math.floor(file.token.balance / 60);
      const seconds = file.token.balance % 60;
      document.getElementById('playerTimeRemaining').textContent = `ì•½ ${minutes}ë¶„ ${seconds}ì´ˆ ë‚¨ìŒ`;
      document.getElementById('playerTotalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      
      // ìˆ˜ìµ íŒ¨ë„ ì´ˆê¸°í™”
      document.getElementById('playerCreatorRevenue').textContent = '0.00 TL';
      document.getElementById('playerPlatformRevenue').textContent = '0.00 TL';
      document.getElementById('playerTotalRevenue').textContent = '0.00 TL';
      
      // ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´
      TimeLinkSystem.audioPlayer = document.getElementById('audioPlayer');
      TimeLinkSystem.audioPlayer.src = file.audio.url;
      TimeLinkSystem.audioPlayer.load();
      TimeLinkSystem.audioPlayer.play();
      
      TimeLinkSystem.player.isPlaying = true;
      document.getElementById('playPauseBtn').innerHTML = 'â¸ï¸ ì¼ì‹œì •ì§€';
      document.getElementById('playerModal').style.display = 'flex';
      
      let totalRevenue = 0;
      
      // 1ì´ˆë§ˆë‹¤ TL ì†Œëª¨ + ìˆ˜ìµ ë¶„ë°°
      TimeLinkSystem.playInterval = setInterval(async () => {
        if (!TimeLinkSystem.currentPlayingFile || !TimeLinkSystem.player.isPlaying) return;
        
        // TL ì†Œëª¨
        await file.consume(1);
        TimeLinkSystem.currentPlayTime++;
        
        // UI ì—…ë°ì´íŠ¸
        document.getElementById('playerTL').textContent = file.token.balance.toLocaleString() + ' TL';
        
        const remainingMinutes = Math.floor(file.token.balance / 60);
        const remainingSeconds = file.token.balance % 60;
        document.getElementById('playerTimeRemaining').textContent = `ì•½ ${remainingMinutes}ë¶„ ${remainingSeconds}ì´ˆ ë‚¨ìŒ`;
        document.getElementById('playerCurrentTime').textContent = `${Math.floor(TimeLinkSystem.currentPlayTime / 60)}:${(TimeLinkSystem.currentPlayTime % 60).toString().padStart(2, '0')}`;
        
        const progressPercent = (TimeLinkSystem.currentPlayTime / (file.token.balance + TimeLinkSystem.currentPlayTime)) * 100;
        document.getElementById('playerProgress').style.width = Math.min(progressPercent, 100) + '%';
        
        // ìˆ˜ìµ ë°œìƒ ë° ë¶„ë°° (1ì´ˆ = 0.1 TL)
        const revenue = 0.1;
        const distribution = await RoyaltyDistributor.distribute(
          file.metadata.contract,
          revenue,
          file.creatorId
        );
        
        file.addRevenue(revenue, distribution.creator_share, distribution.platform_share);
        totalRevenue += revenue;
        
        // ì‹¤ì‹œê°„ ìˆ˜ìµ ì—…ë°ì´íŠ¸
        document.getElementById('playerCreatorRevenue').textContent = distribution.creator_share.toFixed(2) + ' TL';
        document.getElementById('playerPlatformRevenue').textContent = distribution.platform_share.toFixed(2) + ' TL';
        document.getElementById('playerTotalRevenue').textContent = totalRevenue.toFixed(2) + ' TL';
        
        // TL ì†Œì§„ ì‹œ ì¬ìƒ ì¢…ë£Œ
        if (file.token.balance <= 0) {
          TimeLinkSystem.player.stop();
          TimeLinkSystem.ui.showToast('âš ï¸ TLì´ ëª¨ë‘ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning');
        }
      }, 1000);
      
      // ì˜¤ë””ì˜¤ ì¢…ë£Œ ì´ë²¤íŠ¸
      TimeLinkSystem.audioPlayer.onended = function() {
        TimeLinkSystem.player.stop();
      };
    },
    
    togglePlayPause: function() {
      if (!TimeLinkSystem.audioPlayer) return;
      
      if (TimeLinkSystem.audioPlayer.paused) {
        TimeLinkSystem.audioPlayer.play();
        TimeLinkSystem.player.isPlaying = true;
        document.getElementById('playPauseBtn').innerHTML = 'â¸ï¸ ì¼ì‹œì •ì§€';
      } else {
        TimeLinkSystem.audioPlayer.pause();
        TimeLinkSystem.player.isPlaying = false;
        document.getElementById('playPauseBtn').innerHTML = 'â–¶ï¸ ì¬ìƒ';
      }
    },
    
    stop: function() {
      if (TimeLinkSystem.playInterval) {
        clearInterval(TimeLinkSystem.playInterval);
        TimeLinkSystem.playInterval = null;
      }
      if (TimeLinkSystem.audioPlayer) {
        TimeLinkSystem.audioPlayer.pause();
        TimeLinkSystem.audioPlayer.src = '';
      }
      TimeLinkSystem.currentPlayingFile = null;
      TimeLinkSystem.currentPlayTime = 0;
      TimeLinkSystem.player.isPlaying = false;
      TimeLinkSystem.player.currentFileId = null;
      
      document.getElementById('playerModal').style.display = 'none';
      TimeLinkSystem.ui.updateLibrary();
    },
    
    openChargeModal: function(fileId) {
      if (fileId) {
        TimeLinkSystem.player.currentFileId = fileId;
      }
      document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
      document.getElementById('chargeModal').style.display = 'flex';
    }
  },
  
  // ===== ë¼ë””ì˜¤ =====
  radio: {
    initChannels: function() {
      const container = document.getElementById('radioChannels');
      if (!container) return;
      
      container.innerHTML = RadioSystem.channels.map(ch => `
        <div class="radio-channel-card">
          <div class="channel-header">
            <div style="display:flex; justify-content:space-between; align-items:center;">
              <h3 style="color:white;">${ch.name}</h3>
              <span style="background:rgba(255,255,255,0.2); padding:5px 15px; border-radius:30px;">
                ğŸ‘¥ ${ch.listeners}ëª… ì²­ì·¨ì¤‘
              </span>
            </div>
            <div style="display:flex; justify-content:space-between; margin-top:10px;">
              <span>FM ${ch.freq} MHz</span>
              <span>ğŸ”´ LIVE</span>
            </div>
          </div>
          <div class="channel-playlist">
            <div class="now-playing">
              <div style="display:flex; justify-content:space-between; align-items:center;">
                <div>
                  <div style="font-weight:700; font-size:1.1rem;">${ch.currentSong}</div>
                  <div style="color:#666; margin-top:5px;">${ch.genre}</div>
                </div>
                <span style="color:#1db954;">ğŸµ ì¬ìƒì¤‘</span>
              </div>
            </div>
            <button class="btn-play" onclick="TimeLinkSystem.ui.showToast('ğŸ“» ë¼ë””ì˜¤ë¥¼ ì¬ìƒí•©ë‹ˆë‹¤. 1ì´ˆë‹¹ 1TL ì†Œëª¨', 'info')" style="width:100%;">
              ğŸ§ ë¼ë””ì˜¤ ì¬ìƒ (1ì´ˆ = 1TL)
            </button>
          </div>
        </div>
      `).join('');
    },
    
    initCommercialChannels: function() {
      const container = document.getElementById('commercialChannels');
      if (!container) return;
      
      container.innerHTML = RadioSystem.commercialChannels.map(ch => `
        <div class="commercial-channel-card">
          <div class="commercial-channel-header">
            <div style="display:flex; justify-content:space-between; align-items:center;">
              <h3 style="color:white;">${ch.name}</h3>
              <span class="business-badge">ğŸ¢ BUSINESS</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin-top:10px;">
              <span>FM ${ch.freq} MHz</span>
              <span>ğŸ‘¥ ${ch.listeners}ëª… ì²­ì·¨ì¤‘</span>
            </div>
          </div>
          <div class="channel-playlist">
            <div style="background:#f8f9fa; padding:15px; border-radius:12px; margin-bottom:15px;">
              <span style="background:rgba(245,87,108,0.1); padding:6px 16px; border-radius:30px; font-size:13px;">
                ğŸ’° í¬ë¦¬ì—ì´í„° ìˆ˜ìµ: ${ch.revenue.toLocaleString()} TL
              </span>
            </div>
            <button class="btn-business-play" onclick="TimeLinkSystem.business.play()" style="width:100%; padding:14px; background:var(--secondary); color:white; border:none; border-radius:12px; font-weight:700;">
              ğŸ§ ìƒì—…ë°©ì†¡ ì¬ìƒ (1ì´ˆ = 1TL)
            </button>
          </div>
        </div>
      `).join('');
      
      // ì‚¬ì—…ì ë“±ë¡ ì•ˆë‚´
      const businessSection = document.getElementById('businessApplySection');
      if (businessSection) {
        businessSection.style.display = TimeLinkSystem.currentUser?.isBusiness ? 'none' : 'block';
      }
    }
  },
  
  // ===== ì±„êµ´ =====
  mining: {
    execute: function() {
      if (!TimeLinkSystem.currentUser) {
        TimeLinkSystem.ui.showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
        return;
      }
      
      const amount = parseInt(document.getElementById('miningAmount').value) || 0;
      if (!amount || amount <= 0) {
        TimeLinkSystem.ui.showToast('ì±„êµ´í•  TL ì–‘ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
        return;
      }
      
      if (amount > TimeLinkSystem.wallet.balance) {
        TimeLinkSystem.ui.showToast('TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤', 'error');
        return;
      }
      
      const maxMining = Math.floor(TimeLinkSystem.wallet.balance * 0.5);
      if (amount > maxMining) {
        TimeLinkSystem.ui.showToast(`ì±„êµ´ í•œë„ëŠ” ${maxMining} TLì…ë‹ˆë‹¤`, 'error');
        return;
      }
      
      // ì±„êµ´ê¶Œ í™•ì¸ (5:5 ê³„ì•½ íŒŒì¼ ë³´ìœ )
      const hasMiningRight = TimeLinkSystem.files.some(f => 
        f.creatorId === TimeLinkSystem.currentUser.id && 
        f.metadata.contract.mining_allowed
      );
      
      if (!hasMiningRight) {
        TimeLinkSystem.ui.showToast('â›” ì±„êµ´ê¶Œì´ ì—†ìŠµë‹ˆë‹¤. 5:5 ê³„ì•½ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”', 'error');
        return;
      }
      
      const tlcAmount = amount * 0.1 * MiningSystem.contributionIndex;
      
      TimeLinkSystem.wallet.balance -= amount;
      TimeLinkSystem.wallet.tlcBalance = (TimeLinkSystem.wallet.tlcBalance || 0) + tlcAmount;
      
      document.getElementById('walletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
      document.getElementById('dashWallet').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
      document.getElementById('tlcBalance').textContent = (TimeLinkSystem.wallet.tlcBalance || 1250.75 + tlcAmount).toFixed(2);
      document.getElementById('dashTLC').textContent = (TimeLinkSystem.wallet.tlcBalance || 1250.75 + tlcAmount).toFixed(2);
      document.getElementById('tonTLCBalance').textContent = (TimeLinkSystem.wallet.tlcBalance || 1250.75 + tlcAmount).toFixed(2);
      
      TimeLinkSystem.ui.showToast(`âœ… ì±„êµ´ ì„±ê³µ! ${tlcAmount.toFixed(2)} TLC íšë“!`, 'success');
    }
  },
  
  // ===== ì°¨ëŸ‰ =====
  car: {
    register: function() {
      if (!TimeLinkSystem.currentUser) return;
      
      const model = document.getElementById('carModel').value;
      const plate = document.getElementById('carPlate').value;
      
      if (!model) {
        TimeLinkSystem.ui.showToast('ì°¨ëŸ‰ ëª¨ë¸ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
        return;
      }
      
      CarSystem.addCar(model, plate);
      
      const carList = document.getElementById('carList');
      if (carList) {
        carList.innerHTML = CarSystem.cars.map(car => 
          `<p style="color:white; margin:5px 0;">ğŸš˜ ${car.model} (${car.plate})</p>`
        ).join('');
      }
      
      TimeLinkSystem.ui.showToast('ğŸš— ì°¨ëŸ‰ ë“±ë¡ ì™„ë£Œ! (ìš´ì „ ì²­ì·¨ 2ë°° ê¸°ì—¬ë„)', 'success');
    },
    
    addDrivingMinutes: function(minutes) {
      if (!TimeLinkSystem.currentUser) return;
      
      if (CarSystem.cars.length === 0) {
        TimeLinkSystem.ui.showToast('ì°¨ëŸ‰ì„ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš”', 'warning');
        return;
      }
      
      CarSystem.addDrivingMinutes(minutes);
      document.getElementById('userTotalDrivingTime').textContent = CarSystem.totalDrivingMinutes + 'ë¶„';
      
      TimeLinkSystem.ui.showToast(`ğŸš— ìš´ì „ ì²­ì·¨ ${minutes}ë¶„ ì™„ë£Œ! (+${minutes * 10} TL ê¸°ì—¬ë„)`, 'success');
    }
  },
  
  // ===== ë¹„ì¦ˆë‹ˆìŠ¤ =====
  business: {
    apply: function() {
      if (!TimeLinkSystem.currentUser) {
        TimeLinkSystem.ui.showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
        return;
      }
      
      if (TimeLinkSystem.currentUser.isBusiness) {
        TimeLinkSystem.ui.showToast('ì´ë¯¸ ì‚¬ì—…ì ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
        return;
      }
      
      TimeLinkSystem.currentUser.isBusiness = true;
      document.getElementById('userStatus').innerHTML = 'ğŸ¢ ì‚¬ì—…ì (ë°ëª¨)';
      document.getElementById('businessApplySection').style.display = 'none';
      
      TimeLinkSystem.ui.showToast('âœ… ì‚¬ì—…ì ë“±ë¡ ì™„ë£Œ! ìƒì—…ë°©ì†¡ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'success');
    },
    
    play: function() {
      if (!TimeLinkSystem.currentUser) {
        TimeLinkSystem.ui.showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤', 'error');
        return;
      }
      
      if (!TimeLinkSystem.currentUser.isBusiness) {
        TimeLinkSystem.ui.showToast('ğŸ“º ìƒì—…ë°©ì†¡ì€ ì‚¬ì—…ì ì „ìš©ì…ë‹ˆë‹¤', 'warning');
        return;
      }
      
      TimeLinkSystem.ui.showToast('ğŸ“º ìƒì—…ë°©ì†¡ì„ ì¬ìƒí•©ë‹ˆë‹¤. 1ì´ˆë‹¹ 1TL ì†Œëª¨', 'info');
    }
  },
  
  // ===== TON =====
  ton: {
    connect: function() {
      TimeLinkSystem.ui.showToast('TON ì§€ê°‘ì´ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤ (í…ŒìŠ¤íŠ¸ë„·)', 'success');
      document.getElementById('tonWalletAddress').innerHTML = TONSystem.walletAddress;
    }
  },
  
  // ===== UI ê´€ë¦¬ =====
  ui: {
    showToast: function(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast ' + type;
      toast.style.display = 'block';
      
      setTimeout(() => {
        toast.style.display = 'none';
      }, 3000);
    },
    
    switchTab: function(tabName) {
      const tabs = document.querySelectorAll('.tab');
      const contents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => tab.classList.remove('active'));
      contents.forEach(content => content.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById('tab' + tabName.charAt(0).toUpperCase() + tabName.slice(1)).classList.add('active');
      
      if (tabName === 'library') TimeLinkSystem.ui.updateLibrary();
      if (tabName === 'shareplace') TimeLinkSystem.ui.updateSharePlace();
      if (tabName === 'radio') TimeLinkSystem.radio.initChannels();
      if (tabName === 'commercial') {
        TimeLinkSystem.radio.initCommercialChannels();
        const businessSection = document.getElementById('businessApplySection');
        if (businessSection) {
          businessSection.style.display = TimeLinkSystem.currentUser?.isBusiness ? 'none' : 'block';
        }
      }
      if (tabName === 'gold') TimeLinkSystem.ui.updateGoldReserve();
    },
    
    updateLibrary: function() {
      const container = document.getElementById('fileList');
      const emptyMsg = document.getElementById('emptyLibrary');
      
      if (!container || !TimeLinkSystem.currentUser) return;
      
      const myFiles = TimeLinkSystem.files.filter(f => f.creatorId === TimeLinkSystem.currentUser.id);
      
      if (myFiles.length === 0) {
        container.innerHTML = '';
        emptyMsg.style.display = 'block';
        return;
      }
      
      emptyMsg.style.display = 'none';
      
      container.innerHTML = myFiles.map(file => {
        const percent = file.token.total_charged > 0 ? (file.token.balance / file.token.total_charged) * 100 : 0;
        const playableMinutes = Math.floor(file.token.balance / 60);
        const playableSeconds = file.token.balance % 60;
        const hasTL = file.token.balance > 0;
        
        return `
          <div class="file-card">
            <div class="file-thumbnail">
              ğŸµ
              <span class="badge badge-copyright" style="left:16px; right:auto;">ğŸ”— ì €ì‘ê¶Œ ë“±ë¡</span>
              ${file.isShared ? `<span class="badge badge-shared" style="right:16px;">âœ… ê³µìœ ë¨</span>` : ''}
              ${!hasTL ? `<span class="badge badge-no-tl" style="right:16px;">âš ï¸ ì¶©ì „ í•„ìš”</span>` : ''}
            </div>
            <div class="file-info">
              <div class="file-name">${file.metadata.title}</div>
              <div class="file-artist">${file.metadata.artist}</div>
              
              <div class="copyright-info">
                <strong>ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</strong><br>
                ì €ì‘ê¶Œì: ${file.metadata.copyright.owner_name}<br>
                ë“±ë¡ë²ˆí˜¸: ${file.metadata.copyright.registration_number}
              </div>
              
              <div class="contract-info">
                <strong>ğŸ“Š ìˆ˜ìµ ë¶„ë°° ê³„ì•½</strong><br>
                ìœ í˜•: ${file.metadata.contract.type === '55' ? '5:5 ê³„ì•½' : '7:3 ê³„ì•½'}<br>
                í¬ë¦¬ì—ì´í„°: ${file.metadata.contract.creator_share * 100}% | í”Œë«í¼: ${file.metadata.contract.platform_share * 100}%<br>
                ì±„êµ´ê¶Œ: ${file.metadata.contract.mining_allowed ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}
              </div>
              
              <div class="tl-info">
                <strong>â±ï¸ TL í† í°</strong><br>
                ì”ì•¡: ${file.token.balance.toLocaleString()} TL<br>
                ì¬ìƒ ê°€ëŠ¥: ${playableMinutes}ë¶„ ${playableSeconds}ì´ˆ
              </div>
              
              <div class="tl-progress">
                ${hasTL ? 
                  `<div class="tl-progress-fill" style="width: ${percent}%;"></div>` : 
                  `<div class="tl-progress-empty"></div>`
                }
              </div>
              
              <div class="file-actions">
                ${hasTL ? 
                  `<button class="btn-play" onclick="TimeLinkSystem.player.play('${file.id}')">â–¶ï¸ ì¬ìƒ</button>` : 
                  `<button class="btn-play-disabled" disabled>âŒ ì¶©ì „ í•„ìš”</button>`
                }
                <button class="btn-charge" onclick="TimeLinkSystem.player.openChargeModal('${file.id}')">âš¡ TL ì¶©ì „</button>
                ${file.isShared ? 
                  `<button class="btn-share" style="background:#999;" disabled>âœ… ì´ë¯¸ ê³µìœ ë¨</button>` :
                  `<button class="btn-share" onclick="TimeLinkSystem.share.shareFile('${file.id}')">ğŸ”„ ê³µìœ  (5,000TL)</button>`
                }
              </div>
            </div>
          </div>
        `;
      }).join('');
    },
    
    updateSharePlace: function() {
      const container = document.getElementById('sharedMusicList');
      const totalCount = document.getElementById('totalSharedCount');
      const count55 = document.getElementById('shared55Count');
      const count73 = document.getElementById('shared73Count');
      const sharedCount = document.getElementById('sharedCount');
      
      if (!container) return;
      
      if (totalCount) totalCount.textContent = TimeLinkSystem.sharedFiles.length;
      if (count55) count55.textContent = TimeLinkSystem.sharedFiles.filter(f => f.contractType === '5:5 ê³„ì•½').length;
      if (count73) count73.textContent = TimeLinkSystem.sharedFiles.filter(f => f.contractType === '7:3 ê³„ì•½').length;
      if (sharedCount) sharedCount.textContent = TimeLinkSystem.sharedFiles.length;
      
      if (TimeLinkSystem.sharedFiles.length === 0) {
        container.innerHTML = '<div style="text-align:center; padding:60px; color:#999;">ê³µìœ ëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤</div>';
        return;
      }
      
      // í•„í„° ì ìš©
      let filteredFiles = TimeLinkSystem.sharedFiles;
      if (TimeLinkSystem.currentFilter === '55') {
        filteredFiles = TimeLinkSystem.sharedFiles.filter(f => f.contractType === '5:5 ê³„ì•½');
      } else if (TimeLinkSystem.currentFilter === '73') {
        filteredFiles = TimeLinkSystem.sharedFiles.filter(f => f.contractType === '7:3 ê³„ì•½');
      } else if (TimeLinkSystem.currentFilter === 'mining') {
        filteredFiles = TimeLinkSystem.sharedFiles.filter(f => f.miningAllowed);
      }
      
      container.innerHTML = filteredFiles.map(file => {
        const isMine = file.creatorId === TimeLinkSystem.currentUser?.id;
        
        return `
          <div class="file-card">
            <div class="file-thumbnail">
              ğŸµ
              ${isMine ? '<span class="badge badge-shared" style="left:16px;">ğŸ“¤ ë‚´ê°€ ê³µìœ </span>' : ''}
            </div>
            <div class="file-info">
              <div class="file-name">${file.title}</div>
              <div class="file-artist">${file.artist}</div>
              
              <div class="copyright-info">
                <strong>ğŸ“‹ ì €ì‘ê¶Œ ì •ë³´</strong><br>
                ì €ì‘ê¶Œì: ${file.copyrightOwner}
              </div>
              
              <div class="contract-info">
                <strong>ğŸ“Š ê³„ì•½ ìœ í˜•</strong><br>
                ${file.contractType}<br>
                ì±„êµ´ê¶Œ: ${file.miningAllowed ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}
              </div>
              
              <div class="tl-info">
                <strong>â±ï¸ TL ì”ì•¡</strong><br>
                ${file.remainingTL.toLocaleString()} TL
              </div>
              
              <div style="color:#666; font-size:13px; margin-bottom:15px;">
                ğŸ‘¤ ê³µìœ : ${file.creatorName} Â· ${new Date(file.sharedAt).toLocaleDateString()}
              </div>
              
              ${file.remainingTL > 0 ? 
                `<button class="btn-play" onclick="TimeLinkSystem.ui.showToast('ê³µìœ  íŒŒì¼ ì¬ìƒ ê¸°ëŠ¥ì€ ë°ëª¨ì…ë‹ˆë‹¤', 'info')" style="width:100%;">ğŸ§ ì¬ìƒ</button>` :
                `<button class="btn-play-disabled" disabled style="width:100%;">âŒ TL ë¶€ì¡±</button>`
              }
            </div>
          </div>
        `;
      }).join('');
    },
    
    updateGoldReserve: function() {
      const stats = RoyaltyDistributor.getGoldStats();
      
      document.getElementById('goldAmount').textContent = stats.totalGold;
      document.getElementById('goldValue').textContent = stats.totalValue;
      document.getElementById('goldCollateralRatio').textContent = stats.collateralRatio;
      document.getElementById('platformRevenue').textContent = stats.platformRevenue;
      document.getElementById('goldInvestment').textContent = stats.goldInvestment;
      
      const txContainer = document.getElementById('goldTransactionList');
      const recentTxs = RoyaltyDistributor.goldReserve.transactions.slice(-5).reverse();
      
      txContainer.innerHTML = recentTxs.map(tx => `
        <div style="background:#f8f9fa; padding:16px; border-radius:12px; margin-bottom:10px;">
          <div style="display:flex; justify-content:space-between;">
            <span style="color:#666;">${new Date(tx.timestamp).toLocaleString()}</span>
            <span style="color:#f59e0b; font-weight:700;">+${tx.grams.toFixed(4)}g</span>
          </div>
          <div style="font-size:13px; color:#999; margin-top:5px;">
            $${tx.usdAmount.toFixed(2)} | $${tx.pricePerGram.toFixed(2)}/g
          </div>
        </div>
      `).join('');
    },
    
    closeChargeModal: function() {
      document.getElementById('chargeModal').style.display = 'none';
      document.getElementById('chargeAmount').value = '1000';
      TimeLinkSystem.player.currentFileId = null;
    }
  }
};

// ============================================================================
// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
// ============================================================================
document.addEventListener('DOMContentLoaded', function() {
  // íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸
  document.getElementById('fileInput').addEventListener('change', TimeLinkSystem.file.handleSelect);
  
  // ì±„êµ´ ë¯¸ë¦¬ë³´ê¸°
  document.getElementById('miningAmount')?.addEventListener('input', function(e) {
    const amount = parseInt(e.target.value) || 0;
    const maxMining = TimeLinkSystem.wallet ? Math.floor(TimeLinkSystem.wallet.balance * 0.5) : 12500;
    
    if (amount > 0 && amount <= maxMining) {
      const tlcAmount = amount * 0.1 * MiningSystem.contributionIndex;
      document.getElementById('previewInput').textContent = amount.toLocaleString() + ' TL';
      document.getElementById('previewOutput').textContent = tlcAmount.toFixed(2) + ' TLC';
    } else {
      document.getElementById('previewInput').textContent = '0 TL';
      document.getElementById('previewOutput').textContent = '0 TLC';
    }
  });
  
  // ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì´ˆê¸°í™”
  TimeLinkSystem.audioPlayer = document.getElementById('audioPlayer');
  
  console.log('ğŸš€ TimeLink v20.1 - ëª¨ë“  ê¸°ëŠ¥ í†µí•© ì™„ë£Œ!');
});
</script>

</body>
</html>
