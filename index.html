 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/index.html b/index.html
index ade546c9548b01ae0d0cbc1bde644410a30a2365..5b33680548e8575973d7acc0d4ca4b0ea9611d1b 100644
--- a/index.html
+++ b/index.html
@@ -81,50 +81,74 @@
             -webkit-background-clip: text;
             -webkit-text-fill-color: transparent;
         }
         
         .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); gap: 24px; }
         
         .file-card {
             background: #1e1e1e;
             border-radius: 16px;
             overflow: hidden;
             border: 1px solid rgba(255,255,255,0.08);
             transition: all 0.3s;
         }
         .file-card:hover { transform: translateY(-6px); border-color: #8a2be2; }
         
         .thumb {
             height: 160px;
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 3.5rem;
             background: linear-gradient(145deg, #2a1a3a, #1e1e1e);
             position: relative;
         }
         .thumb.video { background: linear-gradient(145deg, #ff7b00, #ff5500); }
+        .thumb-media {
+            background-size: cover;
+            background-position: center;
+            isolation: isolate;
+        }
+        .thumb-media::before {
+            content: '';
+            position: absolute;
+            inset: 0;
+            background: linear-gradient(180deg, rgba(0,0,0,0.1), rgba(0,0,0,0.7));
+            z-index: -1;
+        }
+        .thumb-icon {
+            width: 66px;
+            height: 66px;
+            border-radius: 50%;
+            background: rgba(0,0,0,0.55);
+            backdrop-filter: blur(6px);
+            display: flex;
+            align-items: center;
+            justify-content: center;
+            font-size: 2rem;
+            border: 1px solid rgba(255,255,255,0.2);
+        }
         
         .badge {
             position: absolute;
             padding: 6px 14px;
             border-radius: 999px;
             font-size: 11px;
             font-weight: 700;
             color: white;
         }
         .badge-type { left: 12px; top: 12px; background: rgba(0,0,0,0.7); }
         .badge-cert { right: 12px; top: 12px; background: rgba(255,215,0,0.9); color: black; }
         .badge-genre { left: 12px; bottom: 12px; }
         
         .info { padding: 20px; }
         .name { font-size: 1.2rem; font-weight: 700; margin-bottom: 6px; }
         .creator { color: #999; font-size: 0.9rem; margin-bottom: 16px; }
         
         .panel {
             background: rgba(255,255,255,0.03);
             padding: 14px;
             border-radius: 12px;
             margin-bottom: 16px;
             font-size: 13px;
             border-left: 4px solid #8a2be2;
         }
@@ -219,65 +243,135 @@
             background: #1e1e1e;
             padding: 16px 24px;
             border-radius: 999px;
             display: none;
             z-index: 3000;
             min-width: 320px;
             border-left: 6px solid #1db954;
             box-shadow: 0 4px 20px rgba(0,0,0,0.4);
         }
         
         .hero {
             background: linear-gradient(145deg, #2a1a3a, #1a1a1a);
             padding: 48px;
             border-radius: 24px;
             text-align: center;
             margin-bottom: 32px;
             border: 1px solid rgba(138,43,226,0.3);
         }
         .hero h1 {
             font-size: 3rem;
             margin-bottom: 16px;
             background: linear-gradient(135deg, #b983ff, #8a2be2);
             -webkit-background-clip: text;
             -webkit-text-fill-color: transparent;
         }
+
+        .media-showcase {
+            display: grid;
+            grid-template-columns: 1.2fr 1fr;
+            gap: 18px;
+            margin-top: 22px;
+        }
+        .featured-banner {
+            min-height: 220px;
+            border-radius: 18px;
+            padding: 24px;
+            display: flex;
+            flex-direction: column;
+            justify-content: flex-end;
+            background:
+                linear-gradient(130deg, rgba(0,0,0,0.15), rgba(0,0,0,0.7)),
+                url('https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?auto=format&fit=crop&w=1400&q=80') center/cover;
+            border: 1px solid rgba(255,255,255,0.12);
+        }
+        .featured-banner .tag {
+            display: inline-block;
+            padding: 6px 12px;
+            background: rgba(138,43,226,0.85);
+            border-radius: 999px;
+            font-size: 11px;
+            font-weight: 700;
+            margin-bottom: 10px;
+            width: fit-content;
+        }
+        .playlist-stack {
+            display: grid;
+            gap: 12px;
+        }
+        .playlist-item {
+            min-height: 67px;
+            border-radius: 14px;
+            padding: 14px;
+            border: 1px solid rgba(255,255,255,0.12);
+            background-size: cover;
+            background-position: center;
+            display: flex;
+            align-items: end;
+            font-weight: 700;
+        }
         
+
+        @media (max-width: 900px) {
+            .media-showcase { grid-template-columns: 1fr; }
+        }
+
         .feature-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
             gap: 24px;
             margin-top: 32px;
         }
         .feature-card {
             background: rgba(255,255,255,0.03);
             padding: 24px;
             border-radius: 16px;
             border: 1px solid rgba(255,255,255,0.08);
         }
         .feature-card h3 { margin: 12px 0; font-size: 1.2rem; }
         .feature-card p { color: #999; font-size: 0.9rem; line-height: 1.6; }
+
+        .mvp-grid {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
+            gap: 14px;
+            margin-top: 18px;
+        }
+        .mvp-kpi {
+            background: rgba(255,255,255,0.03);
+            border: 1px solid rgba(255,255,255,0.08);
+            border-radius: 14px;
+            padding: 14px;
+        }
+        .mvp-kpi .label { color: #999; font-size: 12px; margin-bottom: 8px; }
+        .mvp-kpi .value { font-size: 1.5rem; font-weight: 800; }
+        .quick-actions {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
+            gap: 12px;
+            margin-top: 16px;
+        }
         
         .search-box {
             background: rgba(255,255,255,0.05);
             border: 1px solid rgba(255,255,255,0.1);
             border-radius: 999px;
             padding: 14px 24px;
             display: flex;
             align-items: center;
             gap: 12px;
             margin-bottom: 24px;
         }
         .search-box input {
             flex: 1;
             background: transparent;
             border: none;
             color: white;
             font-size: 15px;
             outline: none;
         }
         
         .genre-filter {
             display: flex;
             gap: 10px;
             margin-bottom: 24px;
             flex-wrap: wrap;
@@ -492,88 +586,171 @@
         <p style="color:#999; margin-bottom:20px;" id="playCreator">Creator</p>
         <div class="panel">
             <strong>â³ TL Balance</strong><br>
             <span style="font-size:2rem; font-weight:800;" id="playTL">0</span> TL
         </div>
         <audio id="audioPlayer" controls style="width:100%; margin:20px 0;"></audio>
         <button class="btn" onclick="App.stopPlay()" style="width:100%; background:#f44; color:white; padding:16px;">â¹ï¸ ì •ì§€</button>
     </div>
 </div>
 
 <!-- Charge Modal -->
 <div class="modal" id="chargeModal">
     <div class="modal-content">
         <h2>ğŸ’° TL ì¶©ì „</h2>
         <div class="form-group" style="margin-top:24px;">
             <label>ì¶©ì „í•  TL</label>
             <input type="number" id="chargeAmount" value="1000" min="100" step="100">
         </div>
         <div style="display:flex; gap:12px;">
             <button class="btn btn-play" onclick="App.executeCharge()" style="flex:1; padding:16px;">ì¶©ì „</button>
             <button class="btn" onclick="App.closeModal()" style="flex:1; background:#333; color:white; padding:16px;">ì·¨ì†Œ</button>
         </div>
     </div>
 </div>
 
+<!-- Wallet Top-up Modal -->
+<div class="modal" id="walletChargeModal">
+    <div class="modal-content">
+        <h2>âš¡ TL ì¶©ì „ì†Œ</h2>
+        <div class="panel" style="margin-top:20px;">
+            <strong>í˜„ì¬ TL</strong><br>
+            <span id="walletChargeCurrentTl" style="font-size:1.8rem; font-weight:800;">0</span> TL
+        </div>
+
+        <div class="card" style="padding:18px; margin:0 0 16px 0; border-radius:14px;">
+            <h3 style="margin-bottom:10px;">ğŸ“º ê´‘ê³  ì¶©ì „</h3>
+            <p style="color:#aaa; font-size:13px; margin-bottom:10px;">ê´‘ê³  30ì´ˆ ì‹œì²­ ì‹œ 60 TL ì§€ê¸‰</p>
+            <button class="btn" style="width:100%; background:#3b82f6; color:#fff;" onclick="App.watchAdForTl()">30ì´ˆ ê´‘ê³  ë³´ê³  +60 TL</button>
+        </div>
+
+        <div class="card" style="padding:18px; margin:0 0 16px 0; border-radius:14px;">
+            <h3 style="margin-bottom:10px;">ğŸ’³ ì¼ë°˜ êµ¬ë§¤</h3>
+            <p style="color:#aaa; font-size:13px; margin-bottom:10px;">1 TL = 2ì›</p>
+            <div style="display:flex; gap:10px; align-items:center;">
+                <input type="number" id="tlPurchaseAmount" min="100" step="100" value="1000" style="flex:1; padding:12px; background:#111; border:1px solid #333; border-radius:10px; color:#fff;">
+                <button class="btn btn-play" onclick="App.buyTl()">êµ¬ë§¤</button>
+            </div>
+            <div style="font-size:12px; color:#888; margin-top:8px;">ê²°ì œ ì˜ˆìƒê¸ˆì•¡: <span id="purchasePrice">2,000ì›</span></div>
+        </div>
+
+        <div class="card" style="padding:18px; margin:0 0 8px 0; border-radius:14px;">
+            <h3 style="margin-bottom:10px;">ğŸ í• ì¸ íŒ¨í‚¤ì§€</h3>
+            <div style="display:grid; gap:8px;">
+                <button class="btn" style="background:#f59e0b; color:#111;" onclick="App.buyDiscountPack(5000, 15)">5,000 TL íŒ¨í‚¤ì§€ (15% í• ì¸)</button>
+                <button class="btn" style="background:#f59e0b; color:#111;" onclick="App.buyDiscountPack(10000, 25)">10,000 TL íŒ¨í‚¤ì§€ (25% í• ì¸)</button>
+                <button class="btn" style="background:#f59e0b; color:#111;" onclick="App.buyDiscountPack(30000, 35)">30,000 TL íŒ¨í‚¤ì§€ (35% í• ì¸)</button>
+            </div>
+        </div>
+
+        <button class="btn" onclick="App.closeModal()" style="width:100%; background:#333; color:#fff; margin-top:10px;">ë‹«ê¸°</button>
+    </div>
+</div>
+
 <div class="container">
     <div class="header">
         <h1>â° TimeLink</h1>
         <div class="user-info">
             <div class="balances">
                 <div class="balance">
                     <div class="lbl">ğŸ’° TL</div>
                     <div class="amt" id="walletTL">10,000</div>
                 </div>
                 <div class="balance">
                     <div class="lbl">ğŸª™ TLC</div>
                     <div class="amt" id="walletTLC">0.00</div>
                 </div>
             </div>
             <div class="user-name">ğŸ‘¤ <span id="userName">User</span></div>
+            <button class="logout-btn" onclick="App.openWalletChargeModal()" style="background:rgba(59,130,246,0.2); color:#60a5fa; border-color:rgba(59,130,246,0.4);">âš¡ TL ì¶©ì „ì†Œ</button>
             <button class="logout-btn" onclick="App.resetDatabase()" style="background:rgba(255,165,0,0.2); color:#ffa500; border-color:rgba(255,165,0,0.3);">ğŸ”„ ë¦¬ì…‹</button>
             <button class="logout-btn" onclick="Auth.logout()">ë¡œê·¸ì•„ì›ƒ</button>
         </div>
     </div>
 
     <div class="tabs">
         <button class="tab active" onclick="App.switchTab('dashboard', event)">ğŸ“Š Dashboard</button>
         <button class="tab" onclick="App.switchTab('create', event)">ğŸ“¤ Create</button>
         <button class="tab" onclick="App.switchTab('myfiles', event)">ğŸµ My Files</button>
         <button class="tab" onclick="App.switchTab('share', event)">ğŸ”„ Share Place</button>
         <button class="tab" onclick="App.switchTab('cafe', event)">â˜• Cafe</button>
         <button class="tab" onclick="App.switchTab('car', event)">ğŸš—ğŸš¶ Car & Walk</button>
         <button class="tab" onclick="App.switchTab('mining', event)">â›ï¸ Mining</button>
         <button class="tab" onclick="App.switchTab('lecture', event)">ğŸ“š Lecture</button>
         <button class="tab" onclick="App.switchTab('gold', event)">ğŸ† Gold</button>
         <button class="tab" onclick="App.switchTab('ton', event)">â¬¡ TLC Wallet</button>
     </div>
 
     <!-- Dashboard -->
     <div id="tabDashboard" class="tab-content active">
         <div class="hero">
             <h1>â° TimeLink</h1>
             <p style="font-size:1.2rem; color:#999;">Time-Based Media Economy</p>
+            <div class="media-showcase">
+                <div class="featured-banner">
+                    <span class="tag">LIVE FEATURED</span>
+                    <div style="font-size:1.4rem; font-weight:800;">Tonight's Global Chill Session</div>
+                    <div style="color:#d0d0d0; font-size:0.9rem; margin-top:4px;">Moonlight Synth Â· Coffee Lounge Â· Late Drive</div>
+                </div>
+                <div class="playlist-stack">
+                    <div class="playlist-item" style="background-image:linear-gradient(120deg, rgba(0,0,0,.2), rgba(0,0,0,.65)), url('https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=1000&q=80');">AI DJ Picks Â· Rainy Cafe</div>
+                    <div class="playlist-item" style="background-image:linear-gradient(120deg, rgba(0,0,0,.2), rgba(0,0,0,.65)), url('https://images.unsplash.com/photo-1459749411175-04bf5292ceea?auto=format&fit=crop&w=1000&q=80');">Creator Spotlight Â· Indie Seoul</div>
+                    <div class="playlist-item" style="background-image:linear-gradient(120deg, rgba(0,0,0,.2), rgba(0,0,0,.65)), url('https://images.unsplash.com/photo-1470225620780-dba8ba36b745?auto=format&fit=crop&w=1000&q=80');">Drive Mode Â· Highway Energy</div>
+                </div>
+            </div>
+        </div>
+
+        <div class="card">
+            <h2>ğŸš€ MVP ë¹ ë¥¸ ì‹¤í–‰</h2>
+            <p style="color:#999; line-height:1.8;">
+                ì§€ê¸ˆì€ í•µì‹¬ í”Œë¡œìš°(ì—…ë¡œë“œ â†’ ê³µìœ  â†’ ì²­ì·¨/ì±„êµ´) ê²€ì¦ì´ ìš°ì„ ì…ë‹ˆë‹¤.
+                ì•„ë˜ 4ë‹¨ê³„ë§Œ ì™„ë£Œí•˜ë©´ TimeLink MVPì˜ í•µì‹¬ ê°€ì¹˜ê°€ ë°”ë¡œ í™•ì¸ë©ë‹ˆë‹¤.
+            </p>
+            <div class="mvp-grid">
+                <div class="mvp-kpi">
+                    <div class="label">ì—…ë¡œë“œ íŒŒì¼</div>
+                    <div class="value" id="mvpFileCount">0ê°œ</div>
+                </div>
+                <div class="mvp-kpi">
+                    <div class="label">ê³µìœ  íŒŒì¼</div>
+                    <div class="value" id="mvpSharedCount">0ê°œ</div>
+                </div>
+                <div class="mvp-kpi">
+                    <div class="label">ëˆ„ì  TL ìˆ˜ìµ</div>
+                    <div class="value" id="mvpTotalBalance">0 TL</div>
+                </div>
+                <div class="mvp-kpi">
+                    <div class="label">ì±„êµ´ëœ TLC</div>
+                    <div class="value" id="mvpMinedTlc">0.00 TLC</div>
+                </div>
+            </div>
+            <div class="quick-actions">
+                <button class="btn btn-play" onclick="App.switchTab('create')">1) ì½˜í…ì¸  ì—…ë¡œë“œ</button>
+                <button class="btn btn-share" onclick="App.switchTab('myfiles')">2) íŒŒì¼ ê³µìœ /ì¶©ì „</button>
+                <button class="btn" style="background:#0ea5e9; color:white;" onclick="App.switchTab('share')">3) Share Place ì²­ì·¨</button>
+                <button class="btn btn-charge" onclick="App.switchTab('mining')">4) TLC ì±„êµ´</button>
+            </div>
         </div>
 
         <div class="card">
             <h2>ğŸ¯ TimeLinkë€?</h2>
             <p style="color:#999; line-height:1.8; margin-bottom:24px;">
                 TimeLinkëŠ” ì‹œê°„ ê¸°ë°˜ ë¯¸ë””ì–´ ê²½ì œ í”Œë«í¼ì…ë‹ˆë‹¤. ëª¨ë“  ì½˜í…ì¸ ëŠ” ì‹œê°„ê³¼ í•¨ê»˜ íë¥´ë©°, 
                 ì°½ì‘ìì™€ ì²­ì·¨ì ëª¨ë‘ê°€ ê³µì •í•˜ê²Œ ê°€ì¹˜ë¥¼ ë‚˜ëˆ•ë‹ˆë‹¤.
             </p>
             
             <div class="feature-grid">
                 <div class="feature-card">
                     <div style="font-size:2.5rem;">ğŸ“¤</div>
                     <h3>Create</h3>
                     <p>MP3/MP4ë¥¼ TL3/TL4ë¡œ ë³€í™˜. Suno/Udio AI ìë™ ì¸ì¦.</p>
                 </div>
                 <div class="feature-card">
                     <div style="font-size:2.5rem;">ğŸµ</div>
                     <h3>My Files</h3>
                     <p>TL ì¶©ì „ í›„ ì¬ìƒ. ë³¸ì¸ íŒŒì¼ë„ ì²­ì·¨ ê°€ëŠ¥.</p>
                 </div>
                 <div class="feature-card">
                     <div style="font-size:2.5rem;">ğŸ”„</div>
                     <h3>Share Place</h3>
                     <p>AI DJ íë ˆì´ì…˜. ì²­ì·¨ì TL ì†Œë¹„ â†’ ì°½ì‘ì TL íšë“.</p>
                 </div>
@@ -1341,50 +1518,53 @@ const Auth = {
         };
         
         // ì‚¬ì—…ì íšŒì›ì¸ ê²½ìš° ì¹´í˜ ì •ë³´ ì¶”ê°€
         if (accountType === 'business') {
             const cafeName = document.getElementById('cafeName').value.trim();
             const cafeLocation = document.getElementById('cafeLocation').value.trim();
             const cafeDescription = document.getElementById('cafeDescription').value.trim();
             const cafeImage = document.getElementById('cafeImage').value.trim();
             const cafeHours = document.getElementById('cafeHours').value.trim();
             
             newUser.cafeInfo = {
                 name: cafeName || '',
                 location: cafeLocation || '',
                 description: cafeDescription || '',
                 image: cafeImage || '',
                 hours: cafeHours || '',
                 comments: []
             };
         }
 
         users[email] = newUser;
         localStorage.setItem('timelink_users', JSON.stringify(users));
 
         this.currentUser = newUser;
         localStorage.setItem('timelink_current_user', JSON.stringify(newUser));
+
+        // ì‹ ê·œ íšŒì›ì€ App ìƒíƒœë¥¼ ì¦‰ì‹œ ë™ê¸°í™”í•˜ì—¬ ê¸°ë³¸ 10,000 TLì´ ë³´ì´ë„ë¡ ì²˜ë¦¬
+        await App.loadUserData();
         this.showMainApp();
         
         if (accountType === 'business') {
             App.toast('âœ… ì‚¬ì—…ì íšŒì›ê°€ì… ì™„ë£Œ! ì¹´í˜ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
         } else {
             App.toast('âœ… íšŒì›ê°€ì… ì™„ë£Œ! ìë™ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
         }
     },
 
     async login() {
         const email = document.getElementById('loginEmail').value.trim().toLowerCase();
         const password = document.getElementById('loginPassword').value;
 
         if (!email || !password) {
             this.showAuthMessage('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”', 'error');
             return;
         }
 
         const users = this.getAllUsers();
         const user = users[email];
 
         if (!user) {
             this.showAuthMessage('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤', 'error');
             return;
         }
@@ -1463,50 +1643,51 @@ const Auth = {
         messageEl.textContent = msg;
         messageEl.style.display = 'block';
         messageEl.style.background = type === 'success' ? 'rgba(29,185,84,0.2)' : 'rgba(255,68,68,0.2)';
         messageEl.style.color = type === 'success' ? '#1db954' : '#ff4444';
         messageEl.style.border = `1px solid ${type === 'success' ? '#1db954' : '#ff4444'}`;
         
         setTimeout(() => {
             messageEl.style.display = 'none';
         }, 3000);
     }
 };
 
 // ==================== MAIN APP ====================
 const App = {
     wallet: { tl: 10000, tlc: 0 },
     files: [],
     gold: 0,
     goldHistory: [], // ê¸ˆ ì¶•ì  ë‚´ì—­
     goldPeriod: 'week', // ê·¸ë˜í”„ ê¸°ê°„
     walletHistory: [], // TLC ì§€ê°‘ ê±°ë˜ ë‚´ì—­
     tlcPrice: 1.00, // TLC ê°€ê²© (USD)
     type: 'audio',
     selectedFile: null,
     selectedFileDuration: 0,
     chargeTarget: null,
+    chargeMode: 'file',
     playInterval: null,
     currentFile: null,
     currentGenre: 'all',
     ci: 1.0,
     // ê° ëª¨ë“œë³„ ìƒíƒœ
     cafeActive: false,
     cafeMood: 'chill',
     cafeQueue: [],
     cafeIndex: 0,
     cafeListeners: 0,
     cafeTotalPlays: 0,
     carWalkActive: false,
     movementMultiplier: 1.0,
     lectureActive: false,
     lectureProgress: 0,
 
     init() {
         const fileInput = document.getElementById('fileInput');
         fileInput.addEventListener('change', (e) => {
             const file = e.target.files[0];
             if (!file) return;
             
             if (!file.type.startsWith('audio/') && !file.type.startsWith('video/')) {
                 App.toast('ì˜¤ë””ì˜¤ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤');
                 e.target.value = '';
@@ -1698,64 +1879,78 @@ const App = {
                 // í¼ ì´ˆê¸°í™”
                 document.getElementById('uploadForm').style.display = 'none';
                 document.getElementById('fileInput').value = '';
                 this.selectedFile = null;
                 this.selectedFileDuration = 0;
                 
                 // My Files íƒ­ìœ¼ë¡œ ì´ë™
                 this.switchTab('myfiles');
                 this.updateAll();
                 
             } catch (error) {
                 console.error('âŒ ë³€í™˜ ì¤‘ ì˜¤ë¥˜:', error);
                 this.toast('íŒŒì¼ ë³€í™˜ ì¤‘ ì˜¤ë¥˜: ' + error.message);
             }
         };
         
         reader.onerror = (e) => {
             console.error('âŒ íŒŒì¼ ì½ê¸° ì˜¤ë¥˜:', e);
             this.toast('íŒŒì¼ ì½ê¸° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
         };
         
         // ArrayBufferë¡œ ì½ê¸° (Data URL ëŒ€ì‹ )
         reader.readAsArrayBuffer(this.selectedFile);
     },
 
+    getCoverImage(file) {
+        const byGenre = {
+            pop: 'https://images.unsplash.com/photo-1501386761578-eac5c94b800a?auto=format&fit=crop&w=1200&q=80',
+            rock: 'https://images.unsplash.com/photo-1498038432885-c6f3f1b912ee?auto=format&fit=crop&w=1200&q=80',
+            hiphop: 'https://images.unsplash.com/photo-1571260899304-425eee4c7efc?auto=format&fit=crop&w=1200&q=80',
+            jazz: 'https://images.unsplash.com/photo-1511192336575-5a79af67a629?auto=format&fit=crop&w=1200&q=80',
+            classic: 'https://images.unsplash.com/photo-1465847899084-d164df4dedc6?auto=format&fit=crop&w=1200&q=80',
+            edm: 'https://images.unsplash.com/photo-1574391884720-bbc7f31f3f8a?auto=format&fit=crop&w=1200&q=80',
+            kpop: 'https://images.unsplash.com/photo-1619983081563-430f63602796?auto=format&fit=crop&w=1200&q=80',
+            indie: 'https://images.unsplash.com/photo-1516280440614-37939bbacd81?auto=format&fit=crop&w=1200&q=80'
+        };
+        return byGenre[file.genre] || 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?auto=format&fit=crop&w=1200&q=80';
+    },
+
     renderMyFiles() {
         const el = document.getElementById('myFilesList');
         if (this.files.length === 0) {
             el.innerHTML = '<div style="text-align:center;padding:60px;color:#666">ğŸ“ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤</div>';
             return;
         }
         
         const genreEmoji = {pop:'ğŸ¤',rock:'ğŸ¸',hiphop:'ğŸ§',jazz:'ğŸº',classic:'ğŸ»',edm:'ğŸ’¿',kpop:'ğŸ‡°ğŸ‡·',indie:'ğŸ¹'};
         const genreColor = {pop:'#ff6b6b',rock:'#4ecdc4',hiphop:'#ffd93d',jazz:'#a8e6cf',classic:'#b39eb5',edm:'#ff8a5c',kpop:'#ff1493',indie:'#9370db'};
         
         el.innerHTML = this.files.map(f => `
             <div class="file-card">
-                <div class="thumb ${f.fileType}">
-                    <div style="font-size:4rem">${f.type==='TL4'?'ğŸ¬':'ğŸµ'}</div>
+                <div class="thumb thumb-media ${f.fileType}" style="background-image:linear-gradient(130deg, rgba(0,0,0,0.2), rgba(0,0,0,0.65)), url('${this.getCoverImage(f)}');">
+                    <div class="thumb-icon">${f.type==='TL4'?'ğŸ¬':'ğŸµ'}</div>
                     <span class="badge badge-type">${f.type}</span>
                     ${f.certified?'<span class="badge badge-cert">âœ“ ì¸ì¦</span>':''}
                     <span class="badge badge-genre" style="background:${genreColor[f.genre]||'#666'}">${genreEmoji[f.genre]||'ğŸµ'}</span>
                 </div>
                 <div class="info">
                     <div class="name">${f.title}</div>
                     <div class="creator">${f.creator} Â· ${f.tool}</div>
                     <div class="panel">
                         <strong>â³ TL Balance</strong><br>
                         <span style="font-size:1.6rem;font-weight:800;">${f.balance.toLocaleString()}</span> TL
                     </div>
                     <div class="actions">
                         ${f.balance > 0 ?
                             `<button class="btn btn-play" onclick="App.play(${f.id})">â–¶ï¸ ì¬ìƒ</button>` :
                             `<button class="btn btn-disabled" disabled>âš ï¸ TL ì¶©ì „ í•„ìš”</button>`
                         }
                         <button class="btn btn-charge" onclick="App.openCharge(${f.id})">ğŸ’° ì¶©ì „</button>
                         ${!f.shared?
                             `<button class="btn btn-share" onclick="App.share(${f.id})">ğŸ”„ ê³µìœ </button>`:
                             `<button class="btn" style="background:#555;color:#999;" disabled>âœ“ ê³µìœ ë¨</button>`
                         }
                     </div>
                 </div>
             </div>
         `).join('');
@@ -1778,121 +1973,228 @@ const App = {
         const moods = {
             energetic: 'ğŸ”¥ Energetic',
             chill: 'ğŸ˜Œ Chill',
             focus: 'ğŸ¯ Focus',
             workout: 'ğŸ’ª Workout',
             romantic: 'ğŸ’• Romantic',
             sad: 'ğŸ˜¢ Sad',
             happy: 'ğŸ˜Š Happy',
             sleep: 'ğŸ˜´ Sleep'
         };
         
         const genreEmoji = {pop:'ğŸ¤',rock:'ğŸ¸',hiphop:'ğŸ§',jazz:'ğŸº',classic:'ğŸ»',edm:'ğŸ’¿',kpop:'ğŸ‡°ğŸ‡·',indie:'ğŸ¹'};
         const genreColor = {pop:'#ff6b6b',rock:'#4ecdc4',hiphop:'#ffd93d',jazz:'#a8e6cf',classic:'#b39eb5',edm:'#ff8a5c',kpop:'#ff1493',indie:'#9370db'};
         
         let html = '';
         Object.keys(moods).forEach(mood => {
             const moodFiles = filtered.filter(f => f.mood === mood);
             if (moodFiles.length === 0) return;
             
             html += `
                 <div style="margin-bottom:40px;">
                     <h3 style="margin-bottom:20px; font-size:1.4rem;">${moods[mood]}</h3>
                     <div class="grid">
                         ${moodFiles.map(f => `
                             <div class="file-card" onclick="App.listenShared(${f.id})">
-                                <div class="thumb ${f.fileType}">
-                                    <div style="font-size:4rem">${f.type==='TL4'?'ğŸ¬':'ğŸµ'}</div>
+                                <div class="thumb thumb-media ${f.fileType}" style="background-image:linear-gradient(130deg, rgba(0,0,0,0.2), rgba(0,0,0,0.65)), url('${this.getCoverImage(f)}');">
+                                    <div class="thumb-icon">${f.type==='TL4'?'ğŸ¬':'ğŸµ'}</div>
                                     <span class="badge badge-type">${f.type}</span>
                                     <span class="badge badge-genre" style="background:${genreColor[f.genre]||'#666'}">${genreEmoji[f.genre]||'ğŸµ'}</span>
                                 </div>
                                 <div class="info">
                                     <div class="name">${f.title}</div>
                                     <div class="creator">${f.creator}</div>
                                     <div class="panel">
                                         <strong>ìˆ˜ìµ ê³„ì•½</strong><br>
                                         ${f.revenue==='55'?'ì°½ì‘ì 50% / í”Œë«í¼ 50%':'ì°½ì‘ì 70% / í”Œë«í¼ 30%'}
                                     </div>
-                                    <button class="btn btn-play" onclick="event.stopPropagation(); App.listenShared(${f.id})" style="width:100%;">
-                                        ğŸ§ ì²­ì·¨ (1 TL/sec)
-                                    </button>
+                                    <div class="actions" style="grid-template-columns:1fr 1fr; margin-top:8px;">
+                                        <button class="btn" style="background:#3b82f6; color:white;" onclick="event.stopPropagation(); App.downloadShared(${f.id})">
+                                            â¬‡ï¸ ë‹¤ìš´ë¡œë“œ
+                                        </button>
+                                        <button class="btn btn-charge" onclick="event.stopPropagation(); App.openShareCharge(${f.id})">
+                                            ğŸ’° TL ì¶©ì „
+                                        </button>
+                                        <button class="btn btn-play" onclick="event.stopPropagation(); App.listenShared(${f.id})" style="grid-column:span 2;">
+                                            ğŸ§ ì²­ì·¨ (${f.type === 'TL4' ? '2' : '1'} TL/sec)
+                                        </button>
+                                    </div>
+                                    <div style="margin-top:10px; font-size:12px; color:#bbb;">
+                                        ${f.listenerDownloaded ? 'âœ… ë‹¤ìš´ë¡œë“œ ì™„ë£Œ' : 'âš ï¸ ë¨¼ì € ë‹¤ìš´ë¡œë“œ í•„ìš”'} Â· ì²­ì·¨ ì „ìš© TL: <strong>${(f.listenerBalance || 0).toLocaleString()} TL</strong>
+                                    </div>
                                 </div>
                             </div>
                         `).join('')}
                     </div>
                 </div>
             `;
         });
         
         el.innerHTML = html;
     },
 
+
+    async downloadShared(id) {
+        const file = this.files.find(f => f.id === id);
+        if (!file) return this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
+
+        file.listenerDownloaded = true;
+        if (typeof file.listenerBalance !== 'number') file.listenerBalance = 0;
+
+        await Auth.saveUserData();
+        this.renderSharePlace();
+        this.toast(`â¬‡ï¸ ${file.title} ë‹¤ìš´ë¡œë“œ ì™„ë£Œ! ì´ì œ TL ì¶©ì „ í›„ ì²­ì·¨í•˜ì„¸ìš”`);
+    },
+
+    openShareCharge(id) {
+        const file = this.files.find(f => f.id === id);
+        if (!file) return this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
+        if (!file.listenerDownloaded) return this.toast('ë¨¼ì € ë‹¤ìš´ë¡œë“œë¥¼ ì§„í–‰í•˜ì„¸ìš”');
+        if (this.wallet.tl <= 0) return this.toast('ë³´ìœ  TLì´ ì—†ìŠµë‹ˆë‹¤');
+
+        this.chargeMode = 'share';
+        this.chargeTarget = id;
+        const chargeInput = document.getElementById('chargeAmount');
+        chargeInput.value = Math.min(500, this.wallet.tl);
+        chargeInput.max = this.wallet.tl;
+        document.getElementById('chargeModal').style.display = 'flex';
+    },
+
+    openWalletChargeModal() {
+        document.getElementById('walletChargeCurrentTl').textContent = this.wallet.tl.toLocaleString();
+
+        const amountInput = document.getElementById('tlPurchaseAmount');
+        const priceEl = document.getElementById('purchasePrice');
+        if (amountInput && priceEl) {
+            const updatePrice = () => {
+                const amt = parseInt(amountInput.value) || 0;
+                priceEl.textContent = (amt * 2).toLocaleString() + 'ì›';
+            };
+            amountInput.oninput = updatePrice;
+            updatePrice();
+        }
+
+        document.getElementById('walletChargeModal').style.display = 'flex';
+    },
+
+    async watchAdForTl() {
+        this.wallet.tl += 60;
+        await Auth.saveUserData();
+        this.updateAll();
+        document.getElementById('walletChargeCurrentTl').textContent = this.wallet.tl.toLocaleString();
+        this.toast('ğŸ“º ê´‘ê³  ì‹œì²­ ì™„ë£Œ! +60 TL ì§€ê¸‰');
+    },
+
+    async buyTl() {
+        const amountInput = document.getElementById('tlPurchaseAmount');
+        const amt = parseInt(amountInput.value) || 0;
+        if (amt <= 0) return this.toast('êµ¬ë§¤í•  TLì„ ì…ë ¥í•˜ì„¸ìš”');
+
+        const krw = amt * 2;
+        this.wallet.tl += amt;
+        await Auth.saveUserData();
+        this.updateAll();
+        document.getElementById('walletChargeCurrentTl').textContent = this.wallet.tl.toLocaleString();
+        this.toast(`ğŸ’³ ${amt.toLocaleString()} TL êµ¬ë§¤ ì™„ë£Œ (${krw.toLocaleString()}ì›)`);
+    },
+
+    async buyDiscountPack(tlAmount, discountRate) {
+        const original = tlAmount * 2;
+        const discounted = Math.floor(original * (1 - discountRate / 100));
+
+        this.wallet.tl += tlAmount;
+        await Auth.saveUserData();
+        this.updateAll();
+        document.getElementById('walletChargeCurrentTl').textContent = this.wallet.tl.toLocaleString();
+        this.toast(`ğŸ í• ì¸ êµ¬ë§¤ ì™„ë£Œ! ${tlAmount.toLocaleString()} TL (${discountRate}% í• ì¸, ${discounted.toLocaleString()}ì›)`);
+    },
+
     openCharge(id) {
         const file = this.files.find(f => f.id === id);
         if (!file) return this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
         if (this.wallet.tl <= 0) return this.toast('ë³´ìœ  TLì´ ì—†ìŠµë‹ˆë‹¤');
         
+        this.chargeMode = 'file';
         this.chargeTarget = id;
         const chargeInput = document.getElementById('chargeAmount');
         chargeInput.value = Math.min(1000, this.wallet.tl);
         chargeInput.max = this.wallet.tl;
         document.getElementById('chargeModal').style.display = 'flex';
     },
 
     async executeCharge() {
         if (!this.chargeTarget) {
             this.toast('ì¶©ì „ ëŒ€ìƒì´ ì—†ìŠµë‹ˆë‹¤');
             this.closeModal();
             return;
         }
 
-        const file = this.files.find(f => f.id === this.chargeTarget);
-        if (!file) {
-            this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
-            this.closeModal();
-            return;
-        }
-
         const amtInput = document.getElementById('chargeAmount');
-        let amt = parseInt(amtInput.value);
-        if (isNaN(amt) || amt <= 0) {
-            this.toast('ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”');
+        const amt = parseInt(amtInput.value) || 0;
+
+        if (amt <= 0) return this.toast('ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”');
+        if (amt > this.wallet.tl) return this.toast('ë³´ìœ  TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤');
+
+        if (this.chargeMode === 'share') {
+            const file = this.files.find(f => f.id === this.chargeTarget);
+            if (!file) {
+                this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
+                this.closeModal();
+                return;
+            }
+
+            if (!file.listenerDownloaded) {
+                this.toast('ë¨¼ì € ë‹¤ìš´ë¡œë“œë¥¼ ì§„í–‰í•˜ì„¸ìš”');
+                this.closeModal();
+                return;
+            }
+
+            this.wallet.tl -= amt;
+            file.listenerBalance = (file.listenerBalance || 0) + amt;
+
+            await Auth.saveUserData();
+            this.closeModal();
+            this.updateAll();
+            this.renderSharePlace();
+            this.toast(`ğŸ’° Share Place ì²­ì·¨ìš© ${amt.toLocaleString()} TL ì¶©ì „ ì™„ë£Œ`);
             return;
         }
 
-        if (amt > this.wallet.tl) {
-            this.toast(`TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤ (ë³´ìœ : ${this.wallet.tl.toLocaleString()} TL)`);
+        const file = this.files.find(f => f.id === this.chargeTarget);
+        if (!file) {
+            this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
+            this.closeModal();
             return;
         }
 
         this.wallet.tl -= amt;
         file.balance += amt;
 
         await Auth.saveUserData();
-        this.updateAll();
         this.closeModal();
-        this.toast(`âœ… ${amt.toLocaleString()} TL ì¶©ì „ ì™„ë£Œ!`);
+        this.updateAll();
+        this.toast(`ğŸ’° ${amt.toLocaleString()} TL ì¶©ì „ ì™„ë£Œ`);
     },
 
     async play(id) {
         const file = this.files.find(f => f.id === id);
         if (!file) {
             console.error('âŒ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ:', id);
             return this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
         }
         if (file.balance <= 0) {
             console.warn('âš ï¸ TL ì”ì•¡ ë¶€ì¡±:', file.balance);
             return this.toast('TLì„ ì¶©ì „í•˜ì„¸ìš”');
         }
         
         try {
             console.log('ğŸµ ì¬ìƒ ì¤€ë¹„ ì‹œì‘:', {
                 id: file.id,
                 title: file.title,
                 type: file.fileType,
                 mimeType: file.mimeType
             });
             
             // IndexedDBì—ì„œ ë°ì´í„° í™•ì¸
             const fileData = await DB.getFile(file.id);
             console.log('ğŸ“¦ IndexedDB ë°ì´í„° í™•ì¸:', {
                 found: !!fileData,
@@ -2020,157 +2322,162 @@ const App = {
                 this.playInterval = setInterval(async () => {
                     if (file.balance > 0 && !freshAudio.paused) {
                         file.balance -= 1;
                         document.getElementById('playTL').textContent = file.balance;
                         await Auth.saveUserData();
                         
                         if (file.balance <= 0) {
                             this.stopPlay();
                             this.toast('â¹ï¸ TL ì†Œì§„');
                         }
                     }
                 }, 1000);
             }
         } catch (error) {
             console.error('âŒ ì¬ìƒ ì¤€ë¹„ ì˜¤ë¥˜:', error);
             this.toast('ì¬ìƒ ì¤€ë¹„ ì¤‘ ì˜¤ë¥˜: ' + error.message);
         }
     },
 
     async listenShared(id) {
         const file = this.files.find(f => f.id === id);
         if (!file) {
             console.error('âŒ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ:', id);
             return this.toast('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
         }
-        if (this.wallet.tl <= 0) {
-            console.warn('âš ï¸ TL ì”ì•¡ ë¶€ì¡±');
-            return this.toast('TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤');
+        if (!file.listenerDownloaded) {
+            return this.toast('ë¨¼ì € ìŒì•…ì„ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”');
+        }
+
+        if ((file.listenerBalance || 0) <= 0) {
+            return this.toast('ì²­ì·¨ìš© TLì„ ë¨¼ì € ì¶©ì „í•˜ì„¸ìš”');
         }
         
         try {
             console.log('ğŸ§ Share Place ì¬ìƒ ì¤€ë¹„:', {
                 id: file.id,
                 title: file.title,
                 type: file.fileType,
                 mimeType: file.mimeType
             });
             
             // IndexedDBì—ì„œ ë°ì´í„° í™•ì¸
             const fileData = await DB.getFile(file.id);
             if (!fileData || !fileData.arrayBuffer) {
                 throw new Error('íŒŒì¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ì„ ë‹¤ì‹œ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.');
             }
             
             // Blob URL ìƒì„±
             const blobUrl = await DB.getBlobUrl(file.id, file.mimeType);
             console.log('âœ… Blob URL ìƒì„± ì™„ë£Œ:', blobUrl);
             
             this.currentFile = file;
             
             const audio = document.getElementById('audioPlayer');
             
             // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
             const newAudio = audio.cloneNode(true);
             audio.parentNode.replaceChild(newAudio, audio);
             
             // ìƒˆë¡œìš´ ì°¸ì¡° ê°€ì ¸ì˜¤ê¸°
             const freshAudio = document.getElementById('audioPlayer');
             
             // Blob URL ì„¤ì •
             freshAudio.src = blobUrl;
             
             document.getElementById('audioModal').style.display = 'flex';
             document.getElementById('playTitle').textContent = file.title;
             document.getElementById('playCreator').textContent = file.creator + ' (Share Place)';
-            document.getElementById('playTL').textContent = this.wallet.tl;
+            document.getElementById('playTL').textContent = (file.listenerBalance || 0);
             
             // í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
             let hasStartedPlaying = false;
             
             freshAudio.addEventListener('canplaythrough', function playHandler() {
                 if (hasStartedPlaying) return;
                 hasStartedPlaying = true;
                 
                 console.log('âœ… Share Place ì˜¤ë””ì˜¤ ë¡œë“œ ì™„ë£Œ');
                 freshAudio.play()
                     .then(() => {
                         console.log('âœ… Share Place ì¬ìƒ ì‹œì‘');
                     })
                     .catch(err => {
                         console.error('âŒ Share Place ì¬ìƒ ì˜¤ë¥˜:', err);
                         App.toast('ì¬ìƒ ì˜¤ë¥˜: ' + err.message);
                         App.stopPlay();
                     });
             }, { once: true });
             
             freshAudio.addEventListener('error', function errorHandler(e) {
                 console.error('âŒ Share Place ì˜¤ë””ì˜¤ ì˜¤ë¥˜:', freshAudio.error);
                 App.toast('ì˜¤ë””ì˜¤ ë¡œë“œ ì˜¤ë¥˜');
                 App.stopPlay();
             }, { once: true });
             
             freshAudio.load();
             
             if (this.playInterval) clearInterval(this.playInterval);
             this.playInterval = setInterval(async () => {
-                if (this.wallet.tl > 0 && !freshAudio.paused) {
+                if ((file.listenerBalance || 0) > 0 && !freshAudio.paused) {
                     const cost = file.type === 'TL4' ? 2 : 1;
-                    this.wallet.tl -= cost;
+                    file.listenerBalance = Math.max((file.listenerBalance || 0) - cost, 0);
                     
                     const creatorShare = file.revenue === '55' ? 0.5 : 0.7;
                     const creatorEarn = cost * creatorShare;
                     file.balance += creatorEarn;
                     
                     const platformShare = cost * (1 - creatorShare);
                     const goldPurchase = platformShare * 0.1;
                     this.gold += goldPurchase / 1000;
                     
-                    document.getElementById('playTL').textContent = this.wallet.tl;
+                    document.getElementById('playTL').textContent = (file.listenerBalance || 0);
                     await Auth.saveUserData();
                     this.updateAll();
                     
-                    if (this.wallet.tl <= 0) {
+                    if ((file.listenerBalance || 0) <= 0) {
                         this.stopPlay();
-                        this.toast('â¹ï¸ TL ì†Œì§„');
+                        this.toast('â¹ï¸ ì²­ì·¨ìš© TL ì†Œì§„');
                     }
                 }
             }, 1000);
         } catch (error) {
             console.error('âŒ Share Place ì¬ìƒ ì¤€ë¹„ ì˜¤ë¥˜:', error);
             this.toast('ì¬ìƒ ì¤€ë¹„ ì¤‘ ì˜¤ë¥˜: ' + error.message);
         }
     },
 
     stopPlay() {
         if (this.playInterval) clearInterval(this.playInterval);
         
         const audio = document.getElementById('audioPlayer');
         audio.pause();
         audio.src = '';
         
         document.getElementById('audioModal').style.display = 'none';
+        const walletModal = document.getElementById('walletChargeModal');
+        if (walletModal) walletModal.style.display = 'none';
         this.currentFile = null;
         Auth.saveUserData();
         this.updateAll();
     },
 
     async share(id) {
         const file = this.files.find(f => f.id === id);
         if (!file) return;
         if (!file.certified) return this.toast('ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤');
         
         file.shared = true;
         await Auth.saveUserData();
         this.toast(`ğŸ”„ ${file.title} Share Placeë¡œ ì´ë™!`);
         this.updateAll();
     },
 
     filterGenre(genre) {
         this.currentGenre = genre;
         document.querySelectorAll('.genre-btn').forEach(b => b.classList.remove('active'));
         event.target.classList.add('active');
         this.renderSharePlace();
     },
 
     searchShare() {
         // ê²€ìƒ‰ ê¸°ëŠ¥ (í–¥í›„ êµ¬í˜„)
@@ -2758,50 +3065,51 @@ const App = {
             const tabButtons = document.querySelectorAll('.tab');
             tabButtons.forEach(btn => {
                 const btnText = btn.textContent.toLowerCase();
                 if (btnText.includes(name.toLowerCase()) || 
                     (name === 'myfiles' && btnText.includes('my files')) ||
                     (name === 'share' && btnText.includes('share'))) {
                     btn.classList.add('active');
                 }
             });
         }
         
         document.getElementById('tab' + name.charAt(0).toUpperCase() + name.slice(1)).classList.add('active');
         
         if (name === 'myfiles') this.renderMyFiles();
         if (name === 'share') this.renderSharePlace();
         if (name === 'mining') {
             const maxEl = document.getElementById('miningMax');
             if (maxEl) maxEl.textContent = Math.floor(this.wallet.tl * 0.5).toLocaleString();
         }
     },
 
     closeModal() {
         document.getElementById('chargeModal').style.display = 'none';
         document.getElementById('audioModal').style.display = 'none';
         this.chargeTarget = null;
+        this.chargeMode = 'file';
     },
 
     // ==================== CAFE GALLERY & COMMENTS ====================
     renderCafeGallery() {
         const galleryEl = document.getElementById('cafeGallery');
         if (!galleryEl) return;
         
         // ì•ˆì „í•˜ê²Œ ì‚¬ìš©ì ëª©ë¡ ê°€ì ¸ì˜¤ê¸° (ê°ì²´ â†’ ë°°ì—´ ë³€í™˜)
         let allUsers = [];
         try {
             const usersData = localStorage.getItem('timelink_users');
             if (usersData) {
                 const parsed = JSON.parse(usersData);
                 // ê°ì²´ì¸ ê²½ìš° ë°°ì—´ë¡œ ë³€í™˜
                 allUsers = typeof parsed === 'object' && !Array.isArray(parsed) 
                     ? Object.values(parsed) 
                     : (Array.isArray(parsed) ? parsed : []);
             }
         } catch (error) {
             console.error('ì‚¬ìš©ì ë°ì´í„° ë¡œë”© ì˜¤ë¥˜:', error);
             allUsers = [];
         }
         
         const cafes = allUsers.filter(u => u.cafeInfo && u.cafeInfo.name);
         
@@ -3035,61 +3343,80 @@ const App = {
                 f.mood === 'happy' || f.genre === 'pop'
             );
         }
         
         // í•„í„°ë§ëœ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ì „ì²´ ì‚¬ìš©
         if (filtered.length === 0) {
             filtered = sharedFiles;
         }
         
         // ëœë¤ ì…”í”Œ
         return filtered.sort(() => Math.random() - 0.5);
     },
 
     extractTheme(prompt) {
         if (prompt.includes('ë¹„')) return 'ğŸŒ§ï¸ ë¹„ì˜¤ëŠ” ë‚ ';
         if (prompt.includes('ì•„ì¹¨')) return 'ğŸŒ… ìƒì¾Œí•œ ì•„ì¹¨';
         if (prompt.includes('ë°¤')) return 'ğŸŒ™ í¸ì•ˆí•œ ë°¤';
         if (prompt.includes('ìš´ë™')) return 'ğŸ’ª ìš´ë™ ëª¨ë“œ';
         if (prompt.includes('ê³µë¶€')) return 'ğŸ“š ì§‘ì¤‘ í•™ìŠµ';
         if (prompt.includes('ë“œë¼ì´ë¸Œ')) return 'ğŸš— ë“œë¼ì´ë¸Œ';
         if (prompt.includes('ì¬ì¦ˆ')) return 'ğŸº ì¬ì¦ˆ ë¼ìš´ì§€';
         if (prompt.includes('í¬ë¦¬ìŠ¤ë§ˆìŠ¤')) return 'ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤';
         return 'ğŸµ AI íë ˆì´ì…˜';
     },
 
+    updateMvpDashboard() {
+        const fileCountEl = document.getElementById('mvpFileCount');
+        const sharedCountEl = document.getElementById('mvpSharedCount');
+        const totalBalanceEl = document.getElementById('mvpTotalBalance');
+        const minedTlcEl = document.getElementById('mvpMinedTlc');
+
+        if (!fileCountEl || !sharedCountEl || !totalBalanceEl || !minedTlcEl) return;
+
+        const fileCount = this.files.length;
+        const sharedCount = this.files.filter(file => file.shared).length;
+        const totalBalance = this.files.reduce((sum, file) => sum + (file.balance || 0), 0);
+
+        fileCountEl.textContent = `${fileCount}ê°œ`;
+        sharedCountEl.textContent = `${sharedCount}ê°œ`;
+        totalBalanceEl.textContent = `${totalBalance.toLocaleString()} TL`;
+        minedTlcEl.textContent = `${this.wallet.tlc.toFixed(2)} TLC`;
+    },
+
     updateAll() {
         document.getElementById('walletTL').textContent = this.wallet.tl.toLocaleString();
         document.getElementById('walletTLC').textContent = this.wallet.tlc.toFixed(2);
         const goldEl = document.getElementById('goldAmount');
         if (goldEl) goldEl.textContent = this.gold.toFixed(4) + ' g';
         
         this.renderMyFiles();
         this.renderSharePlace();
         this.renderCafeGallery();
         this.updateWalletDisplay();
         this.drawGoldChart();
+        this.updateMvpDashboard();
     },
 
     toast(msg) {
         const t = document.getElementById('toast');
         t.textContent = msg;
         t.style.display = 'block';
         setTimeout(() => t.style.display = 'none', 3000);
     }
 };
 
 // ì´ˆê¸°í™”
 (async () => {
     await Auth.init();
     App.init();
 })();
 
 window.addEventListener('click', (e) => {
     if (e.target.classList.contains('modal')) App.closeModal();
 });
 
 window.addEventListener('beforeunload', () => Auth.saveUserData());
 </script>
 
 </body>
 </html>
 
EOF
)
