<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeLink Global ‚Äî TL3/TL4 Complete Platform</title>
    
    <!-- Google Fonts & Font Awesome -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-card: #1a1a1a;
            --bg-card-hover: #222222;
            --bg-nav: rgba(17, 17, 17, 0.95);
            --bg-modal: #1e1e1e;
            
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --text-tertiary: #6a6a6a;
            
            --accent: #8a2be2;
            --accent-glow: rgba(138, 43, 226, 0.3);
            --accent-light: #9d4edd;
            --success: #1db954;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --lecture: #ff7b00;
            --video: #ff5500;
            --radio: #1db954;
            --commercial: #f093fb;
            
            --border-color: rgba(255, 255, 255, 0.08);
            --border-hover: rgba(255, 255, 255, 0.15);
            
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.6);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 28px;
            --radius-full: 9999px;
            
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 20px;
            border: 2px solid var(--bg-secondary);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #444;
        }

        /* Auth Container */
        .auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: radial-gradient(circle at 20% 30%, #1a0b2e, #0a0a0a 80%);
            position: relative;
            overflow: hidden;
        }

        .auth-container::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.05"><path d="M20 20 L80 20 L80 80 L20 80 Z" fill="none" stroke="%238a2be2" stroke-width="1"/><circle cx="50" cy="50" r="10" fill="%238a2be2"/></svg>');
            background-size: 60px 60px;
            pointer-events: none;
        }

        .auth-box {
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 48px 40px;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            max-width: 480px;
            width: 100%;
            border: 1px solid var(--border-color);
            animation: fadeUp 0.6s ease;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .logo h1 {
            font-size: 3.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #b983ff, #8a2be2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
            margin-bottom: 8px;
        }

        .logo p {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 400;
        }

        .version-badge {
            background: rgba(138, 43, 226, 0.2);
            color: #c084fc;
            padding: 10px 24px;
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 32px;
            border: 1px solid rgba(138, 43, 226, 0.3);
            backdrop-filter: blur(4px);
            letter-spacing: 0.3px;
        }

        .google-login-btn {
            background: #4285F4;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 18px 24px;
            border-radius: var(--radius-full);
            margin: 30px 0;
            border: none;
            cursor: pointer;
            width: 100%;
            transition: var(--transition);
            box-shadow: 0 8px 20px rgba(66, 133, 244, 0.3);
        }

        .google-login-btn:hover {
            background: #3367D6;
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(66, 133, 244, 0.5);
        }

        /* Main App Container */
        .app-container {
            display: none;
            max-width: 1600px;
            margin: 0 auto;
            padding: 24px 32px;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Header */
        .app-header {
            background: rgba(17, 17, 17, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 20px 32px;
            border-radius: var(--radius-xl);
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .header-left h1 {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #b983ff, #8a2be2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .header-right {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .balance-cards {
            display: flex;
            gap: 16px;
        }

        .balance-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 20px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(8px);
            transition: var(--transition);
            min-width: 130px;
            cursor: pointer;
        }

        .balance-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent);
        }

        .balance-card .label {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 6px;
        }

        .balance-card .amount {
            font-size: 22px;
            font-weight: 800;
            color: white;
            line-height: 1.2;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-full);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            cursor: pointer;
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent);
        }

        .avatar-circle {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8a2be2, #6b21a5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 2px 8px rgba(138, 43, 226, 0.3);
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 700;
            color: white;
            font-size: 14px;
        }

        .user-status {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .btn-logout {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-logout:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
            border-color: #ef4444;
            transform: translateY(-2px);
        }

        /* Tab Navigation */
        .tabs-container {
            position: sticky;
            top: 100px;
            z-index: 90;
            margin-bottom: 32px;
            background: rgba(17, 17, 17, 0.7);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-full);
            padding: 6px;
            border: 1px solid var(--border-color);
            overflow-x: auto;
            white-space: nowrap;
            display: flex;
        }

        .tabs {
            display: flex;
            gap: 4px;
            width: 100%;
        }

        .tab {
            padding: 12px 24px;
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
            transition: var(--transition);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: none;
            white-space: nowrap;
        }

        .tab:hover {
            color: white;
            background: rgba(255, 255, 255, 0.05);
        }

        .tab.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 12px rgba(138, 43, 226, 0.4);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .card:hover {
            border-color: var(--accent);
            box-shadow: var(--shadow-md);
        }

        .card h2 {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 24px;
            background: linear-gradient(135deg, #fff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 28px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: var(--accent);
            opacity: 0.7;
        }

        .stat-card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-4px);
            border-color: var(--accent);
        }

        .stat-card .icon {
            font-size: 2.2rem;
            margin-bottom: 16px;
        }

        .stat-card .label {
            font-size: 12px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            color: white;
            line-height: 1.1;
        }

        /* Upload Zone */
        .upload-zone {
            border: 2px dashed var(--accent);
            background: rgba(138, 43, 226, 0.05);
            border-radius: var(--radius-lg);
            padding: 60px 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 30px;
        }

        .upload-zone:hover {
            border-color: var(--accent-light);
            background: rgba(138, 43, 226, 0.1);
            transform: scale(1.02);
        }

        .upload-zone .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.7);
        }

        .upload-zone h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: white;
        }

        .upload-zone p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* File Type Selector */
        .file-type-selector {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .file-type-card {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            padding: 24px;
            border-radius: var(--radius-lg);
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .file-type-card.selected {
            border-color: var(--success);
            background: rgba(29, 185, 84, 0.1);
        }

        .file-type-card.video.selected {
            border-color: var(--video);
            background: rgba(255, 85, 0, 0.1);
        }

        .file-type-card .icon {
            font-size: 3rem;
            margin-bottom: 12px;
        }

        .file-type-card h3 {
            color: white;
            margin-bottom: 8px;
        }

        .file-type-card .rate {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .file-type-card.audio .rate {
            color: var(--success);
        }

        .file-type-card.video .rate {
            color: var(--video);
        }

        .file-type-card .desc {
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* TL3/TL4 File Card */
        .file-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 28px;
        }

        .file-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .file-card:hover {
            transform: translateY(-6px);
            border-color: var(--accent);
            box-shadow: var(--shadow-md);
        }

        .file-thumbnail {
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.8);
            position: relative;
        }

        .file-thumbnail.audio {
            background: linear-gradient(145deg, #2a1a3a, #1e1e1e);
        }

        .file-thumbnail.video {
            background: linear-gradient(145deg, #ff7b00, #ff5500);
        }

        .badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 6px 16px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 700;
            color: white;
            backdrop-filter: blur(4px);
        }

        .badge-mining { background: rgba(79, 172, 254, 0.9); }
        .badge-no-tl { background: rgba(239, 68, 68, 0.9); }
        .badge-shared { background: rgba(245, 158, 11, 0.9); }
        .badge-copyright { 
            background: rgba(139, 92, 246, 0.9); 
            left: 16px;
            right: auto;
        }
        .badge-type {
            left: 16px;
            top: 60px;
            background: rgba(0,0,0,0.7);
        }

        .file-info {
            padding: 24px;
        }

        .file-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: white;
        }

        .file-artist {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 20px;
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            border-left: 4px solid;
            line-height: 1.6;
        }

        .info-panel strong {
            color: white;
        }

        .copyright-panel { border-left-color: #8b5cf6; }
        .contract-panel { border-left-color: var(--accent); }
        .tl-panel { border-left-color: var(--warning); }
        .video-panel { border-left-color: var(--video); }

        .file-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .tl-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: 16px 0;
        }

        .tl-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            transition: width 0.3s ease;
        }

        .tl-progress-empty {
            height: 100%;
            background: var(--danger);
            width: 100%;
        }

        .file-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .btn-play, .btn-charge, .btn-share, .btn-lecture, .btn-play-disabled, .btn-radio, .btn-commercial {
            padding: 14px 10px;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            color: white;
        }

        .btn-play {
            background: var(--success);
        }

        .btn-play:hover {
            background: #1ed760;
            transform: translateY(-2px);
        }

        .btn-play-disabled {
            background: #333;
            color: #999;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn-charge {
            background: var(--warning);
            color: black;
        }

        .btn-charge:hover {
            background: #fbbf24;
            transform: translateY(-2px);
        }

        .btn-share {
            background: var(--accent);
        }

        .btn-share:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }
        
        .btn-lecture {
            background: var(--lecture);
            grid-column: span 2;
        }

        .btn-lecture:hover {
            background: #ff9500;
            transform: translateY(-2px);
        }

        .btn-radio {
            background: var(--radio);
        }

        .btn-radio:hover {
            background: #1ed760;
            transform: translateY(-2px);
        }

        .btn-commercial {
            background: var(--commercial);
            color: black;
        }

        .btn-commercial:hover {
            background: #f8b4d9;
            transform: translateY(-2px);
        }

        /* Share Place */
        .share-header {
            background: linear-gradient(145deg, #1e1e2a, #15151f);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .share-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .share-stat-card {
            background: var(--bg-card);
            padding: 24px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .share-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: white;
            margin-top: 8px;
        }

        .share-filter {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 24px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            background: transparent;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 14px;
            transition: var(--transition);
            cursor: pointer;
        }

        .filter-btn:hover {
            border-color: var(--accent);
            color: white;
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Radio / Commercial */
        .radio-header {
            background: linear-gradient(145deg, #1db954, #169c46);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
        }

        .commercial-header {
            background: linear-gradient(145deg, #f093fb, #f5576c);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
        }

        .radio-channel-card,
        .commercial-channel-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .radio-channel-card:hover,
        .commercial-channel-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
        }

        .channel-header {
            padding: 20px;
            background: linear-gradient(145deg, #1db954, #169c46);
            color: white;
        }

        .commercial-channel-header {
            background: linear-gradient(145deg, #f093fb, #f5576c);
            padding: 20px;
            color: white;
        }

        .radio-channels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
        }

        .channel-playlist {
            padding: 24px;
        }

        .now-playing {
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border-radius: var(--radius-md);
            margin-bottom: 16px;
            border-left: 4px solid var(--success);
        }

        /* Video Player Container - ÏàòÏ†ïÎê® */
        .video-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 10000;
            display: none;
        }

        .video-player-container video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .video-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            z-index: 10001;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .video-close-btn:hover {
            transform: scale(1.1);
            background: #ff4444;
        }

        .video-info-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            padding: 16px 24px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10001;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(12px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-modal);
            border-radius: var(--radius-xl);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.4s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .player-content {
            max-width: 700px;
        }

        .player-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
        }

        .player-artist {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 24px;
        }

        .player-panel {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            border-left: 6px solid;
        }

        .player-tl-amount {
            font-size: 2.8rem;
            font-weight: 800;
            color: white;
            line-height: 1.2;
        }

        .player-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: 24px 0;
        }

        .player-progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.2s linear;
        }

        .player-time {
            display: flex;
            justify-content: space-between;
            color: var(--text-tertiary);
            font-size: 13px;
            margin-bottom: 24px;
        }

        .player-controls {
            display: flex;
            gap: 16px;
            justify-content: center;
        }

        /* Auto-Recharge Switch */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--success);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 15px;
            color: white;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(138, 43, 226, 0.1);
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 30px;
            right: 30px;
            background: var(--bg-modal);
            backdrop-filter: blur(10px);
            padding: 16px 24px;
            border-radius: var(--radius-full);
            border-left: 6px solid var(--success);
            box-shadow: var(--shadow-lg);
            display: none;
            z-index: 3000;
            min-width: 320px;
            color: white;
            font-weight: 500;
            border: 1px solid var(--border-color);
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .toast.success { border-left-color: var(--success); }
        .toast.error { border-left-color: var(--danger); }
        .toast.warning { border-left-color: var(--warning); }
        .toast.info { border-left-color: var(--info); }

        /* Demo Badge */
        .demo-badge {
            background: var(--warning);
            color: black;
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 700;
            display: inline-block;
            margin-left: 12px;
            text-transform: uppercase;
        }

        /* Charge Options */
        .charge-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .charge-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .charge-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .charge-card .amount {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--success);
            margin: 10px 0;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .app-container { padding: 20px; }
            .header-right { gap: 16px; }
            .balance-cards { flex-direction: column; gap: 8px; }
        }

        @media (max-width: 768px) {
            .app-header { flex-direction: column; align-items: stretch; }
            .header-right { flex-direction: column; width: 100%; }
            .tabs-container { top: auto; }
            .stats-grid { grid-template-columns: 1fr; }
            .share-stats { grid-template-columns: 1fr; }
            .file-list { grid-template-columns: 1fr; }
            .radio-channels { grid-template-columns: 1fr; }
            .file-type-selector { flex-direction: column; }
        }
    </style>
</head>
<body>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>

<!-- Video Player Container (ÏàòÏ†ïÎê® - ÎèÖÎ¶ΩÏ†ÅÏù¥Í≥† Ìï≠ÏÉÅ Î≥¥ÏûÑ) -->
<div class="video-player-container" id="videoPlayerContainer">
    <video id="videoPlayer" controls autoplay></video>
    <button class="video-close-btn" onclick="TimeLinkSystem.player.stop()">‚úï</button>
    <div class="video-info-bar" id="videoInfoBar">
        <span id="videoTitle">Now Playing</span>
        <span id="videoTimeRemaining">TL: 0</span>
    </div>
</div>

<!-- Audio Player (Ïà®ÍπÄ) -->
<audio id="audioPlayer" style="display: none;"></audio>

<!-- Charge Modal -->
<div id="chargeModal" class="modal">
    <div class="modal-content">
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #b983ff, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üí∞ Charge TL
        </h2>
        <div class="form-group">
            <label>TL Amount</label>
            <input type="number" id="chargeAmount" placeholder="1000" min="100" step="100" value="1000">
            <p style="color: var(--text-secondary); font-size: 14px; margin-top: 12px;">
                Your balance: <strong id="currentTLBalance" style="color: white;">25,000</strong> TL
            </p>
            <p style="color: var(--text-secondary); font-size: 12px; margin-top: 8px;">
                üíµ 10 TL = 1Ïõê
            </p>
        </div>
        <div style="display: flex; gap: 16px;">
            <button class="btn-play" onclick="TimeLinkSystem.file.charge()" style="flex: 1; background: var(--accent);">‚ö° Charge</button>
            <button class="btn-play" onclick="TimeLinkSystem.ui.closeChargeModal()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">Cancel</button>
        </div>
    </div>
</div>

<!-- Purchase TL Modal -->
<div id="purchaseModal" class="modal">
    <div class="modal-content">
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #b983ff, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üíµ Purchase TL
        </h2>
        <p style="color: var(--text-secondary); margin-bottom: 24px;">
            1 TL = 0.1Ïõê ¬∑ Î≥¥ÎÑàÏä§: ÏµúÎåÄ 20% Ï∂îÍ∞Ä
        </p>
        <div id="purchasePackages" class="charge-options"></div>
        <div style="display: flex; gap: 16px; margin-top: 24px;">
            <button class="btn-play" onclick="TimeLinkSystem.ui.closePurchaseModal()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">Close</button>
        </div>
    </div>
</div>

<!-- Lecture Purchase Modal -->
<div id="lecturePurchaseModal" class="modal">
    <div class="modal-content">
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #ff7b00, #ff5500); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üìö Purchase Lecture
        </h2>
        <div id="lecturePurchaseInfo">
            <div style="font-size: 1.3rem; color: white; margin-bottom: 12px;" id="lecturePurchaseTitle">Lecture Title</div>
            <div style="color: var(--text-secondary); margin-bottom: 20px;" id="lecturePurchaseCreator">Creator</div>
            <div style="background: rgba(255, 123, 0, 0.1); padding: 20px; border-radius: var(--radius-lg); margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Price:</span>
                    <strong style="color: white; font-size: 1.5rem;" id="lecturePurchasePrice">0 TL</strong>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Your balance:</span>
                    <strong style="color: var(--success);" id="lecturePurchaseBalance">0 TL</strong>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-secondary);">After purchase:</span>
                    <strong style="color: white;" id="lecturePurchaseAfter">0 TL</strong>
                </div>
            </div>
        </div>
        <div style="display: flex; gap: 16px;">
            <button class="btn-play" onclick="TimeLinkSystem.lecture.confirmPurchase()" style="flex: 1; background: var(--lecture);">üìö Purchase</button>
            <button class="btn-play" onclick="TimeLinkSystem.ui.closeLecturePurchaseModal()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">Cancel</button>
        </div>
    </div>
</div>

<!-- Lecture Create Modal -->
<div id="lectureCreateModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <h2 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #ff7b00, #ff5500); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üìö Create Lecture
        </h2>
        <div class="form-group">
            <label>Title</label>
            <input type="text" id="lectureTitle" placeholder="Lecture title">
        </div>
        <div class="form-group">
            <label>Instructor</label>
            <input type="text" id="lectureInstructor" placeholder="Instructor name">
        </div>
        <div class="form-group">
            <label>Description</label>
            <textarea id="lectureDescription" rows="3" placeholder="Lecture description"></textarea>
        </div>
        <div class="form-group">
            <label>Category</label>
            <select id="lectureCategory">
                <option value="programming">üíª Programming</option>
                <option value="business">üìä Business</option>
                <option value="design">üé® Design</option>
                <option value="language">üåê Language</option>
                <option value="finance">üí∞ Finance</option>
            </select>
        </div>
        <div class="form-group">
            <label>Price (TL)</label>
            <input type="number" id="lecturePrice" placeholder="5000" min="100" step="100" value="5000">
            <p style="color: var(--text-secondary); font-size: 12px; margin-top: 4px;">
                ‚âà <span id="lecturePriceKRW">500</span>Ïõê
            </p>
        </div>
        <div class="upload-zone" onclick="document.getElementById('lectureFileInput').click()" style="padding: 30px; margin-bottom: 20px;">
            <div class="icon">üìπ</div>
            <h3>Select lecture video/audio</h3>
            <p>MP4, MP3, WAV (max 500MB)</p>
        </div>
        <input type="file" id="lectureFileInput" style="display: none;" accept="video/*,audio/*">
        <button class="btn-play" onclick="TimeLinkSystem.lecture.create()" style="width: 100%; padding: 18px; background: var(--lecture);">
            üìö Create Lecture
        </button>
    </div>
</div>

<!-- Player Modal (Ïò§ÎîîÏò§ Ï†ÑÏö©) -->
<div id="playerModal" class="modal">
    <div class="modal-content player-content">
        <div class="player-title" id="playerTitle">Now Playing</div>
        <div class="player-artist" id="playerArtist">Artist</div>
        
        <!-- File Type Badge -->
        <div style="margin-bottom: 16px;">
            <span id="playerTypeBadge" style="background: var(--success); padding: 4px 12px; border-radius: var(--radius-full); font-size: 12px;">TL3 Audio</span>
            <span id="playerRateBadge" style="background: var(--warning); padding: 4px 12px; border-radius: var(--radius-full); font-size: 12px; margin-left: 8px;">1TL/Ï¥à</span>
        </div>
        
        <!-- Copyright Panel -->
        <div class="player-panel" style="border-left-color: #8b5cf6;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: #8b5cf6;">üìã Copyright</span>
                <span style="background: #8b5cf6; color: white; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;">Blockchain</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div><span style="color: var(--text-secondary);">Owner</span><br><strong id="playerCopyrightOwner">Global Investor</strong></div>
                <div><span style="color: var(--text-secondary);">Reg. No.</span><br><strong id="playerCopyrightNumber">CR-2024-001234</strong></div>
            </div>
        </div>
        
        <!-- Contract Panel -->
        <div class="player-panel" style="border-left-color: var(--accent);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: var(--accent);">üìä Revenue Share</span>
                <span style="background: var(--accent); color: white; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;" id="playerContractType">5:5 Contract</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div><span style="color: var(--text-secondary);">Creator</span><br><strong id="playerCreatorShare">50%</strong></div>
                <div><span style="color: var(--text-secondary);">Platform</span><br><strong id="playerPlatformShare">50%</strong></div>
            </div>
        </div>
        
        <!-- TL Panel -->
        <div class="player-panel" style="border-left-color: var(--warning);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: var(--warning);">‚è≥ TL Balance</span>
                <span style="background: var(--warning); color: black; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;" id="playerRateLabel">1s = 1TL</span>
            </div>
            <div class="player-tl-amount" id="playerTL">5,000 TL</div>
            <div style="color: var(--text-secondary); font-size: 14px;" id="playerTimeRemaining">‚âà 83 min left</div>
        </div>
        
        <!-- Revenue Panel -->
        <div class="player-panel" style="border-left-color: var(--info);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="font-weight: 700; color: var(--info);">üí∞ Live Revenue</span>
                <span style="background: var(--info); color: white; padding: 4px 12px; border-radius: var(--radius-full); font-size: 11px;" id="playerRevenueLabel">0.1TL/Ï¥à</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div><span style="color: var(--text-secondary);">Creator</span><br><strong style="font-size: 1.3rem; color: var(--info);" id="playerCreatorRevenue">0.00 TL</strong></div>
                <div><span style="color: var(--text-secondary);">Platform</span><br><strong style="font-size: 1.3rem; color: var(--info);" id="playerPlatformRevenue">0.00 TL</strong></div>
            </div>
            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(59,130,246,0.2);">
                <span style="color: var(--text-secondary);">Session Total</span>
                <br><strong id="playerTotalRevenue" style="color: white;">0.00 TL</strong>
            </div>
        </div>
        
        <!-- Progress -->
        <div class="player-progress">
            <div id="playerProgress" class="player-progress-fill" style="width: 0%;"></div>
        </div>
        
        <div class="player-time">
            <span id="playerCurrentTime">0:00</span>
            <span id="playerTotalTime">83:20</span>
        </div>
        
        <!-- Auto-Recharge Panel -->
        <div class="player-panel" style="border-left-color: var(--success); margin-top: 16px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <span style="font-weight: 700; color: var(--success);">‚ö° Auto-Recharge</span>
                <label class="switch">
                    <input type="checkbox" id="autoRechargeToggle" onchange="TimeLinkSystem.autoRecharge.toggle()">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div id="autoRechargeSettings" style="opacity: 0.5;">
                <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                    <div style="flex: 1;">
                        <label style="color: var(--text-secondary); font-size: 11px;">Threshold (TL)</label>
                        <select id="autoRechargeThreshold" onchange="TimeLinkSystem.autoRecharge.updateSettings()" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: white;">
                            <option value="60">60 TL (1 min)</option>
                            <option value="300" selected>300 TL (5 min)</option>
                            <option value="600">600 TL (10 min)</option>
                            <option value="1800">1,800 TL (30 min)</option>
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label style="color: var(--text-secondary); font-size: 11px;">Amount (TL)</label>
                        <select id="autoRechargeAmount" onchange="TimeLinkSystem.autoRecharge.updateSettings()" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: white;">
                            <option value="600">600 TL (10 min)</option>
                            <option value="1800">1,800 TL (30 min)</option>
                            <option value="3600" selected>3,600 TL (1 hour)</option>
                            <option value="10800">10,800 TL (3 hours)</option>
                        </select>
                    </div>
                </div>
                
                <div style="margin-top: 12px; background: rgba(255,255,255,0.03); padding: 8px 12px; border-radius: var(--radius-md);">
                    <span style="color: var(--text-secondary);">Wallet: </span>
                    <strong style="color: white;" id="autoRechargeWalletBalance">25,000 TL</strong>
                    <span style="color: var(--text-secondary); margin-left: 12px;">Debt: </span>
                    <strong style="color: var(--warning);" id="autoRechargeDebt">0 TL</strong>
                </div>
            </div>
        </div>
        
        <!-- Controls (Ïò§ÎîîÏò§ Ï†ÑÏö©) -->
        <div class="player-controls" style="margin-top: 16px;">
            <button class="btn-play" onclick="TimeLinkSystem.player.togglePlayPause()" id="playPauseBtn" style="flex: 1;">‚è∏Ô∏è Pause</button>
            <button class="btn-play" onclick="TimeLinkSystem.player.stop()" style="flex: 1; background: transparent; border: 1px solid var(--border-color);">‚èπÔ∏è Stop</button>
            <button class="btn-play" onclick="TimeLinkSystem.player.openChargeModal()" style="flex: 1; background: var(--warning); color: black;">üí∞ Charge</button>
        </div>
    </div>
</div>

<!-- Login Page -->
<div id="authContainer" class="auth-container">
    <div class="auth-box">
        <div class="logo">
            <h1>‚è∞ TimeLink</h1>
            <p>TL3/TL4 ‚Äî Time-Based Economy</p>
        </div>
        <div class="version-badge">
            üöÄ v22.1 ¬∑ TL3 Audio / TL4 Video ¬∑ Auto-Recharge <span class="demo-badge">DEMO</span>
        </div>
        
        <button class="google-login-btn" onclick="TimeLinkSystem.demo.login()">
            <i class="fab fa-google"></i> Continue with Google
        </button>
        
        <div style="background: rgba(255,255,255,0.03); border-radius: var(--radius-lg); padding: 20px; margin-top: 20px;">
            <h3 style="color: white; margin-bottom: 16px;">üéµ TL3 vs üé¨ TL4</h3>
            <div style="display: flex; gap: 20px;">
                <div style="flex: 1; text-align: center;">
                    <div style="font-size: 2rem;">üéµ</div>
                    <div style="font-weight: 700; color: var(--success);">TL3 Audio</div>
                    <div style="font-size: 12px;">1Ï¥à = 1TL ÏÜåÎ™®</div>
                    <div style="font-size: 12px;">1Ï¥à = 0.1TL ÏàòÏùµ</div>
                </div>
                <div style="flex: 1; text-align: center;">
                    <div style="font-size: 2rem;">üé¨</div>
                    <div style="font-weight: 700; color: var(--video);">TL4 Video</div>
                    <div style="font-size: 12px;">1Ï¥à = 2TL ÏÜåÎ™®</div>
                    <div style="font-size: 12px;">1Ï¥à = 0.2TL ÏàòÏùµ</div>
                </div>
            </div>
            <div style="margin-top: 16px; text-align: center;">
                <span style="color: var(--success);">‚ö° Auto-Recharge</span> ¬∑ ÏÑ†Ï∂©Ï†Ñ ÌõÑÏ∞®Í∞ê
            </div>
        </div>
    </div>
</div>

<!-- Main Application -->
<div id="appContainer" class="app-container" style="display: none;">
    
    <!-- Header -->
    <div class="app-header">
        <div class="header-left">
            <h1>‚è∞ TimeLink Global</h1>
            <span class="demo-badge">1TL = 0.1Ïõê</span>
        </div>
        <div class="header-right">
            <div class="balance-cards">
                <div class="balance-card" onclick="TimeLinkSystem.ui.openPurchaseModal()">
                    <div class="label">üí∞ TL Wallet</div>
                    <div class="amount" id="walletBalance">25,000</div>
                </div>
                <div class="balance-card">
                    <div class="label">ü™ô TLC</div>
                    <div class="amount" id="tlcBalance">1,250.75</div>
                </div>
            </div>
            <div class="user-profile">
                <div class="avatar-circle" id="userAvatar">G</div>
                <div class="user-info">
                    <div class="user-name" id="currentUsername">Global Investor</div>
                    <div class="user-status" id="userStatus">üè¢ Business</div>
                </div>
            </div>
            <button class="btn-logout" onclick="TimeLinkSystem.demo.logout()">Logout</button>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="tabs-container">
        <div class="tabs">
            <button class="tab active" onclick="TimeLinkSystem.ui.switchTab('dashboard')">üìä Dashboard</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('upload')">üì§ Create</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('library')">üéµ My Files</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('shareplace')">üîÑ Share Place</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('radio')">üìª Radio</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('commercial')">üì∫ Commercial</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('lecture')">üìö Lecture</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('mining')">‚õèÔ∏è Mining</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('car')">üöó Car</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('gold')">üèÜ Gold</button>
            <button class="tab" onclick="TimeLinkSystem.ui.switchTab('ton')">‚¨° TON</button>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="tabDashboard" class="tab-content active">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon">üí∞</div>
                <div class="label">TL Wallet</div>
                <div class="value" id="dashWallet">25,000</div>
            </div>
            <div class="stat-card">
                <div class="icon">ü™ô</div>
                <div class="label">TLC</div>
                <div class="value" id="dashTLC">1,250.75</div>
            </div>
            <div class="stat-card">
                <div class="icon">üéµ</div>
                <div class="label">TL3 Files</div>
                <div class="value" id="dashTL3">2</div>
            </div>
            <div class="stat-card">
                <div class="icon">üé¨</div>
                <div class="label">TL4 Files</div>
                <div class="value" id="dashTL4">1</div>
            </div>
        </div>
        
        <!-- Platform Stats -->
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px;">
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center;">
                <div style="font-size: 2rem;">üìª</div>
                <div>Radio Listeners</div>
                <div style="font-size: 1.8rem; font-weight: 800;" id="radioListeners">1,234</div>
            </div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center;">
                <div style="font-size: 2rem;">üì∫</div>
                <div>Commercial</div>
                <div style="font-size: 1.8rem; font-weight: 800;" id="commercialViewers">567</div>
            </div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center;">
                <div style="font-size: 2rem;">üîÑ</div>
                <div>Shared Files</div>
                <div style="font-size: 1.8rem; font-weight: 800;" id="sharedCount">0</div>
            </div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-lg); text-align: center;">
                <div style="font-size: 2rem;">üìö</div>
                <div>Lectures</div>
                <div style="font-size: 1.8rem; font-weight: 800;" id="totalLectures">2</div>
            </div>
        </div>
    </div>

    <!-- Create TL3/TL4 -->
    <div id="tabUpload" class="tab-content">
        <div class="card">
            <h2>üì§ Create TL3 (Audio) / TL4 (Video)</h2>
            
            <div class="file-type-selector">
                <div class="file-type-card audio selected" id="audioTypeCard" onclick="TimeLinkSystem.file.selectType('audio')">
                    <div class="icon">üéµ</div>
                    <h3>TL3 Audio</h3>
                    <div class="rate">1Ï¥à = 1TL</div>
                    <div class="desc">MP3, WAV, FLAC</div>
                </div>
                <div class="file-type-card video" id="videoTypeCard" onclick="TimeLinkSystem.file.selectType('video')">
                    <div class="icon">üé¨</div>
                    <h3>TL4 Video</h3>
                    <div class="rate">1Ï¥à = 2TL</div>
                    <div class="desc">MP4, MOV, AVI</div>
                </div>
            </div>
            
            <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                <div class="icon" id="uploadIcon">üéµ</div>
                <h3 id="uploadText">Click to select file</h3>
                <p id="uploadDesc">MP3, WAV, FLAC (max 100MB)</p>
            </div>
            <input type="file" id="fileInput" style="display: none;" accept="audio/*,video/*">
            
            <div id="uploadForm" style="display: none; margin-top: 32px;">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="songTitle" placeholder="Title">
                </div>
                <div class="form-group">
                    <label>Creator</label>
                    <input type="text" id="songArtist" placeholder="Creator name">
                </div>
                
                <div style="background: rgba(139, 92, 246, 0.1); padding: 24px; border-radius: var(--radius-lg); margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px; color: #8b5cf6;">üìã Copyright</h3>
                    <div class="form-group">
                        <label>Owner</label>
                        <input type="text" id="copyrightOwner" value="Global Investor">
                    </div>
                    <div class="form-group">
                        <label>Reg. Number</label>
                        <input type="text" id="copyrightNumber" readonly style="background: rgba(0,0,0,0.2);">
                    </div>
                </div>
                
                <div style="background: rgba(138, 43, 226, 0.1); padding: 24px; border-radius: var(--radius-lg); margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px; color: var(--accent);">üìä Contract</h3>
                    <div class="form-group">
                        <select id="revenueShare">
                            <option value="55">5:5 Contract ‚Äî Mining Allowed (Creator 50%)</option>
                            <option value="73">7:3 Contract ‚Äî No Mining (Creator 70%)</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn-play" onclick="TimeLinkSystem.file.create()" style="width: 100%; padding: 18px; background: var(--accent);">
                    ‚ú® Create File
                </button>
            </div>
        </div>
    </div>

    <!-- My Files -->
    <div id="tabLibrary" class="tab-content">
        <div class="card">
            <h2>üéµ My TL3/TL4 Files</h2>
            <div id="fileList" class="file-list"></div>
            <div id="emptyLibrary" style="text-align: center; padding: 80px; display: none;">
                <div style="font-size: 5rem;">üéµ</div>
                <h3 style="color: white; margin: 20px;">No files yet</h3>
                <button class="btn-play" onclick="TimeLinkSystem.ui.switchTab('upload')">Create File</button>
            </div>
        </div>
    </div>

    <!-- Share Place -->
    <div id="tabShareplace" class="tab-content">
        <div class="share-header">
            <div>
                <h2 style="color: white;">üîÑ Share Place</h2>
                <p style="color: rgba(255,255,255,0.9); margin-top: 8px;">
                    <strong>Share cost: 5,000 TL ¬∑ ÌÉÄÏù∏ Ïû¨ÏÉù Ïãú 0.01 TL/Ï¥à ÏàòÏùµ</strong>
                </p>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding: 12px 28px; border-radius: var(--radius-full);">
                <span style="font-weight: 700; color: white;" id="sharedCount2">0</span> shared
            </div>
        </div>

        <div class="share-stats">
            <div class="share-stat-card">
                <div>Total Shared</div>
                <div class="share-stat-value" id="totalSharedCount">0</div>
            </div>
            <div class="share-stat-card">
                <div>5:5 Contract</div>
                <div class="share-stat-value" id="shared55Count">0</div>
            </div>
            <div class="share-stat-card">
                <div>7:3 Contract</div>
                <div class="share-stat-value" id="shared73Count">0</div>
            </div>
        </div>

        <div class="share-filter">
            <button class="filter-btn active" onclick="TimeLinkSystem.share.filter('all', event)">All</button>
            <button class="filter-btn" onclick="TimeLinkSystem.share.filter('55', event)">5:5 Contract</button>
            <button class="filter-btn" onclick="TimeLinkSystem.share.filter('73', event)">7:3 Contract</button>
            <button class="filter-btn" onclick="TimeLinkSystem.share.filter('mining', event)">Mining Allowed</button>
        </div>

        <div id="sharedMusicList" class="file-list"></div>
    </div>

    <!-- Radio -->
    <div id="tabRadio" class="tab-content">
        <div class="radio-header">
            <div>
                <h2 style="color: white; font-size: 2rem;">üìª TimeLink Radio</h2>
                <p style="color: rgba(255,255,255,0.9);">24/7 live streaming from Share Place</p>
                <p style="color: rgba(255,255,255,0.9); margin-top: 12px;">
                    <strong>üéß 1Ï¥à = 0.5 TL (50% Ìï†Ïù∏)</strong>
                </p>
            </div>
            <span style="background: rgba(255,255,255,0.2); padding: 12px 28px; border-radius: var(--radius-full);">üî¥ LIVE 24/7</span>
        </div>
        <div id="radioChannels" class="radio-channels"></div>
    </div>

    <!-- Commercial -->
    <div id="tabCommercial" class="tab-content">
        <div class="commercial-header">
            <div>
                <h2 style="color: white; font-size: 2rem;">üì∫ TimeLink Commercial</h2>
                <p style="color: rgba(255,255,255,0.9);">Business registered creators only</p>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px;">
                    <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: var(--radius-lg);">
                        <div>Basic</div>
                        <div style="font-size: 1.5rem;">50,000 TL</div>
                        <div style="font-size: 12px;">1,000Î™Ö/ÏãúÍ∞Ñ</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.15); padding: 16px; border-radius: var(--radius-lg); border: 1px solid white;">
                        <div>Pro</div>
                        <div style="font-size: 1.5rem;">200,000 TL</div>
                        <div style="font-size: 12px;">5,000Î™Ö/ÏãúÍ∞Ñ</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: var(--radius-lg);">
                        <div>Enterprise</div>
                        <div style="font-size: 1.5rem;">1,000,000 TL</div>
                        <div style="font-size: 12px;">30,000Î™Ö/ÏãúÍ∞Ñ</div>
                    </div>
                </div>
            </div>
            <span style="background: rgba(255,255,255,0.2); padding: 12px 28px; border-radius: var(--radius-full);">üí∞ BUSINESS ONLY</span>
        </div>
        <div id="commercialChannels" class="radio-channels"></div>
        
        <div id="businessApplySection" class="card" style="text-align: center;">
            <h3>Register as Business</h3>
            <p style="color: var(--text-secondary); margin: 20px 0;">Business registration required for commercial broadcast</p>
            <button class="btn-play" onclick="TimeLinkSystem.business.apply()" style="background: var(--accent);">Apply for Business</button>
        </div>
    </div>

    <!-- Lecture Share -->
    <div id="tabLecture" class="tab-content">
        <div class="card">
            <h2>üìö Lecture Share</h2>
            <div style="display: flex; justify-content: space-between; margin-bottom: 24px;">
                <div>
                    <p style="color: var(--text-secondary);">Creator 70% / Platform 30%</p>
                </div>
                <button class="btn-play" onclick="TimeLinkSystem.lecture.openCreateModal()" style="background: var(--lecture);">üìö Create Lecture</button>
            </div>
            <div id="lectureList" class="file-list"></div>
        </div>
    </div>

    <!-- Mining -->
    <div id="tabMining" class="tab-content">
        <div class="card">
            <h2>‚õèÔ∏è TLC Mining</h2>
            <p>Mining limit: 30% of TL balance</p>
            <div class="form-group">
                <label>TL to mine</label>
                <input type="number" id="miningAmount" value="1000" min="1">
            </div>
            <button class="btn-play" onclick="TimeLinkSystem.mining.execute()">‚õèÔ∏è Mine</button>
        </div>
    </div>

    <!-- Car -->
    <div id="tabCar" class="tab-content">
        <div class="card">
            <h2>üöó Car Listening</h2>
            <p>1Î∂Ñ = 6 TL Î≥¥ÏÉÅ</p>
            <button class="btn-play" onclick="TimeLinkSystem.car.addDrivingMinutes(10)">+10Î∂Ñ (60 TL)</button>
        </div>
    </div>

    <!-- Gold -->
    <div id="tabGold" class="tab-content">
        <div class="card">
            <h2>üèÜ Gold Reserve</h2>
            <div id="goldAmount">10.24 g</div>
        </div>
    </div>

    <!-- TON -->
    <div id="tabTon" class="tab-content">
        <div class="card">
            <h2>‚¨° TON Blockchain</h2>
            <p>TLC on TON</p>
        </div>
    </div>
</div>

<script>
// ============================================================================
// TimeLink Global v22.1 - Complete TL3/TL4 Platform with Video Fix
// ============================================================================

// ECONOMIC CONSTANTS
const ECONOMY = {
    TL_PRICE_KRW: 0.1,
    TL3_PER_SECOND: 1,
    TL4_PER_SECOND: 2,
    TL3_REVENUE: 0.1,
    TL4_REVENUE: 0.2,
    
    AUTO_RECHARGE_THRESHOLD: 300,
    AUTO_RECHARGE_AMOUNT: 3600,
    
    MINING_BASE_RATE: 0.01,
    MINING_LIMIT_RATIO: 0.3,
    
    CAR_REWARD_PER_MINUTE: 6,
    CAR_REGISTRATION_FEE: 10000,
    
    LECTURE_CREATOR_SHARE: 0.7,
    LECTURE_PLATFORM_SHARE: 0.3,
    
    SHARE_COST: 5000,
    SHARE_REVENUE_PER_SECOND: 0.01,
    
    RADIO_COST_PER_SECOND: 0.5,
    
    PACKAGES: [
        { id: 'micro', name: 'Micro', tl: 1000, price: 100, bonus: 0 },
        { id: 'starter', name: 'Starter', tl: 10000, price: 1000, bonus: 0 },
        { id: 'regular', name: 'Regular', tl: 50000, price: 5000, bonus: 5000 },
        { id: 'pro', name: 'Pro', tl: 200000, price: 20000, bonus: 30000 }
    ]
};

// Blockchain
const Blockchain = {
    records: [],
    async record(data) {
        const record = { id: '0x' + Date.now().toString(16), timestamp: Date.now(), ...data };
        this.records.push(record);
        return record;
    }
};

// Copyright Registry
const CopyrightRegistry = {
    registrations: [],
    async register(data) {
        const reg = { id: 'CR-' + Date.now(), ...data, verified: true };
        this.registrations.push(reg);
        await Blockchain.record({ type: 'COPYRIGHT', ...reg });
        return reg;
    }
};

// TL3 File Class
class TL3File {
    constructor(data) {
        this.id = 'tl3_' + Date.now() + '_' + Math.random().toString(36);
        this.type = 'TL3';
        this.fileType = 'audio';
        this.tlPerSecond = ECONOMY.TL3_PER_SECOND;
        this.revenuePerSecond = ECONOMY.TL3_REVENUE;
        
        this.metadata = {
            title: data.title,
            artist: data.artist,
            duration: data.duration || 180,
            copyright: data.copyright,
            contract: data.contract
        };
        
        this.token = {
            balance: data.initialTL || 5000,
            total_charged: data.initialTL || 5000,
            total_consumed: 0
        };
        
        this.audio = { url: data.audioUrl };
        this.creatorId = data.creatorId;
        this.creatorName = data.creatorName;
        this.isShared = false;
        this.sharedAt = null;
    }
    
    async charge(amount) {
        this.token.balance += amount;
        this.token.total_charged += amount;
        return { success: true };
    }
    
    async consume(amount) {
        if (this.token.balance < amount) throw new Error('Insufficient TL');
        this.token.balance -= amount;
        this.token.total_consumed += amount;
        return { success: true };
    }
}

// TL4 File Class (extends TL3)
class TL4File extends TL3File {
    constructor(data) {
        super(data);
        this.type = 'TL4';
        this.fileType = 'video';
        this.tlPerSecond = ECONOMY.TL4_PER_SECOND;
        this.revenuePerSecond = ECONOMY.TL4_REVENUE;
        this.resolution = data.resolution || '1920x1080';
    }
}

// Lecture Class
class Lecture {
    constructor(data) {
        this.id = 'lec_' + Date.now() + '_' + Math.random().toString(36);
        this.title = data.title;
        this.instructor = data.instructor;
        this.description = data.description;
        this.category = data.category;
        this.price = data.price;
        this.creatorId = data.creatorId;
        this.creatorName = data.creatorName;
        this.audioUrl = data.audioUrl;
        this.purchasedBy = [];
        this.salesCount = 0;
    }
    
    async purchase(userId, wallet) {
        if (this.purchasedBy.includes(userId)) throw new Error('Already purchased');
        if (wallet.balance < this.price) throw new Error('Insufficient balance');
        
        await wallet.withdraw(this.price, 'LECTURE', this.id);
        this.purchasedBy.push(userId);
        this.salesCount++;
        
        return { success: true };
    }
    
    hasUserPurchased(userId) {
        return this.purchasedBy.includes(userId);
    }
}

// TL Wallet
class TLWallet {
    constructor(userId) {
        this.userId = userId;
        this.balance = 25000;
        this.tlcBalance = 1250.75;
        this.transactions = [];
        this.isBusiness = true;
    }
    
    async withdraw(amount, reason, target) {
        if (this.balance < amount) throw new Error('Insufficient balance');
        this.balance -= amount;
        this.transactions.push({ amount, reason, target, timestamp: Date.now() });
        return { success: true };
    }
    
    async charge(amount) {
        this.balance += amount;
        return { success: true };
    }
}

// Radio/Commercial Data
const RadioData = {
    channels: [
        { name: 'TimeLink Pop', freq: '107.7', listeners: 1234, currentSong: 'Dynamite - BTS' },
        { name: 'TimeLink Rock', freq: '107.9', listeners: 892, currentSong: 'Bohemian Rhapsody' },
        { name: 'TimeLink Hip-Hop', freq: '108.1', listeners: 1567, currentSong: 'Savage - aespa' },
        { name: 'TimeLink Jazz', freq: '108.3', listeners: 645, currentSong: 'Fly Me To The Moon' }
    ],
    
    commercialChannels: [
        { name: 'TimeLink Business 1', freq: '109.1', listeners: 567, revenue: 12340 },
        { name: 'TimeLink Business 2', freq: '109.3', listeners: 432, revenue: 9870 }
    ]
};

// Gold Reserve
const GoldReserve = {
    totalGold: 10.24,
    transactions: []
};

// Main System
const TimeLinkSystem = {
    currentUser: null,
    wallet: null,
    files: [],
    lectures: [],
    sharedFiles: [],
    currentFilter: 'all',
    playInterval: null,
    currentPlayingFile: null,
    
    // Demo
    demo: {
        login: function() {
            TimeLinkSystem.currentUser = {
                id: 'user_' + Date.now(),
                username: 'Global Investor',
                email: 'investor@timelink.io',
                isBusiness: true
            };
            
            TimeLinkSystem.wallet = new TLWallet(TimeLinkSystem.currentUser.id);
            
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            
            // Sample data - TL3 ÌååÏùº (Ïò§ÎîîÏò§)
            const dummyAudio = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAA8AAAGQAApCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJD/+5REAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
            
            // ÏÉòÌîå TL3 ÌååÏùº (ÏùåÏïÖ)
            const file1 = new TL3File({
                title: 'Dynamite',
                artist: 'BTS',
                audioUrl: dummyAudio,
                creatorId: TimeLinkSystem.currentUser.id,
                creatorName: TimeLinkSystem.currentUser.username,
                copyright: { owner_name: 'BTS', registration_number: 'CR-1234' },
                contract: { type: '55', mining_allowed: true },
                initialTL: 5000
            });
            
            const file2 = new TL3File({
                title: 'Butter',
                artist: 'BTS',
                audioUrl: dummyAudio,
                creatorId: TimeLinkSystem.currentUser.id,
                creatorName: TimeLinkSystem.currentUser.username,
                copyright: { owner_name: 'BTS', registration_number: 'CR-1235' },
                contract: { type: '73', mining_allowed: false },
                initialTL: 0
            });
            
            // ÏÉòÌîå TL4 ÌååÏùº (ÎπÑÎîîÏò§) - Ïã§Ï†ú ÏûëÎèôÌïòÎäî ÎπÑÎîîÏò§ URL
            const videoUrl = 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4';
            
            const file3 = new TL4File({
                title: 'Big Buck Bunny',
                artist: 'Blender Foundation',
                audioUrl: videoUrl,
                creatorId: TimeLinkSystem.currentUser.id,
                creatorName: TimeLinkSystem.currentUser.username,
                copyright: { owner_name: 'Blender', registration_number: 'CR-1236' },
                contract: { type: '55', mining_allowed: true },
                initialTL: 10000
            });
            
            TimeLinkSystem.files.push(file1, file2, file3);
            
            // Sample lectures
            const lectures = [
                { title: 'Blockchain Masterclass', instructor: 'Park Blockchain', category: 'programming', price: 15000 },
                { title: 'Stock Investment', instructor: 'Kim Investor', category: 'finance', price: 12000 }
            ];
            
            lectures.forEach(l => {
                TimeLinkSystem.lectures.push(new Lecture({
                    ...l,
                    description: 'Sample lecture',
                    creatorId: 'creator_1',
                    creatorName: l.instructor,
                    audioUrl: dummyAudio
                }));
            });
            
            TimeLinkSystem.ui.updateAll();
            TimeLinkSystem.radio.initChannels();
            TimeLinkSystem.radio.initCommercialChannels();
            TimeLinkSystem.ui.showToast('‚úÖ Welcome to TimeLink! (TL4 ÎπÑÎîîÏò§ ÏßÄÏõê)', 'success');
        },
        
        logout: function() {
            // ÎπÑÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÏßÄ
            TimeLinkSystem.player.stop();
            
            TimeLinkSystem.currentUser = null;
            TimeLinkSystem.wallet = null;
            document.getElementById('authContainer').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
        }
    },
    
    // File Management
    file: {
        selectedFile: null,
        selectedFileData: null,
        currentType: 'audio',
        
        selectType: function(type) {
            TimeLinkSystem.file.currentType = type;
            
            document.getElementById('audioTypeCard').classList.remove('selected');
            document.getElementById('videoTypeCard').classList.remove('selected');
            
            if (type === 'audio') {
                document.getElementById('audioTypeCard').classList.add('selected');
                document.getElementById('uploadIcon').innerHTML = 'üéµ';
                document.getElementById('uploadText').innerHTML = 'Select audio file';
                document.getElementById('uploadDesc').innerHTML = 'MP3, WAV, FLAC (max 100MB)';
                document.getElementById('fileInput').accept = 'audio/*';
            } else {
                document.getElementById('videoTypeCard').classList.add('selected');
                document.getElementById('uploadIcon').innerHTML = 'üé¨';
                document.getElementById('uploadText').innerHTML = 'Select video file';
                document.getElementById('uploadDesc').innerHTML = 'MP4, MOV, AVI (max 500MB)';
                document.getElementById('fileInput').accept = 'video/*';
            }
        },
        
        handleSelect: function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            TimeLinkSystem.file.selectedFile = file;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                TimeLinkSystem.file.selectedFileData = e.target.result;
                document.getElementById('uploadForm').style.display = 'block';
                
                const fileName = file.name.replace(/\.[^/.]+$/, "");
                document.getElementById('songTitle').value = fileName;
                document.getElementById('songArtist').value = TimeLinkSystem.currentUser?.username || '';
                document.getElementById('copyrightOwner').value = TimeLinkSystem.currentUser?.username || '';
                document.getElementById('copyrightNumber').value = (TimeLinkSystem.file.currentType === 'audio' ? 'TL3-' : 'TL4-') + Date.now();
            };
            
            if (file.type.startsWith('video/')) {
                reader.readAsDataURL(file);
            } else {
                reader.readAsDataURL(file);
            }
        },
        
        create: async function() {
            if (!TimeLinkSystem.file.selectedFile) {
                TimeLinkSystem.ui.showToast('Select a file', 'error');
                return;
            }
            
            const title = document.getElementById('songTitle').value;
            if (!title) {
                TimeLinkSystem.ui.showToast('Enter title', 'error');
                return;
            }
            
            const copyright = await CopyrightRegistry.register({
                owner_id: TimeLinkSystem.currentUser.id,
                owner_name: document.getElementById('copyrightOwner').value,
                title: title,
                registration_number: document.getElementById('copyrightNumber').value
            });
            
            const contract = {
                type: document.getElementById('revenueShare').value,
                mining_allowed: document.getElementById('revenueShare').value === '55'
            };
            
            let file;
            if (TimeLinkSystem.file.currentType === 'audio') {
                file = new TL3File({
                    title: title,
                    artist: document.getElementById('songArtist').value,
                    audioUrl: TimeLinkSystem.file.selectedFileData,
                    creatorId: TimeLinkSystem.currentUser.id,
                    creatorName: TimeLinkSystem.currentUser.username,
                    copyright: copyright,
                    contract: contract,
                    initialTL: 5000
                });
            } else {
                file = new TL4File({
                    title: title,
                    artist: document.getElementById('songArtist').value,
                    audioUrl: TimeLinkSystem.file.selectedFileData,
                    creatorId: TimeLinkSystem.currentUser.id,
                    creatorName: TimeLinkSystem.currentUser.username,
                    copyright: copyright,
                    contract: contract,
                    initialTL: 10000
                });
            }
            
            TimeLinkSystem.files.push(file);
            TimeLinkSystem.ui.showToast(`‚úÖ ${file.type} created!`, 'success');
            
            document.getElementById('uploadForm').style.display = 'none';
            document.getElementById('fileInput').value = '';
            TimeLinkSystem.ui.updateAll();
            TimeLinkSystem.ui.switchTab('library');
        },
        
        charge: async function() {
            const amount = parseInt(document.getElementById('chargeAmount').value);
            if (!amount) return;
            
            const file = TimeLinkSystem.files.find(f => f.id === TimeLinkSystem.player.currentFileId);
            if (!file) return;
            
            try {
                await TimeLinkSystem.wallet.withdraw(amount, 'CHARGE', file.id);
                await file.charge(amount);
                TimeLinkSystem.ui.updateAll();
                TimeLinkSystem.ui.closeChargeModal();
                TimeLinkSystem.ui.showToast(`‚úÖ Charged ${amount} TL`, 'success');
            } catch (e) {
                TimeLinkSystem.ui.showToast(e.message, 'error');
            }
        },
        
        purchaseTL: function(packageId) {
            const pkg = ECONOMY.PACKAGES.find(p => p.id === packageId);
            if (!pkg) return;
            
            TimeLinkSystem.wallet.charge(pkg.tl + pkg.bonus);
            TimeLinkSystem.ui.updateAll();
            TimeLinkSystem.ui.closePurchaseModal();
            TimeLinkSystem.ui.showToast(`‚úÖ Purchased ${pkg.tl + pkg.bonus} TL`, 'success');
        }
    },
    
    // Share Place
    share: {
        filter: function(filter, event) {
            TimeLinkSystem.currentFilter = filter;
            
            document.querySelectorAll('#tabShareplace .filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            TimeLinkSystem.ui.updateSharePlace();
        },
        
        shareFile: async function(fileId) {
            const file = TimeLinkSystem.files.find(f => f.id === fileId);
            if (!file) return;
            
            if (file.isShared) {
                TimeLinkSystem.ui.showToast('Already shared', 'warning');
                return;
            }
            
            if (TimeLinkSystem.wallet.balance < ECONOMY.SHARE_COST) {
                TimeLinkSystem.ui.showToast(`Need ${ECONOMY.SHARE_COST} TL`, 'error');
                return;
            }
            
            await TimeLinkSystem.wallet.withdraw(ECONOMY.SHARE_COST, 'SHARE', file.id);
            
            file.isShared = true;
            file.sharedAt = new Date().toISOString();
            
            TimeLinkSystem.sharedFiles = TimeLinkSystem.files.filter(f => f.isShared);
            
            TimeLinkSystem.ui.updateAll();
            TimeLinkSystem.ui.updateSharePlace();
            TimeLinkSystem.ui.showToast('‚úÖ File shared!', 'success');
        }
    },
    
    // Radio
    radio: {
        initChannels: function() {
            const container = document.getElementById('radioChannels');
            if (!container) return;
            
            container.innerHTML = RadioData.channels.map(ch => `
                <div class="radio-channel-card">
                    <div class="channel-header">
                        <h3>${ch.name}</h3>
                        <p>${ch.freq} MHz ¬∑ ${ch.listeners} listeners</p>
                    </div>
                    <div class="channel-playlist">
                        <div class="now-playing">
                            <div>Now Playing: <strong>${ch.currentSong}</strong></div>
                        </div>
                        <button class="btn-radio" onclick="TimeLinkSystem.radio.tune('${ch.name}')">
                            üìª Tune In (0.5 TL/Ï¥à)
                        </button>
                    </div>
                </div>
            `).join('');
        },
        
        initCommercialChannels: function() {
            const container = document.getElementById('commercialChannels');
            if (!container) return;
            
            container.innerHTML = RadioData.commercialChannels.map(ch => `
                <div class="commercial-channel-card">
                    <div class="commercial-channel-header">
                        <h3>${ch.name}</h3>
                        <p>${ch.freq} MHz ¬∑ ${ch.listeners} viewers</p>
                    </div>
                    <div class="channel-playlist">
                        <button class="btn-commercial" onclick="TimeLinkSystem.radio.tuneCommercial('${ch.name}')">
                            üì∫ Start Commercial
                        </button>
                    </div>
                </div>
            `).join('');
        },
        
        tune: function(channel) {
            TimeLinkSystem.ui.showToast(`üìª Tuned to ${channel} (0.5 TL/Ï¥à)`, 'info');
        },
        
        tuneCommercial: function(channel) {
            if (!TimeLinkSystem.wallet?.isBusiness) {
                TimeLinkSystem.ui.showToast('Business account required', 'error');
                return;
            }
            TimeLinkSystem.ui.showToast(`üì∫ Commercial broadcast on ${channel}`, 'success');
        }
    },
    
    // Business
    business: {
        apply: function() {
            TimeLinkSystem.wallet.isBusiness = true;
            document.getElementById('userStatus').innerHTML = 'üè¢ Business';
            document.getElementById('businessApplySection').style.display = 'none';
            TimeLinkSystem.ui.showToast('‚úÖ Business account activated!', 'success');
        }
    },
    
    // Auto-Recharge
    autoRecharge: {
        enabled: false,
        threshold: 300,
        amount: 3600,
        pendingDebt: 0,
        
        execute: async function(file) {
            if (!TimeLinkSystem.wallet || !file) return false;
            
            if (TimeLinkSystem.wallet.balance < this.amount * 0.5) {
                TimeLinkSystem.ui.showToast('‚ö†Ô∏è Insufficient wallet balance', 'warning');
                return false;
            }
            
            await file.charge(this.amount);
            this.pendingDebt += this.amount;
            
            TimeLinkSystem.ui.updateAll();
            TimeLinkSystem.ui.showToast(`‚ö° Auto-charged ${this.amount} TL`, 'success');
            return true;
        },
        
        toggle: function() {
            this.enabled = !this.enabled;
            const settings = document.getElementById('autoRechargeSettings');
            const toggle = document.getElementById('autoRechargeToggle');
            
            if (settings) settings.style.opacity = this.enabled ? '1' : '0.5';
            if (toggle) toggle.checked = this.enabled;
            
            TimeLinkSystem.ui.showToast(this.enabled ? '‚ö° Auto-recharge ON' : '‚ö° Auto-recharge OFF', 'info');
        },
        
        updateSettings: function() {
            this.threshold = parseInt(document.getElementById('autoRechargeThreshold').value);
            this.amount = parseInt(document.getElementById('autoRechargeAmount').value);
            TimeLinkSystem.ui.showToast('‚ö° Settings saved', 'success');
        }
    },
    
    // Player (ÏàòÏ†ïÎê® - ÎπÑÎîîÏò§ ÏôÑÎ≤Ω ÏßÄÏõê)
    player: {
        currentFileId: null,
        isPlaying: false,
        
        play: function(fileId) {
            const file = TimeLinkSystem.files.find(f => f.id === fileId);
            if (!file) return;
            
            const rate = file.type === 'TL4' ? 2 : 1;
            
            if (file.token.balance < rate) {
                if (TimeLinkSystem.autoRecharge.enabled) {
                    TimeLinkSystem.autoRecharge.execute(file);
                    setTimeout(() => TimeLinkSystem.player.play(fileId), 500);
                } else {
                    TimeLinkSystem.ui.showToast('‚ö†Ô∏è Insufficient TL', 'warning');
                }
                return;
            }
            
            // Í∏∞Ï°¥ Ïû¨ÏÉù Ï§ëÏßÄ
            TimeLinkSystem.player.stop();
            
            TimeLinkSystem.player.currentFileId = file.id;
            TimeLinkSystem.currentPlayingFile = file;
            
            if (file.type === 'TL4') {
                // ÎπÑÎîîÏò§ Ïû¨ÏÉù
                const videoContainer = document.getElementById('videoPlayerContainer');
                const videoPlayer = document.getElementById('videoPlayer');
                const videoTitle = document.getElementById('videoTitle');
                const videoTimeRemaining = document.getElementById('videoTimeRemaining');
                
                // ÎπÑÎîîÏò§ Ïª®ÌÖåÏù¥ÎÑà ÌëúÏãú
                videoContainer.style.display = 'block';
                
                // ÎπÑÎîîÏò§ ÏÜåÏä§ ÏÑ§Ï†ï
                videoPlayer.src = file.audio.url;
                videoPlayer.load();
                
                // ÎπÑÎîîÏò§ Ï†ïÎ≥¥ ÌëúÏãú
                videoTitle.textContent = `${file.metadata.title} - ${file.metadata.artist} (${file.type})`;
                
                // ÎπÑÎîîÏò§ Ïû¨ÏÉù
                videoPlayer.play().catch(e => {
                    TimeLinkSystem.ui.showToast('Video playback failed: ' + e.message, 'error');
                    videoContainer.style.display = 'none';
                });
                
                // Ïò§ÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥ Î™®Îã¨ Ïà®ÍπÄ
                document.getElementById('playerModal').style.display = 'none';
                
            } else {
                // Ïò§ÎîîÏò§ Ïû¨ÏÉù (Í∏∞Ï°¥ ÌîåÎ†àÏù¥Ïñ¥ Î™®Îã¨)
                const audioPlayer = document.getElementById('audioPlayer');
                
                // ÌîåÎ†àÏù¥Ïñ¥ Î™®Îã¨ ÌëúÏãú
                document.getElementById('playerModal').style.display = 'flex';
                
                // UI ÏóÖÎç∞Ïù¥Ìä∏
                document.getElementById('playerTitle').textContent = file.metadata.title;
                document.getElementById('playerArtist').textContent = file.metadata.artist;
                document.getElementById('playerCopyrightOwner').textContent = file.metadata.copyright.owner_name;
                document.getElementById('playerCopyrightNumber').textContent = file.metadata.copyright.registration_number;
                document.getElementById('playerContractType').textContent = file.metadata.contract.type === '55' ? '5:5' : '7:3';
                document.getElementById('playerCreatorShare').textContent = file.metadata.contract.type === '55' ? '50%' : '70%';
                document.getElementById('playerPlatformShare').textContent = file.metadata.contract.type === '55' ? '50%' : '30%';
                document.getElementById('playerTL').textContent = file.token.balance.toLocaleString() + ' TL';
                
                document.getElementById('playerTypeBadge').textContent = file.type;
                document.getElementById('playerTypeBadge').style.background = file.type === 'TL4' ? 'var(--video)' : 'var(--success)';
                document.getElementById('playerRateBadge').textContent = rate + 'TL/Ï¥à';
                document.getElementById('playerRateLabel').textContent = `1s = ${rate}TL`;
                document.getElementById('playerRevenueLabel').textContent = file.revenuePerSecond + 'TL/Ï¥à';
                
                const minutes = Math.floor(file.token.balance / (60 * rate));
                document.getElementById('playerTimeRemaining').textContent = `‚âà ${minutes} min left`;
                document.getElementById('playerTotalTime').textContent = `${minutes}:00`;
                
                document.getElementById('autoRechargeWalletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString() + ' TL';
                document.getElementById('autoRechargeDebt').textContent = TimeLinkSystem.autoRecharge.pendingDebt.toLocaleString() + ' TL';
                
                // Ïò§ÎîîÏò§ Ïû¨ÏÉù
                audioPlayer.src = file.audio.url;
                audioPlayer.load();
                audioPlayer.play().catch(e => {
                    TimeLinkSystem.ui.showToast('Audio playback failed', 'error');
                });
            }
            
            TimeLinkSystem.player.isPlaying = true;
            
            // TL ÏÜåÎ™® Ïù∏ÌÑ∞Î≤å ÏãúÏûë
            if (TimeLinkSystem.playInterval) clearInterval(TimeLinkSystem.playInterval);
            
            TimeLinkSystem.playInterval = setInterval(async () => {
                if (!TimeLinkSystem.currentPlayingFile) return;
                
                const currentFile = TimeLinkSystem.currentPlayingFile;
                const currentRate = currentFile.type === 'TL4' ? 2 : 1;
                
                try {
                    await currentFile.consume(currentRate);
                    
                    // UI ÏóÖÎç∞Ïù¥Ìä∏
                    if (currentFile.type === 'TL4') {
                        // ÎπÑÎîîÏò§ UI ÏóÖÎç∞Ïù¥Ìä∏
                        const remainingMinutes = Math.floor(currentFile.token.balance / (60 * currentRate));
                        document.getElementById('videoTimeRemaining').textContent = 
                            `TL: ${currentFile.token.balance.toLocaleString()} (${remainingMinutes}Î∂Ñ ÎÇ®Ïùå)`;
                    } else {
                        // Ïò§ÎîîÏò§ UI ÏóÖÎç∞Ïù¥Ìä∏
                        document.getElementById('playerTL').textContent = currentFile.token.balance.toLocaleString() + ' TL';
                        const remainingMinutes = Math.floor(currentFile.token.balance / (60 * currentRate));
                        document.getElementById('playerTimeRemaining').textContent = `‚âà ${remainingMinutes} min left`;
                    }
                    
                    // TL Î∂ÄÏ°± Ïãú ÏûêÎèô Ï∂©Ï†Ñ Ï≤¥ÌÅ¨
                    if (currentFile.token.balance < currentRate) {
                        if (TimeLinkSystem.autoRecharge.enabled) {
                            TimeLinkSystem.autoRecharge.execute(currentFile);
                        } else {
                            TimeLinkSystem.player.stop();
                            TimeLinkSystem.ui.showToast('‚ö†Ô∏è TL exhausted', 'warning');
                        }
                    }
                } catch (e) {
                    TimeLinkSystem.player.stop();
                }
            }, 1000);
        },
        
        togglePlayPause: function() {
            const file = TimeLinkSystem.files.find(f => f.id === TimeLinkSystem.player.currentFileId);
            if (!file || file.type === 'TL4') return; // ÎπÑÎîîÏò§Îäî Ïª®Ìä∏Î°§Îü¨ ÏÇ¨Ïö©
            
            const audioPlayer = document.getElementById('audioPlayer');
            
            if (audioPlayer.paused) {
                audioPlayer.play();
                TimeLinkSystem.player.isPlaying = true;
                document.getElementById('playPauseBtn').innerHTML = '‚è∏Ô∏è Pause';
            } else {
                audioPlayer.pause();
                TimeLinkSystem.player.isPlaying = false;
                document.getElementById('playPauseBtn').innerHTML = '‚ñ∂Ô∏è Play';
            }
        },
        
        stop: function() {
            if (TimeLinkSystem.playInterval) {
                clearInterval(TimeLinkSystem.playInterval);
                TimeLinkSystem.playInterval = null;
            }
            
            // ÎπÑÎîîÏò§ Ï†ïÏßÄ
            const videoContainer = document.getElementById('videoPlayerContainer');
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.pause();
            videoPlayer.src = '';
            videoContainer.style.display = 'none';
            
            // Ïò§ÎîîÏò§ Ï†ïÏßÄ
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.pause();
            audioPlayer.src = '';
            
            // Î™®Îã¨ Îã´Í∏∞
            document.getElementById('playerModal').style.display = 'none';
            
            TimeLinkSystem.currentPlayingFile = null;
            TimeLinkSystem.player.isPlaying = false;
            TimeLinkSystem.player.currentFileId = null;
            
            TimeLinkSystem.ui.updateAll();
        },
        
        openChargeModal: function(fileId) {
            if (fileId) TimeLinkSystem.player.currentFileId = fileId;
            document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            document.getElementById('chargeModal').style.display = 'flex';
        }
    },
    
    // Lecture
    lecture: {
        selectedFile: null,
        selectedFileData: null,
        
        openCreateModal: function() {
            document.getElementById('lectureCreateModal').style.display = 'flex';
        },
        
        handleFileSelect: function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            TimeLinkSystem.lecture.selectedFile = file;
            
            const reader = new FileReader();
            reader.onload = e => TimeLinkSystem.lecture.selectedFileData = e.target.result;
            reader.readAsDataURL(file);
        },
        
        create: async function() {
            const title = document.getElementById('lectureTitle').value;
            const price = parseInt(document.getElementById('lecturePrice').value);
            
            if (!title || !price) {
                TimeLinkSystem.ui.showToast('Enter all fields', 'error');
                return;
            }
            
            if (!TimeLinkSystem.lecture.selectedFile) {
                TimeLinkSystem.ui.showToast('Select a file', 'error');
                return;
            }
            
            const lecture = new Lecture({
                title: title,
                instructor: document.getElementById('lectureInstructor').value,
                description: document.getElementById('lectureDescription').value,
                category: document.getElementById('lectureCategory').value,
                price: price,
                creatorId: TimeLinkSystem.currentUser.id,
                creatorName: TimeLinkSystem.currentUser.username,
                audioUrl: TimeLinkSystem.lecture.selectedFileData
            });
            
            TimeLinkSystem.lectures.push(lecture);
            TimeLinkSystem.ui.showToast('‚úÖ Lecture created!', 'success');
            document.getElementById('lectureCreateModal').style.display = 'none';
            TimeLinkSystem.lecture.updateList();
        },
        
        updateList: function() {
            const container = document.getElementById('lectureList');
            if (!container) return;
            
            if (TimeLinkSystem.lectures.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:60px;">üìö No lectures yet</div>';
                return;
            }
            
            container.innerHTML = TimeLinkSystem.lectures.map(lec => {
                const purchased = lec.hasUserPurchased(TimeLinkSystem.currentUser?.id);
                
                return `
                <div class="file-card">
                    <div class="file-thumbnail video">
                        üìö
                        <span class="badge badge-copyright">${lec.category}</span>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${lec.title}</div>
                        <div class="file-artist">${lec.instructor}</div>
                        <div class="info-panel video-panel">
                            <strong>üí∞ Price</strong><br>
                            <span style="font-size: 1.8rem;">${lec.price.toLocaleString()} TL</span>
                        </div>
                        ${purchased ? 
                            '<button class="btn-play" style="width:100%;" onclick="TimeLinkSystem.ui.showToast(\'Lecture playback coming soon\', \'info\')">üìö Watch</button>' :
                            `<button class="btn-lecture" onclick="TimeLinkSystem.lecture.openPurchaseModal('${lec.id}')">Purchase (${lec.price} TL)</button>`
                        }
                    </div>
                </div>
            `}).join('');
        },
        
        openPurchaseModal: function(lectureId) {
            const lecture = TimeLinkSystem.lectures.find(l => l.id === lectureId);
            if (!lecture) return;
            
            TimeLinkSystem.pendingLecturePurchase = lecture;
            
            document.getElementById('lecturePurchaseTitle').textContent = lecture.title;
            document.getElementById('lecturePurchaseCreator').textContent = lecture.instructor;
            document.getElementById('lecturePurchasePrice').textContent = lecture.price.toLocaleString() + ' TL';
            document.getElementById('lecturePurchaseBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString() + ' TL';
            document.getElementById('lecturePurchaseAfter').textContent = (TimeLinkSystem.wallet.balance - lecture.price).toLocaleString() + ' TL';
            
            document.getElementById('lecturePurchaseModal').style.display = 'flex';
        },
        
        confirmPurchase: async function() {
            const lecture = TimeLinkSystem.pendingLecturePurchase;
            if (!lecture) return;
            
            try {
                await lecture.purchase(TimeLinkSystem.currentUser.id, TimeLinkSystem.wallet);
                TimeLinkSystem.ui.showToast(`‚úÖ Purchased "${lecture.title}"`, 'success');
                TimeLinkSystem.ui.closeLecturePurchaseModal();
                TimeLinkSystem.lecture.updateList();
                TimeLinkSystem.ui.updateAll();
            } catch (e) {
                TimeLinkSystem.ui.showToast(e.message, 'error');
            }
        },
        
        updatePriceKRW: function() {
            const price = parseInt(document.getElementById('lecturePrice').value) || 0;
            document.getElementById('lecturePriceKRW').textContent = Math.floor(price * ECONOMY.TL_PRICE_KRW);
        }
    },
    
    // Mining
    mining: {
        execute: async function() {
            const amount = parseInt(document.getElementById('miningAmount').value);
            if (!amount) return;
            
            const hasMiningRight = TimeLinkSystem.files.some(f => f.metadata.contract?.mining_allowed);
            if (!hasMiningRight) {
                TimeLinkSystem.ui.showToast('Need 5:5 contract file', 'error');
                return;
            }
            
            const maxMining = TimeLinkSystem.wallet.balance * ECONOMY.MINING_LIMIT_RATIO;
            if (amount > maxMining) {
                TimeLinkSystem.ui.showToast(`Max mining: ${Math.floor(maxMining)} TL`, 'error');
                return;
            }
            
            const tlcEarned = amount * ECONOMY.MINING_BASE_RATE * 4.75;
            
            await TimeLinkSystem.wallet.withdraw(amount, 'MINING', 'system');
            TimeLinkSystem.wallet.tlcBalance += tlcEarned;
            
            TimeLinkSystem.ui.updateAll();
            TimeLinkSystem.ui.showToast(`‚õèÔ∏è Mined ${tlcEarned.toFixed(2)} TLC`, 'success');
        }
    },
    
    // Car
    car: {
        addDrivingMinutes: function(minutes) {
            const reward = minutes * ECONOMY.CAR_REWARD_PER_MINUTE;
            TimeLinkSystem.wallet.charge(reward);
            TimeLinkSystem.ui.showToast(`üöó +${reward} TL earned`, 'success');
            TimeLinkSystem.ui.updateAll();
        }
    },
    
    // UI
    ui: {
        switchTab: function(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('active');
            
            if (tab === 'library') TimeLinkSystem.ui.updateLibrary();
            if (tab === 'shareplace') TimeLinkSystem.ui.updateSharePlace();
            if (tab === 'lecture') TimeLinkSystem.lecture.updateList();
            if (tab === 'radio') TimeLinkSystem.radio.initChannels();
            if (tab === 'commercial') TimeLinkSystem.radio.initCommercialChannels();
        },
        
        updateAll: function() {
            if (!TimeLinkSystem.wallet) return;
            
            document.getElementById('walletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            document.getElementById('dashWallet').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            document.getElementById('currentTLBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString();
            
            document.getElementById('tlcBalance').textContent = TimeLinkSystem.wallet.tlcBalance.toFixed(2);
            document.getElementById('dashTLC').textContent = TimeLinkSystem.wallet.tlcBalance.toFixed(2);
            
            const tl3Count = TimeLinkSystem.files.filter(f => f.type === 'TL3').length;
            const tl4Count = TimeLinkSystem.files.filter(f => f.type === 'TL4').length;
            document.getElementById('dashTL3').textContent = tl3Count;
            document.getElementById('dashTL4').textContent = tl4Count;
            
            document.getElementById('autoRechargeWalletBalance').textContent = TimeLinkSystem.wallet.balance.toLocaleString() + ' TL';
            document.getElementById('autoRechargeDebt').textContent = TimeLinkSystem.autoRecharge.pendingDebt.toLocaleString() + ' TL';
            
            const sharedCount = TimeLinkSystem.files.filter(f => f.isShared).length;
            document.getElementById('sharedCount').textContent = sharedCount;
            document.getElementById('sharedCount2').textContent = sharedCount;
            document.getElementById('totalLectures').textContent = TimeLinkSystem.lectures.length;
            
            document.getElementById('radioListeners').textContent = '1,234';
            document.getElementById('commercialViewers').textContent = '567';
            document.getElementById('goldAmount').textContent = '10.24 g';
            
            TimeLinkSystem.ui.updateLibrary();
            TimeLinkSystem.ui.updateSharePlace();
        },
        
        updateLibrary: function() {
            const container = document.getElementById('fileList');
            const empty = document.getElementById('emptyLibrary');
            
            if (TimeLinkSystem.files.length === 0) {
                container.innerHTML = '';
                empty.style.display = 'block';
                return;
            }
            
            empty.style.display = 'none';
            
            container.innerHTML = TimeLinkSystem.files.map(file => {
                const rate = file.type === 'TL4' ? 2 : 1;
                
                return `
                <div class="file-card">
                    <div class="file-thumbnail ${file.fileType}">
                        ${file.type === 'TL4' ? 'üé¨' : 'üéµ'}
                        <span class="badge badge-type" style="left:16px;">${file.type}</span>
                        ${file.metadata.contract.mining_allowed ? 
                            '<span class="badge badge-mining">‚õèÔ∏è Mining</span>' : 
                            '<span class="badge badge-no-tl">‚õî No Mining</span>'}
                        ${file.isShared ? '<span class="badge badge-shared">üîÑ Shared</span>' : ''}
                    </div>
                    <div class="file-info">
                        <div class="file-name">${file.metadata.title}</div>
                        <div class="file-artist">${file.metadata.artist}</div>
                        
                        <div class="info-panel tl-panel">
                            <strong>‚è≥ TL Balance</strong><br>
                            <span style="font-size:1.4rem;">${file.token.balance.toLocaleString()}</span> TL (${rate}TL/Ï¥à)
                        </div>
                        
                        <div class="file-stats">
                            <span>üìä Charged: ${file.token.total_charged} TL</span>
                            <span>‚è±Ô∏è Played: ${Math.floor(file.token.total_consumed / rate)}s</span>
                        </div>
                        
                        <div class="file-actions">
                            ${file.token.balance >= rate ? 
                                `<button class="btn-play" onclick="TimeLinkSystem.player.play('${file.id}')">‚ñ∂Ô∏è Play</button>` : 
                                `<button class="btn-play-disabled" disabled>‚õî No TL</button>`
                            }
                            <button class="btn-charge" onclick="TimeLinkSystem.player.openChargeModal('${file.id}')">üí∞ Charge</button>
                            ${!file.isShared ? 
                                `<button class="btn-share" onclick="TimeLinkSystem.share.shareFile('${file.id}')">üîÑ Share</button>` : 
                                `<button class="btn-share" style="background:#333;" disabled>‚úÖ Shared</button>`
                            }
                        </div>
                    </div>
                </div>
            `}).join('');
        },
        
        updateSharePlace: function() {
            const container = document.getElementById('sharedMusicList');
            
            const shared = TimeLinkSystem.files.filter(f => f.isShared);
            
            document.getElementById('totalSharedCount').textContent = shared.length;
            document.getElementById('shared55Count').textContent = shared.filter(f => f.metadata.contract.type === '55').length;
            document.getElementById('shared73Count').textContent = shared.filter(f => f.metadata.contract.type === '73').length;
            
            let filtered = shared;
            if (TimeLinkSystem.currentFilter === '55') {
                filtered = shared.filter(f => f.metadata.contract.type === '55');
            } else if (TimeLinkSystem.currentFilter === '73') {
                filtered = shared.filter(f => f.metadata.contract.type === '73');
            } else if (TimeLinkSystem.currentFilter === 'mining') {
                filtered = shared.filter(f => f.metadata.contract.mining_allowed);
            }
            
            if (filtered.length === 0) {
                container.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:60px;">üì≠ No shared files</div>';
                return;
            }
            
            container.innerHTML = filtered.map(file => `
                <div class="file-card">
                    <div class="file-thumbnail ${file.fileType}">
                        ${file.type === 'TL4' ? 'üé¨' : 'üéµ'}
                        <span class="badge badge-shared">üîÑ Shared</span>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${file.metadata.title}</div>
                        <div class="file-artist">${file.metadata.artist}</div>
                        <div class="info-panel copyright-panel">
                            <strong>Creator</strong> ${file.creatorName}
                        </div>
                        <div class="info-panel tl-panel">
                            <strong>‚è≥ Remaining</strong> ${file.token.balance.toLocaleString()} TL
                        </div>
                        <button class="btn-radio" onclick="TimeLinkSystem.radio.tune('Share: ${file.metadata.title}')">
                            üìª Listen (0.5 TL/Ï¥à)
                        </button>
                    </div>
                </div>
            `).join('');
        },
        
        openPurchaseModal: function() {
            const container = document.getElementById('purchasePackages');
            container.innerHTML = ECONOMY.PACKAGES.map(pkg => `
                <div class="charge-card" onclick="TimeLinkSystem.file.purchaseTL('${pkg.id}')">
                    <div class="icon">üí∞</div>
                    <h3>${pkg.name}</h3>
                    <div class="amount">${(pkg.tl + pkg.bonus).toLocaleString()} TL</div>
                    <div>${pkg.price}Ïõê</div>
                    ${pkg.bonus > 0 ? `<div style="color:var(--success);">+${pkg.bonus} bonus</div>` : ''}
                </div>
            `).join('');
            
            document.getElementById('purchaseModal').style.display = 'flex';
        },
        
        closePurchaseModal: function() {
            document.getElementById('purchaseModal').style.display = 'none';
        },
        
        closeChargeModal: function() {
            document.getElementById('chargeModal').style.display = 'none';
        },
        
        closeLecturePurchaseModal: function() {
            document.getElementById('lecturePurchaseModal').style.display = 'none';
            TimeLinkSystem.pendingLecturePurchase = null;
        },
        
        showToast: function(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 3000);
        }
    }
};

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('fileInput').addEventListener('change', e => TimeLinkSystem.file.handleSelect(e));
    document.getElementById('lectureFileInput').addEventListener('change', e => TimeLinkSystem.lecture.handleFileSelect(e));
    document.getElementById('lecturePrice').addEventListener('input', () => TimeLinkSystem.lecture.updatePriceKRW());
    
    window.addEventListener('click', e => {
        if (e.target.classList.contains('modal')) e.target.style.display = 'none';
    });
    
    document.getElementById('copyrightNumber').value = 'TL3-' + Date.now();
    TimeLinkSystem.file.selectType('audio');
});

// Export
window.TimeLinkSystem = TimeLinkSystem;
window.ECONOMY = ECONOMY;
</script>

<!-- Status Badge -->
<div style="position: fixed; bottom: 20px; right: 20px; background: rgba(26,26,26,0.95); padding: 12px 24px; border-radius: var(--radius-full); border: 1px solid var(--border-color); z-index: 999; display: flex; gap: 12px;">
    <span style="color:var(--success);">üéµ TL3</span>
    <span style="color:var(--video);">üé¨ TL4</span>
    <span style="color:var(--accent);">üîÑ Share</span>
    <span style="color:var(--radio);">üìª Radio</span>
    <span style="color:var(--success);">‚ö° Auto</span>
</div>

</body>
</html>
