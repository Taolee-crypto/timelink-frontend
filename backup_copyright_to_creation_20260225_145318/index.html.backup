<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TimeLink</title>
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#060610;--card:rgba(255,255,255,.04);--card-h:rgba(255,255,255,.07);
  --bd:rgba(255,255,255,.08);--bd-a:rgba(0,245,160,.3);
  --ac:#00f5a0;--ac-d:rgba(0,245,160,.13);--ac-g:0 0 28px rgba(0,245,160,.35);
  --pu:#7b61ff;--pu-d:rgba(123,97,255,.13);
  --su:#ff7b00;--su-d:rgba(255,123,0,.11);
  --ca:#f59e0b;--ca-d:rgba(245,158,11,.11);
  --da:#ff4f4f;--sp:#1db954;--sp-d:rgba(29,185,84,.12);
  --t1:#e8e8f5;--t2:#8888aa;--t3:#44445a;
  --rf:999px;--rl:20px;--rm:14px;--rs:8px;
  --tr:all .2s cubic-bezier(.4,0,.2,1);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'Syne',sans-serif;background:var(--bg);color:var(--t1);min-height:100vh;line-height:1.6;overflow-x:hidden;-webkit-font-smoothing:antialiased}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:radial-gradient(ellipse 80% 50% at 20% 10%,rgba(0,245,160,.05) 0%,transparent 60%),
             radial-gradient(ellipse 60% 40% at 80% 80%,rgba(123,97,255,.05) 0%,transparent 60%)}
/* NAV */
.navbar{position:sticky;top:0;z-index:200;height:64px;padding:0 24px;display:flex;align-items:center;justify-content:space-between;background:rgba(6,6,16,.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--bd)}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--t1)}
.logo-icon{width:32px;height:32px;border-radius:8px;background:var(--ac);display:flex;align-items:center;justify-content:center;font-size:16px}
.logo-text{font-size:18px;font-weight:800;letter-spacing:-.5px}.logo-text span{color:var(--ac)}
.nav-right{display:flex;align-items:center;gap:8px}
.bal-row{display:flex;align-items:center;gap:10px;padding:6px 14px;border-radius:var(--rf);background:var(--card);border:1px solid var(--bd)}
.bal-col{display:flex;flex-direction:column;align-items:center}
.bal-lbl{font-size:10px;color:var(--t2);font-weight:700;text-transform:uppercase}
.bal-val{font-family:'JetBrains Mono',monospace;font-size:13px;font-weight:700;color:var(--ac)}
.bal-val.locked{color:var(--ca)}.bal-val.tlc{color:var(--pu)}
.bal-sep{width:1px;height:20px;background:var(--bd)}
.car-ind{display:inline-flex;align-items:center;gap:5px;padding:4px 12px;border-radius:var(--rf);font-size:12px;font-weight:700;transition:var(--tr)}
.car-ind.off{background:rgba(255,255,255,.04);color:var(--t2);border:1px solid var(--bd)}
.car-ind.on{background:var(--ca-d);color:var(--ca);border:1px solid rgba(245,158,11,.3)}
/* AVATAR DROPDOWN */
.avatar-wrap{position:relative}
.avatar-btn{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--ac),var(--pu));display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:800;color:#060610;cursor:pointer;border:2px solid transparent;transition:var(--tr);user-select:none}
.avatar-btn:hover{border-color:var(--ac);box-shadow:0 0 0 3px rgba(0,245,160,.15)}
.nav-dropdown{position:absolute;top:calc(100% + 10px);right:0;width:200px;background:#12121f;border:1px solid var(--bd);border-radius:var(--rm);padding:8px;z-index:999;box-shadow:0 12px 40px rgba(0,0,0,.6);animation:ddIn .15s ease}
@keyframes ddIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
.dd-user{padding:10px 12px;border-bottom:1px solid var(--bd);margin-bottom:6px}
.dd-username{font-weight:800;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.dd-email{font-size:11px;color:var(--t2);margin-top:2px}
.dd-item{display:flex;align-items:center;gap:10px;padding:9px 12px;border-radius:var(--rs);cursor:pointer;font-size:13px;font-weight:600;transition:var(--tr);color:var(--t1)}
.dd-item:hover{background:var(--card-h)}
.dd-item.danger{color:var(--da)}
.dd-item.danger:hover{background:rgba(255,79,79,.08)}
/* TABS */
.tabs-bar{position:sticky;top:64px;z-index:190;padding:7px 24px;background:rgba(6,6,16,.92);backdrop-filter:blur(20px);border-bottom:1px solid var(--bd);display:flex;justify-content:center;align-items:center}.tabs-inner{display:flex;gap:4px;overflow-x:auto;scrollbar-width:none}.tabs-inner::-webkit-scrollbar{display:none}
.tab-btn{flex-shrink:0;padding:8px 18px;border-radius:var(--rf);border:none;background:transparent;color:var(--t2);font-family:'Syne',sans-serif;font-size:13px;font-weight:700;cursor:pointer;transition:var(--tr);white-space:nowrap}
.tab-btn:hover{color:var(--t1);background:var(--card)}.tab-btn.active{background:var(--ac);color:#060610}
.tab-pane{display:none;animation:fadeUp .2s ease}.tab-pane.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.page{padding:24px 24px 120px;max-width:1100px;margin:0 auto;position:relative;z-index:1}
/* BUTTONS */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 22px;border-radius:var(--rf);font-family:'Syne',sans-serif;font-size:14px;font-weight:700;cursor:pointer;transition:var(--tr);border:none;text-decoration:none;white-space:nowrap}
.btn-primary{background:var(--ac);color:#060610}.btn-primary:hover{transform:translateY(-1px);box-shadow:var(--ac-g)}
.btn-ghost{background:transparent;color:var(--t2);border:1px solid var(--bd)}.btn-ghost:hover{background:var(--card);color:var(--t1)}
.btn-outline{background:transparent;color:var(--ac);border:1px solid var(--bd-a)}.btn-outline:hover{background:var(--ac-d)}
.btn-sp{background:var(--sp);color:#fff}.btn-sp:hover{transform:translateY(-1px);box-shadow:0 0 24px rgba(29,185,84,.4)}
.btn-ai{background:var(--su);color:#fff}.btn-ai:hover{transform:translateY(-1px);box-shadow:0 0 24px rgba(255,123,0,.4)}
.btn-ai:disabled,.btn:disabled{opacity:.4;cursor:not-allowed;transform:none!important;box-shadow:none}
.btn-sm{padding:6px 14px;font-size:12px}.btn-lg{padding:13px 30px;font-size:15px}
.btn-icon{width:40px;height:40px;padding:0;border-radius:50%}
.w-full{width:100%}
/* CARD */
.card{background:var(--card);border:1px solid var(--bd);border-radius:var(--rl);padding:24px;transition:var(--tr)}
.card-ac{border-color:var(--bd-a);background:linear-gradient(135deg,rgba(0,245,160,.04),transparent)}
.card-pu{border-color:rgba(123,97,255,.25);background:linear-gradient(135deg,rgba(123,97,255,.06),transparent)}
.card-ai{border-color:rgba(255,123,0,.25);background:linear-gradient(145deg,rgba(255,123,0,.06),transparent)}
.card-sp{border-color:rgba(29,185,84,.25);background:linear-gradient(135deg,rgba(29,185,84,.05),transparent)}
.card-car{border-color:rgba(245,158,11,.25);background:linear-gradient(135deg,rgba(245,158,11,.06),transparent)}
.sec-hd{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.sec-title{font-size:18px;font-weight:800}
/* STATS */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px}
.stat-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--rl);padding:20px;position:relative;overflow:hidden}
.stat-card::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:var(--ac)}
.stat-lbl{font-size:11px;color:var(--t2);text-transform:uppercase;font-weight:700;letter-spacing:.5px;margin-bottom:6px}
.stat-val{font-family:'JetBrains Mono',monospace;font-size:24px;font-weight:800}
.stat-val.ac{color:var(--ac)}.stat-val.lo{color:var(--ca)}.stat-val.tl{color:var(--pu)}
/* FORM */
.fg{display:flex;flex-direction:column;gap:7px;margin-bottom:14px}
.fl{font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px}
.fi{background:rgba(255,255,255,.04);border:1px solid var(--bd);border-radius:var(--rm);padding:12px 16px;font-family:'Syne',sans-serif;font-size:14px;color:var(--t1);outline:none;transition:var(--tr);width:100%}
.fi:focus{border-color:var(--ac);background:rgba(0,245,160,.04);box-shadow:0 0 0 3px rgba(0,245,160,.1)}
.fi::placeholder{color:var(--t3)}
.fi.ai-focus:focus{border-color:var(--su);background:rgba(255,123,0,.04);box-shadow:0 0 0 3px rgba(255,123,0,.1)}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.three-col{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
/* DROP */
.drop-zone{border:2px dashed var(--bd);border-radius:var(--rl);padding:40px 24px;text-align:center;cursor:pointer;transition:var(--tr)}
.drop-zone:hover,.drop-zone.over{border-color:var(--ac);background:var(--ac-d)}
.drop-zone-icon{font-size:36px;margin-bottom:10px}.drop-zone-title{font-weight:700;font-size:15px;margin-bottom:4px}.drop-zone-sub{font-size:12px;color:var(--t2)}
.file-preview{display:flex;align-items:center;gap:12px;background:var(--ac-d);border:1px solid var(--bd-a);border-radius:var(--rm);padding:12px 16px;margin-bottom:12px}
.fp-name{font-weight:700;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}
/* TRACK ITEMS */
.track-item{display:flex;align-items:center;gap:14px;padding:12px 16px;border-radius:var(--rm);background:var(--card);border:1px solid var(--bd);transition:var(--tr);cursor:pointer}
.track-item:hover{background:var(--card-h);border-color:var(--bd-a)}
.track-item.playing{border-color:var(--bd-a);background:rgba(0,245,160,.06)}
.track-thumb{width:46px;height:46px;flex-shrink:0;border-radius:var(--rs);background:linear-gradient(135deg,var(--ac-d),var(--pu-d));display:flex;align-items:center;justify-content:center;font-size:20px}
.track-info{flex:1;min-width:0}
.track-title{font-weight:700;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.track-meta{font-size:12px;color:var(--t2);margin-top:2px}
.track-actions{display:flex;align-items:center;gap:8px;flex-shrink:0}
/* TL BAR on file */
.file-tl-bar{height:3px;background:var(--bd);border-radius:2px;margin-top:4px;overflow:hidden}
.file-tl-fill{height:100%;background:linear-gradient(90deg,var(--ca),var(--ac));border-radius:2px;transition:width .5s}
/* BADGE */
.badge{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:var(--rf);font-size:11px;font-weight:700;font-family:'JetBrains Mono',monospace}
.badge-ac{background:var(--ac-d);color:var(--ac);border:1px solid rgba(0,245,160,.2)}
.badge-pu{background:var(--pu-d);color:var(--pu);border:1px solid rgba(123,97,255,.2)}
.badge-sp{background:var(--sp-d);color:var(--sp);border:1px solid rgba(29,185,84,.25)}
.badge-ai{background:rgba(255,123,0,.15);color:var(--su);border:1px solid rgba(255,123,0,.3)}
.badge-ca{background:var(--ca-d);color:var(--ca);border:1px solid rgba(245,158,11,.3)}
.badge-live{background:rgba(255,80,80,.15);color:#ff5050;border:1px solid rgba(255,80,80,.2)}
.badge-live::before{content:'';width:6px;height:6px;background:#ff5050;border-radius:50%;animation:blink 1.2s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}
.badge-vid{background:rgba(239,68,68,.12);color:#ef4444;border:1px solid rgba(239,68,68,.25)}
/* TOGGLE */
.toggle{position:relative;width:52px;height:28px;cursor:pointer;flex-shrink:0}
.toggle input{display:none}
.tgl-track{position:absolute;inset:0;border-radius:14px;background:var(--bd);transition:var(--tr)}
.tgl-thumb{position:absolute;top:4px;left:4px;width:20px;height:20px;border-radius:50%;background:var(--t2);font-size:12px;display:flex;align-items:center;justify-content:center;transition:var(--tr)}
.toggle input:checked~.tgl-track{background:rgba(245,158,11,.35)}
.toggle input:checked~.tgl-thumb{transform:translateX(24px);background:var(--ca)}
/* LOCKED */
.locked-track{height:6px;background:var(--bd);border-radius:3px;overflow:hidden}
.locked-fill{height:100%;width:100%;background:linear-gradient(90deg,var(--ca),var(--ac));border-radius:3px;transition:width 1s linear}
/* TRUST SVG */
.trust-svg-wrap{position:relative;width:100px;height:100px;margin:0 auto}
.trust-svg-wrap svg{transform:rotate(-90deg)}
.trust-track{fill:none;stroke:var(--bd);stroke-width:8}
.trust-fill{fill:none;stroke:var(--ac);stroke-width:8;stroke-linecap:round;stroke-dasharray:263.9;stroke-dashoffset:0;transition:stroke-dashoffset .6s ease,stroke .4s}
.trust-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.trust-num{font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:800;color:var(--ac);line-height:1}
.trust-tag{font-size:9px;color:var(--t2);font-weight:700;text-transform:uppercase;margin-top:2px}
/* NOW PLAYING */
.np-card{background:linear-gradient(135deg,rgba(0,245,160,.05),rgba(123,97,255,.04));border:1px solid var(--bd-a);border-radius:var(--rl);padding:20px;margin-bottom:24px;position:relative;overflow:hidden}
.np-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--ac),var(--pu));animation:scan 3s linear infinite}
@keyframes scan{0%{transform:scaleX(0);transform-origin:left}50%{transform:scaleX(1);transform-origin:left}51%{transform:scaleX(1);transform-origin:right}100%{transform:scaleX(0);transform-origin:right}}
.np-seek{width:100%;height:4px;background:var(--bd);border-radius:2px;cursor:pointer;margin:10px 0 6px}
.np-seek-fill{height:100%;background:var(--ac);border-radius:2px;width:0%;transition:width .5s linear}
.np-times{display:flex;justify-content:space-between;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--t2)}
/* SHARE */
.share-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:14px}
.share-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--rl);padding:16px;transition:var(--tr);cursor:pointer}
.share-card:hover{border-color:var(--bd-a);background:var(--card-h);transform:translateY(-2px)}
.share-thumb{width:100%;height:64px;border-radius:var(--rm);background:linear-gradient(135deg,var(--ac-d),var(--pu-d));display:flex;align-items:center;justify-content:center;font-size:26px;margin-bottom:12px}
/* RADIO */
.radio-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:12px}
.radio-card{background:var(--card);border:1px solid var(--bd);border-radius:var(--rl);padding:20px;text-align:center;cursor:pointer;transition:var(--tr)}
.radio-card:hover{border-color:var(--bd-a);transform:translateY(-2px)}
.radio-card.playing{border-color:var(--bd-a);background:var(--ac-d)}
/* CAR */
.car-hero{background:linear-gradient(145deg,var(--ca-d),var(--card));border:2px solid rgba(245,158,11,.28);border-radius:var(--rl);padding:36px;text-align:center;margin-bottom:24px;position:relative;overflow:hidden}
.car-hero::after{content:'ğŸš—';position:absolute;bottom:-16px;right:-8px;font-size:120px;opacity:.07;pointer-events:none}
.car-hero.on{border-color:rgba(245,158,11,.55);box-shadow:0 0 40px rgba(245,158,11,.1)}
.car-rate-big{font-family:'JetBrains Mono',monospace;font-size:64px;font-weight:800;color:var(--ca);line-height:1;margin:10px 0}
.car-info-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:20px}
.car-info-item{background:rgba(0,0,0,.3);border-radius:var(--rm);padding:14px;text-align:center;border:1px solid rgba(245,158,11,.15)}
.car-info-label{font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase}
.car-info-value{font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:700;color:var(--ca);margin-top:4px}
/* PLAYER PAGE */
.video-wrap{background:#000;border-radius:var(--rl);overflow:hidden;aspect-ratio:16/9;margin-bottom:16px;position:relative}
video{width:100%;height:100%;object-fit:contain}
.audio-art{width:100%;height:180px;border-radius:var(--rl);background:linear-gradient(135deg,var(--ac-d),var(--pu-d));display:flex;align-items:center;justify-content:center;font-size:64px;margin-bottom:16px;position:relative;overflow:hidden}
.audio-art::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(0,245,160,.08),rgba(123,97,255,.08));animation:pulse-bg 2s ease-in-out infinite}
@keyframes pulse-bg{0%,100%{opacity:.5}50%{opacity:1}}
.player-seek{width:100%;height:5px;background:var(--bd);border-radius:3px;cursor:pointer;margin:10px 0}
.player-fill{height:100%;background:linear-gradient(90deg,var(--ac),var(--pu));border-radius:3px;width:0%;transition:width .5s linear}
.player-controls{display:flex;align-items:center;justify-content:center;gap:14px;margin:14px 0}
.ctrl-btn{background:transparent;border:1px solid var(--bd);color:var(--t1);border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--tr);font-size:16px}
.ctrl-btn:hover{background:var(--card-h);border-color:var(--bd-a)}
.ctrl-btn.play{width:56px;height:56px;background:var(--ac);color:#060610;border:none;font-size:20px}
.ctrl-btn.play:hover{transform:scale(1.05);box-shadow:var(--ac-g)}
.vol-row{display:flex;align-items:center;gap:10px}
.vol-slider{flex:1;height:4px;-webkit-appearance:none;background:var(--bd);border-radius:2px;outline:none;cursor:pointer}
.vol-slider::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;background:var(--ac);border-radius:50%;cursor:pointer}
/* TL per file display */
.file-tl-info{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:var(--ca-d);border:1px solid rgba(245,158,11,.25);border-radius:var(--rm);margin-bottom:12px;font-size:13px}
/* BOTTOM PLAYER BAR */
.player-bar{position:fixed;bottom:0;left:0;right:0;height:72px;background:rgba(6,6,16,.97);backdrop-filter:blur(20px);border-top:1px solid var(--bd);display:flex;align-items:center;padding:0 24px;gap:20px;z-index:500}
.pb-prog{position:absolute;bottom:72px;left:0;right:0;height:3px;background:var(--bd);cursor:pointer}
.pb-prog-fill{height:100%;background:var(--ac);width:0%;transition:width .5s linear}
.pb-track{flex:1;min-width:0;display:flex;align-items:center;gap:12px}
.pb-thumb{width:44px;height:44px;flex-shrink:0;border-radius:8px;background:linear-gradient(135deg,var(--ac-d),var(--pu-d));display:flex;align-items:center;justify-content:center;font-size:20px}
.pb-controls{display:flex;align-items:center;gap:10px}
.pb-right{flex:1;display:flex;justify-content:flex-end;align-items:center;gap:10px}
/* SEARCH BAR */
.search-bar{display:flex;gap:10px;margin-bottom:20px}
.search-input{flex:1;background:rgba(255,255,255,.05);border:1px solid var(--bd);border-radius:var(--rf);padding:12px 20px;font-family:'Syne',sans-serif;font-size:14px;color:var(--t1);outline:none;transition:var(--tr)}
.search-input:focus{border-color:var(--ac);box-shadow:0 0 0 3px rgba(0,245,160,.1)}
.search-input::placeholder{color:var(--t3)}
/* FILTER CHIPS */
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.chip{padding:5px 13px;border-radius:var(--rf);font-size:12px;font-weight:700;cursor:pointer;transition:var(--tr);border:1px solid var(--bd);background:transparent;color:var(--t2);white-space:nowrap}
.chip:hover{border-color:var(--bd-a);color:var(--t1)}
.chip.active{background:var(--ac);color:#060610;border-color:var(--ac)}
.chip.sp-active{background:var(--sp);color:#fff;border-color:var(--sp)}
/* MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.78);backdrop-filter:blur(8px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:24px}
.modal{background:#12121f;border:1px solid var(--bd);border-radius:24px;padding:32px;width:100%;max-width:480px;position:relative;animation:slideUp .2s ease;max-height:90vh;overflow-y:auto}
@keyframes slideUp{from{transform:translateY(18px);opacity:0}to{transform:translateY(0);opacity:1}}
.modal-title{font-size:20px;font-weight:800;margin-bottom:20px}
.modal-close{position:absolute;top:18px;right:18px;background:none;border:none;color:var(--t2);cursor:pointer;font-size:20px;line-height:1}
/* AI PLATFORM GRID */
.ai-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-bottom:20px}
.ai-card{padding:16px 12px;border-radius:var(--rm);border:2px solid var(--bd);background:var(--card);cursor:pointer;text-align:center;transition:var(--tr)}
.ai-card:hover{border-color:rgba(255,123,0,.4)}
.ai-card.sel{border-color:var(--su);background:var(--su-d)}
.ai-logo{font-size:28px;margin-bottom:6px}
.ai-name{font-weight:800;font-size:13px}
.ai-type{font-size:11px;color:var(--t2);margin-top:2px}
/* WEATHER */
.weather-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:8px;margin-bottom:16px}
.wx-card{padding:12px 8px;border-radius:var(--rm);border:2px solid var(--bd);background:var(--card);cursor:pointer;text-align:center;transition:var(--tr)}
.wx-card:hover{border-color:var(--bd-a)}.wx-card.sel{border-color:var(--ac);background:var(--ac-d)}
/* MINE */
.mine-panel{background:linear-gradient(135deg,rgba(123,97,255,.07),transparent);border:1px solid rgba(123,97,255,.25);border-radius:var(--rl);padding:20px}
/* TOAST */
#toast-box{position:fixed;bottom:86px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:8px;pointer-events:none}
.t{padding:11px 16px;border-radius:var(--rm);font-size:13px;font-weight:600;backdrop-filter:blur(20px);border:1px solid var(--bd);animation:ti .25s ease;max-width:300px}
.t.s{background:rgba(0,245,160,.12);color:var(--ac);border-color:rgba(0,245,160,.3)}
.t.e{background:rgba(255,79,79,.12);color:var(--da);border-color:rgba(255,79,79,.3)}
.t.i{background:rgba(123,97,255,.12);color:var(--pu);border-color:rgba(123,97,255,.3)}
@keyframes ti{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
.spinner{width:18px;height:18px;border:2px solid rgba(255,255,255,.15);border-top-color:currentColor;border-radius:50%;animation:sp .7s linear infinite;display:inline-block}
@keyframes sp{to{transform:rotate(360deg)}}
/* UTILS */
.mono{font-family:'JetBrains Mono',monospace}.ac{color:var(--ac)}.pu{color:var(--pu)}.mu{color:var(--t2)}.ca{color:var(--ca)}
.hidden{display:none!important}.divider{height:1px;background:var(--bd);margin:18px 0}
.tc{text-align:center}.flex{display:flex}.fb{display:flex;align-items:center;justify-content:space-between}
.ic{align-items:center}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}
.mt-2{margin-top:8px}.mt-4{margin-top:16px}.mt-6{margin-top:24px}.mb-4{margin-bottom:16px}.mb-6{margin-bottom:24px}
::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--bd);border-radius:3px}
@media(max-width:768px){.page{padding:16px 16px 110px}.stats-grid{grid-template-columns:1fr 1fr}.two-col,.three-col{grid-template-columns:1fr}.car-info-grid{grid-template-columns:1fr 1fr}.bal-row{display:none}.ai-grid{grid-template-columns:repeat(3,1fr)}}

.chart-item:hover{background:rgba(255,255,255,.05)}
.csub.active{background:var(--pu)!important;color:#fff!important;border-color:var(--pu)!important}

/* íƒ­ ë©”ë‰´ ê°€ìš´ë° ì •ë ¬ */
.tabs-bar {
    display: flex !important;
    justify-content: center !important;
    text-align: center !important;
}

.tabs-inner {
    display: flex !important;
    justify-content: center !important;
    margin: 0 auto !important;
    gap: 8px !important;
}

.tab {
    margin: 0 4px !important;
    text-align: center !important;
}

.tab-btn {
    margin: 0 4px !important;
}

/* íƒ­ ë©”ë‰´ ì¤‘ì•™ ì •ë ¬ */
.tabs-bar, .tabs-inner {
    display: flex !important;
    justify-content: center !important;
    text-align: center !important;
}

/* ì €ì‘ê¶Œ ë³´í˜¸ ì‹œìŠ¤í…œ */
.copyright-policy {
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.copyright-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  background: #f3f4f6;
  color: #4b5563;
}

.copyright-badge.verified {
  background: #d1fae5;
  color: #065f46;
}

.copyright-badge.unverified {
  background: #fee2e2;
  color: #991b1b;
}

.copyright-badge.warning {
  background: #ffedd5;
  color: #9a3412;
}

.copyright-tooltip {
  position: relative;
  cursor: help;
}

.copyright-tooltip:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: #1f2937;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  white-space: nowrap;
  z-index: 10;
  margin-bottom: 4px;
}

.verification-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 600;
}

.verification-badge.ai {
  background: #e0f2fe;
  color: #0369a1;
}

.verification-badge.manual {
  background: #fef3c7;
  color: #92400e;
}

.verification-badge.spotify {
  background: #1db954;
  color: white;
}

.ai-warning {
  background: #fff3cd;
  border: 1px solid #ffeeba;
  color: #856404;
  padding: 12px;
  border-radius: 8px;
  margin: 10px 0;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ai-warning i {
  font-size: 18px;
}


</head>
<body>
<audio id="aud" preload="none" style="display:none"></audio>
<video id="vid" preload="none" style="display:none" playsinline></video>
<!-- ========== í™˜ì „ ëª¨ë‹¬ ========== -->
<div class="modal-overlay hidden" id="exchange-modal">
  <div class="modal" style="max-width:400px">
    <div class="fb mb-4">
      <div style="font-weight:800;font-size:18px">ğŸ’± TL í™˜ì „ ìš”ì²­</div>
      <button class="btn btn-ghost btn-sm" onclick="closeModal('exchange-modal')">âœ•</button>
    </div>
    <div style="background:rgba(0,245,160,.06);border:1px solid rgba(0,245,160,.15);border-radius:var(--rm);padding:14px;margin-bottom:16px">
      <div class="fb" style="font-size:13px;margin-bottom:4px">
        <span style="color:var(--t2)">í™˜ì „ ê°€ëŠ¥ëŸ‰</span>
        <span style="font-weight:800;color:var(--ac);font-family:'JetBrains Mono',monospace" id="exch-available">0 TL</span>
      </div>
      <div style="font-size:11px;color:var(--t2)">(ì†Œë¹„ TL - í™˜ì „ TL) Ã— 50%</div>
    </div>
    <div style="margin-bottom:12px">
      <div style="font-size:12px;color:var(--t2);margin-bottom:6px">í™˜ì „ ê¸ˆì•¡ (TL)</div>
      <input type="number" class="fi" id="exch-amount" placeholder="í™˜ì „í•  TL ì…ë ¥" min="100" step="100">
      <div style="font-size:11px;color:var(--t2);margin-top:4px">ìµœì†Œ 100 TL Â· ì²˜ë¦¬ 3~5 ì˜ì—…ì¼</div>
    </div>
    <div style="margin-bottom:14px">
      <div style="font-size:12px;color:var(--t2);margin-bottom:6px">ì…ê¸ˆ ê³„ì¢Œ / ì§€ê°‘ ì£¼ì†Œ</div>
      <input type="text" class="fi" id="exch-account" placeholder="ì€í–‰ê³„ì¢Œ ë˜ëŠ” ì•”í˜¸í™”í ì£¼ì†Œ">
    </div>
    <div style="background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.15);border-radius:var(--rs);padding:10px;font-size:11px;color:var(--t2);margin-bottom:14px;line-height:1.6">
      âš ï¸ í™˜ì „ í›„ TLì€ POC ì±„êµ´ ê³„ì‚°ì—ì„œ ì œì™¸ë©ë‹ˆë‹¤<br>
      â›ï¸ TLC = ì†Œë¹„ TL Ã— 50% Ã— POC ê¸°ì—¬ì§€ìˆ˜
    </div>
    <button class="btn btn-primary" style="width:100%" onclick="requestExchange()">í™˜ì „ ìš”ì²­í•˜ê¸°</button>
  </div>
</div>

<!-- ========== ì¸ì¦ ì‹ ì²­ ëª¨ë‹¬ (ì§ì ‘ ì—…ë¡œë“œ íŒŒì¼ìš©) ========== -->
<div class="modal-overlay hidden" id="auth-request-modal">
  <div class="modal" style="max-width:460px">
    <div class="fb mb-4">
      <div>
        <div style="font-weight:800;font-size:18px">ğŸ” ì €ì‘ê¶Œ ì¸ì¦ ì‹ ì²­</div>
        <div style="font-size:12px;color:var(--t2);margin-top:2px" id="auth-req-track-title"></div>
      </div>
      <button class="btn btn-ghost btn-sm" onclick="closeModal('auth-request-modal')">âœ•</button>
    </div>

    <!-- ì•ˆë‚´ -->
    <div style="background:rgba(0,245,160,.06);border:1px solid rgba(0,245,160,.15);border-radius:var(--rm);padding:12px 14px;margin-bottom:16px;font-size:12px;color:var(--t2);line-height:1.7">
      âœ… ì¸ì¦ ì™„ë£Œ ì‹œ SharePlace ê³µìœ  + ìˆ˜ìµ ë¶„ë°°ê°€ ì‹œì‘ë©ë‹ˆë‹¤<br>
      â³ AI OCR ë¶„ì„ + ì‹¬ì‚¬íŒ€ ê²€í†  â€” <b style="color:var(--t1)">ìµœëŒ€ 30ì¼ ì´ë‚´</b> ì²˜ë¦¬<br>
      ğŸ“Œ API ë¯¸ì§€ì› í”Œë«í¼ì€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ í›„ ì—…ë¡œë“œ â€” ìƒì„± í™”ë©´ ìº¡ì²˜ í•„ìˆ˜
    </div>

    <!-- ì›ë³¸ URL -->
    <div class="fg">
      <label class="fl">ì›ë³¸ ìŒì› URL * <span style="color:var(--t2);font-weight:400">(Suno, Udio ë“± ìƒì„±ëœ í˜ì´ì§€)</span></label>
      <input type="text" class="fi" id="auth-req-source-url" placeholder="https://suno.com/song/...">
    </div>
    <div class="fg">
      <label class="fl">ë‚´ í”„ë¡œí•„ URL <span style="color:var(--t2);font-weight:400">(ê³„ì • ì†Œìœ  í™•ì¸)</span></label>
      <input type="text" class="fi" id="auth-req-profile-url" placeholder="https://suno.com/@username">
    </div>

    <!-- STEP 1: ìƒì„± í™”ë©´ ìº¡ì²˜ (ë‚ ì§œ+ì‹œê°„ í•„ìˆ˜) -->
    <div style="font-size:12px;font-weight:700;margin:14px 0 8px;display:flex;align-items:center;gap:6px">
      <div style="width:18px;height:18px;border-radius:50%;background:var(--ac);color:#060610;font-size:10px;font-weight:800;display:flex;align-items:center;justify-content:center">1</div>
      ìƒì„± í™”ë©´ ìº¡ì²˜ * <span style="color:var(--t2);font-weight:400;font-size:11px">ë‚ ì§œ Â· ì‹œê°„ Â· ê³„ì •ëª…ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤</span>
    </div>
    <div id="auth-req-capture-zone" style="border:2px dashed var(--bd);border-radius:var(--rm);padding:16px;text-align:center;cursor:pointer;margin-bottom:14px;transition:var(--tr)"
      onclick="document.getElementById('auth-req-capture-input').click()"
      ondragover="event.preventDefault();this.style.borderColor='var(--ac)'"
      ondragleave="this.style.borderColor='var(--bd)'">
      <div style="font-size:28px;margin-bottom:6px">ğŸ“¸</div>
      <div style="font-size:12px;font-weight:700">AI í”Œë«í¼ ìƒì„± í™”ë©´ ìŠ¤í¬ë¦°ìƒ·</div>
      <div style="font-size:11px;color:var(--t2);margin-top:3px">ê³¡ ì œëª© + ìƒì„± ë‚ ì§œ/ì‹œê°„ + ê³„ì •ëª… í¬í•¨</div>
      <input type="file" id="auth-req-capture-input" accept="image/*" style="display:none"
        onchange="$('auth-req-capture-name').textContent='âœ… '+this.files[0].name;$('auth-req-capture-zone').style.borderColor='var(--ac)'">
      <div id="auth-req-capture-name" style="font-size:11px;color:var(--ac);margin-top:6px"></div>
    </div>

    <!-- STEP 2: êµ¬ë… ê²°ì œ ì¦ë¹™ -->
    <div style="font-size:12px;font-weight:700;margin-bottom:8px;display:flex;align-items:center;gap:6px">
      <div style="width:18px;height:18px;border-radius:50%;background:var(--ac);color:#060610;font-size:10px;font-weight:800;display:flex;align-items:center;justify-content:center">2</div>
      êµ¬ë… ê²°ì œ ì¦ë¹™ * <span style="color:var(--t2);font-weight:400;font-size:11px">ìŒì› ìƒì„± ë‹¹ì‹œ ìœ ë£Œ êµ¬ë… ì¦ëª…</span>
    </div>
    <div style="background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.15);border-radius:var(--rs);padding:9px 12px;font-size:11px;color:var(--t2);margin-bottom:10px;line-height:1.6">
      ğŸ’¡ ì§€ê¸ˆ êµ¬ë… ì¤‘ì´ ì•„ë‹ˆì–´ë„ ë©ë‹ˆë‹¤ â€” <b style="color:var(--t1)">ìŒì› ìƒì„± ë‹¹ì‹œ</b> ìœ ë£Œ êµ¬ë…ì´ì—ˆìŒì„ ì¦ëª…í•˜ë©´ ë©ë‹ˆë‹¤
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:14px">
      <div style="border:2px dashed var(--bd);border-radius:var(--rm);padding:12px;text-align:center;cursor:pointer;transition:var(--tr)"
        onclick="document.getElementById('auth-req-payment-input').click()"
        ondragover="event.preventDefault();this.style.borderColor='var(--ac)'"
        ondragleave="this.style.borderColor='var(--bd)'">
        <div style="font-size:22px;margin-bottom:4px">ğŸ§¾</div>
        <div style="font-size:11px;font-weight:700">ì˜ìˆ˜ì¦ / ê²°ì œ ìº¡ì²˜</div>
        <div style="font-size:10px;color:var(--t2);margin-top:2px">ì´ë¯¸ì§€ Â· PDF</div>
        <input type="file" id="auth-req-payment-input" accept="image/*,.pdf" style="display:none"
          onchange="$('auth-req-payment-name').textContent='âœ… '+this.files[0].name;this.parentElement.style.borderColor='var(--ac)'">
        <div id="auth-req-payment-name" style="font-size:10px;color:var(--ac);margin-top:4px"></div>
      </div>
      <div style="border:2px dashed var(--bd);border-radius:var(--rm);padding:12px;text-align:center">
        <div style="font-size:22px;margin-bottom:4px">ğŸ“§</div>
        <div style="font-size:11px;font-weight:700;margin-bottom:6px">ê²°ì œ ì´ë©”ì¼</div>
        <input type="email" class="fi" id="auth-req-email" style="font-size:11px;padding:6px 10px" placeholder="ê²°ì œ ì´ë©”ì¼ ì£¼ì†Œ">
      </div>
    </div>

    <!-- STEP 3: ê¸°íƒ€ ì‚¬ìœ  (ì„ íƒ) -->
    <div class="fg" style="margin-bottom:16px">
      <label class="fl" style="font-size:12px">ì¶”ê°€ ì„¤ëª… <span style="color:var(--t2);font-weight:400">(ì„ íƒ)</span></label>
      <textarea class="fi" id="auth-req-reason" rows="2" style="resize:none;font-size:12px" placeholder="Spotify ì•„í‹°ìŠ¤íŠ¸ í˜ì´ì§€ URL, ì°½ì‘ ë°°ê²½ ë“± ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ì‹¬ì‚¬ì— ë„ì›€ì´ ë©ë‹ˆë‹¤"></textarea>
    </div>

    <button class="btn btn-primary" style="width:100%" onclick="submitAuthRequest()">
      ğŸ” ì¸ì¦ ì‹ ì²­í•˜ê¸°
    </button>
  </div>
</div>

<!-- ========== ì´ì˜ì œê¸° ëª¨ë‹¬ ========== -->
<div class="modal-overlay hidden" id="dispute-modal">
  <div class="modal" style="max-width:480px">
    <!-- í—¤ë” -->
    <div class="fb mb-4">
      <div>
        <div style="font-weight:800;font-size:18px">âš ï¸ ì´ì˜ì œê¸°</div>
        <div style="font-size:12px;color:var(--t2);margin-top:2px" id="dispute-track-name">íŠ¸ë™ëª…</div>
      </div>
      <button class="btn btn-ghost btn-sm" onclick="closeModal('dispute-modal')">âœ•</button>
    </div>

    <!-- ê²½ê³  ì•ˆë‚´ -->
    <div style="background:rgba(255,79,79,.08);border:1px solid rgba(255,79,79,.25);border-radius:var(--rm);padding:14px;margin-bottom:16px">
      <div style="font-weight:800;font-size:13px;color:#ff6b6b;margin-bottom:8px">âš ï¸ ì´ì˜ì œê¸° ì „ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”</div>
      <div style="font-size:12px;color:var(--t2);line-height:1.8">
        â€¢ ì´ì˜ì œê¸° ì¦‰ì‹œ <b style="color:var(--t1)">ë‚´ TL ì‚¬ìš©ì´ ì „ë©´ ì •ì§€</b>ë©ë‹ˆë‹¤<br>
        â€¢ í•´ë‹¹ íŠ¸ë™ì˜ <b style="color:var(--t1)">ì°½ì‘ìÂ·ì €ì‘ê¶Œì ìˆ˜ìµ ë¶„ë°°ê°€ ì¤‘ì§€</b>ë©ë‹ˆë‹¤<br>
        â€¢ AI ë¶„ì„ + TimeLink ì‹¬ì‚¬íŒ€ì´ <b style="color:var(--t1)">30ì¼ ì´ë‚´</b> ì²˜ë¦¬í•©ë‹ˆë‹¤<br>
        â€¢ í—ˆìœ„ ì´ì˜ì œê¸° íŒì • ì‹œ <b style="color:#ff4f4f">POC ì§€ìˆ˜ -2.0 ê°ì‚°</b> ë° íŒ¨ë„í‹° ë¶€ê³¼ë©ë‹ˆë‹¤<br>
        â€¢ <b style="color:#ff4f4f">3íšŒ í—ˆìœ„ ì´ì˜ì œê¸° = ê³„ì • ì˜êµ¬ ëª°ìˆ˜</b> â€” ë³´ìœ  TLÂ·TLC ì „ì•¡ ëª°ìˆ˜, ì¬ê°€ì… ë¶ˆê°€
      </div>
      <!-- í˜„ì¬ ìŠ¤íŠ¸ë¼ì´í¬ í‘œì‹œ -->
      <div id="strike-indicator" style="display:flex;align-items:center;gap:8px;margin-top:10px;padding:8px 10px;background:rgba(0,0,0,.2);border-radius:var(--rs)">
        <span style="font-size:11px;color:var(--t2)">í—ˆìœ„ ì´ì˜ì œê¸° ëˆ„ì :</span>
        <div style="display:flex;gap:4px" id="strike-dots"></div>
        <span style="font-size:11px;font-weight:700" id="strike-label">0 / 3</span>
      </div>
    </div>

    <!-- ì´ì˜ì œê¸° ë¶„ë¥˜ -->
    <div style="margin-bottom:14px">
      <div style="font-size:12px;font-weight:700;margin-bottom:8px">ì´ì˜ì œê¸° ìœ í˜• *</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px" id="dispute-category-grid">
        <div class="dispute-cat-btn" data-cat="copyright" onclick="selectDisputeCat(this,'copyright')"
          style="padding:10px;border:1.5px solid var(--bd);border-radius:var(--rm);cursor:pointer;transition:var(--tr)">
          <div style="font-size:18px;margin-bottom:4px">Â©ï¸</div>
          <div style="font-size:12px;font-weight:700">ì €ì‘ê¶Œ ì¹¨í•´</div>
          <div style="font-size:10px;color:var(--t2);margin-top:2px">ë‚´ ì°½ì‘ë¬¼ ë¬´ë‹¨ ì‚¬ìš©</div>
        </div>
        <div class="dispute-cat-btn" data-cat="fake" onclick="selectDisputeCat(this,'fake')"
          style="padding:10px;border:1.5px solid var(--bd);border-radius:var(--rm);cursor:pointer;transition:var(--tr)">
          <div style="font-size:18px;margin-bottom:4px">ğŸš«</div>
          <div style="font-size:12px;font-weight:700">í—ˆìœ„ ì¸ì¦</div>
          <div style="font-size:10px;color:var(--t2);margin-top:2px">êµ¬ë…/ì €ì‘ê¶Œ ìœ„ì¡°</div>
        </div>
        <div class="dispute-cat-btn" data-cat="abuse" onclick="selectDisputeCat(this,'abuse')"
          style="padding:10px;border:1.5px solid var(--bd);border-radius:var(--rm);cursor:pointer;transition:var(--tr)">
          <div style="font-size:18px;margin-bottom:4px">ğŸ¤–</div>
          <div style="font-size:12px;font-weight:700">ì–´ë·°ì§• ì˜ì‹¬</div>
          <div style="font-size:10px;color:var(--t2);margin-top:2px">ë¹„ì •ìƒ Pulse ì¡°ì‘</div>
        </div>
        <div class="dispute-cat-btn" data-cat="other" onclick="selectDisputeCat(this,'other')"
          style="padding:10px;border:1.5px solid var(--bd);border-radius:var(--rm);cursor:pointer;transition:var(--tr)">
          <div style="font-size:18px;margin-bottom:4px">ğŸ“‹</div>
          <div style="font-size:12px;font-weight:700">ê¸°íƒ€</div>
          <div style="font-size:10px;color:var(--t2);margin-top:2px">ìœ„ í•­ëª© ì™¸ ì‚¬ìœ </div>
        </div>
      </div>
      <input type="hidden" id="dispute-category" value="">
    </div>

    <!-- ì´ì˜ì œê¸° ì‚¬ìœ  -->
    <div style="margin-bottom:14px">
      <div style="font-size:12px;font-weight:700;margin-bottom:6px">ìƒì„¸ ì‚¬ìœ  * <span style="color:var(--t2);font-weight:400">(50ì ì´ìƒ)</span></div>
      <textarea id="dispute-reason" class="fi" rows="4"
        style="resize:none;line-height:1.6"
        placeholder="ì´ì˜ì œê¸° ì‚¬ìœ ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”. ì›ë³¸ ì°½ì‘ ì¦ê±°, ì¼ì, ê´€ë ¨ URL ë“±ì„ í¬í•¨í•˜ë©´ ì‹¬ì‚¬ì— ë„ì›€ì´ ë©ë‹ˆë‹¤."></textarea>
      <div style="text-align:right;font-size:11px;color:var(--t2);margin-top:4px" id="dispute-char-count">0 / 500</div>
    </div>

    <!-- ì¦ê±° ìë£Œ -->
    <div style="margin-bottom:16px">
      <div style="font-size:12px;font-weight:700;margin-bottom:6px">ì¦ê±° ìë£Œ <span style="color:var(--t2);font-weight:400">(ì„ íƒ â€” ì²¨ë¶€ ì‹œ ì‹¬ì‚¬ ì†ë„ í–¥ìƒ)</span></div>
      <div id="dispute-evidence-zone"
        style="border:2px dashed var(--bd);border-radius:var(--rm);padding:16px;text-align:center;cursor:pointer;transition:var(--tr)"
        onclick="document.getElementById('dispute-evidence-input').click()"
        ondragover="event.preventDefault();this.style.borderColor='#ff6b6b'"
        ondragleave="this.style.borderColor='var(--bd)'">
        <div style="font-size:24px;margin-bottom:6px">ğŸ“</div>
        <div style="font-size:12px;font-weight:700">ì¦ê±° íŒŒì¼ ì²¨ë¶€</div>
        <div style="font-size:11px;color:var(--t2);margin-top:3px">ì´ë¯¸ì§€, PDF, ë¬¸ì„œ â€” ìµœëŒ€ 5ê°œ</div>
        <input type="file" id="dispute-evidence-input" accept="image/*,.pdf,.doc,.docx" multiple style="display:none" onchange="onDisputeEvidenceSelect(this.files)">
        <div id="dispute-evidence-list" style="margin-top:8px;font-size:11px;color:var(--ac);text-align:left"></div>
      </div>
    </div>

    <!-- ìµœì¢… í™•ì¸ ì²´í¬ë°•ìŠ¤ -->
    <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:16px;padding:12px;background:rgba(255,79,79,.05);border-radius:var(--rs)">
      <input type="checkbox" id="dispute-confirm-check" style="margin-top:2px;cursor:pointer;width:16px;height:16px;accent-color:#ff6b6b">
      <label for="dispute-confirm-check" style="font-size:12px;color:var(--t2);cursor:pointer;line-height:1.6">
        ìœ„ ë‚´ìš©ì„ ëª¨ë‘ ì´í•´í–ˆìœ¼ë©°, ì´ì˜ì œê¸° ì¦‰ì‹œ <b style="color:var(--t1)">ë‚´ TL ì‚¬ìš©ì´ ì •ì§€</b>ë˜ê³  í•´ë‹¹ íŠ¸ë™ì˜ <b style="color:var(--t1)">ìˆ˜ìµ ë¶„ë°°ê°€ ì¤‘ì§€</b>ë¨ì„ ë™ì˜í•©ë‹ˆë‹¤. í—ˆìœ„ ì´ì˜ì œê¸° ì‹œ íŒ¨ë„í‹°ë¥¼ ê°ìˆ˜í•©ë‹ˆë‹¤.
      </label>
    </div>

    <button class="btn w-full" id="dispute-submit-btn"
      style="background:rgba(255,79,79,.15);color:#ff6b6b;border:1.5px solid rgba(255,79,79,.3);font-weight:800"
      onclick="submitDispute()">
      âš ï¸ ì´ì˜ì œê¸° ì ‘ìˆ˜í•˜ê¸°
    </button>
  </div>
</div>

<div id="toast-box"></div>
<!-- NAVBAR -->
<nav class="navbar">
  <a class="logo" href="index.html">
    <div class="logo-icon">âš¡</div>
    <span class="logo-text">Time<span>Link</span></span>
  </a>
  <!-- ë¹„ë¡œê·¸ì¸ -->
  <div id="nav-guest" class="nav-right">
    <a href="login.html" class="btn btn-ghost btn-sm">ë¡œê·¸ì¸</a>
    <a href="signup.html" class="btn btn-primary btn-sm">Get Started â†’</a>
  </div>
  <!-- ë¡œê·¸ì¸ í›„ -->
  <div id="nav-auth" class="nav-right hidden">
    <div class="bal-row">
      <div class="bal-col"><span class="bal-lbl">TL</span><span class="bal-val" id="nb-tl">0</span></div>
      <div class="bal-sep"></div>
      <div class="bal-col"><span class="bal-lbl">ğŸ”’</span><span class="bal-val locked" id="nb-lo">0</span></div>
      <div class="bal-sep"></div>
      <div class="bal-col"><span class="bal-lbl">TLC</span><span class="bal-val tlc" id="nb-tlc">0.0000</span></div>
    </div>
    <span id="car-ind" class="car-ind off">ğŸš— Off</span>
    <div class="avatar-wrap">
      <div class="avatar-btn" id="nav-avatar" onclick="toggleNavDD()">D</div>
      <div class="nav-dropdown hidden" id="nav-dd">
        <div class="dd-user">
          <div class="dd-username" id="dd-name">Demo</div>
          <div class="dd-email" id="dd-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9df9f8f0f2dde9f4f0f8f1f4f3f6b3f9f4faf4e9fcf1">[email&#160;protected]</a></div>
        </div>
        <div class="dd-item" onclick="openModal('recharge-modal')">ğŸ’° TL ì¶©ì „</div>
        <div class="dd-item" onclick="toast('ì„¤ì • ì¤€ë¹„ ì¤‘','i')">âš™ï¸ ì„¤ì •</div>
        <div class="dd-item danger" onclick="doLogout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</div>
      </div>
    </div>
  </div>
</nav>

<!-- TABS -->
<div class="tabs-bar">
<div class="tabs-inner">
  <button class="tab-btn active" data-tab="shareplace" onclick="switchTab('shareplace')">ğŸ›ï¸ SharePlace</button>
  <button class="tab-btn" data-tab="dashboard" onclick="switchTab('dashboard')">ğŸ“Š Dashboard</button>
  <button class="tab-btn" data-tab="library"   onclick="switchTab('library')">ğŸ” Library</button>
  <button class="tab-btn" data-tab="create"    onclick="switchTab('create')">ğŸ“¤ Create</button>
  <button class="tab-btn" data-tab="player"    onclick="switchTab('player')">ğŸ¬ Player</button>
  <button class="tab-btn" data-tab="radio"     onclick="switchTab('radio')">â˜• ì¹´í˜ë°©ì†¡</button>
  <button class="tab-btn" data-tab="car"       onclick="switchTab('car')">ğŸš— Car</button>
  <button class="tab-btn" data-tab="ads"       onclick="switchTab('ads')">ğŸ“£ ê´‘ê³ </button>
  <button class="tab-btn" data-tab="wallet"    onclick="switchTab('wallet')">ğŸ‘› ì§€ê°‘</button>
</div><!-- tabs-inner -->
</div>

<div class="page">
<!-- ========== DASHBOARD ========== -->
<div id="tab-dashboard" class="tab-pane">
  <div class="np-card mb-6">
    <div class="fb">
      <span class="badge badge-live">NOW PLAYING</span>
      <span class="mono mu" style="font-size:12px">âš¡ <span id="np-pulse">0</span> Pulse</span>
    </div>
    <div style="font-size:17px;font-weight:800;margin:8px 0 2px" id="np-title">â€” ì¬ìƒ ì¤‘ì¸ íŠ¸ë™ ì—†ìŒ</div>
    <div style="font-size:13px;color:var(--t2)" id="np-artist">Libraryì—ì„œ íŠ¸ë™ì„ ì„ íƒí•˜ê±°ë‚˜ Playerì—ì„œ ì§ì ‘ ì¬ìƒí•˜ì„¸ìš”</div>
    <div class="np-seek" id="np-seek" onclick="seekAudio(event)"><div class="np-seek-fill" id="np-fill"></div></div>
    <div class="np-times"><span id="np-cur">0:00</span><span id="np-dur">0:00</span></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
      <span class="badge badge-ac">TL/s: <span id="np-cost">1.0</span></span>
      <span class="badge badge-pu">ë°°ìœ¨: <span id="np-mult">1.0x</span></span>
      <span class="badge badge-ca hidden" id="np-file-tl">íŒŒì¼ TL: â€”</span>
    </div>
  </div>

  <div class="stats-grid mb-6">
    <div class="stat-card">
      <div class="stat-lbl">TL ì”ê³ </div>
      <div class="stat-val ac" id="ds-tl">10,000</div>
      <button class="btn btn-outline btn-sm mt-2" onclick="openModal('recharge-modal')">ì¶©ì „í•˜ê¸°</button>
    </div>
    <div class="stat-card" style="--ac:var(--ca)">
      <div class="stat-lbl">ğŸ”’ Locked TL</div>
      <div class="stat-val lo" id="ds-lo">0</div>
      <div style="font-size:12px;color:var(--t2);margin-top:4px">30ì´ˆë§ˆë‹¤ í•´ì œ</div>
    </div>
    <div class="stat-card" style="--ac:var(--pu)">
      <div class="stat-lbl">TLC ë§ˆì´ë‹</div>
      <div class="stat-val tl" id="ds-tlc">0.0000</div>
      <button class="btn btn-sm mt-2" style="background:var(--pu-d);color:var(--pu);border:1px solid rgba(123,97,255,.3);border-radius:var(--rf);font-family:'Syne',sans-serif;font-weight:700;cursor:pointer;padding:6px 14px;font-size:12px" onclick="claimTLC()">ìˆ˜ë ¹</button>
    </div>
    <div class="stat-card">
      <div class="stat-lbl">ì´ ì²­ì·¨ì‹œê°„</div>
      <div class="stat-val" id="ds-time">0:00</div>
    </div>
  </div>

  <div class="two-col mb-6">
    <div class="card tc">
      <div style="font-weight:800;font-size:15px;margin-bottom:16px">ğŸ”® ì‹ ë¢° ì ìˆ˜</div>
      <div class="trust-svg-wrap">
        <svg width="100" height="100" viewBox="0 0 100 100">
          <circle class="trust-track" cx="50" cy="50" r="42"/>
          <circle class="trust-fill" id="trust-fill-el" cx="50" cy="50" r="42"/>
        </svg>
        <div class="trust-center"><span class="trust-num" id="trust-num">1.00</span><span class="trust-tag">Trust</span></div>
      </div>
      <div style="margin-top:14px;display:flex;flex-direction:column;gap:6px">
        <div class="fb" style="font-size:13px"><span class="mu">LVS</span><span class="mono ac" id="lvs-val">1.00</span></div>
        <div class="fb" style="font-size:13px"><span class="mu">ìµœëŒ€</span><span class="mono">1.20</span></div>
      </div>
    </div>
    <div class="card">
      <div style="font-weight:800;font-size:15px;margin-bottom:14px">âš¡ í˜„ì¬ ë°°ìœ¨</div>
      <div class="tc mb-4">
        <div class="mono" style="font-size:52px;font-weight:800;color:var(--ac);line-height:1" id="rate-big">1.0x</div>
        <div style="font-size:12px;color:var(--t2);margin-top:4px">Trust Ã— LVS Ã— Car</div>
      </div>
      <div class="fb" style="padding:10px 0;border-top:1px solid var(--bd)">
        <div><div style="font-weight:700;font-size:14px">ğŸš— Car Mode</div><div style="font-size:12px;color:var(--t2)">2ë°° ë³´ìƒ</div></div>
        <label class="toggle"><input type="checkbox" id="car-chk" onchange="toggleCar()"><div class="tgl-track"></div><div class="tgl-thumb">ğŸš—</div></label>
      </div>
      <div class="fb" style="padding:10px 0;border-top:1px solid var(--bd);margin-top:8px">
        <div><div style="font-weight:700;font-size:13px">ìë™ ì¶©ì „</div><div style="font-size:12px;color:var(--t2)">TL &lt; 2,000</div></div>
        <label class="toggle"><input type="checkbox" id="auto-chk" checked onchange="S.autoRecharge=this.checked"><div class="tgl-track"></div><div class="tgl-thumb" style="font-size:11px">âš¡</div></label>
      </div>
    </div>
  </div>

  <div class="card mb-6">
    <div style="font-weight:800;font-size:15px;margin-bottom:8px">ğŸ”“ Locked TL í•´ì œ</div>
    <div class="fb" style="font-size:13px;margin-bottom:8px">
      <span>Locked: <span class="mono ca" id="lo-display">0</span> TL</span>
      <span>í•´ì œê¹Œì§€ <span class="mono" id="lo-timer">30s</span></span>
    </div>
    <div class="locked-track"><div class="locked-fill" id="lo-fill"></div></div>
  </div>

  <div class="sec-hd"><div class="sec-title">âš¡ Hot Pulse</div><button class="btn btn-ghost btn-sm" onclick="renderHotPulse()">ìƒˆë¡œê³ ì¹¨</button></div>
  <div id="hot-pulse" style="display:flex;flex-direction:column;gap:8px"></div>


</div><!-- tab-dashboard -->

<!-- ========== CREATE ========== -->
<div id="tab-create" class="tab-pane">

  <!-- AI í”Œë«í¼ ì„ íƒ -->
  <div class="card card-ai mb-4">
    <div class="fb mb-4">
      <div>
        <div class="sec-title">ğŸ¤– AI ìŒì› ë“±ë¡</div>
        <div style="font-size:13px;color:var(--t2);margin-top:3px">ìœ ë£Œ êµ¬ë… AI í”Œë«í¼ì˜ ìƒì„± ìŒì›ì„ TL íŒŒì¼ë¡œ ë³€í™˜í•˜ì„¸ìš”</div>
      </div>
      <span class="badge badge-ai">ìœ ë£Œ íšŒì› ì „ìš©</span>
    </div>

    <!-- AI í”Œë«í¼ ì„ íƒ ê·¸ë¦¬ë“œ -->
    <div style="font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px">í”Œë«í¼ ì„ íƒ</div>
    <div class="ai-grid" id="ai-platform-grid">
      <div class="ai-card sel" data-ai="suno" onclick="selectAI('suno')">
        <div class="ai-logo">ğŸµ</div><div class="ai-name">Suno</div><div class="ai-type">ìŒì•…</div>
      </div>
      <div class="ai-card" data-ai="udio" onclick="selectAI('udio')">
        <div class="ai-logo">ğŸ¶</div><div class="ai-name">Udio</div><div class="ai-type">ìŒì•…</div>
      </div>
      <div class="ai-card" data-ai="mubert" onclick="selectAI('mubert')">
        <div class="ai-logo">ğŸŒŠ</div><div class="ai-name">Mubert</div><div class="ai-type">ìŒì•…</div>
      </div>
      <div class="ai-card" data-ai="aiva" onclick="selectAI('aiva')">
        <div class="ai-logo">ğŸ»</div><div class="ai-name">AIVA</div><div class="ai-type">í´ë˜ì‹</div>
      </div>
      <div class="ai-card" data-ai="soundraw" onclick="selectAI('soundraw')">
        <div class="ai-logo">ğŸ¸</div><div class="ai-name">Soundraw</div><div class="ai-type">ìŒì•…</div>
      </div>
      <div class="ai-card" data-ai="boomy" onclick="selectAI('boomy')">
        <div class="ai-logo">ğŸ¥</div><div class="ai-name">Boomy</div><div class="ai-type">ìŒì•…</div>
      </div>
      <div class="ai-card" data-ai="elevenlabs" onclick="selectAI('elevenlabs')">
        <div class="ai-logo">ğŸ—£ï¸</div><div class="ai-name">ElevenLabs</div><div class="ai-type">ë³´ì´ìŠ¤</div>
      </div>
      <div class="ai-card" data-ai="beatoven" onclick="selectAI('beatoven')">
        <div class="ai-logo">ğŸ¹</div><div class="ai-name">Beatoven</div><div class="ai-type">ìŒì•…</div>
      </div>
    </div>

    <!-- ìœ ë£Œ êµ¬ë… ì¸ì¦ ì„¹ì…˜ -->
    <div style="background:rgba(255,123,0,.06);border:1px solid rgba(255,123,0,.2);border-radius:var(--rm);padding:18px;margin-bottom:16px">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px">
        <div style="font-weight:800;font-size:15px">ğŸ“‹ êµ¬ë… ì¸ì¦ â€” <span id="ai-platform-name" style="color:var(--su)">Suno</span></div>
        <span class="badge" style="background:rgba(123,97,255,.15);color:var(--pu);font-size:10px">AI OCR ìë™ íŒë…</span>
      </div>
      <div style="font-size:12px;color:var(--t2);margin-bottom:16px;line-height:1.6">
        ìŒì› ìƒì„± <b style="color:var(--t1)">ë‹¹ì‹œ</b> ìœ ë£Œ êµ¬ë…ì´ì—ˆìŒì„ ì¦ëª…í•˜ë©´ ìˆ˜ìµ ê°€ëŠ¥ â€” ì§€ê¸ˆ êµ¬ë… ì—¬ë¶€ì™€ ë¬´ê´€í•©ë‹ˆë‹¤
      </div>

      <!-- STEP 1: ìŒì› URL + í”„ë¡œí•„ URL -->
      <div style="display:flex;gap:6px;align-items:center;margin-bottom:8px">
        <div style="width:20px;height:20px;border-radius:50%;background:var(--su);color:#fff;font-size:11px;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0">1</div>
        <div style="font-size:12px;font-weight:700">ìŒì› & í”„ë¡œí•„ URL</div>
      </div>
      <div class="fg">
        <label class="fl">ìƒì„±ëœ ìŒì› URL *</label>
        <input type="text" id="ai-url" class="fi ai-focus" placeholder="https://suno.com/song/xxxxxxxx">
        <div style="font-size:11px;color:var(--t2);margin-top:4px">ìŒì› í˜ì´ì§€ URL â€” ìƒì„± ë‚ ì§œê°€ ìë™ ì¶”ì¶œë©ë‹ˆë‹¤</div>
      </div>
      <div class="fg">
        <label class="fl">ë‚´ í”„ë¡œí•„ URL *</label>
        <input type="text" id="ai-profile-url" class="fi ai-focus" placeholder="https://suno.com/@myprofile">
        <div style="font-size:11px;color:var(--t2);margin-top:4px">ë‚´ ê³„ì • ì†Œìœ ìì„ì„ í™•ì¸í•©ë‹ˆë‹¤</div>
      </div>

      <!-- STEP 2: ìŒì› ìƒì„± í™”ë©´ ìº¡ì²˜ -->
      <div style="display:flex;gap:6px;align-items:center;margin:14px 0 8px">
        <div style="width:20px;height:20px;border-radius:50%;background:var(--su);color:#fff;font-size:11px;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0">2</div>
        <div style="font-size:12px;font-weight:700">ìŒì› ìƒì„± í™”ë©´ ìº¡ì²˜ *</div>
      </div>
      <div id="song-capture-zone" style="border:2px dashed var(--bd);border-radius:var(--rm);padding:20px;text-align:center;cursor:pointer;transition:var(--tr);margin-bottom:14px"
        onclick="document.getElementById('song-capture-input').click()"
        ondragover="event.preventDefault();this.style.borderColor='var(--su)';this.style.background='rgba(255,123,0,.05)'"
        ondragleave="this.style.borderColor='var(--bd)';this.style.background=''"
        ondrop="onSongCaptureSelect(event.dataTransfer.files[0]);event.preventDefault();this.style.borderColor='var(--bd)';this.style.background=''">
        <div style="font-size:32px;margin-bottom:8px" id="song-capture-icon">ğŸ“¸</div>
        <div style="font-weight:700;font-size:13px" id="song-capture-title">Suno ìŒì› í˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ·</div>
        <div style="font-size:11px;color:var(--t2);margin-top:4px" id="song-capture-sub">ê³¡ ì œëª© Â· ìƒì„± ë‚ ì§œ Â· ê³„ì •ëª…ì´ ë³´ì´ëŠ” í™”ë©´</div>
        <input type="file" id="song-capture-input" accept="image/*" style="display:none" onchange="onSongCaptureSelect(this.files[0])">
        <div id="song-capture-preview" style="margin-top:10px;display:none">
          <img id="song-capture-img" style="max-width:100%;max-height:160px;border-radius:var(--rs);border:1px solid var(--bd)" src="">
          <div id="ocr-status" style="font-size:11px;color:var(--pu);margin-top:6px;display:flex;align-items:center;gap:4px;justify-content:center">
            <span>ğŸ” AI OCR ë¶„ì„ ì¤€ë¹„ë¨</span>
          </div>
        </div>
      </div>

      <!-- STEP 3: êµ¬ë… ê²°ì œ ì¦ë¹™ -->
      <div style="display:flex;gap:6px;align-items:center;margin-bottom:8px">
        <div style="width:20px;height:20px;border-radius:50%;background:var(--su);color:#fff;font-size:11px;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0">3</div>
        <div style="font-size:12px;font-weight:700">êµ¬ë… ê²°ì œ ì¦ë¹™ <span style="color:var(--t2);font-weight:400">(1ê°œ ì´ìƒ)</span></div>
      </div>
      <div style="font-size:11px;color:var(--t2);margin-bottom:10px;line-height:1.6;padding:8px 10px;background:rgba(255,255,255,.03);border-radius:var(--rs)">
        ğŸ’¡ ìŒì› ìƒì„± ì›”ì˜ ê²°ì œ ì¦ë¹™ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤ â€” ì§€ê¸ˆ êµ¬ë… ì¤‘ì´ ì•„ë‹ˆì–´ë„ ìˆ˜ìµ ê°€ëŠ¥
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px">
        <!-- ê²°ì œ ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ -->
        <div id="proof-img-zone" style="border:2px dashed var(--bd);border-radius:var(--rm);padding:16px;text-align:center;cursor:pointer;transition:var(--tr)"
          onclick="document.getElementById('proof-img-input').click()"
          ondragover="event.preventDefault();this.style.borderColor='var(--su)'"
          ondragleave="this.style.borderColor='var(--bd)'"
          ondrop="onProofImgDrop(event)">
          <div style="font-size:26px;margin-bottom:6px">ğŸ§¾</div>
          <div style="font-size:12px;font-weight:700">ê²°ì œ ì˜ìˆ˜ì¦</div>
          <div style="font-size:11px;color:var(--t2);margin-top:2px">ì´ë¯¸ì§€ Â· PDF</div>
          <input type="file" id="proof-img-input" accept="image/*,.pdf" style="display:none" onchange="onProofImgSelect(this.files[0])">
          <div id="proof-img-name" style="font-size:11px;color:var(--ac);margin-top:6px"></div>
        </div>
        <!-- ì‹ ìš©ì¹´ë“œ / ì•± ê²°ì œ ìº¡ì²˜ -->
        <div id="proof-card-zone" style="border:2px dashed var(--bd);border-radius:var(--rm);padding:16px;text-align:center;cursor:pointer;transition:var(--tr)"
          onclick="document.getElementById('proof-card-input').click()"
          ondragover="event.preventDefault();this.style.borderColor='var(--su)'"
          ondragleave="this.style.borderColor='var(--bd)'">
          <div style="font-size:26px;margin-bottom:6px">ğŸ’³</div>
          <div style="font-size:12px;font-weight:700">ì¹´ë“œ / ì•± ê²°ì œ ìº¡ì²˜</div>
          <div style="font-size:11px;color:var(--t2);margin-top:2px">ê²°ì œ ë‚ ì§œ í¬í•¨</div>
          <input type="file" id="proof-card-input" accept="image/*" style="display:none" onchange="onProofCardSelect(this.files[0])">
          <div id="proof-card-name" style="font-size:11px;color:var(--ac);margin-top:6px"></div>
        </div>
        <!-- ì´ë©”ì¼ ì˜ìˆ˜ì¦ -->
        <div style="border:2px dashed var(--bd);border-radius:var(--rm);padding:16px;text-align:center">
          <div style="font-size:26px;margin-bottom:6px">ğŸ“§</div>
          <div style="font-size:12px;font-weight:700;margin-bottom:6px">ì´ë©”ì¼ ì˜ìˆ˜ì¦</div>
          <input type="email" id="google-receipt-email" class="fi ai-focus" style="font-size:12px;padding:7px 10px" placeholder="ê²°ì œ ì´ë©”ì¼">
          <div style="font-size:11px;color:var(--t2);margin-top:3px">Google Pay Â· ì´ë©”ì¼ í™•ì¸ìš©</div>
        </div>
        <!-- ê¸°íƒ€ ì¦ë¹™ -->
        <div id="proof-doc-zone" style="border:2px dashed var(--bd);border-radius:var(--rm);padding:16px;text-align:center;cursor:pointer;transition:var(--tr)"
          onclick="document.getElementById('proof-doc-input').click()">
          <div style="font-size:26px;margin-bottom:6px">ğŸ“„</div>
          <div style="font-size:12px;font-weight:700">ê¸°íƒ€ ì¦ë¹™</div>
          <div style="font-size:11px;color:var(--t2);margin-top:2px">êµ¬ë… í™•ì¸ ìº¡ì²˜ ë“±</div>
          <input type="file" id="proof-doc-input" accept="image/*,.pdf" style="display:none" onchange="onProofDocSelect(this.files[0])">
          <div id="proof-doc-name" style="font-size:11px;color:var(--ac);margin-top:6px"></div>
        </div>
      </div>

      <!-- OCR ë¶„ì„ ê²°ê³¼ -->
      <div id="ocr-result-box" style="display:none;border-radius:var(--rm);padding:14px;margin-bottom:14px">
        <div style="font-size:12px;font-weight:800;margin-bottom:10px">ğŸ” AI OCR ë¶„ì„ ê²°ê³¼</div>
        <div id="ocr-result-list" style="display:flex;flex-direction:column;gap:6px"></div>
      </div>

      <!-- êµ¬ë… ê¸°ê°„ (ìˆ˜ë™ ì…ë ¥ ë³´ì¡°) -->
      <div class="two-col" style="margin-bottom:4px">
        <div class="fg" style="margin-bottom:0">
          <label class="fl">í”Œëœ ì¢…ë¥˜</label>
          <select id="ai-plan" class="fi ai-focus">
            <option value="">ì„ íƒ</option>
            <option>Basic</option>
            <option>Pro</option>
            <option>Premier</option>
            <option>Professional</option>
            <option>Creator</option>
            <option>Business</option>
          </select>
        </div>
        <div class="fg" style="margin-bottom:0">
          <label class="fl">ìŒì› ìƒì„± ì›” (ìˆ˜ë™ í™•ì¸ìš©)</label>
          <input type="month" id="ai-month" class="fi ai-focus">
        </div>
      </div>
      <div style="font-size:11px;color:var(--t2);margin-top:6px">ğŸ“Œ ìº¡ì²˜ì—ì„œ ë‚ ì§œê°€ ìë™ ì¸ì‹ë˜ë©´ ìœ„ í•­ëª©ì€ ê²€ì¦ìš©ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤</div>
    </div>

    <!-- AI ìŒì› ë¯¸ë¦¬ë³´ê¸° -->
    <div id="ai-preview-box" class="hidden" style="background:rgba(0,0,0,.35);border-radius:var(--rm);padding:18px;margin-bottom:14px">
      <div style="display:flex;gap:16px;align-items:flex-start">
        <div style="width:80px;height:80px;flex-shrink:0;border-radius:var(--rm);background:linear-gradient(135deg,var(--su-d),var(--pu-d));display:flex;align-items:center;justify-content:center;font-size:32px" id="ai-prev-icon">ğŸµ</div>
        <div style="flex:1">
          <div style="font-size:17px;font-weight:800" id="ai-prev-title">â€”</div>
          <div style="font-size:13px;color:var(--t2);margin-top:3px" id="ai-prev-artist">â€”</div>
          <div style="display:flex;gap:14px;flex-wrap:wrap;margin-top:10px">
            <div><div style="font-size:10px;color:var(--t2);font-weight:700;text-transform:uppercase">ê¸¸ì´</div><div class="mono" style="font-size:13px;font-weight:700" id="ai-prev-dur">â€”</div></div>
            <div><div style="font-size:10px;color:var(--t2);font-weight:700;text-transform:uppercase">í”Œë«í¼</div><div class="mono" style="font-size:13px;font-weight:700;color:var(--su)" id="ai-prev-plat">â€”</div></div>
            <div><div style="font-size:10px;color:var(--t2);font-weight:700;text-transform:uppercase">ì „í™˜ ë³´ìƒ</div><div class="mono" style="font-size:13px;font-weight:700;color:var(--ac)">+1,000 TL</div></div>
          </div>
        </div>
      </div>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:14px">
        <button class="btn btn-ghost btn-sm" onclick="cancelAIPreview()">ì·¨ì†Œ</button>
        <button class="btn btn-ai btn-sm" onclick="convertAI()">âœ¨ TL íŒŒì¼ë¡œ ë³€í™˜</button>
      </div>
    </div>
    <div id="ai-error-box" class="hidden" style="background:rgba(255,79,79,.07);border:1px solid rgba(255,79,79,.25);border-radius:var(--rm);padding:12px;font-size:13px;color:var(--da);margin-bottom:12px"></div>
    <div id="ai-loading" class="hidden tc" style="padding:16px"><div class="spinner" style="margin:0 auto;color:var(--su)"></div><div style="font-size:13px;color:var(--t2);margin-top:8px">ğŸ” AI OCR íŒë… ì¤‘ â€” ìº¡ì²˜ ì´ë¯¸ì§€ ë¶„ì„, URL ë§¤ì¹­, ê²°ì œ ë‚ ì§œ ê²€ì¦...</div></div>
    <button class="btn btn-ai w-full" id="ai-verify-btn" onclick="aiVerify()">ğŸ¤– AI OCR ì¸ì¦ ë¶„ì„ ì‹œì‘ â†’ ìŒì› ê°€ì ¸ì˜¤ê¸°</button>
  </div>

  <!-- ì§ì ‘ ì—…ë¡œë“œ -->
  <div class="card">
    <div class="sec-title mb-4">ğŸ“¤ ì§ì ‘ ì—…ë¡œë“œ</div>
    <div class="two-col" style="margin-bottom:18px">
      <div id="type-audio" style="padding:14px;border-radius:var(--rm);border:2px solid var(--bd-a);background:var(--ac-d);cursor:pointer;text-align:center;transition:var(--tr)" onclick="selectType('audio')">
        <div style="font-size:26px">ğŸµ</div><div style="font-weight:700;margin-top:5px">TL3 Audio</div><div style="font-size:12px;color:var(--t2)">MP3, WAV, FLAC, OGG</div>
      </div>
      <div id="type-video" style="padding:14px;border-radius:var(--rm);border:2px solid var(--bd);background:var(--card);cursor:pointer;text-align:center;transition:var(--tr)" onclick="selectType('video')">
        <div style="font-size:26px">ğŸ¬</div><div style="font-weight:700;margin-top:5px">TL4 Video</div><div style="font-size:12px;color:var(--t2)">MP4, MOV, WebM</div>
      </div>
    </div>

    <div id="upload-zone" class="drop-zone" onclick="document.getElementById('file-input').click()"
      ondragover="event.preventDefault();this.classList.add('over')" ondragleave="this.classList.remove('over')" ondrop="onDrop(event)">
      <div class="drop-zone-icon">ğŸ“‚</div>
      <div class="drop-zone-title">ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ íŒŒì¼ ì„ íƒ</div>
      <div class="drop-zone-sub">ì˜¤ë””ì˜¤ / ì˜ìƒ Â· ìµœëŒ€ 500MB</div>
      <input type="file" id="file-input" accept="audio/*,video/*" style="display:none" onchange="onFileSelect(this.files[0])">
    </div>
    <div id="file-prev" class="file-preview hidden">
      <span style="font-size:22px" id="fp-icon">ğŸµ</span>
      <div style="flex:1;min-width:0">
        <div class="fp-name" id="fp-name">â€”</div>
        <div style="font-size:12px;color:var(--t2)" id="fp-size">â€”</div>
      </div>
      <button class="btn btn-ghost btn-sm" onclick="removeFile()">âœ•</button>
    </div>

    <div style="display:flex;flex-direction:column;gap:12px;margin-top:14px">
      <div class="fg"><label class="fl">ì œëª© *</label><input type="text" id="up-title" class="fi" placeholder="íŠ¸ë™ / ì˜ìƒ ì œëª©"></div>
      <div class="two-col">
        <div class="fg" style="margin-bottom:0">
          <label class="fl">ë¯¸ë””ì–´ ìœ í˜•</label>
          <select id="up-cat" class="fi">
            <optgroup label="ğŸµ ìŒì•…">
              <option value="music-kpop">K-POP</option>
              <option value="music-hiphop">Hip-Hop</option>
              <option value="music-rnb">R&B</option>
              <option value="music-electronic">Electronic</option>
              <option value="music-rock">Rock</option>
              <option value="music-jazz">Jazz</option>
              <option value="music-classical">Classical</option>
              <option value="music-indie">Indie</option>
              <option value="music-chill">Chill</option>
              <option value="music-etc">ê¸°íƒ€ ìŒì•…</option>
            </optgroup>
            <optgroup label="ğŸ¬ ì˜ìƒ">
              <option value="video-mv">ë®¤ì§ë¹„ë””ì˜¤</option>
              <option value="video-travel">ì—¬í–‰ Â· ë¸Œì´ë¡œê·¸</option>
              <option value="video-movie">ì˜í™” Â· ë‹¨í¸</option>
              <option value="video-doc">ë‹¤íë©˜í„°ë¦¬</option>
              <option value="video-lecture-lang">ê°•ì˜ â€“ ì–¸ì–´</option>
              <option value="video-lecture-coding">ê°•ì˜ â€“ í”„ë¡œê·¸ë˜ë°</option>
              <option value="video-lecture-science">ê°•ì˜ â€“ ê³¼í•™</option>
              <option value="video-lecture-biz">ê°•ì˜ â€“ ê²½ì˜Â·ë¹„ì¦ˆë‹ˆìŠ¤</option>
              <option value="video-lecture-art">ê°•ì˜ â€“ ì˜ˆìˆ </option>
              <option value="video-lecture-etc">ê°•ì˜ â€“ ê¸°íƒ€</option>
              <option value="video-comedy">ì½”ë¯¸ë””</option>
              <option value="video-sports">ìŠ¤í¬ì¸  Â· í”¼íŠ¸ë‹ˆìŠ¤</option>
              <option value="video-food">ìŒì‹ Â· ì¿ í‚¹</option>
              <option value="video-beauty">ë·°í‹° Â· íŒ¨ì…˜</option>
              <option value="video-gaming">ê²Œì„</option>
              <option value="video-news">ë‰´ìŠ¤ Â· ì‹œì‚¬</option>
              <option value="video-kids">ì–´ë¦°ì´ Â· ì• ë‹ˆ</option>
              <option value="video-etc">ê¸°íƒ€ ì˜ìƒ</option>
            </optgroup>
          </select>
        </div>
        <div class="fg" style="margin-bottom:0">
          <label class="fl">ìˆ˜ìµ ëª¨ë¸</label>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
            <div id="m73" style="padding:10px;border-radius:var(--rm);background:var(--ac-d);border:2px solid var(--bd-a);cursor:pointer;text-align:center;transition:var(--tr)" onclick="selectModel('7-3')">
              <div style="font-weight:800;font-size:14px">7:3</div><div style="font-size:11px;color:var(--t2)">70% ì¦‰ì‹œ TL</div>
            </div>
            <div id="m55" style="padding:10px;border-radius:var(--rm);background:var(--card);border:2px solid var(--bd);cursor:pointer;text-align:center;transition:var(--tr)" onclick="selectModel('5-5')">
              <div style="font-weight:800;font-size:14px">5:5</div><div style="font-size:11px;color:var(--t2)">50% TLC ì±„êµ´</div>
            </div>
          </div>
        </div>
      </div>
      <!-- íŒŒì¼ì— TL ì¶©ì „ -->
      <div style="background:rgba(245,158,11,.07);border:1px solid rgba(245,158,11,.22);border-radius:var(--rm);padding:14px">
        <div style="font-size:13px;font-weight:700;margin-bottom:8px">ğŸ’° íŒŒì¼ì— TL ì¶©ì „ <span style="font-weight:400;font-size:12px;color:var(--t2)">(ì²­ì·¨ìê°€ ì´ TLì„ ì†Œëª¨í•˜ë©° ì¬ìƒ)</span></div>
        <div style="display:flex;gap:8px;align-items:center">
          <input type="number" id="up-file-tl" class="fi" style="flex:1;padding:10px 14px" value="1000" min="100" max="100000" placeholder="ì¶©ì „í•  TL">
          <div style="display:flex;gap:6px">
            <button class="btn btn-ghost btn-sm" onclick="document.getElementById('up-file-tl').value=500">500</button>
            <button class="btn btn-ghost btn-sm" onclick="document.getElementById('up-file-tl').value=1000">1K</button>
            <button class="btn btn-ghost btn-sm" onclick="document.getElementById('up-file-tl').value=5000">5K</button>
          </div>
        </div>
        <div style="font-size:12px;color:var(--t2);margin-top:6px">ë‚´ ì”ê³ : <span class="mono ac" id="up-my-tl">10,000</span> TL</div>
      </div>
    </div>
    <button id="up-btn" class="btn btn-primary w-full mt-4" disabled onclick="doUpload()">íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</button>
  </div>
</div>
<!-- ========== LIBRARY ========== -->
<div id="tab-library" class="tab-pane">

  <!-- ê²€ìƒ‰ ì—”ì§„ -->
  <div class="card mb-4">
    <div class="fb mb-3">
      <div class="sec-title">ğŸ” ê²€ìƒ‰</div>
      <div style="display:flex;gap:8px">
        <button class="btn btn-sm" id="eng-tl-btn" style="background:var(--ac);color:#060610;border-radius:var(--rf);font-family:'Syne',sans-serif;font-weight:700;cursor:pointer;padding:6px 14px;font-size:12px" onclick="setEngine('tl')">âš¡ TimeLink</button>
        <button class="btn btn-ghost btn-sm" id="eng-sp-btn" onclick="setEngine('spotify')">ğŸµ Spotify</button>
      </div>
    </div>

    <div class="search-bar">
      <input type="text" id="lib-search" class="search-input" placeholder="ì œëª©, ì•„í‹°ìŠ¤íŠ¸, ì¥ë¥´, ì–¸ì–´ë¡œ ê²€ìƒ‰..." onkeydown="if(event.key==='Enter')doSearch()">
      <button class="btn btn-primary" onclick="doSearch()">ê²€ìƒ‰</button>
    </div>

    <!-- TimeLink í•„í„° -->
    <div id="tl-filters">
      <!-- ë¯¸ë””ì–´ íƒ€ì… -->
      <div style="font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px">ë¯¸ë””ì–´</div>
      <div class="chips mb-4">
        <span class="chip active" data-mtype="all" onclick="setMtype('all')">ì „ì²´</span>
        <span class="chip" data-mtype="audio" onclick="setMtype('audio')">ğŸµ ìŒì•…</span>
        <span class="chip" data-mtype="video" onclick="setMtype('video')">ğŸ¬ ì˜ìƒ</span>
      </div>

      <!-- ìŒì•… ì¥ë¥´ (êµ­ê°€ë³„) â€” ìŒì•… ì„ íƒ ì‹œ í‘œì‹œ -->
      <div id="music-filters">
        <div style="font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px">êµ­ê°€ Â· ì¥ë¥´</div>
        <div class="chips mb-3">
          <span class="chip active" data-country="all" onclick="setCountry('all')">ğŸŒ ì „ì²´</span>
          <span class="chip" data-country="kr" onclick="setCountry('kr')">ğŸ‡°ğŸ‡· í•œêµ­</span>
          <span class="chip" data-country="jp" onclick="setCountry('jp')">ğŸ‡¯ğŸ‡µ ì¼ë³¸</span>
          <span class="chip" data-country="us" onclick="setCountry('us')">ğŸ‡ºğŸ‡¸ ë¯¸êµ­</span>
          <span class="chip" data-country="uk" onclick="setCountry('uk')">ğŸ‡¬ğŸ‡§ ì˜êµ­</span>
          <span class="chip" data-country="eu" onclick="setCountry('eu')">ğŸ‡ªğŸ‡º ìœ ëŸ½</span>
          <span class="chip" data-country="latin" onclick="setCountry('latin')">ğŸ’ƒ ë¼í‹´</span>
          <span class="chip" data-country="afr" onclick="setCountry('afr')">ğŸŒ ì•„í”„ë¦¬ì¹´</span>
          <span class="chip" data-country="world" onclick="setCountry('world')">ğŸŒ ê¸°íƒ€</span>
        </div>
        <div class="chips mb-3" id="genre-chips">
          <!-- ë™ì  ìƒì„± -->
        </div>

        <!-- ë‚ ì”¨ ê¸°ë°˜ AI ê²€ìƒ‰ -->
        <div style="background:rgba(123,97,255,.07);border:1px solid rgba(123,97,255,.2);border-radius:var(--rm);padding:14px;margin-bottom:10px">
          <div style="font-weight:800;font-size:13px;margin-bottom:10px">ğŸŒ¤ï¸ AI ë‚ ì”¨ ê¸°ë°˜ ìŒì•… ì¶”ì²œ <span class="badge badge-pu" style="font-size:10px;margin-left:4px">AI</span></div>
          <div class="weather-grid" id="weather-grid">
            <div class="wx-card" data-wx="sunny" onclick="setWeather('sunny')"><div style="font-size:22px">â˜€ï¸</div><div style="font-size:11px;font-weight:700;margin-top:4px">ë§‘ìŒ</div></div>
            <div class="wx-card" data-wx="rainy" onclick="setWeather('rainy')"><div style="font-size:22px">ğŸŒ§ï¸</div><div style="font-size:11px;font-weight:700;margin-top:4px">ë¹„</div></div>
            <div class="wx-card" data-wx="cloudy" onclick="setWeather('cloudy')"><div style="font-size:22px">â˜ï¸</div><div style="font-size:11px;font-weight:700;margin-top:4px">íë¦¼</div></div>
            <div class="wx-card" data-wx="snowy" onclick="setWeather('snowy')"><div style="font-size:22px">â„ï¸</div><div style="font-size:11px;font-weight:700;margin-top:4px">ëˆˆ</div></div>
            <div class="wx-card" data-wx="stormy" onclick="setWeather('stormy')"><div style="font-size:22px">â›ˆï¸</div><div style="font-size:11px;font-weight:700;margin-top:4px">í­í’</div></div>
            <div class="wx-card" data-wx="night" onclick="setWeather('night')"><div style="font-size:22px">ğŸŒ™</div><div style="font-size:11px;font-weight:700;margin-top:4px">ë§‘ì€ ë°¤</div></div>
            <div class="wx-card" data-wx="hot" onclick="setWeather('hot')"><div style="font-size:22px">ğŸŒ¡ï¸</div><div style="font-size:11px;font-weight:700;margin-top:4px">ë”ìœ„</div></div>
            <div class="wx-card" data-wx="cold" onclick="setWeather('cold')"><div style="font-size:22px">ğŸ¥¶</div><div style="font-size:11px;font-weight:700;margin-top:4px">ì¶”ìœ„</div></div>
          </div>
          <div id="wx-ai-result" class="hidden" style="margin-top:8px;font-size:13px;color:var(--pu);background:var(--pu-d);border-radius:var(--rs);padding:10px;line-height:1.5"></div>
        </div>
      </div>

      <!-- ì˜ìƒ í•„í„° -->
      <div id="video-filters" class="hidden">
        <div style="font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px">ì˜ìƒ ë¶„ë¥˜</div>
        <div class="chips mb-3">
          <span class="chip active" data-vcat="all" onclick="setVcat('all')">ì „ì²´</span>
          <span class="chip" data-vcat="mv" onclick="setVcat('mv')">ğŸ¬ ë®¤ì§ë¹„ë””ì˜¤</span>
          <span class="chip" data-vcat="travel" onclick="setVcat('travel')">âœˆï¸ ì—¬í–‰Â·ë¸Œì´ë¡œê·¸</span>
          <span class="chip" data-vcat="movie" onclick="setVcat('movie')">ğŸï¸ ì˜í™”Â·ë‹¨í¸</span>
          <span class="chip" data-vcat="doc" onclick="setVcat('doc')">ğŸ“½ï¸ ë‹¤í</span>
          <span class="chip" data-vcat="comedy" onclick="setVcat('comedy')">ğŸ˜‚ ì½”ë¯¸ë””</span>
          <span class="chip" data-vcat="sports" onclick="setVcat('sports')">âš½ ìŠ¤í¬ì¸ </span>
          <span class="chip" data-vcat="food" onclick="setVcat('food')">ğŸœ ìŒì‹Â·ì¿ í‚¹</span>
          <span class="chip" data-vcat="gaming" onclick="setVcat('gaming')">ğŸ® ê²Œì„</span>
          <span class="chip" data-vcat="news" onclick="setVcat('news')">ğŸ“° ë‰´ìŠ¤</span>
          <span class="chip" data-vcat="kids" onclick="setVcat('kids')">ğŸ‘¶ ì–´ë¦°ì´</span>
        </div>
        <!-- ê°•ì˜ ì„¸ë¶„í™” -->
        <div style="font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px">ğŸ“š ê°•ì˜ ì¹´í…Œê³ ë¦¬</div>
        <div class="chips">
          <span class="chip" data-vcat="lecture-all" onclick="setVcat('lecture-all')">ğŸ“š ì „ì²´ ê°•ì˜</span>
          <span class="chip" data-vcat="lecture-lang" onclick="setVcat('lecture-lang')">ğŸ—£ï¸ ì–¸ì–´Â·ì™¸êµ­ì–´</span>
          <span class="chip" data-vcat="lecture-coding" onclick="setVcat('lecture-coding')">ğŸ’» í”„ë¡œê·¸ë˜ë°</span>
          <span class="chip" data-vcat="lecture-science" onclick="setVcat('lecture-science')">ğŸ”¬ ê³¼í•™Â·ìˆ˜í•™</span>
          <span class="chip" data-vcat="lecture-biz" onclick="setVcat('lecture-biz')">ğŸ“Š ê²½ì˜Â·ë§ˆì¼€íŒ…</span>
          <span class="chip" data-vcat="lecture-art" onclick="setVcat('lecture-art')">ğŸ¨ ì˜ˆìˆ Â·ë””ìì¸</span>
          <span class="chip" data-vcat="lecture-health" onclick="setVcat('lecture-health')">ğŸ¥ ì˜ë£ŒÂ·ê±´ê°•</span>
          <span class="chip" data-vcat="lecture-music" onclick="setVcat('lecture-music')">ğŸµ ìŒì•…Â·ì•…ê¸°</span>
          <span class="chip" data-vcat="lecture-law" onclick="setVcat('lecture-law')">âš–ï¸ ë²•í•™</span>
          <span class="chip" data-vcat="lecture-history" onclick="setVcat('lecture-history')">ğŸ“œ ì—­ì‚¬Â·ì¸ë¬¸</span>
          <span class="chip" data-vcat="lecture-finance" onclick="setVcat('lecture-finance')">ğŸ’° ê¸ˆìœµÂ·íˆ¬ì</span>
          <span class="chip" data-vcat="lecture-kids" onclick="setVcat('lecture-kids')">ğŸ§’ ì–´ë¦°ì´ êµìœ¡</span>
        </div>
      </div>
    </div>

    <!-- Spotify í•„í„° -->
    <div id="sp-filters" class="hidden">
      <div class="chips mb-2">
        <span class="chip sp-active">ğŸµ íŠ¸ë™</span>
        <span class="chip" onclick="toast('ì•¨ë²” ê²€ìƒ‰ì€ Spotify API ì—°ê²° í›„ ì§€ì›ë©ë‹ˆë‹¤','i')">ğŸ’¿ ì•¨ë²”</span>
        <span class="chip" onclick="toast('ì•„í‹°ìŠ¤íŠ¸ ê²€ìƒ‰ì€ Spotify API ì—°ê²° í›„ ì§€ì›ë©ë‹ˆë‹¤','i')">ğŸ¤ ì•„í‹°ìŠ¤íŠ¸</span>
        <span class="chip" onclick="toast('í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ê²€ìƒ‰ì€ Spotify API ì—°ê²° í›„ ì§€ì›ë©ë‹ˆë‹¤','i')">ğŸ“‹ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</span>
      </div>
      <div style="background:var(--sp-d);border:1px solid rgba(29,185,84,.2);border-radius:var(--rm);padding:10px 14px;font-size:13px;color:var(--t2)">
        â„¹ï¸ Spotify ê²€ìƒ‰ ê²°ê³¼ëŠ” ë¯¸ë¦¬ë³´ê¸°(30ì´ˆ)ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì „ì²´ ì¬ìƒì€ Spotify ì•±ì—ì„œ ì´ìš©í•˜ì„¸ìš”.
      </div>
    </div>
  </div>

  <!-- ê²€ìƒ‰ ê²°ê³¼ / ë‚´ íŒŒì¼ -->
  <div class="sec-hd">
    <div class="sec-title" id="lib-result-title">ë‚´ íŒŒì¼</div>
    <div style="display:flex;gap:8px">
      <button class="btn btn-ghost btn-sm" onclick="renderMyFiles()">ìƒˆë¡œê³ ì¹¨</button>
      <button class="btn btn-primary btn-sm" onclick="switchTab('create')">+ ì—…ë¡œë“œ</button>
    </div>
  </div>

  <!-- í†µê³„ -->
  <div class="stats-grid mb-4">
    <div class="stat-card"><div class="stat-lbl">ë‚´ íŒŒì¼</div><div class="stat-val" id="lib-cnt">0</div></div>
    <div class="stat-card"><div class="stat-lbl">ì´ Pulse</div><div class="stat-val ac" id="lib-pulse">0</div></div>
    <div class="stat-card" style="--ac:var(--pu)"><div class="stat-lbl">TLC ì”ê³ </div><div class="stat-val tl" id="lib-tlc">0</div></div>
    <div class="stat-card"><div class="stat-lbl">ë§ˆì´ë‹ ì†ë„</div><div class="stat-val" style="font-size:16px">0.001 TLC/s</div></div>
  </div>

  <!-- Mining panel -->
  <div class="mine-panel mb-4">
    <div class="fb" style="flex-wrap:wrap;gap:12px">
      <div style="display:flex;align-items:center;gap:12px">
        <span style="font-size:22px">â›ï¸</span>
        <div>
          <div style="font-weight:800;font-size:15px">TLC ë§ˆì´ë‹</div>
          <div style="font-size:12px;color:var(--t2)">ì¬ìƒ ì‹œê°„ì´ TLCë¡œ ì±„êµ´ë©ë‹ˆë‹¤</div>
        </div>
        <span class="badge badge-live">MINING</span>
      </div>
      <div style="display:flex;align-items:center;gap:20px">
        <div class="tc">
          <div style="font-size:11px;color:var(--t2)">ìˆ˜ë ¹ ê°€ëŠ¥</div>
          <div class="mono" style="font-size:26px;font-weight:700;color:var(--ac)" id="mine-pending">0.0000</div>
          <div style="font-size:11px;color:var(--t2)">TLC</div>
        </div>
        <button class="btn btn-primary" onclick="claimTLC()">ìˆ˜ë ¹í•˜ê¸°</button>
      </div>
    </div>
  </div>

  <div id="lib-results" style="display:flex;flex-direction:column;gap:8px"></div>
</div>
<!-- ========== PLAYER ========== -->
<div id="tab-player" class="tab-pane">

  <!-- Player type sub-tabs -->
  <div style="display:flex;gap:8px;margin-bottom:20px">
    <button class="btn btn-primary" id="plytype-audio" onclick="setPlayerType('audio')">ğŸµ ìŒì•… í”Œë ˆì´ì–´</button>
    <button class="btn btn-ghost" id="plytype-video" onclick="setPlayerType('video')">ğŸ¬ ì˜ìƒ í”Œë ˆì´ì–´</button>
  </div>

  <!-- ===== AUDIO PLAYER ===== -->
  <div id="audio-player-sec">
    <div class="card card-ac mb-4">
      <!-- ì•¨ë²” ì•„íŠ¸ + íŒŒí˜• ì‹œê°í™” -->
      <div class="audio-art" id="audio-art">
        <span id="audio-art-icon" style="font-size:64px">ğŸµ</span>
        <div style="position:absolute;bottom:12px;left:50%;transform:translateX(-50%);display:flex;gap:3px;align-items:flex-end" id="eq-bars">
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq1 .8s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq2 .6s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq3 .9s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq1 .7s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq2 .5s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq3 .8s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq1 .6s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
          <div style="width:3px;background:var(--ac);border-radius:2px;animation:eq2 .9s ease-in-out infinite;opacity:.7" class="eq-bar"></div>
        </div>
      </div>
      <style>
        .eq-bar{height:12px}
        @keyframes eq1{0%,100%{height:6px}50%{height:22px}}
        @keyframes eq2{0%,100%{height:18px}50%{height:8px}}
        @keyframes eq3{0%,100%{height:12px}50%{height:28px}}
        #eq-bars.paused .eq-bar{animation-play-state:paused}
      
/* íƒ­ ë©”ë‰´ ê°€ìš´ë° ì •ë ¬ */
.tabs-bar {
    display: flex !important;
    justify-content: center !important;
    text-align: center !important;
}

.tabs-inner {
    display: flex !important;
    justify-content: center !important;
    margin: 0 auto !important;
    gap: 8px !important;
}

.tab {
    margin: 0 4px !important;
    text-align: center !important;
}

.tab-btn {
    margin: 0 4px !important;
}

/* íƒ­ ë©”ë‰´ ì¤‘ì•™ ì •ë ¬ */
.tabs-bar, .tabs-inner {
    display: flex !important;
    justify-content: center !important;
    text-align: center !important;
}

/* ì €ì‘ê¶Œ ë³´í˜¸ ì‹œìŠ¤í…œ */
.copyright-policy {
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.copyright-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  background: #f3f4f6;
  color: #4b5563;
}

.copyright-badge.verified {
  background: #d1fae5;
  color: #065f46;
}

.copyright-badge.unverified {
  background: #fee2e2;
  color: #991b1b;
}

.copyright-badge.warning {
  background: #ffedd5;
  color: #9a3412;
}

.copyright-tooltip {
  position: relative;
  cursor: help;
}

.copyright-tooltip:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: #1f2937;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  white-space: nowrap;
  z-index: 10;
  margin-bottom: 4px;
}

.verification-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 600;
}

.verification-badge.ai {
  background: #e0f2fe;
  color: #0369a1;
}

.verification-badge.manual {
  background: #fef3c7;
  color: #92400e;
}

.verification-badge.spotify {
  background: #1db954;
  color: white;
}

.ai-warning {
  background: #fff3cd;
  border: 1px solid #ffeeba;
  color: #856404;
  padding: 12px;
  border-radius: 8px;
  margin: 10px 0;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ai-warning i {
  font-size: 18px;
}



      <div class="tc" style="margin-bottom:4px">
        <div style="font-size:20px;font-weight:800" id="aud-title">â€” ì„ íƒëœ íŠ¸ë™ ì—†ìŒ</div>
        <div style="font-size:14px;color:var(--t2);margin-top:4px" id="aud-artist">Libraryì—ì„œ íŠ¸ë™ì„ ì„ íƒí•˜ì„¸ìš”</div>
      </div>

      <!-- íŒŒì¼ TL ì”ê³  -->
      <div class="file-tl-info" id="aud-file-tl-row">
        <div>
          <span style="font-weight:700">ğŸ’° íŒŒì¼ TL</span>
          <span style="font-size:12px;color:var(--t2);margin-left:6px">ì´ TLì´ ì†Œëª¨ë˜ë©° ì¬ìƒ</span>
        </div>
        <div style="display:flex;align-items:center;gap:10px">
          <div class="mono" style="font-size:18px;font-weight:800;color:var(--ca)" id="aud-ftl">â€”</div>
          <button class="btn btn-ghost btn-sm" onclick="openModal('recharge-file-modal')">ì¶©ì „</button>
        </div>
      </div>
      <div class="file-tl-bar" id="aud-ftl-bar"><div class="file-tl-fill" id="aud-ftl-fill" style="width:100%"></div></div>

      <!-- Seek bar -->
      <div class="player-seek" id="aud-seek" onclick="seekByClick(event,'audio')">
        <div class="player-fill" id="aud-seek-fill"></div>
      </div>
      <div style="display:flex;justify-content:space-between;font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--t2);margin-bottom:12px">
        <span id="aud-cur">0:00</span><span id="aud-dur">0:00</span>
      </div>

      <!-- Controls -->
      <div class="player-controls">
        <button class="ctrl-btn" onclick="skipAudio(-10)" title="10ì´ˆ ë’¤ë¡œ">â®</button>
        <button class="ctrl-btn" onclick="toggleShuffle()" id="shuf-btn" title="ì…”í”Œ">ğŸ”€</button>
        <button class="ctrl-btn play" id="aud-play-btn" onclick="toggleAudio()">â–¶</button>
        <button class="ctrl-btn" onclick="toggleLoop()" id="loop-btn" title="ë°˜ë³µ">ğŸ”</button>
        <button class="ctrl-btn" onclick="skipAudio(10)" title="10ì´ˆ ì•ìœ¼ë¡œ">â­</button>
      </div>

      <!-- Volume + Speed -->
      <div class="vol-row mb-2">
        <span style="font-size:16px">ğŸ”ˆ</span>
        <input type="range" id="aud-vol" class="vol-slider" min="0" max="100" value="80" oninput="setAudVol(this.value)">
        <span class="mono mu" style="font-size:12px;width:34px" id="aud-vol-lbl">80%</span>
      </div>
      <div class="vol-row">
        <span style="font-size:13px;color:var(--t2)">ë°°ì†</span>
        <div style="display:flex;gap:6px;margin-left:8px">
          <button class="btn btn-ghost btn-sm" id="speed-05" onclick="setSpeed(0.5)">0.5x</button>
          <button class="btn btn-ghost btn-sm" id="speed-1" onclick="setSpeed(1)" style="border-color:var(--bd-a);color:var(--ac)">1x</button>
          <button class="btn btn-ghost btn-sm" id="speed-15" onclick="setSpeed(1.5)">1.5x</button>
          <button class="btn btn-ghost btn-sm" id="speed-2" onclick="setSpeed(2)">2x</button>
        </div>
      </div>
    </div>

    <!-- í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ -->
    <div class="sec-hd"><div class="sec-title">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</div></div>
    <div id="audio-playlist" style="display:flex;flex-direction:column;gap:8px"></div>
  </div>

  <!-- ===== VIDEO PLAYER ===== -->
  <div id="video-player-sec" class="hidden">
    <div class="card" style="padding:0;overflow:hidden;border-radius:var(--rl);margin-bottom:16px">
      <div class="video-wrap">
        <video id="vid-el" controls playsinline preload="metadata"
          style="width:100%;height:100%;object-fit:contain;background:#000">
        </video>
        <div id="vid-overlay" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);cursor:pointer;border-radius:var(--rl)" onclick="startVideo()">
          <div style="width:72px;height:72px;border-radius:50%;background:var(--ac);display:flex;align-items:center;justify-content:center;font-size:28px;color:#060610">â–¶</div>
        </div>
      </div>
    </div>

    <div class="card card-ac mb-4">
      <div class="fb mb-3">
        <div>
          <div style="font-size:18px;font-weight:800" id="vid-title">â€” ì„ íƒëœ ì˜ìƒ ì—†ìŒ</div>
          <div style="font-size:13px;color:var(--t2);margin-top:3px" id="vid-desc">Libraryì—ì„œ ì˜ìƒì„ ì„ íƒí•˜ì„¸ìš”</div>
        </div>
        <span class="badge badge-vid">ğŸ¬ VIDEO</span>
      </div>

      <!-- íŒŒì¼ TL ì”ê³  -->
      <div class="file-tl-info" id="vid-file-tl-row">
        <div>
          <span style="font-weight:700">ğŸ’° íŒŒì¼ TL</span>
          <span style="font-size:12px;color:var(--t2);margin-left:6px">ì´ TLì´ ì†Œëª¨ë˜ë©° ì¬ìƒ</span>
        </div>
        <div style="display:flex;align-items:center;gap:10px">
          <div class="mono" style="font-size:18px;font-weight:800;color:var(--ca)" id="vid-ftl">â€”</div>
          <button class="btn btn-ghost btn-sm" onclick="openModal('recharge-file-modal')">ì¶©ì „</button>
        </div>
      </div>
      <div class="file-tl-bar"><div class="file-tl-fill" id="vid-ftl-fill" style="width:100%"></div></div>

      <!-- Video controls row -->
      <div style="display:flex;align-items:center;gap:12px;margin-top:12px;flex-wrap:wrap">
        <div class="vol-row" style="flex:1">
          <span style="font-size:16px">ğŸ”ˆ</span>
          <input type="range" id="vid-vol" class="vol-slider" min="0" max="100" value="80" oninput="setVidVol(this.value)">
          <span class="mono mu" style="font-size:12px;width:34px" id="vid-vol-lbl">80%</span>
        </div>
        <div style="display:flex;gap:6px">
          <button class="btn btn-ghost btn-sm" onclick="setVidSpeed(1)">1x</button>
          <button class="btn btn-ghost btn-sm" onclick="setVidSpeed(1.5)">1.5x</button>
          <button class="btn btn-ghost btn-sm" onclick="setVidSpeed(2)">2x</button>
        </div>
        <button class="btn btn-ghost btn-sm" onclick="toggleVidFullscreen()">â›¶</button>
      </div>

      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
        <span class="badge badge-ca">TL/s: <span id="vid-tl-rate">1.0</span></span>
        <span class="badge badge-pu">âš¡ Pulse: <span id="vid-pulse">0</span></span>
      </div>
    </div>

    <!-- ì˜ìƒ ëª©ë¡ -->
    <div class="sec-hd"><div class="sec-title">ì˜ìƒ ëª©ë¡</div></div>
    <div id="video-playlist" style="display:flex;flex-direction:column;gap:8px"></div>
  </div>
</div>
<!-- ========== SHARE PLACE ========== -->
<div id="tab-shareplace" class="tab-pane active">

  <!-- â”€â”€ íˆì–´ë¡œ ë°°ë„ˆ â”€â”€ -->
  <div style="background:linear-gradient(135deg,rgba(0,245,160,.1),rgba(123,97,255,.1));border:1px solid rgba(0,245,160,.2);border-radius:var(--rl);padding:22px 20px;margin-bottom:18px;position:relative;overflow:hidden">
    <div style="position:absolute;right:-10px;top:-10px;font-size:110px;opacity:.05;line-height:1;pointer-events:none">ğŸ›ï¸</div>
    <div style="font-size:10px;font-weight:800;color:var(--ac);letter-spacing:2px;margin-bottom:6px">TIMELINK SHAREPLACE</div>
    <div style="font-size:20px;font-weight:800;line-height:1.3;margin-bottom:6px">ë‚´ ì½˜í…ì¸ ë¡œ ìˆ˜ìµì„ ë§Œë“œì„¸ìš”</div>
    <div style="font-size:12px;color:var(--t2);margin-bottom:14px">ìŒì•… Â· ì˜ìƒ Â· ê°•ì˜ Â· ë””ì§€í„¸ ìƒí’ˆ â€” TL ê²°ì œ, íŒë§¤ìëŠ” TLC ì±„êµ´</div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px">
      <button class="btn btn-primary btn-sm" onclick="switchTab('library')">ğŸ“¤ ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê³µìœ </button>
      <button class="btn btn-ghost btn-sm" onclick="switchTab('create')">+ ìƒˆ ì½˜í…ì¸  ë§Œë“¤ê¸°</button>
    </div>
    <div style="display:flex;gap:20px;padding-top:12px;border-top:1px solid rgba(255,255,255,.07)">
      <div><div style="font-size:10px;color:var(--t2)">ë“±ë¡ ì½˜í…ì¸ </div><div style="font-weight:800;color:var(--ac);font-size:14px;font-family:'JetBrains Mono',monospace" id="sp-cnt">6</div></div>
      <div><div style="font-size:10px;color:var(--t2)">ì´ Pulse</div><div style="font-weight:800;color:var(--pu);font-size:14px;font-family:'JetBrains Mono',monospace" id="sp-pulse">372K</div></div>
      <div><div style="font-size:10px;color:var(--t2)">ì´ë²ˆ ë‹¬ ìˆ˜ìµ</div><div style="font-weight:800;color:var(--ca);font-size:14px;font-family:'JetBrains Mono',monospace">9,500 TL</div></div>
      <div><div style="font-size:10px;color:var(--t2)">íŒë§¤ì</div><div style="font-weight:800;font-size:14px;font-family:'JetBrains Mono',monospace">1,284ëª…</div></div>
    </div>
  </div>

  <!-- â”€â”€ ì½˜í…ì¸  ì¸ê¸° ì°¨íŠ¸ â”€â”€ -->
  <div class="card mb-4">
    <div class="chart-hd">
      <span class="chart-title" id="sp-chart-title">ğŸ”¥ ì‹¤ì‹œê°„ ì°¨íŠ¸</span>
      <span class="chart-badge" id="sp-chart-updated">ë°©ê¸ˆ ì „</span>
    </div>
    <div class="chart-tabs">
      <button class="ctab active" onclick="loadChart('hot',this)">ğŸ”¥ ì‹¤ì‹œê°„</button>
      <button class="ctab" onclick="loadChart('new',this)">ğŸ†• ì‹ ê³¡</button>
      <button class="ctab" onclick="loadChart('rise',this)">ğŸ“ˆ ê¸‰ìƒìŠ¹</button>
      <button class="ctab" onclick="loadChart('music',this)">ğŸµ ìŒì•…</button>
      <button class="ctab" onclick="loadChart('video',this)">ğŸ¬ ì˜ìƒ</button>
      <button class="ctab" onclick="loadChart('lecture',this)">ğŸ“š ê°•ì˜</button>
      <button class="ctab" onclick="loadChart('global',this)">ğŸŒ ê¸€ë¡œë²Œ</button>
      <button class="ctab" onclick="loadChart('contributor',this)" style="border-left:1px solid rgba(255,255,255,.08);margin-left:4px;padding-left:12px">ğŸ† ê¸°ì—¬ì</button>
    </div>
    <!-- ê¸°ì—¬ì ì„œë¸Œ í•„í„° (contributor íƒ­ ì„ íƒ ì‹œë§Œ í‘œì‹œ) -->
    <div id="contrib-sub-filter" style="display:none;flex-wrap:wrap;gap:6px;padding:10px 4px 0;border-top:1px solid var(--bd);margin-top:8px">
      <button class="csub active" onclick="setContribFilter('weekly',this)"   style="font-size:11px;padding:4px 10px;border-radius:var(--rf);border:1px solid var(--bd);background:rgba(255,255,255,.05);color:var(--t2);cursor:pointer;font-family:'Syne',sans-serif;font-weight:700;transition:var(--tr)">ğŸ“… ì£¼ê°„</button>
      <button class="csub" onclick="setContribFilter('monthly',this)"  style="font-size:11px;padding:4px 10px;border-radius:var(--rf);border:1px solid var(--bd);background:rgba(255,255,255,.05);color:var(--t2);cursor:pointer;font-family:'Syne',sans-serif;font-weight:700;transition:var(--tr)">ğŸ“† ì›”ê°„</button>
      <button class="csub" onclick="setContribFilter('alltime',this)"  style="font-size:11px;padding:4px 10px;border-radius:var(--rf);border:1px solid var(--bd);background:rgba(255,255,255,.05);color:var(--t2);cursor:pointer;font-family:'Syne',sans-serif;font-weight:700;transition:var(--tr)">ğŸ… ì „ì²´</button>
      <div style="width:1px;background:var(--bd);margin:0 2px;align-self:stretch"></div>
      <button class="csub" onclick="setContribFilter('music',this)"    style="font-size:11px;padding:4px 10px;border-radius:var(--rf);border:1px solid var(--bd);background:rgba(255,255,255,.05);color:var(--t2);cursor:pointer;font-family:'Syne',sans-serif;font-weight:700;transition:var(--tr)">ğŸµ ìŒì•…ì¸</button>
      <button class="csub" onclick="setContribFilter('lecture',this)"  style="font-size:11px;padding:4px 10px;border-radius:var(--rf);border:1px solid var(--bd);background:rgba(255,255,255,.05);color:var(--t2);cursor:pointer;font-family:'Syne',sans-serif;font-weight:700;transition:var(--tr)">ğŸ“š ê°•ì‚¬</button>
      <button class="csub" onclick="setContribFilter('creator',this)"  style="font-size:11px;padding:4px 10px;border-radius:var(--rf);border:1px solid var(--bd);background:rgba(255,255,255,.05);color:var(--t2);cursor:pointer;font-family:'Syne',sans-serif;font-weight:700;transition:var(--tr)">ğŸ¤– AI í¬ë¦¬ì—ì´í„°</button>
    </div>
    <div id="chart-list" style="display:flex;flex-direction:column;gap:2px"></div>
    <button class="btn btn-ghost btn-sm" style="width:100%;margin-top:10px;font-size:12px" onclick="loadMore()">ë”ë³´ê¸°</button>
  </div>

  <!-- â”€â”€ ì¹´í…Œê³ ë¦¬ í•„í„° + ì „ì²´ ì½˜í…ì¸  â”€â”€ -->
  <div class="sec-hd mb-3">
    <div class="sec-title">ğŸ›ï¸ ì „ì²´ ì½˜í…ì¸ </div>
    <div style="display:flex;gap:6px">
      <button class="btn btn-ghost btn-sm" onclick="renderShare()">ìƒˆë¡œê³ ì¹¨</button>
      <button class="btn btn-primary btn-sm" onclick="switchTab('library')">+ ê³µìœ í•˜ê¸°</button>
    </div>
  </div>
  <div style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:14px" id="share-filter-row">
    <span class="chip active" data-g="all"          onclick="filterShare('all')">ğŸŒ ì „ì²´</span>
    <span class="chip" data-g="K-POP"               onclick="filterShare('K-POP')">ğŸ¤ K-POP</span>
    <span class="chip" data-g="Electronic"           onclick="filterShare('Electronic')">âš¡ Electronic</span>
    <span class="chip" data-g="Hip-Hop"              onclick="filterShare('Hip-Hop')">ğŸ§ Hip-Hop</span>
    <span class="chip" data-g="Chill"                onclick="filterShare('Chill')">ğŸŒŠ Chill</span>
    <span class="chip" data-g="Jazz"                 onclick="filterShare('Jazz')">ğŸ· Jazz</span>
    <span class="chip" data-g="Indie"                onclick="filterShare('Indie')">ğŸ¸ Indie</span>
    <span class="chip" data-g="video"                onclick="filterShare('video')">ğŸ¬ ì˜ìƒ</span>
    <span class="chip" data-g="lecture"              onclick="filterShare('lecture')">ğŸ“š ê°•ì˜</span>
  </div>
  <div class="share-grid" id="share-grid"></div>

</div>

<!-- ========== RADIO ========== -->
<div id="tab-radio" class="tab-pane">
  <div class="sec-hd mb-3">
    <div><div class="sec-title">â˜• ì¹´í˜ ë°©ì†¡</div><div style="font-size:13px;color:var(--t2)">ë§¤ì¥ ë¶„ìœ„ê¸°ì— ë§ëŠ” ìŒì•… ìë™ì¬ìƒ Â· Pulse ì ë¦½</div></div>
  </div>
  <div id="radio-on" class="card card-ac hidden mb-4">
    <div class="fb">
      <div style="display:flex;align-items:center;gap:12px">
        <span class="badge badge-live">ON AIR</span>
        <div><div style="font-weight:700" id="radio-ch-name">â€”</div><div style="font-size:12px;color:var(--t2)" id="radio-ch-desc">â€”</div></div>
      </div>
      <button class="btn btn-ghost btn-sm" onclick="radioStop()">â–  ì •ì§€</button>
    </div>
  </div>
  <div class="radio-grid" id="radio-grid"></div>
</div>

<!-- ========== ê´‘ê³  ========== -->
<div id="tab-ads" class="tab-pane">
  <div class="sec-hd mb-4">
    <div>
      <div class="sec-title">ğŸ“£ TimeLink ê´‘ê³ </div>
      <div style="font-size:13px;color:var(--t2)">ìŒì•…ì„ ë“¤ìœ¼ë©° ê´‘ê³ ë¥¼ ë³´ë©´ TL ë³´ìƒì„ ë°›ìŠµë‹ˆë‹¤</div>
    </div>
    <span class="badge" style="background:rgba(255,123,0,.15);color:#ff7b00;border:1px solid rgba(255,123,0,.3)">ê´‘ê³ ì£¼ ëª¨ì§‘ ì¤‘</span>
  </div>

  <!-- í˜„ì¬ ê´‘ê³  ë°°ë„ˆ -->
  <div class="card mb-4" style="border-color:rgba(255,123,0,.25);background:linear-gradient(135deg,rgba(255,123,0,.06),transparent)">
    <div class="fb mb-3">
      <span class="badge" style="background:rgba(255,123,0,.15);color:#ff7b00">ğŸ“£ SPONSORED</span>
      <span style="font-size:12px;color:var(--t2)">ê´‘ê³  ì‹œì²­ ì‹œ +50 TL</span>
    </div>
    <div style="width:100%;height:160px;border-radius:var(--rm);background:rgba(255,255,255,.03);border:1px dashed rgba(255,255,255,.1);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer" onclick="watchAd()">
      <div style="font-size:36px">ğŸµ</div>
      <div style="font-weight:800;font-size:15px">TimeLink Premium</div>
      <div style="font-size:12px;color:var(--t2)">ì§€ê¸ˆ ë°”ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ê³  ë” ë§ì€ í˜œíƒì„!</div>
      <button class="btn btn-primary btn-sm mt-2" onclick="watchAd()">ê´‘ê³  ë³´ê¸° (+50 TL)</button>
    </div>
  </div>

  <!-- ê´‘ê³  ë³´ìƒ ì•ˆë‚´ -->
  <div class="card mb-4">
    <div style="font-weight:800;font-size:15px;margin-bottom:14px">ğŸ’° ê´‘ê³  ë³´ìƒ êµ¬ì¡°</div>
    <div style="display:flex;flex-direction:column;gap:10px">
      <div class="fb" style="padding:10px 14px;background:rgba(0,245,160,.06);border:1px solid rgba(0,245,160,.15);border-radius:var(--rm)">
        <div><div style="font-weight:700;font-size:13px">ğŸ¬ ì˜ìƒ ê´‘ê³  (15ì´ˆ)</div><div style="font-size:12px;color:var(--t2)">ê±´ë„ˆë›°ê¸° ì—†ì´ ì™„ì‹œì²­</div></div>
        <div style="font-weight:800;color:var(--ac);font-family:JetBrains Mono,monospace">+50 TL</div>
      </div>
      <div class="fb" style="padding:10px 14px;background:rgba(123,97,255,.06);border:1px solid rgba(123,97,255,.15);border-radius:var(--rm)">
        <div><div style="font-weight:700;font-size:13px">ğŸ¬ ì˜ìƒ ê´‘ê³  (30ì´ˆ)</div><div style="font-size:12px;color:var(--t2)">ê±´ë„ˆë›°ê¸° ì—†ì´ ì™„ì‹œì²­</div></div>
        <div style="font-weight:800;color:var(--pu);font-family:JetBrains Mono,monospace">+120 TL</div>
      </div>
      <div class="fb" style="padding:10px 14px;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.15);border-radius:var(--rm)">
        <div><div style="font-weight:700;font-size:13px">ğŸ–¼ï¸ ë°°ë„ˆ ê´‘ê³  í´ë¦­</div><div style="font-size:12px;color:var(--t2)">ëœë”© í˜ì´ì§€ 3ì´ˆ ì´ìƒ ì²´ë¥˜</div></div>
        <div style="font-weight:800;color:var(--ca);font-family:JetBrains Mono,monospace">+20 TL</div>
      </div>
      <div class="fb" style="padding:10px 14px;background:rgba(0,245,160,.04);border:1px solid rgba(255,255,255,.06);border-radius:var(--rm)">
        <div><div style="font-weight:700;font-size:13px">ğŸµ ìŒì•… ê´‘ê³  (ì¬ìƒ ì¤‘)</div><div style="font-size:12px;color:var(--t2)">ì¬ìƒ ì¤‘ ì‚½ì… ê´‘ê³  ìˆ˜ì‹ </div></div>
        <div style="font-weight:800;color:var(--ac);font-family:JetBrains Mono,monospace">+10 TL</div>
      </div>
    </div>
  </div>

  <!-- ì¼ì¼ ê´‘ê³  í•œë„ -->
  <div class="card mb-4">
    <div class="fb mb-3">
      <div style="font-weight:800;font-size:15px">ğŸ“… ì˜¤ëŠ˜ì˜ ê´‘ê³  í˜„í™©</div>
      <span style="font-size:12px;color:var(--t2)" id="ads-reset">ìì • ì´ˆê¸°í™”</span>
    </div>
    <div class="fb" style="margin-bottom:10px">
      <span style="font-size:13px;color:var(--t2)">ì˜¤ëŠ˜ íšë“ TL</span>
      <span class="mono ac" style="font-weight:800" id="ads-earned">0 TL</span>
    </div>
    <div class="fb" style="margin-bottom:8px">
      <span style="font-size:13px;color:var(--t2)">ì‹œì²­ íšŸìˆ˜</span>
      <span class="mono" style="font-size:13px" id="ads-count">0 / 10</span>
    </div>
    <div style="height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden">
      <div id="ads-prog" style="height:100%;background:var(--ac);border-radius:3px;width:0%;transition:width .5s ease"></div>
    </div>
    <div style="font-size:11px;color:var(--t2);margin-top:6px">ì¼ì¼ ìµœëŒ€ 10íšŒ Â· ìµœëŒ€ 500 TL</div>
  </div>

  <!-- ê´‘ê³ ì£¼ ì•ˆë‚´ -->
  <div class="card" style="border-color:rgba(255,123,0,.2);background:linear-gradient(135deg,rgba(255,123,0,.04),transparent)">
    <div style="font-weight:800;font-size:15px;margin-bottom:8px">ğŸ¢ ê´‘ê³ ì£¼ì´ì‹ ê°€ìš”?</div>
    <div style="font-size:13px;color:var(--t2);margin-bottom:14px;line-height:1.7">TimeLinkì˜ ìŒì•… ìŠ¤íŠ¸ë¦¬ë° ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ê´‘ê³ ë¥¼ ë…¸ì¶œí•˜ì„¸ìš”. ì²­ì·¨ ë°ì´í„° ê¸°ë°˜ì˜ ì •ë°€ íƒ€ê²ŸíŒ…ìœ¼ë¡œ ë†’ì€ ì „í™˜ìœ¨ì„ ê²½í—˜í•˜ì„¸ìš”.</div>
    <button class="btn btn-sm" style="background:rgba(255,123,0,.15);color:#ff7b00;border:1px solid rgba(255,123,0,.3);width:100%" onclick="toast('ê´‘ê³ ì£¼ í˜ì´ì§€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤','i')">ê´‘ê³  ì§‘í–‰ ë¬¸ì˜í•˜ê¸° â†’</button>
  </div>
</div>

<!-- ========== WALLET ========== -->
<div id="tab-wallet" class="tab-pane">

  <!-- ì§€ê°‘ ìš”ì•½ -->
  <div style="background:linear-gradient(135deg,rgba(0,245,160,.1),rgba(123,97,255,.08));border:1px solid rgba(0,245,160,.2);border-radius:var(--rl);padding:22px 20px;margin-bottom:18px">
    <div style="font-size:10px;font-weight:800;color:var(--ac);letter-spacing:2px;margin-bottom:10px">MY WALLET</div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px">
      <div style="background:rgba(0,0,0,.3);border-radius:var(--rm);padding:14px">
        <div style="font-size:11px;color:var(--t2);margin-bottom:4px">TL ì”ê³ </div>
        <div style="font-size:28px;font-weight:800;color:var(--ac);font-family:'JetBrains Mono',monospace" id="w-tl">10,000</div>
        <div style="font-size:10px;color:var(--t2);margin-top:2px">TimeLink Credit</div>
      </div>
      <div style="background:rgba(0,0,0,.3);border-radius:var(--rm);padding:14px">
        <div style="font-size:11px;color:var(--t2);margin-bottom:4px">TLC ì”ê³ </div>
        <div style="font-size:28px;font-weight:800;color:var(--pu);font-family:'JetBrains Mono',monospace" id="w-tlc">0.0000</div>
        <div style="font-size:10px;color:var(--t2);margin-top:2px">TimeLink Coin</div>
      </div>
    </div>
    <div style="display:flex;gap:8px">
      <button class="btn btn-primary btn-sm" onclick="openModal('recharge-modal')">+ TL ì¶©ì „</button>
      <button class="btn btn-sm" style="background:rgba(123,97,255,.2);color:var(--pu);border:1px solid rgba(123,97,255,.3)" onclick="openModal('exchange-modal')">ğŸ’± í™˜ì „ ìš”ì²­</button>
      <button class="btn btn-ghost btn-sm" onclick="claimTLC()">â›ï¸ TLC ìˆ˜ë ¹</button>
    </div>
  </div>

  <!-- ìˆ˜ìµ í˜„í™© -->
  <div class="card mb-4">
    <div style="font-weight:800;font-size:15px;margin-bottom:14px">ğŸ’° ìˆ˜ìµ í˜„í™©</div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px">
      <div style="padding:12px;background:rgba(0,245,160,.06);border:1px solid rgba(0,245,160,.12);border-radius:var(--rm)">
        <div style="font-size:11px;color:var(--t2)">ì´ ìˆ˜ìµ (í™•ì •)</div>
        <div style="font-weight:800;color:var(--ac);font-family:'JetBrains Mono',monospace;font-size:16px" id="w-earned">0 TL</div>
      </div>
      <div style="padding:12px;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.12);border-radius:var(--rm)">
        <div style="font-size:11px;color:var(--t2)">í™€ë”© ì¤‘ (ì¸ì¦ ëŒ€ê¸°)</div>
        <div style="font-weight:800;color:var(--ca);font-family:'JetBrains Mono',monospace;font-size:16px" id="w-holding">0 TL</div>
      </div>
      <div style="padding:12px;background:rgba(123,97,255,.06);border:1px solid rgba(123,97,255,.12);border-radius:var(--rm)">
        <div style="font-size:11px;color:var(--t2)">ëˆ„ì  í™˜ì „</div>
        <div style="font-weight:800;color:var(--pu);font-family:'JetBrains Mono',monospace;font-size:16px" id="w-exchanged">0 TL</div>
      </div>
      <div style="padding:12px;background:rgba(255,255,255,.03);border:1px solid var(--bd);border-radius:var(--rm)">
        <div style="font-size:11px;color:var(--t2)">í™˜ì „ ê°€ëŠ¥ëŸ‰</div>
        <div style="font-weight:800;font-family:'JetBrains Mono',monospace;font-size:16px" id="w-exchangeable">0 TL</div>
        <div style="font-size:10px;color:var(--t2);margin-top:2px">ì†Œë¹„ TL Ã— 50%</div>
      </div>
    </div>
    <!-- í™˜ì „ ê³„ì‚° ì„¤ëª… -->
    <div style="background:rgba(255,255,255,.03);border-radius:var(--rs);padding:10px 12px;font-size:11px;color:var(--t2);line-height:1.7">
      ğŸ’¡ í™˜ì „ ê°€ëŠ¥ëŸ‰ = (ì´ ì†Œë¹„ TL - í™˜ì „í•œ TL) Ã— 50%<br>
      â›ï¸ TLC ì±„êµ´ëŸ‰ = ì†Œë¹„ TL Ã— 50% Ã— POC ê¸°ì—¬ì§€ìˆ˜
    </div>
  </div>

  <!-- POC ê¸°ì—¬ì§€ìˆ˜ -->
  <div class="card mb-4">
    <div style="font-weight:800;font-size:15px;margin-bottom:14px">âš¡ POC â€” Proof of Contribution</div>
    <!-- ì§€ìˆ˜ ê²Œì´ì§€ -->
    <div style="display:flex;align-items:center;gap:16px;margin-bottom:16px">
      <div style="position:relative;width:80px;height:80px;flex-shrink:0">
        <svg width="80" height="80" viewBox="0 0 80 80">
          <circle cx="40" cy="40" r="34" fill="none" stroke="rgba(255,255,255,.06)" stroke-width="8"/>
          <circle cx="40" cy="40" r="34" fill="none" stroke="url(#pocGrad)" stroke-width="8"
            stroke-linecap="round" stroke-dasharray="213.6" id="poc-ring"
            stroke-dashoffset="107" transform="rotate(-90 40 40)" style="transition:stroke-dashoffset .8s ease"/>
          <defs><linearGradient id="pocGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#7b61ff"/><stop offset="100%" stop-color="#00f5a0"/>
          </linearGradient></defs>
        </svg>
        <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column">
          <div style="font-size:16px;font-weight:800;color:var(--ac);font-family:'JetBrains Mono',monospace" id="poc-val">1.0</div>
          <div style="font-size:9px;color:var(--t2)">POC</div>
        </div>
      </div>
      <div style="flex:1">
        <div style="font-weight:700;font-size:14px;margin-bottom:6px" id="poc-grade">ğŸŸ¢ ì–‘í˜¸</div>
        <div style="font-size:12px;color:var(--t2);line-height:1.6">ê¸°ì—¬ì§€ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡ TLC ì±„êµ´ëŸ‰ì´ ì¦ê°€í•©ë‹ˆë‹¤. ì €ì‘ê¶Œ ìœ„ë°˜, ì–´ë·°ì§• ë“±ì€ ì§€ìˆ˜ë¥¼ ë‚®ì¶¥ë‹ˆë‹¤.</div>
      </div>
    </div>
    <!-- ê¸°ì—¬ ìš”ì†Œ -->
    <div style="display:flex;flex-direction:column;gap:6px" id="poc-factors">
      <div class="fb" style="font-size:12px;padding:6px 10px;background:rgba(0,245,160,.06);border-radius:var(--rs)">
        <span>âœ… ì €ì‘ê¶Œ ì¸ì¦ ì™„ë£Œ (s1)</span><span style="color:var(--ac);font-weight:700">+0.3</span>
      </div>
      <div class="fb" style="font-size:12px;padding:6px 10px;background:rgba(0,245,160,.06);border-radius:var(--rs)">
        <span>âœ… Suno í”„ë¦¬ë¯¸ì—„ ì¸ì¦</span><span style="color:var(--ac);font-weight:700">+0.2</span>
      </div>
      <div class="fb" style="font-size:12px;padding:6px 10px;background:rgba(0,245,160,.06);border-radius:var(--rs)">
        <span>ğŸµ SharePlace íŒë§¤ í™œë™</span><span style="color:var(--ac);font-weight:700">+0.5</span>
      </div>
    </div>
    <!-- ë§ˆì´ë„ˆìŠ¤ ì˜ˆì‹œ -->
    <div id="poc-minus" style="display:none;flex-direction:column;gap:6px;margin-top:6px">
      <div class="fb" style="font-size:12px;padding:6px 10px;background:rgba(255,79,79,.06);border-radius:var(--rs)">
        <span>âš ï¸ ì €ì‘ê¶Œ ì‹ ê³  ì ‘ìˆ˜</span><span style="color:#ff4f4f;font-weight:700">-0.5</span>
      </div>
    </div>
  </div>

  <!-- TL ì •ì§€ ë°°ë„ˆ (ì´ì˜ì œê¸° ì‹œ) -->
  <div id="tl-suspended-banner" style="display:none;background:rgba(255,79,79,.08);border:1.5px solid rgba(255,79,79,.3);border-radius:var(--rm);padding:14px 16px;margin-bottom:14px">
    <div style="display:flex;align-items:center;gap:10px">
      <div style="font-size:24px">ğŸ”’</div>
      <div style="flex:1">
        <div style="font-weight:800;color:#ff6b6b;font-size:14px">TL ì‚¬ìš© ì •ì§€ ì¤‘</div>
        <div style="font-size:12px;color:var(--t2);margin-top:3px">ì´ì˜ì œê¸° ì‹¬ì‚¬ê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ì‹¬ì‚¬ ì™„ë£Œ í›„ ìë™ í•´ì œë©ë‹ˆë‹¤.</div>
      </div>
      <span style="font-size:11px;font-weight:700;color:#ff6b6b;background:rgba(255,79,79,.15);padding:4px 10px;border-radius:var(--rf)">D-30</span>
    </div>
  </div>

  <!-- ì´ì˜ì œê¸° ë‚´ì—­ -->
  <div class="card mb-4">
    <div class="fb mb-3">
      <div style="font-weight:800;font-size:15px">âš ï¸ ì´ì˜ì œê¸° ë‚´ì—­</div>
      <span class="badge" style="background:rgba(255,79,79,.12);color:#ff6b6b;font-size:10px" id="dispute-count-badge">0ê±´</span>
    </div>
    <div id="dispute-history">
      <div style="text-align:center;padding:24px;color:var(--t2);font-size:13px">ì ‘ìˆ˜ëœ ì´ì˜ì œê¸°ê°€ ì—†ìŠµë‹ˆë‹¤</div>
    </div>
    <!-- ê´€ë¦¬ì ì‹¬ì‚¬ ì‹œë®¬ë ˆì´ì…˜ (ë°ëª¨ìš©) -->
    <div id="dispute-admin-panel" style="display:none;margin-top:12px;padding:10px 12px;background:rgba(255,255,255,.03);border-radius:var(--rs);border:1px solid var(--bd)">
      <div style="font-size:11px;color:var(--t2);margin-bottom:8px;font-weight:700">âš™ï¸ ì‹¬ì‚¬ ê²°ê³¼ ì‹œë®¬ë ˆì´ì…˜ (ë°ëª¨)</div>
      <div style="display:flex;gap:6px;flex-wrap:wrap" id="dispute-admin-btns"></div>
    </div>
  </div>

  <!-- ê±°ë˜ ë‚´ì—­ -->
  <div class="card">
    <div class="fb mb-3">
      <div style="font-weight:800;font-size:15px">ğŸ“‹ ê±°ë˜ ë‚´ì—­</div>
      <div style="display:flex;gap:6px">
        <button class="btn btn-ghost btn-sm" id="hist-all-btn" style="font-size:11px" onclick="filterHistory('all',this)">ì „ì²´</button>
        <button class="btn btn-ghost btn-sm" id="hist-earn-btn" style="font-size:11px" onclick="filterHistory('earn',this)">ìˆ˜ìµ</button>
        <button class="btn btn-ghost btn-sm" id="hist-spend-btn" style="font-size:11px" onclick="filterHistory('spend',this)">ì†Œë¹„</button>
        <button class="btn btn-ghost btn-sm" id="hist-exch-btn" style="font-size:11px" onclick="filterHistory('exchange',this)">í™˜ì „</button>
      </div>
    </div>
    <div id="tx-history" style="display:flex;flex-direction:column;gap:6px">
      <!-- ìƒ˜í”Œ ê±°ë˜ ë‚´ì—­ -->
      <div class="fb" style="padding:10px 0;border-bottom:1px solid var(--bd)">
        <div><div style="font-size:13px;font-weight:700">ğŸµ Seoul Nights ì¬ìƒ ìˆ˜ìµ</div><div style="font-size:11px;color:var(--t2)">2024.02.24 Â· í™€ë”© ì¤‘</div></div>
        <div style="font-weight:800;color:var(--ca);font-family:'JetBrains Mono',monospace">+3,200 TL</div>
      </div>
      <div class="fb" style="padding:10px 0;border-bottom:1px solid var(--bd)">
        <div><div style="font-size:13px;font-weight:700">ğŸµ Midnight Vibe ì¬ìƒ ìˆ˜ìµ</div><div style="font-size:11px;color:var(--t2)">2024.02.23 Â· í™•ì •</div></div>
        <div style="font-weight:800;color:var(--ac);font-family:'JetBrains Mono',monospace">+4,200 TL</div>
      </div>
      <div class="fb" style="padding:10px 0;border-bottom:1px solid var(--bd)">
        <div><div style="font-size:13px;font-weight:700">â–¶ ì¬ìƒ ì†Œë¹„</div><div style="font-size:11px;color:var(--t2)">2024.02.23 Â· Electric Dreams</div></div>
        <div style="font-weight:800;color:#ff4f4f;font-family:'JetBrains Mono',monospace">-320 TL</div>
      </div>
      <div class="fb" style="padding:10px 0">
        <div><div style="font-size:13px;font-weight:700">ğŸ’± í™˜ì „ ìš”ì²­</div><div style="font-size:11px;color:var(--t2)">2024.02.22 Â· ì²˜ë¦¬ ì™„ë£Œ</div></div>
        <div style="font-weight:800;color:var(--pu);font-family:'JetBrains Mono',monospace">-2,000 TL</div>
      </div>
    </div>
  </div>
</div>

<!-- ========== CAR ========== -->
<div id="tab-car" class="tab-pane">
  <div class="car-hero" id="car-hero">
    <div style="font-size:64px" id="car-emoji">ğŸš—</div>
    <div style="font-size:28px;font-weight:800;margin-top:8px">Car Mode</div>
    <div class="car-rate-big" id="car-rate-big">1.0x</div>
    <div style="font-size:14px;color:var(--t2);margin-bottom:20px">í˜„ì¬ ë³´ìƒ ë°°ìœ¨</div>
    <button class="btn btn-lg w-full" id="car-main-btn"
      style="background:var(--ca-d);color:var(--ca);border:1px solid rgba(245,158,11,.3);border-radius:var(--rf);font-family:'Syne',sans-serif;font-weight:700;cursor:pointer;padding:14px 32px;font-size:15px"
      onclick="toggleCar()">ğŸš— Car Mode í™œì„±í™”</button>
    <div class="car-info-grid">
      <div class="car-info-item"><div class="car-info-label">Pulse</div><div class="car-info-value">2x</div></div>
      <div class="car-info-item"><div class="car-info-label">TLC ì±„êµ´</div><div class="car-info-value">2x</div></div>
      <div class="car-info-item"><div class="car-info-label">ì°½ì‘ì ìˆ˜ìµ</div><div class="car-info-value">2x</div></div>
    </div>
  </div>
  <div class="card">
    <div style="font-weight:800;margin-bottom:10px">ğŸ“‹ ì´ìš© ì•ˆë‚´</div>
    <div style="display:flex;flex-direction:column;gap:8px;font-size:14px;color:var(--t2)">
      <div>âœ… ìš´ì „ ì¤‘ í™œì„±í™”í•˜ë©´ ëª¨ë“  Pulse ë³´ìƒì´ 2ë°°ë¡œ ì§€ê¸‰ë©ë‹ˆë‹¤</div>
      <div>âœ… TLC ë§ˆì´ë‹ ì†ë„ë„ 2ë°°ë¡œ ì¦ê°€í•©ë‹ˆë‹¤</div>
      <div>âš ï¸ TL ì†Œë¹„ëŸ‰ë„ 2ë°°ë¡œ ì¦ê°€í•©ë‹ˆë‹¤ (ìë™ ì¶©ì „ ì„¤ì • ê¶Œì¥)</div>
      <div>ğŸ”’ Phase 2: GPS ê¸°ë°˜ ì‹¤ì œ ì£¼í–‰ ê²€ì¦ ì˜ˆì •</div>
    </div>
  </div>
</div>

</div><!-- .page -->

<!-- ========== PLAYER BAR ========== -->
<div id="player-bar" class="player-bar hidden">
  <div class="pb-prog" onclick="seekByClickBar(event)"><div class="pb-prog-fill" id="pb-fill"></div></div>
  <div class="pb-track">
    <div class="pb-thumb" id="pb-thumb">ğŸµ</div>
    <div style="min-width:0">
      <div style="font-weight:700;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis" id="pb-title">â€”</div>
      <div style="font-size:12px;color:var(--t2)" id="pb-artist">â€”</div>
    </div>
  </div>
  <div class="pb-controls">
    <button class="btn btn-icon btn-ghost" id="pb-play-btn" onclick="toggleAudio()">â–¶</button>
  </div>
  <div class="pb-right">
    <span class="badge badge-ac">âš¡ <span id="pb-pulse">0</span></span>
    <span class="badge badge-ca">TL: <span id="pb-ftl">â€”</span></span>
    <span class="mono mu" style="font-size:12px"><span id="pb-cur">0:00</span>/<span id="pb-dur">0:00</span></span>
    <span id="pb-car" class="badge badge-ca hidden">ğŸš— 2x</span>
  </div>
</div>

<!-- ========== MODALS ========== -->
<div id="recharge-modal" class="modal-overlay hidden">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('recharge-modal')">âœ•</button>
    <div class="modal-title">ğŸ’° TL ì¶©ì „</div>
    <div style="display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap">
      <button class="btn btn-ghost btn-sm" onclick="$('rc-amt').value=1000">1,000</button>
      <button class="btn btn-ghost btn-sm" onclick="$('rc-amt').value=5000">5,000</button>
      <button class="btn btn-ghost btn-sm" onclick="$('rc-amt').value=10000">10,000</button>
      <button class="btn btn-ghost btn-sm" onclick="$('rc-amt').value=50000">50,000</button>
    </div>
    <div class="fg mb-4"><label class="fl">ê¸ˆì•¡ (TL)</label><input type="number" id="rc-amt" class="fi" value="1000" min="100"></div>
    <button class="btn btn-primary w-full" onclick="doRecharge()">ì¶©ì „í•˜ê¸°</button>
  </div>
</div>

<div id="recharge-file-modal" class="modal-overlay hidden">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('recharge-file-modal')">âœ•</button>
    <div class="modal-title">ğŸ’° íŒŒì¼ TL ì¶©ì „</div>
    <p style="font-size:14px;color:var(--t2);margin-bottom:16px">ì„ íƒëœ íŒŒì¼ì— TLì„ ì§ì ‘ ì¶©ì „í•©ë‹ˆë‹¤. ì²­ì·¨ìëŠ” ì´ TLì„ ì†Œëª¨í•˜ë©° íŒŒì¼ì„ ì¬ìƒí•©ë‹ˆë‹¤.</p>
    <div style="display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap">
      <button class="btn btn-ghost btn-sm" onclick="$('frc-amt').value=500">500</button>
      <button class="btn btn-ghost btn-sm" onclick="$('frc-amt').value=1000">1,000</button>
      <button class="btn btn-ghost btn-sm" onclick="$('frc-amt').value=5000">5,000</button>
    </div>
    <div class="fg mb-4"><label class="fl">ì¶©ì „í•  TL</label><input type="number" id="frc-amt" class="fi" value="1000" min="100"></div>
    <div style="font-size:13px;color:var(--t2);margin-bottom:14px">ë‚´ ì”ê³ : <span class="mono ac" id="frc-bal">â€”</span> TL</div>
    <button class="btn btn-primary w-full" onclick="doRechargeFile()">íŒŒì¼ì— ì¶©ì „í•˜ê¸°</button>
  </div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
// =================== STATE ===================
const S = {
  wallet:{tl:10000,locked:0,tlc:0,
    totalEarned:0,      // ëˆ„ì  ìˆ˜ìµ TL
    totalSpent:0,       // ëˆ„ì  ì†Œë¹„ TL (ì¬ìƒ)
    totalExchanged:0,   // ëˆ„ì  í™˜ì „ TL
    holdingRevenue:0,   // ì¸ì¦ ëŒ€ê¸° í™€ë”© ìˆ˜ìµ
  },
  trust:1.0,lvs:1.0,carMode:false,autoRecharge:true,
  totalSec:0,selectedFile:null,fileType:'audio',revenueModel:'7-3',
  shareFilter:'all',aiPlatform:'suno',
  myFiles:[],
  currentFileId:null,isPlaying:false,pulseCount:0,
  hbTimer:null,uiTimer:null,lockCountdown:30,
  shuffle:false,loop:false,speed:1,
  engine:'tl',mtype:'all',country:'all',genre:'all',vcat:'all',weather:null,
  vidPulse:0,
  // POC
  poc:{
    index: 1.0,
    history:[],
  },
  // ì´ì˜ì œê¸°
  disputes:[],          // {id, trackId, trackTitle, reason, category, evidence, date, status, daysLeft}
  disputedTracks:{},    // {trackId: true} â€” ì´ì˜ì œê¸° ì¤‘ì¸ íŠ¸ë™
  tlSuspended:false,    // ì´ì˜ì œê¸°ì TL ì •ì§€ ì—¬ë¶€
  // 3ì•„ì›ƒ ì‹œìŠ¤í…œ
  falseDisputeStrikes:0,  // í—ˆìœ„ ì´ì˜ì œê¸° íšŸìˆ˜ (3íšŒ = ì˜êµ¬ ëª°ìˆ˜)
  accountForfeited:false, // ê³„ì • ëª°ìˆ˜ ì—¬ë¶€
  // ì•„í‹°ìŠ¤íŠ¸ ì¸ì¦
  verifiedTracks:[],    // Spotify ì¸ì¦ëœ íŠ¸ë™ ID ëª©ë¡
  sunoVerified:false,   // Suno í”„ë¦¬ë¯¸ì—„ ì¸ì¦ ì—¬ë¶€
};

// =================== AI PLATFORMS ===================
const AI_PLATFORMS={
  suno:{name:'Suno',icon:'ğŸµ',url:'suno.com',genres:['Pop','Electronic','Hip-Hop','R&B','Indie']},
  udio:{name:'Udio',icon:'ğŸ¶',url:'udio.com',genres:['Pop','Ambient','Jazz','Electronic','Experimental']},
  mubert:{name:'Mubert',icon:'ğŸŒŠ',url:'mubert.com',genres:['Ambient','Lo-Fi','Electronic','Meditation','Focus']},
  aiva:{name:'AIVA',icon:'ğŸ»',url:'aiva.ai',genres:['Classical','Cinematic','Orchestral','Piano','Electronic']},
  soundraw:{name:'Soundraw',icon:'ğŸ¸',url:'soundraw.io',genres:['Cinematic','Electronic','Hip-Hop','Pop','Jazz']},
  boomy:{name:'Boomy',icon:'ğŸ¥',url:'boomy.com',genres:['Pop','Hip-Hop','Electronic','Reggaeton','R&B']},
  elevenlabs:{name:'ElevenLabs',icon:'ğŸ—£ï¸',url:'elevenlabs.io',genres:['Voiceover','Podcast','Narration','ASMR']},
  beatoven:{name:'Beatoven',icon:'ğŸ¹',url:'beatoven.ai',genres:['Cinematic','Ambient','Pop','Electronic','Jazz']},
};

// =================== GENRES BY COUNTRY ===================
const GENRES={
  all:['All','Pop','Electronic','Hip-Hop','R&B','Rock','Jazz','Classical','Indie','Chill','Ambient','Lo-Fi'],
  kr:['K-POP','K-Hip-Hop','Trot','Korean Indie','K-R&B','Ballad','OST','K-EDM'],
  jp:['J-POP','City Pop','Anime OST','Enka','Visual Kei','J-Rock','J-Hip-Hop','Shibuya-kei'],
  us:['Pop','Hip-Hop','R&B','Country','Rock','Jazz','Blues','Gospel','EDM','Trap','Phonk','Indie'],
  uk:['Britpop','Grime','UK Garage','Folk','Drum&Bass','Jungle','Shoegaze','Britrock'],
  eu:['Eurodance','Schlager','Flamenco','Opera','French Pop','Italian Pop','Reggae'],
  latin:['Reggaeton','Salsa','Cumbia','Bachata','Bossa Nova','Samba','Latin Pop','Merengue'],
  afr:['Afrobeats','Afropop','Highlife','Kwaito','Amapiano','Makossa'],
  world:['Bollywood','Qawwali','K-Folk','J-Folk','Fado','Celtic','Gospel World','Worldbeat'],
};

// =================== WEATHER MOODS ===================
const WX_MOODS={
  sunny:{label:'ë§‘ìŒ',genres:['Pop','K-POP','J-POP','Reggaeton','Happy Pop'],desc:'ë°ê³  ê²½ì¾Œí•œ ìŒì•…ì„ ì¶”ì²œí•©ë‹ˆë‹¤. ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” K-POPê³¼ Popì´ ì–´ìš¸ë ¤ìš”.'},
  rainy:{label:'ë¹„',genres:['Lo-Fi','Chill','Jazz','Indie','Acoustic'],desc:'ë¹—ì†Œë¦¬ì™€ ì–´ìš¸ë¦¬ëŠ” Lo-Fi, Chill, Jazzë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. ê°ì„±ì ì¸ ì‹œê°„ì„ ë³´ë‚´ì„¸ìš”.'},
  cloudy:{label:'íë¦¼',genres:['Indie','Alternative','Shoegaze','Britpop','Ambient'],desc:'íë¦° ë‚ ì”¨ì— ì–´ìš¸ë¦¬ëŠ” Indieì™€ Alternativeë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.'},
  snowy:{label:'ëˆˆ',genres:['Classical','Ambient','Piano','Acoustic','Ballad'],desc:'ì„¤ê²½ê³¼ ì–´ìš¸ë¦¬ëŠ” í´ë˜ì‹ê³¼ í”¼ì•„ë…¸ ìŒì•…ì„ ì¶”ì²œí•©ë‹ˆë‹¤.'},
  stormy:{label:'í­í’',genres:['Metal','Rock','Electronic','Drum&Bass','Industrial'],desc:'ê°•ë ¬í•œ ì—ë„ˆì§€ì˜ Rockê³¼ Electronicì„ ì¶”ì²œí•©ë‹ˆë‹¤.'},
  night:{label:'ë§‘ì€ ë°¤',genres:['Jazz','R&B','City Pop','Lounge','Neo-Soul'],desc:'ì•¼ê²½ê³¼ í•¨ê»˜í•˜ëŠ” Jazz, R&B, City Popì„ ì¶”ì²œí•©ë‹ˆë‹¤.'},
  hot:{label:'ë”ìœ„',genres:['Reggae','Reggaeton','Tropical','Afrobeats','Cumbia'],desc:'ì‹œì›í•œ ëŠë‚Œì˜ Reggae, Reggaetonì„ ì¶”ì²œí•©ë‹ˆë‹¤.'},
  cold:{label:'ì¶”ìœ„',genres:['Acoustic','Folk','Ballad','Classical','Ambient'],desc:'ë”°ëœ»í•œ Acousticê³¼ Folk ìŒì•…ìœ¼ë¡œ ì¶”ìœ„ë¥¼ ë…¹ì´ì„¸ìš”.'},
};

// =================== SAMPLE DATA ===================
const SAMPLES=[
  {id:'s1',title:'Midnight Vibe',artist:'Synthwave',dur:225,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',pulse:84200,genre:'Electronic',country:'us',type:'audio',fileTL:2000,maxFileTL:2000,authStatus:'verified',authType:'spotify',revenue:4200,holdRevenue:0},
  {id:'s2',title:'Seoul Nights',artist:'K-Pop Studio',dur:189,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3',pulse:98700,genre:'K-POP',country:'kr',type:'audio',fileTL:1500,maxFileTL:1500,authStatus:'pending',authType:null,revenue:0,holdRevenue:3200},
  {id:'s3',title:'Sunset Groove',artist:'Chill Collective',dur:200,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',pulse:42900,genre:'Chill',country:'us',type:'audio',fileTL:800,maxFileTL:1000,authStatus:'review',authType:'suno',revenue:890,holdRevenue:1100},
  {id:'s4',title:'Electric Dreams',artist:'Neon Flow',dur:252,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',pulse:61500,genre:'Electronic',country:'uk',type:'audio',fileTL:3000,maxFileTL:3000,authStatus:'verified',authType:'suno',revenue:7800,holdRevenue:0},
  {id:'s5',title:'Dark Matter',artist:'Underground',dur:310,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3',pulse:33100,genre:'Hip-Hop',country:'us',type:'audio',fileTL:500,maxFileTL:1000},
  {id:'s6',title:'Golden Hour',artist:'Indie Soul',dur:243,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3',pulse:52300,genre:'Indie',country:'us',type:'audio',fileTL:1200,maxFileTL:1200},
];
const RADIO=[
  {id:'r1',name:'K-POP Hits',icon:'ğŸ¤',desc:'ìµœì‹  K-POP ì°¨íŠ¸',url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3',rate:'1.5x'},
  {id:'r2',name:'Electronic',icon:'âš¡',desc:'ì‹ ë‚˜ëŠ” Electronic',url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',rate:'1.2x'},
  {id:'r3',name:'Chill Lounge',icon:'ğŸŒŠ',desc:'ë¦´ë™ì‹± Chill',url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',rate:'1.0x'},
  {id:'r4',name:'Hip-Hop',icon:'ğŸ§',desc:'Underground Hip-Hop',url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3',rate:'1.3x'},
  {id:'r5',name:'Jazz Soul',icon:'ğŸ·',desc:'ê³ ê¸‰ìŠ¤ëŸ¬ìš´ Jazz',url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3',rate:'1.1x'},
  {id:'r6',name:'Lo-Fi Study',icon:'ğŸ“š',desc:'ì§‘ì¤‘ Lo-Fi',url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3',rate:'1.0x'},
];

// =================== UTILS ===================
function $(i){return document.getElementById(i)}
function esc(s){return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]))}
function fmt(n){return Math.floor(n).toLocaleString()}
function fmtT(s){s=Math.floor(s||0);return`${Math.floor(s/60)}:${String(s%60).padStart(2,'0')}`}
function toast(msg,t='i'){const el=document.createElement('div');el.className=`t ${t}`;el.textContent=msg;$('toast-box').prepend(el);setTimeout(()=>el.remove(),3200)}
function openModal(id){$(id).classList.remove('hidden')}
function closeModal(id){$(id).classList.add('hidden')}
document.addEventListener('click',e=>{if(e.target.classList.contains('modal-overlay'))e.target.classList.add('hidden')});

// =================== TABS ===================
function switchTab(name){
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.toggle('active',b.dataset.tab===name));
  document.querySelectorAll('.tab-pane').forEach(p=>p.classList.toggle('active',p.id===`tab-${name}`));
  if(name==='library'){renderGenreChips();renderLibResults();}
  if(name==='shareplace'){renderShare();setTimeout(function(){loadChart('hot',null);},100);}
  if(name==='player'){renderPlaylists();}
}

// =================== BALANCE ===================
function updateBal(){
  // TL ì •ì§€ ìƒíƒœì´ë©´ ì”ê³  ë¹¨ê°„ìƒ‰
  if(S.tlSuspended){
    var nb=$('nb-tl');
    if(nb){nb.style.color='#ff4f4f';nb.title='ì´ì˜ì œê¸°ë¡œ ì¸í•´ TL ì ê¸ˆ';}
  }
  const w=S.wallet;
  [['nb-tl',w.tl],['nb-lo',w.locked],['nb-tlc',w.tlc],
   ['ds-tl',w.tl],['ds-lo',w.locked],['ds-tlc',w.tlc],
   ['lo-display',w.locked],['mine-pending',w.tlc],['lib-tlc',w.tlc],
   ['up-my-tl',w.tl],['frc-bal',w.tl]].forEach(([id,v])=>{
    const el=$(id);if(!el)return;
    el.textContent=v>0&&v<1?v.toFixed(4):fmt(v);
  });
}

// =================== TRUST ===================
function updateTrust(){
  const t=S.trust,l=S.lvs;
  const tn=$('trust-num');if(tn)tn.textContent=t.toFixed(2);
  const lv=$('lvs-val');if(lv)lv.textContent=l.toFixed(2);
  const circ=263.9,offset=circ-(Math.min(t,1.2)/1.2)*circ;
  const fill=$('trust-fill-el');
  if(fill){fill.style.strokeDashoffset=offset.toFixed(1);fill.style.stroke=t>=1.0?'var(--ac)':t>=0.9?'var(--ca)':'var(--da)';}
}
function updateRate(){
  const m=S.trust*S.lvs*(S.carMode?2:1);
  ['rate-big','car-rate-big','np-mult'].forEach(id=>{const el=$(id);if(el)el.textContent=m.toFixed(2)+'x'});
  const nc=$('np-cost');if(nc)nc.textContent=m.toFixed(2);
  const vr=$('vid-tl-rate');if(vr)vr.textContent=m.toFixed(2);
}
setInterval(()=>{
  S.trust=Math.min(1.2,Math.max(0.8,S.trust+(Math.random()-.48)*.04));
  S.lvs=Math.min(1.0,Math.max(0.5,S.lvs+(Math.random()-.46)*.03));
  updateTrust();updateRate();
},5000);

// =================== LOCKED ===================
setInterval(()=>{
  S.lockCountdown--;
  const fill=$('lo-fill'),timer=$('lo-timer');
  if(fill)fill.style.width=(S.lockCountdown/30*100)+'%';
  if(timer)timer.textContent=S.lockCountdown+'s';
  if(S.lockCountdown<=0){
    S.lockCountdown=30;
    if(S.wallet.locked>0){const r=Math.min(S.wallet.locked,50);S.wallet.locked-=r;S.wallet.tl+=r;updateBal();toast(`ğŸ”“ Locked TL í•´ì œ +${r} TL`,'s');}
  }
},1000);

// =================== CAR MODE ===================
function toggleCar(){
  S.carMode=!S.carMode;const v=S.carMode;
  const chk=$('car-chk');if(chk)chk.checked=v;
  const ind=$('car-ind');if(ind){ind.className=`car-ind ${v?'on':'off'}`;ind.textContent=v?'ğŸš— ON':'ğŸš— Off';}
  const hero=$('car-hero');if(hero)hero.classList.toggle('on',v);
  const emoji=$('car-emoji');if(emoji)emoji.textContent=v?'ğŸï¸':'ğŸš—';
  const btn=$('car-main-btn');if(btn)btn.textContent=v?'ğŸ›‘ ë¹„í™œì„±í™”':'ğŸš— Car Mode í™œì„±í™”';
  const badge=$('pb-car');if(badge)badge.classList.toggle('hidden',!v);
  updateRate();toast(v?'ğŸš— Car Mode ON â€” 2ë°° ë³´ìƒ!':'Car Mode OFF',v?'s':'i');
}

// =================== RECHARGE ===================
function doRecharge(){
  const a=Number($('rc-amt').value)||0;
  if(a<=0){toast('ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”','e');return;}
  S.wallet.tl+=a;updateBal();toast(`ğŸ’° ${fmt(a)} TL ì¶©ì „!`,'s');closeModal('recharge-modal');
}
function doRechargeFile(){
  const a=Number($('frc-amt').value)||0;
  if(a<=0){toast('ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”','e');return;}
  if(a>S.wallet.tl){toast('ì”ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤','e');return;}
  const f=S.myFiles.find(x=>x.id===S.currentFileId)||SAMPLES.find(x=>x.id===S.currentFileId);
  if(!f){toast('íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”','e');return;}
  S.wallet.tl-=a;f.fileTL+=a;f.maxFileTL=Math.max(f.maxFileTL||f.fileTL,f.fileTL);
  updateBal();updateFileTLDisplay();toast(`ğŸ’° íŒŒì¼ì— ${fmt(a)} TL ì¶©ì „!`,'s');closeModal('recharge-file-modal');
}
function deduct(cost){
  const f=S.myFiles.find(x=>x.id===S.currentFileId)||SAMPLES.find(x=>x.id===S.currentFileId);
  if(f){
    if(f.fileTL<=0){toast('âš ï¸ íŒŒì¼ TL ì†Œì§„! ì¶©ì „ì´ í•„ìš”í•©ë‹ˆë‹¤','e');stopAll();return false;}
    f.fileTL=Math.max(0,f.fileTL-cost);
    updateFileTLDisplay();
  }
  if(S.wallet.tl<cost){
    if(S.autoRecharge&&S.wallet.tl<2000){S.wallet.tl+=5000;toast('âš¡ ìë™ì¶©ì „ +5,000 TL','i');}
    else{toast('âš ï¸ TL ì”ì•¡ ë¶€ì¡±!','e');stopAll();return false;}
  }
  S.wallet.tl-=cost;S.wallet.locked+=cost*.3;return true;
}
function updateFileTLDisplay(){
  const f=S.myFiles.find(x=>x.id===S.currentFileId)||SAMPLES.find(x=>x.id===S.currentFileId);
  if(!f)return;
  const pct=f.maxFileTL?((f.fileTL/f.maxFileTL)*100).toFixed(1):100;
  ['aud-ftl','vid-ftl','pb-ftl'].forEach(id=>{const el=$(id);if(el)el.textContent=fmt(f.fileTL);});
  ['np-file-tl'].forEach(id=>{const el=$(id);if(el){el.textContent=`íŒŒì¼ TL: ${fmt(f.fileTL)}`;el.classList.remove('hidden');}});
  const aff=$('aud-ftl-fill');if(aff)aff.style.width=pct+'%';
  const vff=$('vid-ftl-fill');if(vff)vff.style.width=pct+'%';
}

// =================== AUDIO ENGINE ===================
const aud=$('aud');
function loadTrack(id,url,title,artist,icon='ğŸµ'){
  stopAll();
  S.currentFileId=id;S.pulseCount=0;
  aud.src=url;aud.load();aud.volume=$('aud-vol')?$('aud-vol').value/100:0.8;aud.playbackRate=S.speed;
  ['np-title','pb-title','aud-title'].forEach(i=>{const el=$(i);if(el)el.textContent=title});
  ['np-artist','pb-artist','aud-artist'].forEach(i=>{const el=$(i);if(el)el.textContent=artist});
  const pb=$('player-bar');if(pb)pb.classList.remove('hidden');
  const ai=$('audio-art-icon');if(ai)ai.textContent=icon;
  updateFileTLDisplay();
  aud.play().then(()=>{setPlaying(true);startTimers();}).catch(()=>toast('ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”','i'));
}
function toggleAudio(){
  if(!S.currentFileId){toast('Libraryì—ì„œ íŠ¸ë™ì„ ì„ íƒí•˜ì„¸ìš”','i');return;}
  if(S.isPlaying){aud.pause();setPlaying(false);clearInterval(S.hbTimer);clearInterval(S.uiTimer);}
  else{aud.play().then(()=>{setPlaying(true);startTimers();}).catch(()=>toast('ì¬ìƒ ì˜¤ë¥˜','e'));}
}
function stopAll(){
  clearInterval(S.hbTimer);clearInterval(S.uiTimer);aud.pause();aud.currentTime=0;setPlaying(false);
  const vd=$('vid-el');if(vd&&!vd.paused)vd.pause();
}
function setPlaying(v){
  S.isPlaying=v;
  ['pb-play-btn','aud-play-btn'].forEach(id=>{const el=$(id);if(el)el.innerHTML=v?'â¸':'â–¶';});
  const eq=$('eq-bars');if(eq)eq.classList.toggle('paused',!v);
}
function seekByClick(e,type){
  const el=e.currentTarget,rect=el.getBoundingClientRect();
  const pct=Math.max(0,Math.min(1,(e.clientX-rect.left)/rect.width));
  if(type==='audio'&&aud.duration)aud.currentTime=pct*aud.duration;
}
function seekByClickBar(e){
  const el=e.currentTarget,rect=el.getBoundingClientRect();
  const pct=Math.max(0,Math.min(1,(e.clientX-rect.left)/rect.width));
  if(aud.duration)aud.currentTime=pct*aud.duration;
}
function seekAudio(e){seekByClick(e,'audio');}
function skipAudio(sec){if(aud.duration)aud.currentTime=Math.max(0,Math.min(aud.duration,aud.currentTime+sec));}
function setAudVol(v){aud.volume=v/100;const el=$('aud-vol-lbl');if(el)el.textContent=v+'%';}
function setSpeed(sp){S.speed=sp;aud.playbackRate=sp;document.querySelectorAll('[id^="speed-"]').forEach(b=>b.style.borderColor='var(--bd)');const id='speed-'+String(sp).replace('.','');const btn=$(id);if(btn)btn.style.borderColor='var(--bd-a)';}
function toggleShuffle(){S.shuffle=!S.shuffle;const b=$('shuf-btn');if(b)b.style.color=S.shuffle?'var(--ac)':'var(--t2)';toast(S.shuffle?'ì…”í”Œ ON':'ì…”í”Œ OFF',S.shuffle?'s':'i');}
function toggleLoop(){S.loop=!S.loop;aud.loop=S.loop;const b=$('loop-btn');if(b)b.style.color=S.loop?'var(--ac)':'var(--t2)';toast(S.loop?'ë°˜ë³µ ON':'ë°˜ë³µ OFF',S.loop?'s':'i');}

function startTimers(){
  S.hbTimer=setInterval(()=>{if(!S.isPlaying)return;S.wallet.tlc+=10*.001*(S.carMode?2:1);updateBal();},10000);
  S.uiTimer=setInterval(()=>{
    if(!S.isPlaying)return;
    const cost=S.trust*S.lvs*(S.carMode?2:1);
    if(!deduct(cost))return;
    S.pulseCount++;S.totalSec++;S.vidPulse++;
    if(aud.duration){
      const p=(aud.currentTime/aud.duration)*100;
      ['np-fill','pb-fill','aud-seek-fill'].forEach(id=>{const el=$(id);if(el)el.style.width=p.toFixed(1)+'%';});
    }
    const e=fmtT(aud.currentTime),d=fmtT(aud.duration||0);
    [['np-cur',e],['np-dur',d],['pb-cur',e],['pb-dur',d],['aud-cur',e],['aud-dur',d]].forEach(([id,v])=>{const el=$(id);if(el)el.textContent=v;});
    const p=fmt(S.pulseCount);
    ['np-pulse','pb-pulse'].forEach(id=>{const el=$(id);if(el)el.textContent=p;});
    const dt=$('ds-time');if(dt)dt.textContent=fmtT(S.totalSec);
    updateBal();updateRate();
  },1000);
}
aud.addEventListener('ended',()=>{setPlaying(false);clearInterval(S.hbTimer);clearInterval(S.uiTimer);toast('ğŸµ ì¬ìƒ ì™„ë£Œ!','s');});

// =================== VIDEO ENGINE ===================
const vid=$('vid-el');
function loadVideo(id,url,title,desc){
  stopAll();S.currentFileId=id;S.vidPulse=0;
  vid.src=url;vid.load();vid.volume=$('vid-vol')?$('vid-vol').value/100:0.8;
  const vt=$('vid-title');if(vt)vt.textContent=title;
  const vd=$('vid-desc');if(vd)vd.textContent=desc||'';
  const ov=$('vid-overlay');if(ov)ov.style.display='flex';
  updateFileTLDisplay();toast('â–¶ ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”','i');
}
function startVideo(){
  const ov=$('vid-overlay');if(ov)ov.style.display='none';
  vid.play().then(()=>startVidTimers()).catch(()=>toast('ì˜ìƒ ì¬ìƒ ì˜¤ë¥˜','e'));
}
let vidTimer=null;
function startVidTimers(){
  vidTimer=setInterval(()=>{
    if(vid.paused)return;
    const cost=S.trust*S.lvs*(S.carMode?2:1);
    if(!deduct(cost))return;
    S.vidPulse++;S.totalSec++;
    const vp=$('vid-pulse');if(vp)vp.textContent=fmt(S.vidPulse);
    updateBal();updateRate();
  },1000);
}
vid.addEventListener('pause',()=>{clearInterval(vidTimer);});
vid.addEventListener('ended',()=>{clearInterval(vidTimer);toast('ğŸ¬ ì˜ìƒ ì¬ìƒ ì™„ë£Œ!','s');});
function setVidVol(v){vid.volume=v/100;const el=$('vid-vol-lbl');if(el)el.textContent=v+'%';}
function setVidSpeed(sp){vid.playbackRate=sp;}
function toggleVidFullscreen(){if(!document.fullscreenElement)vid.requestFullscreen();else document.exitFullscreen();}
function setPlayerType(t){
  $('plytype-audio').className=`btn ${t==='audio'?'btn-primary':'btn-ghost'}`;
  $('plytype-video').className=`btn ${t==='video'?'btn-primary':'btn-ghost'}`;
  $('audio-player-sec').classList.toggle('hidden',t!=='audio');
  $('video-player-sec').classList.toggle('hidden',t!=='video');
}

// =================== PLAYLISTS ===================
function renderPlaylists(){
  const audioItems=SAMPLES.filter(x=>x.type==='audio').concat(S.myFiles.filter(x=>x.type!=='video'));
  const videoItems=SAMPLES.filter(x=>x.type==='video').concat(S.myFiles.filter(x=>x.type==='video'));
  const ap=$('audio-playlist');
  if(ap) ap.innerHTML=audioItems.map(f=>`
    <div class="track-item ${S.currentFileId===f.id&&S.isPlaying?'playing':''}" onclick="loadTrack('${f.id}','${esc(f.url)}','${esc(f.title)}','${esc(f.artist)}')">
      <div class="track-thumb">ğŸµ</div>
      <div class="track-info">
        <div class="track-title">${esc(f.title)}</div>
        <div class="track-meta">${esc(f.artist||'')} Â· ${f.genre||''} Â· ${fmtT(f.dur||0)}</div>
        <div class="file-tl-bar mt-2"><div class="file-tl-fill" style="width:${f.maxFileTL?(f.fileTL/f.maxFileTL*100).toFixed(0):100}%"></div></div>
      </div>
      <div class="track-actions">
        <span class="badge badge-ca">ğŸ’°${fmt(f.fileTL||0)}</span>
        <span class="badge badge-ac">âš¡${fmt(f.pulse||0)}</span>
      </div>
    </div>`).join('');
  const vp=$('video-playlist');
  if(vp&&S.myFiles.filter(x=>x.type==='video').length>0){
    vp.innerHTML=S.myFiles.filter(x=>x.type==='video').map(f=>`
      <div class="track-item" onclick="loadVideo('${f.id}','${esc(f.url)}','${esc(f.title)}','${esc(f.genre||'')}')">
        <div class="track-thumb">ğŸ¬</div>
        <div class="track-info"><div class="track-title">${esc(f.title)}</div><div class="track-meta">${f.genre||''}</div>
          <div class="file-tl-bar mt-2"><div class="file-tl-fill" style="width:${f.maxFileTL?(f.fileTL/f.maxFileTL*100).toFixed(0):100}%"></div></div>
        </div>
        <span class="badge badge-ca">ğŸ’°${fmt(f.fileTL||0)}</span>
      </div>`).join('');
  }else if(vp){vp.innerHTML='<div class="card tc" style="padding:32px"><div style="font-size:36px;margin-bottom:10px">ğŸ¬</div><div>ì—…ë¡œë“œëœ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤</div><button class="btn btn-primary btn-sm mt-4" onclick="switchTab(\'create\')">+ ì—…ë¡œë“œ</button></div>';}
}

// =================== CREATE â€” AI ===================
function selectAI(id){
  S.aiPlatform=id;
  document.querySelectorAll('.ai-card').forEach(c=>c.classList.toggle('sel',c.dataset.ai===id));
  const p=AI_PLATFORMS[id];
  const el=$('ai-platform-name');if(el)el.textContent=p.name;
  const url=$('ai-url');if(url)url.placeholder=`https://${p.url}/...`;
}
function onSongCaptureSelect(file){
  if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    var img=$('song-capture-img');
    if(img){img.src=e.target.result;}
    var preview=$('song-capture-preview');
    if(preview)preview.style.display='block';
    var icon=$('song-capture-icon');if(icon)icon.style.display='none';
    var title=$('song-capture-title');if(title)title.textContent='ìº¡ì²˜ ì—…ë¡œë“œ ì™„ë£Œ';
    var sub=$('song-capture-sub');if(sub)sub.textContent=file.name;
    var zone=$('song-capture-zone');
    if(zone){zone.style.borderColor='var(--su)';zone.style.background='rgba(255,123,0,.05)';}
    // OCR ìƒíƒœ ì—…ë°ì´íŠ¸
    var ocrStatus=$('ocr-status');
    if(ocrStatus)ocrStatus.innerHTML='<span style="color:var(--su)">âœ… ì´ë¯¸ì§€ ì¤€ë¹„ë¨ â€” ì¸ì¦ ë²„íŠ¼ í´ë¦­ ì‹œ AI OCR ë¶„ì„ ì‹œì‘</span>';
  };
  reader.readAsDataURL(file);
}
function onProofCardSelect(file){
  if(!file)return;
  $('proof-card-name').textContent='âœ… '+file.name;
  $('proof-card-zone').style.borderColor='var(--su)';
}
function simulateOCR(songUrl, profileUrl, hasCapture, hasPayment){
  // AI OCR ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œ êµ¬í˜„ ì‹œ Claude Vision API ì‚¬ìš©)
  var results=[];
  var allPass=true;

  // 1. ìŒì› URL ë¶„ì„
  if(songUrl&&songUrl.includes('suno.com')){
    results.push({ok:true, label:'Suno ìŒì› URL í™•ì¸', detail:'suno.com ë„ë©”ì¸ ì¸ì‹ë¨'});
  } else {
    results.push({ok:false, label:'ìŒì› URL ì˜¤ë¥˜', detail:'Suno URL í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤'});
    allPass=false;
  }

  // 2. í”„ë¡œí•„ URL ë¶„ì„
  if(profileUrl&&profileUrl.includes('suno.com')){
    results.push({ok:true, label:'í”„ë¡œí•„ URL í™•ì¸', detail:'ê³„ì • ì†Œìœ ì í™•ì¸ ê°€ëŠ¥'});
  } else {
    results.push({ok:false, label:'í”„ë¡œí•„ URL ëˆ„ë½', detail:'Suno í”„ë¡œí•„ URLì„ ì…ë ¥í•˜ì„¸ìš”'});
    allPass=false;
  }

  // 3. ìº¡ì²˜ OCR (ì‹œë®¬ë ˆì´ì…˜)
  if(hasCapture){
    var month=$('ai-month').value;
    if(month){
      var d=new Date(month+'-01');
      var label=d.getFullYear()+'ë…„ '+(d.getMonth()+1)+'ì›”';
      results.push({ok:true, label:'OCR: ìƒì„± ë‚ ì§œ ì¸ì‹', detail:label+' ìƒì„± í™•ì¸ (AI íŒë…)'});
      results.push({ok:true, label:'OCR: ê³¡ ì œëª© ë§¤ì¹­', detail:'ìº¡ì²˜ í™”ë©´ê³¼ URL ì¼ì¹˜ í™•ì¸'});
    } else {
      results.push({ok:true, label:'ìº¡ì²˜ ì´ë¯¸ì§€ í™•ì¸ë¨', detail:'ë‚ ì§œ ìë™ ì¶”ì¶œ ì¤‘ â€” ìƒì„± ì›”ì„ ìˆ˜ë™ ì…ë ¥í•´ ì£¼ì„¸ìš”'});
    }
  } else {
    results.push({ok:false, label:'ìŒì› ìƒì„± ìº¡ì²˜ ëˆ„ë½', detail:'Suno ìŒì› í˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ·ì´ í•„ìš”í•©ë‹ˆë‹¤'});
    allPass=false;
  }

  // 4. ê²°ì œ ì¦ë¹™
  if(hasPayment){
    var planVal=$('ai-plan').value;
    results.push({ok:true, label:'OCR: ê²°ì œ ì¦ë¹™ í™•ì¸', detail:(planVal||'ìœ ë£Œ')+'í”Œëœ ê²°ì œ ê¸°ë¡ ì¸ì‹ë¨'});
    results.push({ok:true, label:'ê¸°ê°„ ë§¤ì¹­', detail:'ìŒì› ìƒì„± ì›” â‰¤ ê²°ì œ ê¸°ê°„ â€” ìˆ˜ìµ ê°€ëŠ¥ âœ…'});
  } else {
    results.push({ok:false, label:'ê²°ì œ ì¦ë¹™ ëˆ„ë½', detail:'ê²°ì œ ì˜ìˆ˜ì¦ ë˜ëŠ” ì¹´ë“œ ìº¡ì²˜ë¥¼ ì²¨ë¶€í•˜ì„¸ìš”'});
    allPass=false;
  }

  return {results:results, pass:allPass};
}
function aiVerify(){
  var url=$('ai-url').value.trim();
  var profileUrl=$('ai-profile-url')?$('ai-profile-url').value.trim():'';
  var plan=$('ai-plan').value;
  var hasCapture=$('song-capture-input').files.length>0;
  var hasImg=$('proof-img-input').files.length>0;
  var hasCard=$('proof-card-input')?$('proof-card-input').files.length>0:false;
  var hasEmail=$('google-receipt-email').value.trim();
  var hasDoc=$('proof-doc-input').files.length>0;
  var hasPayment=hasImg||hasCard||hasEmail||hasDoc;

  if(!url){toast('ìŒì› URLì„ ì…ë ¥í•˜ì„¸ìš”','e');return;}
  if(!profileUrl){toast('ë‚´ Suno í”„ë¡œí•„ URLì„ ì…ë ¥í•˜ì„¸ìš”','e');return;}
  if(!hasCapture){toast('ìŒì› ìƒì„± í™”ë©´ ìº¡ì²˜ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”','e');return;}
  if(!hasPayment){toast('êµ¬ë… ê²°ì œ ì¦ë¹™ì„ í•˜ë‚˜ ì´ìƒ ì²¨ë¶€í•˜ì„¸ìš”','e');return;}

  // OCR ë¶„ì„ ì‹œì‘
  var ocrStatus=$('ocr-status');
  if(ocrStatus)ocrStatus.innerHTML='<span style="color:var(--pu);animation:pulse 1s infinite">ğŸ” AI OCR ë¶„ì„ ì¤‘...</span>';
  $('ai-loading').classList.remove('hidden');
  $('ai-verify-btn').disabled=true;

  setTimeout(function(){
    // OCR ê²°ê³¼
    var ocrRes=simulateOCR(url, profileUrl, hasCapture, hasPayment);
    var box=$('ocr-result-box');
    var list=$('ocr-result-list');
    if(box&&list){
      box.style.display='block';
      box.style.background=ocrRes.pass?'rgba(0,245,160,.05)':'rgba(255,79,79,.05)';
      box.style.border='1px solid '+(ocrRes.pass?'rgba(0,245,160,.2)':'rgba(255,79,79,.2)');
      list.innerHTML=ocrRes.results.map(function(r){
        return '<div class="fb" style="font-size:12px;padding:5px 8px;border-radius:var(--rs);background:rgba(255,255,255,.03)">'
          +'<span>'+(r.ok?'âœ… ':'âŒ ')+r.label+'<span style="color:var(--t2);margin-left:6px">'+r.detail+'</span></span>'
          +'</div>';
      }).join('');
    }

    $('ai-loading').classList.add('hidden');
    $('ai-verify-btn').disabled=false;

    if(!ocrRes.pass){
      if(ocrStatus)ocrStatus.innerHTML='<span style="color:#ff4f4f">âŒ ì¸ì¦ ì‹¤íŒ¨ â€” ìœ„ í•­ëª©ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”</span>';
      return;
    }

    // ì¸ì¦ í†µê³¼ â†’ ìŒì› ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
    if(ocrStatus)ocrStatus.innerHTML='<span style="color:var(--ac)">âœ… AI OCR ì¸ì¦ í†µê³¼</span>';
    var p=AI_PLATFORMS[S.aiPlatform]||{name:'AI',icon:'ğŸµ'};
    $('ai-prev-icon').textContent=p.icon||'ğŸµ';
    $('ai-prev-title').textContent='Suno ìŒì› ('+url.split('/').pop().slice(0,12)+'...)';
    $('ai-prev-artist').textContent='ë‚´ Suno ê³„ì • Â· '+( $('ai-month').value||'ë‚ ì§œ ì¸ì‹ë¨');
    $('ai-prev-dur').textContent='3:00 (ì˜ˆìƒ)';
    $('ai-prev-plat').textContent=p.name||'Suno';
    $('ai-preview-box').classList.remove('hidden');
    $('ai-error-box').classList.add('hidden');
    toast('âœ… Suno êµ¬ë… ì¸ì¦ ì™„ë£Œ! ìŒì›ì„ TL íŒŒì¼ë¡œ ë³€í™˜í•˜ì„¸ìš”','s');
  }, 2200);
}

function cancelAIPreview(){$('ai-preview-box').classList.add('hidden');$('ai-url').value='';}
function convertAI(){
  const p=AI_PLATFORMS[S.aiPlatform];
  const songUrl=$('ai-url').value.trim();
  const month=$('ai-month').value;
  const f={
    id:'ai_'+Date.now(),
    title:$('ai-prev-title').textContent,
    artist:$('ai-prev-artist').textContent,
    dur:210,url:'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3',
    pulse:0,genre:p.genres[0],country:'us',type:'audio',
    model:S.revenueModel,source:S.aiPlatform,
    fileTL:1000,maxFileTL:1000,createdAt:Date.now(),
    authStatus:'pending',      // ì¦ë¹™ ì²¨ë¶€ë¨ â†’ ì‹¬ì‚¬ ëŒ€ê¸°
    authType:S.aiPlatform,
    authProof:{url:songUrl, month:month, ocrPassed:true},
    shared:false,
    revenue:0,holdRevenue:0
  };
  S.myFiles.unshift(f);S.wallet.tl+=1000;updateBal();
  addPOC(0.1,'AI ìŒì› ì¸ì¦ ì‹ ì²­: '+p.name);
  cancelAIPreview();
  if($('ai-url'))$('ai-url').value='';
  if($('ai-profile-url'))$('ai-profile-url').value='';
  if($('ai-plan'))$('ai-plan').value='';
  if($('ai-month'))$('ai-month').value='';
  if($('song-capture-preview'))$('song-capture-preview').style.display='none';
  if($('ocr-result-box'))$('ocr-result-box').style.display='none';
  switchTab('library');
  toast('âœ… ì¸ì¦ ì‹ ì²­ ì™„ë£Œ! ì‹¬ì‚¬ í›„ ê³µìœ  ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤ (ìµœëŒ€ 30ì¼)','s');
  setTimeout(function(){ toast('ğŸ“‹ Libraryì—ì„œ ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”','i'); },2000);
}
function onProofImgDrop(e){e.preventDefault();e.currentTarget.style.borderColor='var(--bd)';onProofImgSelect(e.dataTransfer.files[0]);}
function onProofImgSelect(f){if(!f)return;$('proof-img-name').textContent='âœ“ '+f.name;}
function onProofDocSelect(f){if(!f)return;$('proof-doc-name').textContent='âœ“ '+f.name;}

// =================== CREATE â€” UPLOAD ===================
function selectType(t){
  S.fileType=t;
  $('type-audio').style.borderColor=t==='audio'?'var(--bd-a)':'var(--bd)';$('type-audio').style.background=t==='audio'?'var(--ac-d)':'var(--card)';
  $('type-video').style.borderColor=t==='video'?'rgba(123,97,255,.4)':'var(--bd)';$('type-video').style.background=t==='video'?'var(--pu-d)':'var(--card)';
}
function selectModel(m){
  S.revenueModel=m;
  $('m73').style.borderColor=m==='7-3'?'var(--bd-a)':'var(--bd)';$('m73').style.background=m==='7-3'?'var(--ac-d)':'var(--card)';
  $('m55').style.borderColor=m==='5-5'?'rgba(123,97,255,.4)':'var(--bd)';$('m55').style.background=m==='5-5'?'var(--pu-d)':'var(--card)';
}
function onDrop(e){e.preventDefault();e.currentTarget.classList.remove('over');onFileSelect(e.dataTransfer.files[0]);}
function onFileSelect(f){
  if(!f)return;
  if(f.size>500*1024*1024){toast('500MB ì´ˆê³¼','e');return;}
  S.selectedFile=f;
  const isVid=f.type.startsWith('video/');
  if(isVid)selectType('video');
  $('fp-icon').textContent=isVid?'ğŸ¬':'ğŸµ';
  $('fp-name').textContent=f.name;$('fp-size').textContent=(f.size/1024/1024).toFixed(1)+' MB';
  $('file-prev').classList.remove('hidden');$('upload-zone').classList.add('hidden');
  if(!$('up-title').value)$('up-title').value=f.name.replace(/\.[^/.]+$/,'');
  $('up-btn').disabled=false;$('up-btn').textContent='íŠ¸ë™ ì—…ë¡œë“œí•˜ê¸°';
}
function removeFile(){S.selectedFile=null;$('file-prev').classList.add('hidden');$('upload-zone').classList.remove('hidden');$('up-btn').disabled=true;$('up-btn').textContent='íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”';$('file-input').value='';}
function doUpload(){
  if(!S.selectedFile)return;
  const title=$('up-title').value.trim();
  if(!title){toast('ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”','e');return;}
  const fileTL=Number($('up-file-tl').value)||1000;
  if(fileTL>S.wallet.tl){toast('ì”ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤','e');return;}
  const isVid=S.selectedFile.type.startsWith('video/');
  const f={
    id:'local_'+Date.now(),title,artist:'ë‚˜',
    dur:0,url:URL.createObjectURL(S.selectedFile),
    pulse:0,genre:$('up-cat').value.split('-').pop()||'ê¸°íƒ€',
    country:'kr',type:isVid?'video':'audio',
    model:S.revenueModel,source:'upload',
    fileTL,maxFileTL:fileTL,createdAt:Date.now(),
    authStatus:'unverified',   // ì—…ë¡œë“œ ì§í›„ â€” ì¸ì¦ í•„ìš”
    authType:null,
    shared:false,              // ì¸ì¦ ì „ ê³µìœ  ë¶ˆê°€
    revenue:0,holdRevenue:0
  };
  S.myFiles.unshift(f);S.wallet.tl-=fileTL;updateBal();removeFile();
  switchTab('library');
  toast('ğŸ“¤ ì—…ë¡œë“œ ì™„ë£Œ! ìˆ˜ìµ ë¶„ë°°ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ ì¸ì¦ì„ ì‹ ì²­í•˜ì„¸ìš”','i');
  setTimeout(function(){ toast('ğŸ’¡ Library â†’ ë‚´ íŒŒì¼ â†’ ì¸ì¦ ì‹ ì²­ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¦ë¹™ì„ ì²¨ë¶€í•˜ì„¸ìš”','i'); },2000);
}

// =================== LIBRARY ===================
function setEngine(e){
  S.engine=e;
  $('eng-tl-btn').className=`btn btn-sm ${e==='tl'?'btn-primary':'btn-ghost'}`;$('eng-tl-btn').style.cssText=e==='tl'?'background:var(--ac);color:#060610;border-radius:var(--rf);font-family:"Syne",sans-serif;font-weight:700;cursor:pointer;padding:6px 14px;font-size:12px':'';
  $('eng-sp-btn').className=`btn btn-sm ${e==='spotify'?'btn-sp':'btn-ghost'}`;
  $('tl-filters').classList.toggle('hidden',e!=='tl');$('sp-filters').classList.toggle('hidden',e!=='spotify');
  $('lib-result-title').textContent=e==='tl'?'TimeLink íŠ¸ë™':'Spotify ê²€ìƒ‰';
  renderLibResults();
}
function setMtype(t){
  S.mtype=t;S.genre='all';
  document.querySelectorAll('[data-mtype]').forEach(c=>c.classList.toggle('active',c.dataset.mtype===t));
  $('music-filters').classList.toggle('hidden',t==='video');
  $('video-filters').classList.toggle('hidden',t==='audio');
  if(t!=='video')renderGenreChips();
  renderLibResults();
}
function setCountry(c){S.country=c;document.querySelectorAll('[data-country]').forEach(x=>x.classList.toggle('active',x.dataset.country===c));renderGenreChips();renderLibResults();}
function renderGenreChips(){
  const el=$('genre-chips');if(!el)return;
  const gs=GENRES[S.country]||GENRES.all;
  el.innerHTML=gs.map(g=>`<span class="chip ${S.genre===g||S.genre==='all'&&g==='All'?'active':''}" onclick="setGenre('${g}')">${g}</span>`).join('');
}
function setGenre(g){S.genre=g;renderGenreChips();renderLibResults();}
function setVcat(v){S.vcat=v;document.querySelectorAll('[data-vcat]').forEach(c=>c.classList.toggle('active',c.dataset.vcat===v));renderLibResults();}
function setWeather(wx){
  S.weather=wx;
  document.querySelectorAll('.wx-card').forEach(c=>c.classList.toggle('sel',c.dataset.wx===wx));
  const m=WX_MOODS[wx];
  const res=$('wx-ai-result');
  if(res&&m){res.classList.remove('hidden');res.innerHTML=`<strong>ğŸ¤– AI ì¶”ì²œ: ${m.label}</strong><br>${m.desc}<br><strong>ì¶”ì²œ ì¥ë¥´:</strong> ${m.genres.join(', ')}`;
    m.genres.forEach(g=>{if(S.genre==='all'||S.genre===g)return;});
    if(m.genres.length)setGenre(m.genres[0]);
  }
}
function doSearch(){
  const q=$('lib-search').value.trim();
  renderLibResults(q);
}
function renderLibResults(query=''){
  const el=$('lib-results');if(!el)return;
  if(S.engine==='spotify'){
    el.innerHTML=`<div class="card card-sp"><div class="fb"><div><div style="font-weight:800;font-size:16px;margin-bottom:4px">ğŸµ Spotify ê²€ìƒ‰ ê²°ê³¼</div><div style="font-size:13px;color:var(--t2)">"${esc(query||'ì „ì²´')}"</div></div><span class="badge badge-sp">Spotify</span></div><div class="divider"></div>`+
      SAMPLES.slice(0,4).map(t=>`<div class="track-item"><div class="track-thumb">ğŸµ</div><div class="track-info"><div class="track-title">${esc(t.title)} <span class="badge badge-sp" style="font-size:10px">Spotify</span></div><div class="track-meta">${esc(t.artist)} Â· ${fmtT(30)} ë¯¸ë¦¬ë³´ê¸°</div></div><div style="display:flex;gap:6px"><button class="btn btn-sp btn-sm" onclick="loadTrack('${t.id}','${t.url}','${esc(t.title)}','${esc(t.artist)}')">â–¶ ì¬ìƒ</button><button class="btn btn-sm" style="background:rgba(0,245,160,.12);color:var(--ac);border:1px solid rgba(0,245,160,.25);font-size:11px;font-weight:700;padding:4px 8px;border-radius:var(--rf);cursor:pointer;font-family:'Syne',sans-serif" onclick="claimSpotifyAuth('${t.id}','${esc(t.title)}')">âœ… ë‚´ ê³¡</button></div></div>`).join('')+'</div>';
    return;
  }
  const all=[...SAMPLES,...S.myFiles];
  let data=all.filter(t=>{
    if(S.mtype==='audio'&&t.type==='video')return false;
    if(S.mtype==='video'&&t.type!=='video')return false;
    if(S.country!=='all'&&t.country!==S.country)return false;
    if(S.genre!=='all'&&S.genre!=='All'&&t.genre!==S.genre)return false;
    if(query){const q=query.toLowerCase();if(!t.title.toLowerCase().includes(q)&&!((t.artist||'').toLowerCase().includes(q))&&!(t.genre||'').toLowerCase().includes(q))return false;}
    return true;
  });
  const lc=$('lib-cnt'),lp=$('lib-pulse');
  if(lc)lc.textContent=S.myFiles.length;
  if(lp)lp.textContent=fmt(S.myFiles.reduce((a,f)=>a+(f.pulse||0),0));
  if(!data.length){el.innerHTML='<div class="card tc" style="padding:40px"><div style="font-size:40px;margin-bottom:12px">ğŸ”</div><div>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div></div>';return;}
  el.innerHTML=data.map(f=>`
    <div class="track-item" onclick="${f.type==='video'?`switchTab('player');setPlayerType('video');loadVideo('${f.id}','${esc(f.url)}','${esc(f.title)}','')`:`loadTrack('${f.id}','${esc(f.url)}','${esc(f.title)}','${esc(f.artist||'')}')`}">
      <div class="track-thumb">${f.type==='video'?'ğŸ¬':'ğŸµ'}</div>
      <div class="track-info">
        <div class="track-title">${esc(f.title)}${f.source&&f.source!=='upload'?`<span class="badge badge-ai" style="font-size:10px;margin-left:6px">${esc(f.source)}</span>`:''}</div>
        <div class="track-meta">${esc(f.artist||'')} Â· ${f.genre||''} Â· ${fmtT(f.dur||0)}</div>
        <div style="display:flex;align-items:center;gap:5px;margin-top:4px">${authBadge(f)}${f.holdRevenue?'<span style="font-size:10px;color:var(--ca)">â¸ '+fmt(f.holdRevenue)+' TL í™€ë”©</span>':f.revenue?'<span style="font-size:10px;color:var(--ac)">+'+fmt(f.revenue)+' TL</span>':''}</div>
        <div class="file-tl-bar mt-2"><div class="file-tl-fill" style="width:${f.maxFileTL?(f.fileTL/f.maxFileTL*100).toFixed(0):100}%"></div></div>
      </div>
      <div class="track-actions">
        <span class="badge badge-ca">ğŸ’°${fmt(f.fileTL||0)}</span>
        <span style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--ac)">âš¡${fmt(f.pulse||0)}</span>
        ${libShareBtn(f)}
        ${libApproveBtn(f)}
      </div>
    </div>`).join('');
}

// =================== HOT PULSE ===================
function renderHotPulse(){
  const el=$('hot-pulse');if(!el)return;
  el.innerHTML=[...SAMPLES].sort((a,b)=>b.pulse-a.pulse).map(t=>`
    <div class="track-item" onclick="loadTrack('${t.id}','${t.url}','${esc(t.title)}','${esc(t.artist)}')">
      <div class="track-thumb">ğŸµ</div>
      <div class="track-info"><div class="track-title">${esc(t.title)}</div><div class="track-meta">${esc(t.artist)} Â· ${t.genre} Â· ${fmtT(t.dur)}</div></div>
      <div style="display:flex;align-items:center;gap:8px"><span style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--ac)">âš¡${fmt(t.pulse)}</span><span class="badge badge-ca">ğŸ’°${fmt(t.fileTL)}</span></div>
    </div>`).join('');
}

// =================== SHARE ===================


// =================== POC & AUTH ===================

function authBadge(f){
  var s=f.authStatus||'none';
  if(s==='verified'){
    var type=f.authType==='spotify'?'ğŸµ Spotify ì¸ì¦':f.authType==='suno'?'ğŸ¤– Suno ì¸ì¦':'âœ… ì¸ì¦ë¨';
    return '<span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:4px;background:rgba(0,245,160,.15);color:#00f5a0;border:1px solid rgba(0,245,160,.25)">'+type+'</span>';
  }
  if(s==='pending') return '<span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:4px;background:rgba(245,158,11,.15);color:#f59e0b;border:1px solid rgba(245,158,11,.25)">â³ ì¸ì¦ ëŒ€ê¸°</span>';
  if(s==='review') return '<span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:4px;background:rgba(123,97,255,.15);color:#7b61ff;border:1px solid rgba(123,97,255,.25)">ğŸ” ê²€í†  ì¤‘</span>';
  return '<span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:4px;background:rgba(255,255,255,.06);color:var(--t2);border:1px solid var(--bd)">ë¯¸ì¸ì¦</span>';
}

function claimSpotifyAuth(trackId, spotifyTitle){
  // Spotifyì—ì„œ ë‚´ ê³¡ ì¸ì¦
  var all=[...SAMPLES,...S.myFiles];
  var t=all.find(function(x){return x.id===trackId;});
  if(!t){toast('íŠ¸ë™ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤','w');return;}
  t.authStatus='review';
  t.authType='spotify';
  addPOC('+0.3','Spotify ì•„í‹°ìŠ¤íŠ¸ ì¸ì¦ ì‹ ì²­: '+spotifyTitle);
  toast('ğŸµ Spotify ì¸ì¦ ì‹ ì²­ ì™„ë£Œ! ê²€í†  í›„ ìˆ˜ìµì´ í•´ì œë©ë‹ˆë‹¤','s');
  renderLibResults();
  renderShare();
}

function verifySuno(fileId){
  // Create íƒ­ì—ì„œ aiVerify()ë¥¼ í†µí•´ ê°œë³„ ìŒì› ë‹¨ìœ„ë¡œ ì¸ì¦ë¨
  // ì´ í•¨ìˆ˜ëŠ” ì¸ì¦ ì™„ë£Œ í›„ íŒŒì¼ ìƒíƒœ ì—…ë°ì´íŠ¸ìš©
  var f=S.myFiles.find(function(x){return x.id===fileId;});
  if(f){
    f.authStatus='review'; // OCR í†µê³¼ â†’ ìµœì¢… ê²€í† 
    f.authType='suno';
  }
  addPOC(0.2,'Suno ìŒì› OCR ì¸ì¦ í†µê³¼');
  toast('ğŸ¤– Suno ì¸ì¦ ê²€í†  ì¤‘ â€” í™•ì¸ í›„ ìˆ˜ìµì´ í™œì„±í™”ë©ë‹ˆë‹¤','s');
  updatePOCUI();renderLibResults();
}

function addPOC(delta, reason){
  var val=parseFloat(delta);
  S.poc.history.unshift({delta:val,reason:reason,time:new Date().toLocaleString()});
  S.poc.index=Math.max(-5,Math.min(10, S.poc.index+val));
  updatePOCUI();
}

function updatePOCUI(){
  var v=S.poc.index;
  var el=$('poc-val');if(el)el.textContent=v.toFixed(1);
  var ring=$('poc-ring');
  if(ring){
    // -5 ~ 10 ë²”ìœ„ë¥¼ 0~213.6 ìœ¼ë¡œ ë§¤í•‘
    var pct=Math.max(0,Math.min(1,(v+5)/15));
    ring.setAttribute('stroke-dashoffset',(213.6-(pct*213.6)).toFixed(1));
    ring.setAttribute('stroke',v<0?'#ff4f4f':v<1?'#f59e0b':'url(#pocGrad)');
  }
  var grade=$('poc-grade');
  if(grade){
    if(v>=3) grade.textContent='ğŸŸ¢ ìš°ìˆ˜';
    else if(v>=1) grade.textContent='ğŸŸ¢ ì–‘í˜¸';
    else if(v>=0) grade.textContent='ğŸŸ¡ ë³´í†µ';
    else if(v>=-1) grade.textContent='ğŸŸ  ì£¼ì˜';
    else grade.textContent='ğŸ”´ ìœ„í—˜ â€” ì±„êµ´ ì¤‘ë‹¨';
  }
  var factors=$('poc-factors');
  if(factors&&S.poc.history.length){
    factors.innerHTML=S.poc.history.slice(0,5).map(function(h){
      var plus=h.delta>=0;
      return '<div class="fb" style="font-size:12px;padding:6px 10px;background:'+
        (plus?'rgba(0,245,160,.06)':'rgba(255,79,79,.06)')+
        ';border-radius:var(--rs)"><span>'+h.reason+'</span>'+
        '<span style="color:'+(plus?'var(--ac)':'#ff4f4f')+'font-weight:700">'+(plus?'+':'')+h.delta.toFixed(1)+'</span></div>';
    }).join('');
  }
}

function updateWalletUI(){
  var w=S.wallet;
  var wTl=$('w-tl'); if(wTl) wTl.textContent=fmt(w.tl);
  var wTlc=$('w-tlc'); if(wTlc) wTlc.textContent=w.tlc.toFixed(4);
  var wEarned=$('w-earned'); if(wEarned) wEarned.textContent=fmt(w.totalEarned)+' TL';
  var wHold=$('w-holding'); if(wHold) wHold.textContent=fmt(w.holdingRevenue)+' TL';
  var wExch=$('w-exchanged'); if(wExch) wExch.textContent=fmt(w.totalExchanged)+' TL';
  // í™˜ì „ ê°€ëŠ¥ëŸ‰ = (ì†Œë¹„ TL - í™˜ì „ TL) * 50%
  var exchangeable=Math.max(0, Math.floor((w.totalSpent - w.totalExchanged)*0.5));
  var wEx=$('w-exchangeable'); if(wEx) wEx.textContent=fmt(exchangeable)+' TL';
  var exAvail=$('exch-available'); if(exAvail) exAvail.textContent=fmt(exchangeable)+' TL';
}

function requestExchange(){
  var amt=parseInt($('exch-amount')&&$('exch-amount').value||0);
  var acct=$('exch-account')&&$('exch-account').value||'';
  var exchangeable=Math.max(0,Math.floor((S.wallet.totalSpent-S.wallet.totalExchanged)*0.5));
  if(!amt||amt<100){toast('ìµœì†Œ 100 TL ì´ìƒ ì…ë ¥í•˜ì„¸ìš”','w');return;}
  if(amt>exchangeable){toast('í™˜ì „ ê°€ëŠ¥ëŸ‰('+fmt(exchangeable)+' TL)ì„ ì´ˆê³¼í•©ë‹ˆë‹¤','w');return;}
  if(!acct){toast('ì…ê¸ˆ ê³„ì¢Œë¥¼ ì…ë ¥í•˜ì„¸ìš”','w');return;}
  S.wallet.totalExchanged+=amt;
  S.wallet.tl=Math.max(0,S.wallet.tl-amt);
  updateBal();updateWalletUI();
  addPOC('+0.1','í™˜ì „ ìš”ì²­ ì™„ë£Œ '+fmt(amt)+' TL');
  closeModal('exchange-modal');
  toast('ğŸ’± í™˜ì „ ìš”ì²­ ì™„ë£Œ! '+fmt(amt)+' TL Â· 3~5 ì˜ì—…ì¼ ì²˜ë¦¬','s');
}

function filterHistory(type, btn){
  document.querySelectorAll('#tab-wallet .btn-ghost').forEach(function(b){b.style.background='';b.style.color='';});
  if(btn){btn.style.background='var(--ac)';btn.style.color='#060610';}
  // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ê±°ë˜ ë‚´ì—­ í•„í„°ë§
  toast(type==='all'?'ì „ì²´ ë‚´ì—­':type==='earn'?'ìˆ˜ìµ ë‚´ì—­':type==='spend'?'ì†Œë¹„ ë‚´ì—­':'í™˜ì „ ë‚´ì—­','i');
}

// switchTab ì‹œ wallet ì—…ë°ì´íŠ¸
var _origSwitchTab = switchTab;
switchTab = function(name){
  _origSwitchTab(name);
  if(name==='wallet'){updateWalletUI();updatePOCUI();renderDisputeHistory();checkTLSuspended();var banner=$('tl-suspended-banner');if(banner)banner.style.display=S.tlSuspended?'block':'none';var badge=$('dispute-count-badge');if(badge)badge.textContent=S.disputes.length+'ê±´';}
};


// =================== ì´ì˜ì œê¸° ì‹œìŠ¤í…œ ===================

var _disputeTargetId = '';
var _disputeTargetTitle = '';

function updateStrikeIndicator(){
  var dots=$('strike-dots');
  var label=$('strike-label');
  var n=S.falseDisputeStrikes;
  if(dots){
    dots.innerHTML=[0,1,2].map(function(i){
      var filled=i<n;
      var color=n===2&&i===1?'#ff4f4f':n>=1&&i===0?'#ff4f4f':'var(--bd)';
      return '<div style="width:18px;height:18px;border-radius:50%;border:2px solid '+(filled?color:'var(--bd)')+';background:'+(filled?color:'transparent')+';display:flex;align-items:center;justify-content:center;font-size:9px">'+(filled?'âœ•':'')+'</div>';
    }).join('');
  }
  if(label){
    label.textContent=n+' / 3';
    label.style.color=n===0?'var(--t2)':n===1?'var(--ca)':n===2?'#ff6b6b':'#ff4f4f';
  }
}

function recordFalseDispute(disputeId){
  // í—ˆìœ„ ì´ì˜ì œê¸° íŒì • ì²˜ë¦¬
  S.falseDisputeStrikes++;
  addPOC(-2.0, 'í—ˆìœ„ ì´ì˜ì œê¸° íŒì • ('+S.falseDisputeStrikes+'/3)');

  var d=S.disputes.find(function(x){return x.id===disputeId;});
  if(d){
    d.status='resolved_lose';
    d.result='í—ˆìœ„ ì´ì˜ì œê¸° íŒì • â€” ìŠ¤íŠ¸ë¼ì´í¬ '+S.falseDisputeStrikes+'/3';
  }

  // í•´ë‹¹ íŠ¸ë™ ë¶„ìŸ í•´ì œ
  if(d) delete S.disputedTracks[d.trackId];
  S.tlSuspended=false;
  S.wallet.locked=0;
  updateBal();renderShare();renderDisputeHistory();

  if(S.falseDisputeStrikes>=3){
    // 3ì•„ì›ƒ â€” ê³„ì • ëª°ìˆ˜
    forfeitAccount();
  } else {
    var remaining=3-S.falseDisputeStrikes;
    toast('âš ï¸ í—ˆìœ„ ì´ì˜ì œê¸° íŒì • â€” ìŠ¤íŠ¸ë¼ì´í¬ '+S.falseDisputeStrikes+'/3 (ê²½ê³  '+remaining+'íšŒ ë‚¨ìŒ)','w');
    setTimeout(function(){
      toast('TL ì ê¸ˆì´ í•´ì œëìœ¼ë‚˜ POC ì§€ìˆ˜ -2.0 ê°ì‚°ë©ë‹ˆë‹¤','i');
    },1500);
  }
}

function forfeitAccount(){
  S.accountForfeited=true;
  var forfeitedTL=S.wallet.tl;
  var forfeitedTLC=S.wallet.tlc;
  S.wallet.tl=0;
  S.wallet.tlc=0;
  S.wallet.locked=0;
  S.tlSuspended=true;
  updateBal();updateWalletUI();

  // ëª°ìˆ˜ ë°°ë„ˆ í‘œì‹œ
  var banner=$('tl-suspended-banner');
  if(banner){
    banner.style.background='rgba(255,0,0,.1)';
    banner.style.borderColor='rgba(255,0,0,.4)';
    banner.innerHTML='<div style="display:flex;align-items:center;gap:10px">'
      +'<div style="font-size:28px">â›”</div>'
      +'<div style="flex:1">'
      +'<div style="font-weight:800;color:#ff4f4f;font-size:15px">ê³„ì • ì˜êµ¬ ëª°ìˆ˜</div>'
      +'<div style="font-size:12px;color:var(--t2);margin-top:4px;line-height:1.6">'
      +'í—ˆìœ„ ì´ì˜ì œê¸° 3íšŒ ì ë°œ â€” ë³´ìœ  TL '+fmt(forfeitedTL)+' Â· TLC '+forfeitedTLC.toFixed(4)+' ì „ì•¡ ëª°ìˆ˜<br>'
      +'ì´ ê³„ì •ì€ ë” ì´ìƒ TimeLink ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
      +'</div>'
      +'</div>'
      +'</div>';
    banner.style.display='block';
  }

  // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
  document.querySelectorAll('.tab-btn').forEach(function(b){
    if(b.dataset.tab!=='wallet'){b.style.opacity='.3';b.style.pointerEvents='none';}
  });

  toast('â›” 3ì•„ì›ƒ â€” ê³„ì •ì´ ì˜êµ¬ ëª°ìˆ˜ëìŠµë‹ˆë‹¤','e');
  setTimeout(function(){ switchTab('wallet'); },800);
}

function openDisputeModal(trackId, trackTitle){
  if(S.accountForfeited){
    toast('â›” ê³„ì •ì´ ëª°ìˆ˜ëìŠµë‹ˆë‹¤. ì´ì˜ì œê¸°ë¥¼ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤','e');
    return;
  }
  if(S.tlSuspended){
    toast('í˜„ì¬ ì´ì˜ì œê¸°ë¡œ ì¸í•´ TL ì‚¬ìš©ì´ ì •ì§€ ì¤‘ì…ë‹ˆë‹¤','w');
    return;
  }
  _disputeTargetId = trackId;
  _disputeTargetTitle = trackTitle;
  var el=$('dispute-track-name');
  if(el) el.textContent = '"'+trackTitle+'"';
  // í¼ ì´ˆê¸°í™”
  var reason=$('dispute-reason'); if(reason) reason.value='';
  var cat=$('dispute-category'); if(cat) cat.value='';
  var check=$('dispute-confirm-check'); if(check) check.checked=false;
  var evList=$('dispute-evidence-list'); if(evList) evList.innerHTML='';
  var charCount=$('dispute-char-count'); if(charCount) charCount.textContent='0 / 500';
  document.querySelectorAll('.dispute-cat-btn').forEach(function(b){
    b.style.borderColor='var(--bd)';
    b.style.background='';
  });
  // textarea ê¸€ììˆ˜ ì¹´ìš´í„°
  var ta=$('dispute-reason');
  if(ta){
    ta.oninput=function(){
      var cc=$('dispute-char-count');
      if(cc) cc.textContent=ta.value.length+' / 500';
    };
  }
  // 3ì•„ì›ƒ í˜„í™© í‘œì‹œ
  updateStrikeIndicator();
  // 2ë²ˆì§¸ ìŠ¤íŠ¸ë¼ì´í¬ë©´ ê°•ì¡° ê²½ê³ 
  if(S.falseDisputeStrikes===2){
    setTimeout(function(){
      toast('âš ï¸ ê²½ê³ : í—ˆìœ„ ì´ì˜ì œê¸° 2íšŒ ëˆ„ì  â€” ë‹¤ìŒ í—ˆìœ„ íŒì • ì‹œ ê³„ì • ì˜êµ¬ ëª°ìˆ˜ë©ë‹ˆë‹¤','w');
    },400);
  }
  openModal('dispute-modal');
}

function selectDisputeCat(el, cat){
  document.querySelectorAll('.dispute-cat-btn').forEach(function(b){
    b.style.borderColor='var(--bd)';
    b.style.background='';
    b.style.color='';
  });
  el.style.borderColor='#ff6b6b';
  el.style.background='rgba(255,79,79,.08)';
  var catInput=$('dispute-category');
  if(catInput) catInput.value=cat;
}

function onDisputeEvidenceSelect(files){
  var list=$('dispute-evidence-list');
  if(!list) return;
  var zone=$('dispute-evidence-zone');
  if(zone) zone.style.borderColor='#ff6b6b';
  var names=Array.from(files).map(function(f){ return 'ğŸ“ '+f.name; });
  list.innerHTML=names.join('<br>');
}

function submitDispute(){
  var cat=$('dispute-category').value;
  var reason=$('dispute-reason').value.trim();
  var checked=$('dispute-confirm-check').checked;

  if(!cat){ toast('ì´ì˜ì œê¸° ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”','e'); return; }
  if(reason.length < 50){ toast('ì‚¬ìœ ë¥¼ 50ì ì´ìƒ ì‘ì„±í•´ ì£¼ì„¸ìš” (í˜„ì¬ '+reason.length+'ì)','e'); return; }
  if(!checked){ toast('ë™ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”','e'); return; }

  var catLabels={copyright:'ì €ì‘ê¶Œ ì¹¨í•´',fake:'í—ˆìœ„ ì¸ì¦',abuse:'ì–´ë·°ì§• ì˜ì‹¬',other:'ê¸°íƒ€'};
  var dispute={
    id: 'dp'+Date.now(),
    trackId: _disputeTargetId,
    trackTitle: _disputeTargetTitle,
    category: cat,
    categoryLabel: catLabels[cat]||cat,
    reason: reason,
    date: new Date().toLocaleDateString('ko-KR'),
    status: 'pending',   // pending â†’ reviewing â†’ resolved
    daysLeft: 30,
    result: null
  };

  // ì´ì˜ì œê¸° ë“±ë¡
  S.disputes.push(dispute);
  S.disputedTracks[_disputeTargetId] = true;

  // ì´ì˜ì œê¸°ì TL ì¦‰ì‹œ ì •ì§€
  S.tlSuspended = true;
  S.wallet.locked = S.wallet.tl;  // ì „ì²´ TL ì ê¸ˆ

  // í•´ë‹¹ íŠ¸ë™ì˜ ìˆ˜ìµ ì¤‘ì§€ (SAMPLES)
  var track = [...SAMPLES,...S.myFiles].find(function(t){ return t.id===_disputeTargetId; });
  if(track){
    track._revenueHeld = true;  // ìˆ˜ìµ ì¤‘ì§€ í”Œë˜ê·¸
  }

  // POC ë³€ë™ (ì´ì˜ì œê¸° ì ‘ìˆ˜ â€” ê²°ê³¼ì— ë”°ë¼ ì¡°ì •)
  addPOC(-0.1, 'ì´ì˜ì œê¸° ì ‘ìˆ˜: '+_disputeTargetTitle);

  closeModal('dispute-modal');
  updateBal();
  renderShare();

  // ì ê¸ˆ ì•Œë¦¼
  toast('âš ï¸ ì´ì˜ì œê¸° ì ‘ìˆ˜ ì™„ë£Œ â€” ë‚´ TLì´ ì ê¸ˆ ì²˜ë¦¬ëìŠµë‹ˆë‹¤', 'w');
  setTimeout(function(){
    toast('ğŸ“‹ 30ì¼ ì´ë‚´ AI + ì‹¬ì‚¬íŒ€ì´ ì²˜ë¦¬í•©ë‹ˆë‹¤. Wallet â†’ ì´ì˜ì œê¸° ë‚´ì—­ì—ì„œ í™•ì¸í•˜ì„¸ìš”', 'i');
  }, 2000);

  // Wallet íƒ­ ì´ì˜ì œê¸° ëª©ë¡ ì—…ë°ì´íŠ¸
  renderDisputeHistory();
}

function renderDisputeHistory(){
  var el=$('dispute-history');
  if(!el) return;
  if(!S.disputes.length){
    el.innerHTML='<div style="text-align:center;padding:24px;color:var(--t2);font-size:13px">ì ‘ìˆ˜ëœ ì´ì˜ì œê¸°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
    return;
  }
  var statusLabel={pending:'â³ ì ‘ìˆ˜ë¨',reviewing:'ğŸ” ì‹¬ì‚¬ ì¤‘',resolved_win:'âœ… ì¸ìš©',resolved_lose:'âŒ ê¸°ê°'};
  var statusColor={pending:'var(--t2)',reviewing:'var(--pu)',resolved_win:'var(--ac)',resolved_lose:'#ff4f4f'};
  el.innerHTML=S.disputes.map(function(d){
    var sl=statusLabel[d.status]||d.status;
    var sc=statusColor[d.status]||'var(--t2)';
    return '<div style="padding:12px 0;border-bottom:1px solid var(--bd)">'
      +'<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px">'
      +'<div>'
      +'<div style="font-weight:700;font-size:13px">'+esc(d.trackTitle)+'</div>'
      +'<div style="font-size:11px;color:var(--t2);margin-top:2px">'+d.categoryLabel+' Â· '+d.date+'</div>'
      +'</div>'
      +'<span style="font-size:11px;font-weight:700;color:'+sc+'">'+sl+'</span>'
      +'</div>'
      +(d.status==='pending'||d.status==='reviewing'
        ?'<div style="display:flex;align-items:center;gap:8px">'
        +'<div style="flex:1;height:4px;background:var(--bd);border-radius:2px">'
        +'<div style="height:4px;background:var(--pu);border-radius:2px;width:'+(((30-d.daysLeft)/30)*100).toFixed(0)+'%;transition:.5s"></div>'
        +'</div>'
        +'<span style="font-size:11px;color:var(--t2)">D-'+d.daysLeft+'</span>'
        +'</div>'
        :(d.result?'<div style="font-size:12px;color:var(--t2);margin-top:4px">'+esc(d.result)+'</div>':''))
      +'</div>';
  }).join('');

  // ì‹¬ì‚¬ ì‹œë®¬ë ˆì´ì…˜ ë²„íŠ¼ (ì§„í–‰ ì¤‘ì¸ ì´ì˜ì œê¸°ê°€ ìˆì„ ë•Œ)
  var pending=S.disputes.filter(function(d){return d.status==='pending'||d.status==='reviewing';});
  var adminPanel=$('dispute-admin-panel');
  var adminBtns=$('dispute-admin-btns');
  if(adminPanel&&adminBtns){
    if(pending.length){
      adminPanel.style.display='block';
      adminBtns.innerHTML=pending.map(function(d){
        var did=d.id;
        var dtitle=esc(d.trackTitle.slice(0,12));
        return '<button class="btn btn-sm" style="font-size:10px;background:rgba(0,245,160,.1);color:var(--ac);border:1px solid rgba(0,245,160,.2)" onclick="resolveDisputeDemo(\"'+did+'\",true)">âœ… ì¸ìš©: '+dtitle+'</button>'
          +'<button class="btn btn-sm" style="font-size:10px;background:rgba(255,79,79,.1);color:#ff6b6b;border:1px solid rgba(255,79,79,.2)" onclick="resolveDisputeDemo(\"'+did+'\",false)">âŒ ê¸°ê°(í—ˆìœ„): '+dtitle+'</button>';
      }).join('');
    } else {
      adminPanel.style.display='none';
    }
  }
}

function resolveDisputeDemo(disputeId, isUpheld){
  var d=S.disputes.find(function(x){return x.id===disputeId;});
  if(!d) return;
  if(isUpheld){
    // ì´ì˜ì œê¸° ì¸ìš© â€” ì°½ì‘ì ì œì¬, ì´ì˜ì œê¸°ì TL í•´ì œ
    d.status='resolved_win';
    d.result='ì´ì˜ì œê¸° ì¸ìš© â€” í•´ë‹¹ ì½˜í…ì¸  ì„œë¹„ìŠ¤ ì œí•œ, TL ì ê¸ˆ í•´ì œ';
    delete S.disputedTracks[d.trackId];
    S.tlSuspended=false;
    S.wallet.locked=0;
    addPOC(0.5,'ì´ì˜ì œê¸° ì¸ìš© â€” ê¸°ì—¬ ì¸ì •');
    updateBal();renderShare();
    toast('âœ… ì´ì˜ì œê¸° ì¸ìš© â€” TL ì ê¸ˆì´ í•´ì œëìŠµë‹ˆë‹¤','s');
  } else {
    // ê¸°ê° = í—ˆìœ„ ì´ì˜ì œê¸° â†’ ìŠ¤íŠ¸ë¼ì´í¬
    recordFalseDispute(disputeId);
  }
  renderDisputeHistory();
  var badge=$('dispute-count-badge');
  if(badge) badge.textContent=S.disputes.length+'ê±´';
}

// TL ì •ì§€ ìƒíƒœ í‘œì‹œ
function checkTLSuspended(){
  var nb=$('nb-tl');
  if(nb&&S.tlSuspended){
    nb.style.color='#ff4f4f';
    nb.parentElement.title='ì´ì˜ì œê¸°ë¡œ ì¸í•´ TL ì‚¬ìš©ì´ ì •ì§€ëìŠµë‹ˆë‹¤';
  }
}

// =================== SHAREPLACE ACTIONS ===================

// =================== ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸ì¦/ê³µìœ  ë²„íŠ¼ ===================
function libShareBtn(f){
  var s=f.authStatus||'unverified';
  if(s==='unverified'){
    // ì¸ì¦ í•„ìš” â€” ì¸ì¦ ì‹ ì²­ ë²„íŠ¼
    return '<button class="btn btn-sm" style="padding:4px 10px;font-size:11px;background:rgba(245,158,11,.15);color:var(--ca);border:1px solid rgba(245,158,11,.3);border-radius:var(--rf);font-family:\'Syne\',sans-serif;font-weight:700;cursor:pointer" onclick="event.stopPropagation();openAuthRequestModal(\''+f.id+'\')">ğŸ” ì¸ì¦ ì‹ ì²­</button>';
  }
  if(s==='pending'){
    return '<span style="font-size:11px;font-weight:700;padding:4px 10px;border-radius:var(--rf);background:rgba(245,158,11,.1);color:var(--ca)">â³ ì‹¬ì‚¬ ëŒ€ê¸°</span>';
  }
  if(s==='review'){
    return '<span style="font-size:11px;font-weight:700;padding:4px 10px;border-radius:var(--rf);background:rgba(123,97,255,.1);color:var(--pu)">ğŸ” ê²€í†  ì¤‘</span>';
  }
  if(s==='verified'){
    if(f.shared){
      return '<button class="btn btn-sm" style="padding:4px 10px;font-size:11px;background:rgba(0,245,160,.15);color:var(--ac);border:1px solid rgba(0,245,160,.3);border-radius:var(--rf);font-family:\'Syne\',sans-serif;font-weight:700;cursor:pointer" onclick="event.stopPropagation();toggleShare(\''+f.id+'\')">âœ… ê³µìœ ì¤‘</button>';
    } else {
      return '<button class="btn btn-sm" style="padding:4px 10px;font-size:11px;background:rgba(123,97,255,.15);color:var(--pu);border:1px solid rgba(123,97,255,.3);border-radius:var(--rf);font-family:\'Syne\',sans-serif;font-weight:700;cursor:pointer" onclick="event.stopPropagation();toggleShare(\''+f.id+'\')">ğŸ›ï¸ ê³µìœ </button>';
    }
  }
  return '';
}

function libApproveBtn(f){
  if(f.authStatus!=='pending'&&f.authStatus!=='review') return '';
  return '<button class="btn btn-sm" style="padding:3px 8px;font-size:10px;background:rgba(0,245,160,.08);color:var(--ac);border:1px solid rgba(0,245,160,.2);cursor:pointer;font-family:\'Syne\',sans-serif" onclick="event.stopPropagation();approveAuthDemo(\''+f.id+'\')" title="ì‹¬ì‚¬ ì™„ë£Œ ì‹œë®¬(ë°ëª¨)">âš™ï¸ ìŠ¹ì¸</button>';
}

// toggleShare: VERIFIED ìƒíƒœë§Œ ê³µìœ  ê°€ëŠ¥
var _origToggleShare = toggleShare;
toggleShare = function(id){
  var f=S.myFiles.find(function(x){return x.id===id;});
  if(f&&f.authStatus!=='verified'){
    toast('ì¸ì¦ ì™„ë£Œ í›„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤','w');
    return;
  }
  _origToggleShare(id);
};

// ì¸ì¦ ì‹ ì²­ ëª¨ë‹¬ (ì§ì ‘ ì—…ë¡œë“œí•œ íŒŒì¼ìš©)
var _authRequestFileId='';
function openAuthRequestModal(fileId){
  _authRequestFileId=fileId;
  var f=S.myFiles.find(function(x){return x.id===fileId;});
  if(!f)return;
  var titleEl=$('auth-req-track-title');
  if(titleEl) titleEl.textContent='"'+f.title+'"';
  // í¼ ì´ˆê¸°í™”
  ['auth-req-source-url','auth-req-profile-url','auth-req-reason'].forEach(function(id){
    var el=$(id); if(el) el.value='';
  });
  ['auth-req-capture-name','auth-req-payment-name'].forEach(function(id){
    var el=$(id); if(el) el.textContent='';
  });
  var zo=$('auth-req-capture-zone');if(zo)zo.style.borderColor='var(--bd)';
  openModal('auth-request-modal');
}

function submitAuthRequest(){
  var f=S.myFiles.find(function(x){return x.id===_authRequestFileId;});
  if(!f) return;
  var sourceUrl=$('auth-req-source-url')&&$('auth-req-source-url').value.trim();
  var hasCapture=$('auth-req-capture-input')&&$('auth-req-capture-input').files.length>0;
  var hasPayment=($('auth-req-payment-input')&&$('auth-req-payment-input').files.length>0)
    ||($('auth-req-email')&&$('auth-req-email').value.trim());

  if(!sourceUrl){ toast('ì›ë³¸ URLì„ ì…ë ¥í•˜ì„¸ìš”','e'); return; }
  if(!hasCapture){ toast('ìƒì„± í™”ë©´ ìº¡ì²˜ë¥¼ ì²¨ë¶€í•˜ì„¸ìš” (ë‚ ì§œÂ·ì‹œê°„ í•„ìˆ˜)','e'); return; }
  if(!hasPayment){ toast('êµ¬ë… ê²°ì œ ì¦ë¹™ì„ ì²¨ë¶€í•˜ì„¸ìš”','e'); return; }

  f.authStatus='pending';
  f.authType='manual';
  f.authProof={url:sourceUrl, submitted:new Date().toLocaleDateString('ko-KR')};
  addPOC(0.1,'ì¸ì¦ ì‹ ì²­: '+f.title);
  closeModal('auth-request-modal');
  renderLibResults();
  toast('ğŸ“‹ ì¸ì¦ ì‹ ì²­ ì™„ë£Œ! AI OCR + ì‹¬ì‚¬íŒ€ ê²€í†  í›„ ê³µìœ  ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤','s');
  setTimeout(function(){ toast('â³ ì²˜ë¦¬ ê¸°ê°„: ìµœëŒ€ 30ì¼ ì´ë‚´','i'); },1800);
}

// ì¸ì¦ ì™„ë£Œ ì‹œë®¬ë ˆì´ì…˜ (ë°ëª¨ â€” ì‹¤ì œë¡œëŠ” ê´€ë¦¬ìê°€ ì²˜ë¦¬)
function approveAuthDemo(fileId){
  var f=S.myFiles.find(function(x){return x.id===fileId;});
  if(!f)return;
  f.authStatus='verified';
  f.authType=f.authType||'manual';
  addPOC(0.3,'ì¸ì¦ ì™„ë£Œ: '+f.title);
  // TL ì¶©ì „ ì‹œì ë¶€í„° ìˆ˜ìµ ë¶„ë°° ì‹œì‘
  f.revenue=0;
  f.holdRevenue=0;
  f.revenueStartedAt=Date.now();
  renderLibResults();
  toast('ğŸ‰ ì¸ì¦ ì™„ë£Œ! ì´ì œ SharePlaceì— ê³µìœ í•˜ê³  ìˆ˜ìµì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤','s');
}

function toggleShare(id){
  const idx=S.myFiles.findIndex(f=>f.id===id);
  if(idx===-1){
    // SAMPLESëŠ” í•­ìƒ ê³µìœ ë¨
    toast('ì´ë¯¸ SharePlaceì— ê³µê°œëœ ì½˜í…ì¸ ì…ë‹ˆë‹¤','i');return;
  }
  S.myFiles[idx].shared=!S.myFiles[idx].shared;
  const isNow=S.myFiles[idx].shared;
  toast(isNow?'âœ… SharePlaceì— ê³µìœ ëìŠµë‹ˆë‹¤! ìˆ˜ìµ ì°½ì¶œ ì‹œì‘':'SharePlaceì—ì„œ ë‚´ë ¸ìŠµë‹ˆë‹¤',isNow?'s':'i');
  renderLibResults();
  if(isNow){setTimeout(()=>{switchTab('shareplace');},800);}
}
function buyContent(id,price){
  if(S.tlSuspended){toast('âš ï¸ ì´ì˜ì œê¸° ì‹¬ì‚¬ ì¤‘ â€” TL ì‚¬ìš©ì´ ì •ì§€ëìŠµë‹ˆë‹¤','w');return;}
  if(S.disputedTracks[id]){toast('âš ï¸ ë¶„ìŸ ì‹¬ì‚¬ ì¤‘ì¸ íŠ¸ë™ì€ êµ¬ë§¤í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤','w');return;}
  if(S.wallet.tl<price){toast('TLì´ ë¶€ì¡±í•©ë‹ˆë‹¤','w');return;}
  S.wallet.tl-=price;
  S.wallet.totalSpent+= price;
  updateBal();updateWalletUI();
  toast('âœ… êµ¬ë§¤ ì™„ë£Œ! '+price.toLocaleString()+' TL ì°¨ê°','s');
}
function unshareContent(id){
  const idx=S.myFiles.findIndex(f=>f.id===id);
  if(idx!==-1){S.myFiles[idx].shared=false;renderShare();renderLibResults();toast('SharePlaceì—ì„œ ë‚´ë ¸ìŠµë‹ˆë‹¤','i');}
}

function filterShare(g){
  S.shareFilter=g;
  document.querySelectorAll('#share-filter-row .chip').forEach(c=>c.classList.toggle('active',c.dataset.g===g));
  renderShare();
}
// =================== API CONFIG ===================
var API_BASE = 'https://timelink-backend.mununglee.workers.dev';
var _authToken = localStorage.getItem('tl_token') || null;

function apiHeaders(){
  var h = {'Content-Type':'application/json'};
  if(_authToken) h['Authorization'] = 'Bearer ' + _authToken;
  return h;
}

function apiFetch(path, opts){
  opts = opts || {};
  opts.headers = Object.assign(apiHeaders(), opts.headers||{});
  return fetch(API_BASE + path, opts)
    .then(function(res){
      if(!res.ok) throw new Error(res.statusText);
      return res.json();
    })
    .catch(function(e){
      console.warn('API Error:', path, e.message);
      return null;
    });
}

// =================== SHAREPLACE API ===================
function renderShare(){ (async function(){
  var el = $('share-grid'); if(!el) return;
  el.innerHTML = '<div style="text-align:center;padding:40px;color:var(--t2)"><div style="font-size:24px;margin-bottom:8px">â³</div>ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';

  var f = S.shareFilter || 'all';
  var params = new URLSearchParams({limit:50, sort:'pulse'});
  if(f==='video') params.set('file_type','video');
  else if(f==='lecture') params.set('genre','Lecture');
  else if(f!=='all') params.set('genre', f);

  var data = await apiFetch('/api/v1/shareplace?' + params.toString());
  if(!data || !data.length){
    var myShared = S.myFiles.filter(function(x){return x.authStatus==='verified'&&x.shared;});
    data = [...SAMPLES,...myShared];
  }

  var sc=$('sp-cnt'), sp=$('sp-pulse');
  if(sc) sc.textContent = data.length;
  if(sp) sp.textContent = fmt(data.reduce(function(a,t){return a+(t.pulse||0);},0));

  if(!data.length){
    el.innerHTML='<div class="card tc" style="padding:40px"><div style="font-size:40px;margin-bottom:12px">ğŸ“­</div><div style="font-weight:700">ê³µìœ ëœ ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤</div><div style="font-size:13px;color:var(--t2);margin-top:8px">Libraryì—ì„œ ë‚´ íŒŒì¼ì„ SharePlaceì— ì˜¬ë ¤ë³´ì„¸ìš”</div></div>';
    return;
  }

  el.innerHTML = data.map(function(t,i){
    var id=t.id, title=t.title||'', artist=t.artist||'', genre=t.genre||'';
    var pulse=t.pulse||0;
    var fileTL = t.file_tl!==undefined ? t.file_tl : (t.fileTL||0);
    var fileType = t.file_type||t.type||'audio';
    var isDisputed = !!S.disputedTracks[id];
    var isOwn = S.myFiles.some(function(x){return x.id===id;});
    var typeIcon = fileType==='video'?'ğŸ¬':genre==='Lecture'?'ğŸ“š':'ğŸµ';
    var medal = i===0?'ğŸ¥‡':i===1?'ğŸ¥ˆ':i===2?'ğŸ¥‰':'';
    var topStyle = i<3?'border-color:rgba(0,245,160,.3);background:linear-gradient(135deg,rgba(0,245,160,.04),transparent);':'';
    var cardStyle = isDisputed?'border-color:rgba(255,79,79,.4);background:linear-gradient(135deg,rgba(255,79,79,.04),transparent);':topStyle;
    var url = t.file_url||t.url||'';
    var medalHtml = medal?'<span style="font-size:18px">'+medal+'</span>':'';
    var ownBadge = isOwn?'<span class="badge badge-ac" style="font-size:10px">ë‚´ ì½˜í…ì¸ </span>':'';
    var disputeBadge = isDisputed?'<span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:4px;background:rgba(255,79,79,.15);color:#ff4f4f;border:1px solid rgba(255,79,79,.3)">âš ï¸ ë¶„ìŸ ì‹¬ì‚¬ ì¤‘</span>':'';
    var actionBtn = isOwn
      ?'<button class="btn btn-ghost btn-sm" onclick="unshareContent(\''+id+'\')">ë‚´ë¦¬ê¸°</button>'
      :isDisputed
        ?'<button class="btn btn-sm" style="background:rgba(255,79,79,.1);color:#ff4f4f;border:1px solid rgba(255,79,79,.2);cursor:not-allowed;font-size:11px" disabled>ìˆ˜ìµ ì¤‘ì§€</button>'
        :'<button class="btn btn-primary btn-sm" onclick="buyContent(\''+id+'\','+fileTL+')">êµ¬ë§¤</button>';
    var disputeBtn = !isOwn&&!isDisputed
      ?'<button class="btn btn-sm" style="padding:4px 8px;font-size:11px;background:rgba(255,79,79,.08);color:#ff6b6b;border:1px solid rgba(255,79,79,.2);border-radius:var(--rf);cursor:pointer;font-family:\'Syne\',sans-serif;font-weight:700" onclick="openDisputeModal(\''+id+'\',\''+esc(title)+'\')" title="ì´ì˜ì œê¸°">âš ï¸</button>'
      :'';
    var playAction = !isDisputed?'loadTrack(\''+id+'\',\''+url+'\',\''+esc(title)+'\',\''+esc(artist)+'\')':'toast(\'ë¶„ìŸ ì‹¬ì‚¬ ì¤‘ ì¬ìƒì´ ì¼ì‹œ ì¤‘ì§€ë©ë‹ˆë‹¤\',\'w\')';
    return '<div class="share-card" style="'+cardStyle+'">'
      +'<div style="display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:10px">'
      +'<div style="font-size:32px;width:50px;height:50px;background:rgba(255,255,255,.05);border-radius:var(--rm);display:flex;align-items:center;justify-content:center">'+typeIcon+'</div>'
      +'<div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">'+medalHtml+ownBadge+disputeBadge+'</div>'
      +'</div>'
      +(isDisputed?'<div style="font-size:11px;color:#ff6b6b;background:rgba(255,79,79,.08);border-radius:var(--rs);padding:6px 8px;margin-bottom:8px;line-height:1.5">âš ï¸ ì´ì˜ì œê¸° ì ‘ìˆ˜ë¨ â€” ì‹¬ì‚¬ ì§„í–‰ ì¤‘<br><span style="color:var(--t2)">ìˆ˜ìµ ë¶„ë°° ë° ì¬ìƒì´ ì¼ì‹œ ì¤‘ì§€ë©ë‹ˆë‹¤</span></div>':'')
      +'<div style="font-weight:800;font-size:14px;margin-bottom:3px;line-height:1.3">'+esc(title)+'</div>'
      +'<div style="font-size:12px;color:var(--t2);margin-bottom:10px">'+esc(artist)+' Â· '+genre+'</div>'
      +'<div style="display:flex;gap:8px;margin-bottom:10px">'
      +'<div style="flex:1;background:rgba(0,245,160,.06);border:1px solid rgba(0,245,160,.12);border-radius:var(--rs);padding:6px;text-align:center"><div style="font-size:10px;color:var(--t2)">Pulse</div><div style="font-weight:800;color:var(--ac);font-size:12px;font-family:\'JetBrains Mono\',monospace">âš¡'+fmt(pulse)+'</div></div>'
      +'<div style="flex:1;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.12);border-radius:var(--rs);padding:6px;text-align:center"><div style="font-size:10px;color:var(--t2)">ê°€ê²©</div><div style="font-weight:800;color:var(--ca);font-size:12px;font-family:\'JetBrains Mono\',monospace">'+fmt(fileTL)+' TL</div></div>'
      +'</div>'
      +'<div style="display:flex;gap:6px">'
      +'<button class="btn btn-outline btn-sm" style="flex:1" '+(isDisputed?'disabled':'')+' onclick="'+playAction+'">â–¶ ì¬ìƒ</button>'
      +actionBtn+disputeBtn
      +'</div></div>';
  }).join('');
})(); }

// =================== RADIO ===================
function renderRadio(){
  const g=$('radio-grid');if(!g)return;
  g.innerHTML=RADIO.map(ch=>
    '<div class="radio-card" data-ch="'+ch.id+'" onclick="radioPlay(\''+ch.id+'\')">'
    +'<div style="font-size:32px;margin-bottom:8px">'+ch.icon+'</div>'
    +'<div style="font-weight:700;font-size:14px">'+ch.name+'</div>'
    +'<div style="font-size:12px;color:var(--t2);margin-top:3px">'+ch.desc+'</div>'
    +'<div class="mono ac" style="font-size:12px;margin-top:4px">'+ch.rate+'</div>'
    +'</div>'
  ).join('');
}
function radioPlay(id){
  const ch=RADIO.find(r=>r.id===id);if(!ch)return;
  $('radio-on').classList.remove('hidden');
  $('radio-ch-name').textContent=ch.icon+' '+ch.name;
  $('radio-ch-desc').textContent=ch.desc+' Â· '+ch.rate;
  document.querySelectorAll('.radio-card').forEach(el=>el.classList.remove('playing'));
  document.querySelector('.radio-card[data-ch="'+id+'"]')?.classList.add('playing');
  S.currentFileId=id;
  loadTrack(id,ch.url,ch.icon+' '+ch.name,'ì¹´í˜ë°©ì†¡','â˜•');
}
function radioStop(){stopAll();$('radio-on').classList.add('hidden');document.querySelectorAll('.radio-card').forEach(el=>el.classList.remove('playing'));}

// =================== MINING ===================
function claimTLC(){
  const p=parseFloat((S.wallet.tlc||0).toFixed(4));
  if(p<.0001){toast('ìˆ˜ë ¹ ê°€ëŠ¥í•œ TLCê°€ ì—†ìŠµë‹ˆë‹¤','i');return;}
  S.wallet.tlc=0;updateBal();toast('â›ï¸ TLC '+p.toFixed(4)+' ìˆ˜ë ¹!','s');
}

// ===== CONTENT CHARTS =====
var CHART_PAGE = 1;
var CHART_TYPE = 'hot';
var CONTRIB_FILTER = 'weekly';

var CHART_TITLES = {
  hot:'ğŸ”¥ ì‹¤ì‹œê°„ ì°¨íŠ¸', new:'ğŸ†• ì‹ ê³¡ ì°¨íŠ¸', rise:'ğŸ“ˆ ê¸‰ìƒìŠ¹',
  music:'ğŸµ ìŒì•… ì°¨íŠ¸', video:'ğŸ¬ ì˜ìƒ ì°¨íŠ¸', lecture:'ğŸ“š ê°•ì˜ ì°¨íŠ¸',
  global:'ğŸŒ ê¸€ë¡œë²Œ ì°¨íŠ¸', contributor:'ğŸ† ê¸°ì—¬ì ë­í‚¹'
};

function loadChart(type, btn){
  CHART_TYPE = type;
  CHART_PAGE = 1;
  document.querySelectorAll('#chart-panel .ctab').forEach(function(b){ b.classList.remove('active'); });
  if(btn) btn.classList.add('active');
  var t = document.getElementById('chart-cat-title');
  if(t) t.textContent = CHART_TITLES[type] || type;
  var subFilter = document.getElementById('contrib-sub-filter');
  if(subFilter) subFilter.style.display = (type==='contributor') ? 'flex' : 'none';
  renderChart();
}

function setContribFilter(f, el){
  CONTRIB_FILTER = f;
  document.querySelectorAll('#contrib-sub-filter .csub').forEach(function(b){ b.classList.remove('active'); });
  if(el) el.classList.add('active');
  renderChart();
}

var CHART_DATA = {
  hot:[
    {rank:1,prev:2,title:'Neon Dreams',artist:'SynthWave X',type:'ğŸµ',tl:'2.4K',pulse:98400,plays:'12.3K',badge:'HOT'},
    {rank:2,prev:1,title:'Digital Rain',artist:'AI Composer',type:'ğŸµ',tl:'1.8K',pulse:76200,plays:'9.1K',badge:''},
    {rank:3,prev:5,title:'Quantum Beats',artist:'ByteRhythm',type:'ğŸµ',tl:'1.2K',pulse:54300,plays:'7.8K',badge:'â–²2'},
    {rank:4,prev:3,title:'Seoul Midnight',artist:'K-AI Studio',type:'ğŸµ',tl:'980',pulse:43100,plays:'6.2K',badge:''},
    {rank:5,prev:0,title:'Cyber Lotus',artist:'NeuralSound',type:'ğŸµ',tl:'870',pulse:38900,plays:'5.4K',badge:'NEW'},
  ],
  new:[
    {rank:1,prev:0,title:'Morning Protocol',artist:'AI Composer',type:'ğŸµ',tl:'500',pulse:12000,plays:'1.2K',badge:'NEW'},
    {rank:2,prev:0,title:'Neon City 2077',artist:'CyberSound',type:'ğŸµ',tl:'450',pulse:10800,plays:'1.1K',badge:'NEW'},
  ],
  rise:[
    {rank:1,prev:15,title:'Quantum Beats',artist:'ByteRhythm',type:'ğŸµ',tl:'1.2K',pulse:54300,plays:'7.8K',badge:'â–²14'},
  ],
  music:[
    {rank:1,prev:1,title:'Neon Dreams',artist:'SynthWave X',type:'ğŸµ',tl:'2.4K',pulse:98400,plays:'12.3K',badge:''},
  ],
  video:[
    {rank:1,prev:1,title:'AI Art Journey',artist:'VisualAI',type:'ğŸ¬',tl:'1.5K',pulse:65000,plays:'8.2K',badge:''},
  ],
  lecture:[
    {rank:1,prev:1,title:'AI Music Theory',artist:'Prof. Kim',type:'ğŸ“š',tl:'800',pulse:32000,plays:'4.1K',badge:''},
  ],
  global:[
    {rank:1,prev:1,title:'Neon Dreams',artist:'SynthWave X',type:'ğŸµ',tl:'2.4K',pulse:98400,plays:'12.3K',badge:'ğŸŒ'},
  ],
  contributor:[]
};

// =================== CHART API ===================
var CHART_ENDPOINT = {
  hot:'/api/v1/charts/hot', new:'/api/v1/charts/new', rise:'/api/v1/charts/rise',
  music:'/api/v1/charts/by-type?file_type=audio', video:'/api/v1/charts/by-type?file_type=video',
  lecture:'/api/v1/charts/by-type?file_type=lecture', global:'/api/v1/charts/global',
};

function renderChart(){ (async function(){
  var list = document.getElementById('chart-list'); if(!list) return;
  if(CHART_TYPE==='contributor'){ await renderContributorChart(list); return; }
  list.innerHTML='<div style="text-align:center;padding:30px;color:var(--t2)">â³ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
  var ep = CHART_ENDPOINT[CHART_TYPE];
  var data = ep ? await apiFetch(ep+(ep.includes('?')?'&':'?')+'limit=20') : null;
  if(!data||!data.length){
    var fb=CHART_DATA[CHART_TYPE]||[];
    data=fb.slice(0,20).map(function(x){return {rank:x.rank,title:x.title,artist:x.artist,file_type:x.type,tl:x.tl,pulse:x.pulse,plays:x.plays||0,_badge:x.badge,_prev:x.prev};});
  }
  if(!data.length){list.innerHTML='<div style="text-align:center;padding:30px;color:var(--t2)">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';return;}
  list.innerHTML=data.map(function(item,i){
    var rank=item.rank||(i+1);
    var rankColor=rank===1?'#f59e0b':rank===2?'#94a3b8':rank===3?'#cd7c2f':'var(--t2)';
    var ft=item.file_type||item.type||'audio';
    var typeIcon=ft==='video'?'ğŸ¬':ft==='lecture'?'ğŸ“š':'ğŸµ';
    var tl=item.tl!==undefined?item.tl:(item.file_tl||0);
    var pulse=item.pulse||0, plays=item.plays||item.play_count||0;
    var diff=item._prev!=null?(item._prev-rank):null;
    var changeHtml=item._prev===0?'<span style="font-size:9px;color:var(--ac);font-weight:700">NEW</span>'
      :diff>0?'<span style="font-size:9px;color:#00f5a0">â–²'+diff+'</span>'
      :diff<0?'<span style="font-size:9px;color:#ff4f4f">â–¼'+Math.abs(diff)+'</span>'
      :'<span style="font-size:9px;color:var(--t3)">â€•</span>';
    var badgeHtml=item._badge&&item._badge!=='NEW'?'<span style="font-size:9px;font-weight:700;padding:1px 5px;border-radius:4px;background:rgba(0,245,160,.15);color:#00f5a0;margin-left:4px">'+item._badge+'</span>':'';
    return '<div class="chart-item" style="display:flex;align-items:center;gap:8px;padding:7px 6px;border-radius:8px;cursor:pointer">'
      +'<div style="width:22px;text-align:center;font-size:13px;font-weight:800;color:'+rankColor+';font-family:JetBrains Mono,monospace;flex-shrink:0">'+rank+'</div>'
      +'<div style="width:20px;text-align:center;flex-shrink:0">'+changeHtml+'</div>'
      +'<div style="font-size:14px;flex-shrink:0">'+typeIcon+'</div>'
      +'<div style="flex:1;min-width:0"><div style="font-size:12px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">'+esc(item.title||'')+badgeHtml+'</div>'
      +'<div style="font-size:11px;color:var(--t2);margin-top:1px">'+esc(item.artist||'')+' Â· '+(plays>=1000?(plays/1000).toFixed(1)+'K':plays)+'íšŒ</div></div>'
      +'<div style="text-align:right;flex-shrink:0"><div style="font-size:11px;font-weight:700;color:var(--ac);font-family:JetBrains Mono,monospace">'+(tl>=1000?(tl/1000).toFixed(1)+'K':Math.round(tl))+' <span style="font-size:9px;color:var(--t3)">TL</span></div>'
      +'<div style="font-size:10px;color:var(--pu)">âš¡'+(pulse>=1000?(pulse/1000).toFixed(1)+'K':pulse)+'</div></div></div>';
  }).join('');
})(); }

function renderContributorChart(list){ (async function(){
  list.innerHTML='<div style="text-align:center;padding:30px;color:var(--t2)">â³ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
  var period=CONTRIB_FILTER; if(period==='music'||period==='lecture'||period==='creator') period='alltime';
  var data=await apiFetch('/api/v1/shareplace/contributor-ranking?period='+period+'&limit=20');
  if(!data||!data.length){
    var filtered=CONTRIBUTOR_DATA.slice();
    if(CONTRIB_FILTER==='music') filtered=CONTRIBUTOR_DATA.filter(function(c){return c.avatar==='ğŸµ'||c.avatar==='ğŸ¬';});
    if(CONTRIB_FILTER==='lecture') filtered=CONTRIBUTOR_DATA.filter(function(c){return c.avatar==='ğŸ“š';});
    data=filtered.slice(0,20).map(function(c,i){return {rank:i+1,username:c.name,poc_index:c.poc,total_revenue:c.totalTL,total_pulse:c.totalPulse,verified_tracks:c.verifiedTracks,_level:c.level,_country:c.country,_avatar:c.avatar,_topTrack:c.topTrack};});
  }
  if(!data.length){list.innerHTML='<div style="text-align:center;padding:30px;color:var(--t2)">ê¸°ì—¬ì ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';return;}
  var LEVELS={DIAMOND:{color:'#b9f2ff',bg:'rgba(185,242,255,.15)',border:'rgba(185,242,255,.3)',icon:'ğŸ’',label:'ë‹¤ì´ì•„'},PLATINUM:{color:'#e2e2e2',bg:'rgba(226,226,226,.12)',border:'rgba(226,226,226,.25)',icon:'â¬¡',label:'í”Œë˜í‹°ë„˜'},GOLD:{color:'#f59e0b',bg:'rgba(245,158,11,.12)',border:'rgba(245,158,11,.25)',icon:'ğŸ¥‡',label:'ê³¨ë“œ'},SILVER:{color:'#94a3b8',bg:'rgba(148,163,184,.12)',border:'rgba(148,163,184,.25)',icon:'ğŸ¥ˆ',label:'ì‹¤ë²„'},BRONZE:{color:'#cd7c2f',bg:'rgba(205,124,47,.12)',border:'rgba(205,124,47,.25)',icon:'ğŸ¥‰',label:'ë¸Œë¡ ì¦ˆ'},ROOKIE:{color:'var(--t2)',bg:'rgba(255,255,255,.04)',border:'var(--bd)',icon:'ğŸŒ±',label:'ë£¨í‚¤'}};
  function getLevel(poc,tracks){if(poc>=8||tracks>=20)return 'DIAMOND';if(poc>=6||tracks>=12)return 'PLATINUM';if(poc>=4||tracks>=7)return 'GOLD';if(poc>=2||tracks>=4)return 'SILVER';if(poc>=1||tracks>=1)return 'BRONZE';return 'ROOKIE';}
  var top3bg=['linear-gradient(135deg,rgba(245,158,11,.1),rgba(245,158,11,.04))','linear-gradient(135deg,rgba(148,163,184,.08),rgba(148,163,184,.03))','linear-gradient(135deg,rgba(205,124,47,.08),rgba(205,124,47,.03))'];
  var top3border=['rgba(245,158,11,.35)','rgba(148,163,184,.3)','rgba(205,124,47,.3)'];
  list.innerHTML=data.map(function(c){
    var levelKey=c._level||getLevel(c.poc_index,c.verified_tracks);
    var lv=LEVELS[levelKey]||LEVELS.ROOKIE;
    var rank=c.rank, rankColor=rank===1?'#f59e0b':rank===2?'#94a3b8':rank===3?'#cd7c2f':'var(--t2)';
    var isTop3=rank<=3;
    var pocPct=Math.min(100,(c.poc_index/10)*100).toFixed(0);
    var pocColor=c.poc_index>=6?'var(--ac)':c.poc_index>=3?'var(--ca)':'#ff6b6b';
    var rankMedal=rank===1?'ğŸ¥‡':rank===2?'ğŸ¥ˆ':rank===3?'ğŸ¥‰':'';
    var avatar=c._avatar||'ğŸµ', country=c._country||'', topTrack=c._topTrack||'';
    var totalTL=c.total_revenue||0, totalPulse=c.total_pulse||0;
    return '<div style="display:flex;align-items:center;gap:8px;padding:10px 8px;border-radius:10px;'+(isTop3?'background:'+top3bg[rank-1]+';border:1px solid '+top3border[rank-1]+';margin-bottom:4px;':'border-bottom:1px solid var(--bd);')+'">'
      +'<div style="width:22px;text-align:center;flex-shrink:0"><div style="font-size:13px;font-weight:800;color:'+rankColor+';font-family:JetBrains Mono,monospace">'+rank+'</div></div>'
      +'<div style="position:relative;flex-shrink:0"><div style="width:36px;height:36px;border-radius:50%;background:'+lv.bg+';border:1.5px solid '+lv.border+';display:flex;align-items:center;justify-content:center;font-size:18px">'+avatar+'</div><div style="position:absolute;bottom:-3px;right:-3px;font-size:11px">'+lv.icon+'</div></div>'
      +'<div style="flex:1;min-width:0"><div style="display:flex;align-items:center;gap:5px;margin-bottom:2px"><span style="font-size:12px;font-weight:800">'+country+' '+esc(c.username||'')+'</span>'+(rankMedal?'<span style="font-size:12px">'+rankMedal+'</span>':'')+'</div>'
      +'<div style="display:flex;align-items:center;gap:8px"><span style="font-size:10px;font-weight:700;padding:1px 6px;border-radius:4px;background:'+lv.bg+';color:'+lv.color+';border:1px solid '+lv.border+'">'+lv.label+'</span><span style="font-size:10px;color:var(--t2)">âœ… '+c.verified_tracks+'ê³¡</span></div>'
      +'<div style="display:flex;align-items:center;gap:5px;margin-top:4px"><span style="font-size:9px;color:var(--t2);width:26px">POC</span><div style="flex:1;height:3px;background:var(--bd);border-radius:2px"><div style="height:3px;background:'+pocColor+';border-radius:2px;width:'+pocPct+'%"></div></div><span style="font-size:9px;font-weight:700;color:'+pocColor+';width:24px;text-align:right">'+c.poc_index.toFixed(1)+'</span></div></div>'
      +'<div style="text-align:right;flex-shrink:0"><div style="font-size:11px;font-weight:800;color:var(--ac);font-family:JetBrains Mono,monospace">'+(totalTL>=1000?(totalTL/1000).toFixed(0)+'K':Math.round(totalTL))+' <span style="font-size:9px;color:var(--t3)">TL</span></div>'
      +'<div style="font-size:10px;color:var(--pu)">âš¡'+(totalPulse>=1000?(totalPulse/1000).toFixed(0)+'K':totalPulse)+'</div>'+(topTrack?'<div style="font-size:9px;color:var(--t2)">'+esc(topTrack.slice(0,10))+'</div>':'')+'</div>'
      +'</div>';
  }).join('');
})(); }

function loadMore(){
  CHART_PAGE++;
  renderChart();
  toast('ë” ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...','i');
}

window.addEventListener('DOMContentLoaded', function(){
  setTimeout(function(){ loadChart('hot', null); }, 100);
});


// ===== ê´‘ê³  =====
var adsState = {earned:0, count:0, max:10, maxTL:500};
function watchAd(){
  if(adsState.count >= adsState.max){toast('ì˜¤ëŠ˜ ê´‘ê³  í•œë„ ì´ˆê³¼ (10íšŒ)','w');return;}
  toast('ê´‘ê³  ì‹œì²­ ì¤‘... (+50 TL)','i');
  setTimeout(function(){
    adsState.count++;adsState.earned+=50;S.wallet.tl+=50;
    updateBal();updateAdsUI();toast('âœ… ê´‘ê³  ì™„ë£Œ! +50 TL ì§€ê¸‰','s');
  }, 2000);
}
function updateAdsUI(){
  var e=document.getElementById('ads-earned'),c=document.getElementById('ads-count'),p=document.getElementById('ads-prog');
  if(e)e.textContent=adsState.earned.toLocaleString()+' TL';
  if(c)c.textContent=adsState.count+' / '+adsState.max;
  if(p)p.style.width=(adsState.count/adsState.max*100)+'%';
}

function toggleNavDD(){
  const dd=$('nav-dd');
  if(dd)dd.classList.toggle('hidden');
}
// ì™¸ë¶€ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
document.addEventListener('click',function(e){
  const wrap=document.querySelector('.avatar-wrap');
  if(wrap&&!wrap.contains(e.target)){const dd=$('nav-dd');if(dd)dd.classList.add('hidden');}
});
function doLogout(){localStorage.removeItem('tl_token');localStorage.removeItem('tl_user');toast('ë¡œê·¸ì•„ì›ƒ','i');setTimeout(()=>window.location.href='login.html',500);}

// =================== INIT ===================
(function init(){
  const user=JSON.parse(localStorage.getItem('tl_user')||'{}');
  // avatar ì—…ë°ì´íŠ¸
  const av=$('nav-avatar');if(av){const n=user.username||'Demo';av.textContent=n.charAt(0).toUpperCase();}
  const dn=$('dd-name');if(dn)dn.textContent=user.username||'Demo';
  const de=$('dd-email');if(de)de.textContent=user.email||'demo@timelink.digital';
  if(user.tl)S.wallet.tl=user.tl;
  $('nav-guest').classList.add('hidden');
  $('nav-auth').classList.remove('hidden');
  updateBal();updateTrust();updateRate();
  renderHotPulse();renderRadio();renderLibResults();renderShare();setTimeout(function(){loadChart('hot',null);},200);
  renderGenreChips();setEngine('tl');
})();
</script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"1271d078e0ec49ac83bc8dd8b8fac63b","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"1271d078e0ec49ac83bc8dd8b8fac63b","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"1271d078e0ec49ac83bc8dd8b8fac63b","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>

<style>
/* íƒ­ ë©”ë‰´ ì¤‘ì•™ ì •ë ¬ (ìµœì¢… í•´ê²°) */
.tabs-bar,
.tabs-inner,
div[class*="tabs-"] {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    text-align: center !important;
    width: 100% !important;
    margin: 0 auto !important;
    padding: 7px 0 !important;
}

.tab,
.tab-btn,
a[class*="tab"],
button[class*="tab"] {
    display: inline-flex !important;
    justify-content: center !important;
    align-items: center !important;
    margin: 0 4px !important;
    padding: 8px 16px !important;
    text-align: center !important;
    white-space: nowrap !important;
}

@media (max-width: 768px) {
    .tab, .tab-btn {
        margin: 0 2px !important;
        padding: 6px 10px !important;
        font-size: 12px !important;
    }
}

/* ì €ì‘ê¶Œ ë³´í˜¸ ì‹œìŠ¤í…œ */
.copyright-policy {
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.copyright-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  background: #f3f4f6;
  color: #4b5563;
}

.copyright-badge.verified {
  background: #d1fae5;
  color: #065f46;
}

.copyright-badge.unverified {
  background: #fee2e2;
  color: #991b1b;
}

.copyright-badge.warning {
  background: #ffedd5;
  color: #9a3412;
}

.copyright-tooltip {
  position: relative;
  cursor: help;
}

.copyright-tooltip:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: #1f2937;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  white-space: nowrap;
  z-index: 10;
  margin-bottom: 4px;
}

.verification-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 600;
}

.verification-badge.ai {
  background: #e0f2fe;
  color: #0369a1;
}

.verification-badge.manual {
  background: #fef3c7;
  color: #92400e;
}

.verification-badge.spotify {
  background: #1db954;
  color: white;
}

.ai-warning {
  background: #fff3cd;
  border: 1px solid #ffeeba;
  color: #856404;
  padding: 12px;
  border-radius: 8px;
  margin: 10px 0;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ai-warning i {
  font-size: 18px;
}



<script>
// íƒ­ ë©”ë‰´ ê°•ì œ ì¤‘ì•™ ì •ë ¬
(function() {
    function centerTabs() {
        const selectors = [
            '.tabs-bar', '.tabs-inner',
            '.tab', '.tab-btn',
            '[class*="tabs-"]', '[class*="tab"]'
        ];
        
        selectors.forEach(selector => {
            document.querySelectorAll(selector).forEach(el => {
                if (selector.includes('tabs')) {
                    el.style.cssText = 'display: flex !important; justify-content: center !important; align-items: center !important; margin: 0 auto !important;';
                } else {
                    el.style.cssText = 'margin: 0 4px !important; text-align: center !important;';
                }
            });
        });
    }
    
    centerTabs();
    window.addEventListener('load', centerTabs);
    new MutationObserver(centerTabs).observe(document.body, { 
        childList: true, 
        subtree: true 
    });
})();
</script>
<div style="background: #f9fafb; border-top: 1px solid #e5e7eb; padding: 20px 24px; margin-top: 40px; text-align: center; font-size: 12px; color: #6b7280;">
  <div style="max-width: 1200px; margin: 0 auto;">
    <div style="display: flex; justify-content: center; gap: 24px; margin-bottom: 12px; flex-wrap: wrap;">
      <a href="/copyright-policy.html" style="color: #4b5563; text-decoration: none;">ì €ì‘ê¶Œ ì •ì±…</a>
      <a href="/terms.html" style="color: #4b5563; text-decoration: none;">ì´ìš©ì•½ê´€</a>
      <a href="/privacy.html" style="color: #4b5563; text-decoration: none;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      <a href="/report.html" style="color: #ef4444; text-decoration: none;">ì €ì‘ê¶Œ ì¹¨í•´ ì‹ ê³ </a>
    </div>
    <div>
      âš–ï¸ ëª¨ë“  ë¯¸ì¸ì¦ íŒŒì¼ì˜ ë²•ì  ì±…ì„ì€ ì—…ë¡œë”ì—ê²Œ 100% ìˆìŠµë‹ˆë‹¤. 
      ì €ì‘ê¶Œ ë³´í˜¸ë¥¼ ìœ„í•´ AI ìœ ì‚¬ë„ ê²€ì‚¬ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤.
    </div>
  </div>
</div>
</body>
</html>




