<!DOCTYPE html>
<html lang="ko">
<head>
<style>
:root {
  --purple: #8b5cf6;
  --purple-dark: #7c3aed;
  --purple-darker: #6d28d9;
  --purple-light: #ede9fe;
  --purple-pale: #f5f3ff;
  --green: #10b981;
  --green-light: #d1fae5;
  --yellow: #f59e0b;
  --yellow-light: #fef3c7;
  --red: #ef4444;
  --red-light: #fee2e2;
  --blue: #3b82f6;
  --blue-light: #dbeafe;
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-500: #6b7280;
  --gray-700: #374151;
  --gray-900: #111827;
  --text: #0f172a;
  --border: #e5e7eb;
  --surface: #f8fafc;
  --font: 'Inter', 'Noto Sans KR', sans-serif;
}
</style>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moving Radio - TimeLink</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Inter, sans-serif; background: #f8fafc; color: #0f172a; line-height: 1.5; }
.navbar { background: white; border-bottom: 1px solid #e2e8f0; padding: 0 24px; height: 64px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; }
.logo { display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 800; color: #0f172a; text-decoration: none; }
.logo-icon { width: 32px; height: 32px; background: #8b5cf6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; }
.logo span { color: #8b5cf6; }
.nav-right { display: flex; align-items: center; gap: 12px; }
.btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 20px; border-radius: 999px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s; border: none; text-decoration: none; }
.btn-primary { background: #8b5cf6; color: white; }
.btn-primary:hover { background: #7c3aed; }
.btn-outline { background: white; color: #1f2937; border: 1px solid #e5e7eb; }
.btn-outline:hover { background: #f9fafb; }
.btn-sm { padding: 6px 14px; font-size: 13px; }
.balance { background: #f3f4f6; border-radius: 999px; padding: 6px 16px; display: flex; align-items: center; gap: 16px; }
.balance-item { display: flex; align-items: center; gap: 6px; font-size: 14px; }
.balance-label { color: #6b7280; font-weight: 500; }
.balance-value { font-weight: 700; color: #8b5cf6; }
.avatar { width: 36px; height: 36px; background: #8b5cf6; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; cursor: pointer; position: relative; }
.dropdown { position: absolute; top: 100%; right: 0; margin-top: 8px; background: white; border: 1px solid #e5e7eb; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); width: 200px; display: none; z-index: 1000; }
.dropdown.show { display: block; }
.dropdown-item { padding: 12px 16px; cursor: pointer; font-size: 14px; color: #1f2937; text-decoration: none; display: block; }
.dropdown-item:hover { background: #f3f4f6; }
.dropdown-item.danger { color: #ef4444; }
.tabs { background: white; border-bottom: 1px solid #e5e7eb; padding: 0 24px; display: flex; justify-content: center; gap: 4px; position: sticky; top: 64px; z-index: 90; overflow-x: auto; }
.tab { padding: 12px 20px; font-size: 14px; font-weight: 600; color: #6b7280; text-decoration: none; border-bottom: 2px solid transparent; transition: all 0.2s; white-space: nowrap; }
.tab:hover { color: #8b5cf6; }
.tab.active { color: #8b5cf6; border-bottom-color: #8b5cf6; }
.container { max-width: 1100px; margin: 0 auto; padding: 40px 24px; }

/* ëª¨ë“œ ì„ íƒ */
.mode-selector { display: flex; gap: 12px; margin-bottom: 32px; }
.mode-btn { flex: 1; padding: 20px; border-radius: 16px; border: 2px solid #e5e7eb; background: white; cursor: pointer; text-align: center; transition: all 0.2s; font-family: Inter, sans-serif; }
.mode-btn.active { border-color: #8b5cf6; background: #ede9fe; }
.mode-btn .mode-icon { font-size: 32px; margin-bottom: 8px; }
.mode-btn .mode-name { font-size: 16px; font-weight: 700; color: #0f172a; margin-bottom: 4px; }
.mode-btn .mode-desc { font-size: 12px; color: #6b7280; }

/* í˜„ì¬ ì¬ìƒ */
.now-playing { background: linear-gradient(135deg, #1e1b4b, #312e81); border-radius: 24px; padding: 32px; color: white; margin-bottom: 32px; display: flex; align-items: center; gap: 28px; }
.album-art { width: 100px; height: 100px; background: linear-gradient(135deg, #8b5cf6, #a78bfa); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 44px; flex-shrink: 0; animation: spin 8s linear infinite paused; }
.album-art.playing { animation-play-state: running; }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.track-info { flex: 1; }
.track-title { font-size: 22px; font-weight: 800; margin-bottom: 4px; }
.track-artist { font-size: 14px; color: rgba(255,255,255,0.7); margin-bottom: 16px; }
.progress-bar { background: rgba(255,255,255,0.2); border-radius: 999px; height: 4px; margin-bottom: 8px; cursor: pointer; }
.progress-fill { background: #a78bfa; height: 100%; border-radius: 999px; width: 35%; transition: width 0.5s; }
.time-row { display: flex; justify-content: space-between; font-size: 12px; color: rgba(255,255,255,0.6); }
.controls { display: flex; align-items: center; gap: 20px; }
.ctrl-btn { background: none; border: none; color: white; font-size: 24px; cursor: pointer; opacity: 0.8; transition: opacity 0.2s; }
.ctrl-btn:hover { opacity: 1; }
.ctrl-btn.play { width: 52px; height: 52px; background: white; color: #8b5cf6; border-radius: 50%; font-size: 20px; display: flex; align-items: center; justify-content: center; }
.tl-badge { background: rgba(255,255,255,0.15); border-radius: 999px; padding: 6px 14px; font-size: 13px; font-weight: 700; color: #a78bfa; margin-top: 12px; display: inline-block; }

/* ë ˆì´ì•„ì›ƒ */
.car-layout { display: grid; grid-template-columns: 280px 1fr; gap: 24px; }

/* ì‚¬ì´ë“œë°” - BPM í•„í„° */
.sidebar { background: white; border-radius: 20px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.07); border: 1px solid #f1f5f9; height: fit-content; position: sticky; top: 140px; }
.sidebar-title { font-size: 16px; font-weight: 800; margin-bottom: 20px; }
.filter-group { margin-bottom: 24px; }
.filter-label { font-size: 13px; font-weight: 700; color: #6b7280; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
.bpm-slider { width: 100%; accent-color: #8b5cf6; margin-bottom: 8px; }
.bpm-value { font-size: 20px; font-weight: 800; color: #8b5cf6; text-align: center; }
.bpm-desc { font-size: 12px; color: #9ca3af; text-align: center; }
.filter-chips { display: flex; flex-wrap: wrap; gap: 8px; }
.chip { padding: 6px 12px; border-radius: 999px; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s; background: white; color: #6b7280; }
.chip.active { background: #ede9fe; border-color: #8b5cf6; color: #8b5cf6; }
.ai-recommendation { background: linear-gradient(135deg, #ede9fe, #f5f3ff); border-radius: 12px; padding: 16px; margin-top: 8px; }
.ai-recommendation .ai-label { font-size: 11px; font-weight: 700; color: #8b5cf6; margin-bottom: 6px; }
.ai-recommendation p { font-size: 13px; color: #4b5563; }

/* íŠ¸ë™ ëª©ë¡ */
.section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.section-title { font-size: 18px; font-weight: 800; }
.track-list { display: grid; gap: 10px; margin-bottom: 32px; }
.track-item { background: white; border-radius: 16px; padding: 16px 20px; display: flex; align-items: center; gap: 16px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border: 1px solid #f1f5f9; cursor: pointer; transition: all 0.2s; }
.track-item:hover { box-shadow: 0 4px 12px rgba(139,92,246,0.15); border-color: #c4b5fd; transform: translateY(-1px); }
.track-item.active { border-color: #8b5cf6; background: #faf5ff; }
.track-num { font-size: 13px; color: #9ca3af; width: 20px; text-align: center; }
.track-thumb { width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, #8b5cf6, #a78bfa); display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
.track-meta { flex: 1; }
.track-name { font-weight: 700; font-size: 14px; margin-bottom: 2px; }
.track-artist-sm { font-size: 12px; color: #6b7280; }
.track-bpm { font-size: 12px; font-weight: 700; color: #8b5cf6; background: #ede9fe; padding: 3px 10px; border-radius: 999px; }
.track-tl { font-size: 12px; color: #9ca3af; }
.track-duration { font-size: 13px; color: #9ca3af; }

/* í */
.queue-section { background: white; border-radius: 20px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.07); border: 1px solid #f1f5f9; }

.hidden { display: none !important; }

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .car-layout { grid-template-columns: 1fr; }
  .sidebar { position: static; }
  .mode-selector { flex-direction: column; }
  .now-playing { flex-direction: column; text-align: center; }
  .controls { justify-content: center; }
}

/* í‘¸í„° */
.page-footer { background: #f9fafb; border-top: 1px solid #e5e7eb; padding: 48px 24px 24px; margin-top: 60px; }
.footer-grid { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: 1.5fr 1fr 1fr 1fr; gap: 40px; margin-bottom: 40px; }
.footer-logo { font-size: 18px; font-weight: 800; margin-bottom: 10px; color: #0f172a; }
.footer-tagline { font-size: 13px; color: #9ca3af; line-height: 1.6; }
.footer-col-title { font-size: 12px; font-weight: 700; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 14px; }
.footer-col a { display: block; font-size: 14px; color: #6b7280; text-decoration: none; margin-bottom: 8px; transition: color 0.2s; }
.footer-col a:hover { color: #8b5cf6; }
.footer-bottom { max-width: 1100px; margin: 0 auto; padding-top: 24px; border-top: 1px solid #e5e7eb; font-size: 12px; color: #9ca3af; text-align: center; }
@media (max-width: 768px) { .footer-grid { grid-template-columns: 1fr 1fr; gap: 28px; } }
</style>
<style>
/* ê¸€ë¡œë²Œ ì»¨íŠ¸ë¡¤ - ë¼ì´íŠ¸ í…Œë§ˆ ì˜¤ë²„ë¼ì´ë“œ */
.navbar #global-controls button,
nav #global-controls button {
  background: rgba(139,92,246,0.08) !important;
  border: 1px solid rgba(139,92,246,0.2) !important;
  color: #374151 !important;
}
.navbar #global-controls button:hover,
nav #global-controls button:hover {
  background: rgba(139,92,246,0.15) !important;
}

.activity-header { margin-bottom:16px; }
.activity-selector { display:flex; gap:8px; background:#f1f5f9; padding:4px; border-radius:12px; margin-bottom:24px; overflow-x:auto; }
.activity-btn { flex:1; padding:10px 14px; border:none; background:transparent; border-radius:8px; font-size:13px; font-weight:700; cursor:pointer; font-family:inherit; color:#6b7280; transition:all 0.2s; white-space:nowrap; }
.activity-btn.active { background:white; color:#8b5cf6; box-shadow:0 1px 4px rgba(0,0,0,0.1); }

.car-layout { display:grid; grid-template-columns:1fr 1.2fr; gap:20px; }
@media(max-width:768px) { .car-layout { grid-template-columns:1fr; } }

.car-left { display:flex; flex-direction:column; gap:16px; }
.car-right { display:flex; flex-direction:column; gap:16px; }

.car-player-card { background:white; border-radius:20px; padding:24px; border:1.5px solid #e5e7eb; }
.car-now-playing { display:flex; align-items:center; gap:16px; margin-bottom:20px; }
.car-album-art { width:64px; height:64px; background:linear-gradient(135deg,#8b5cf6,#7c3aed); border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:28px; flex-shrink:0; animation:spin-slow 8s linear infinite paused; }
.car-track-title { font-size:18px; font-weight:800; margin-bottom:4px; }
.car-track-artist { font-size:14px; color:#6b7280; margin-bottom:6px; }
.car-bpm-badge { display:inline-block; background:#ede9fe; color:#7c3aed; font-size:11px; font-weight:700; padding:3px 10px; border-radius:20px; }
.car-progress-bar { height:6px; background:#e5e7eb; border-radius:3px; cursor:pointer; overflow:hidden; }
.car-progress-fill { height:100%; background:#8b5cf6; border-radius:3px; transition:width 0.3s; }
.car-controls { display:flex; align-items:center; justify-content:center; gap:12px; margin-top:16px; }
.car-ctrl-btn { background:none; border:none; font-size:20px; cursor:pointer; padding:8px; border-radius:50%; transition:background 0.2s; }
.car-ctrl-btn:hover { background:#f1f5f9; }
.car-play-btn { width:52px; height:52px; border-radius:50%; background:#8b5cf6; border:none; color:white; font-size:22px; cursor:pointer; box-shadow:0 4px 12px rgba(139,92,246,0.4); transition:transform 0.1s; }
.car-play-btn:active { transform:scale(0.95); }

.car-settings-card { background:white; border-radius:16px; padding:20px; border:1.5px solid #e5e7eb; }
.car-settings-title { font-size:15px; font-weight:800; margin-bottom:16px; }
.car-setting-row { display:flex; align-items:center; justify-content:space-between; padding:10px 0; border-bottom:1px solid #f8fafc; }
.car-setting-label { font-size:13px; font-weight:600; color:#374151; }
.bpm-slider-row { display:flex; align-items:center; gap:10px; padding:8px 0; }
.bpm-value { min-width:32px; text-align:center; font-size:14px; font-weight:800; color:#8b5cf6; }
.toggle-switch { position:relative; display:inline-block; width:44px; height:24px; }
.toggle-switch input { opacity:0; width:0; height:0; }
.toggle-slider { position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:#e5e7eb; border-radius:24px; transition:0.3s; }
.toggle-slider:before { position:absolute; content:""; height:18px; width:18px; left:3px; bottom:3px; background:white; border-radius:50%; transition:0.3s; }
input:checked + .toggle-slider { background:#8b5cf6; }
input:checked + .toggle-slider:before { transform:translateX(20px); }
.saved-routes { display:flex; flex-wrap:wrap; gap:6px; }
.route-chip { padding:6px 12px; background:#f1f5f9; border-radius:20px; font-size:12px; font-weight:600; cursor:pointer; transition:all 0.2s; }
.route-chip.active { background:#8b5cf6; color:white; }

.car-card { background:white; border-radius:16px; padding:20px; border:1.5px solid #e5e7eb; }
.car-card-title { font-size:15px; font-weight:800; margin-bottom:16px; display:flex; align-items:center; gap:8px; }
.rec-track { display:flex; align-items:center; gap:10px; padding:10px 0; border-bottom:1px solid #f8fafc; cursor:pointer; transition:background 0.15s; border-radius:8px; padding:8px; }
.rec-track:hover { background:#f8fafc; }
.rec-track.active-track { background:#faf5ff; }
.rec-num { width:20px; text-align:center; font-size:13px; color:#9ca3af; }
.rec-title { font-size:14px; font-weight:600; }
.rec-meta { font-size:12px; color:#6b7280; margin-top:2px; }
.rec-bpm-badge { font-size:11px; background:#fef3c7; color:#92400e; padding:2px 8px; border-radius:10px; white-space:nowrap; }
.queue-item { display:flex; align-items:center; gap:10px; padding:8px; border-bottom:1px solid #f8fafc; }

.sp-track { display:flex; align-items:center; gap:10px; padding:10px 12px; cursor:pointer; transition:background 0.15s; }
.sp-track:hover { background:#f8fafc; }
.sp-track-thumb { width:36px; height:36px; border-radius:8px; display:flex; align-items:center; justify-content:center; color:white; font-size:16px; flex-shrink:0; }
.sp-track-title { font-size:13px; font-weight:600; }
.sp-track-artist { font-size:11px; color:#6b7280; }
.sp-track-genre { font-size:11px; background:#ede9fe; color:#7c3aed; padding:2px 8px; border-radius:10px; margin-left:auto; white-space:nowrap; }
</style>
  <meta property="og:title" content="Moving Radio - TimeLink">
  <meta property="og:description" content="ì´ë™ ì¤‘ BPM ê¸°ë°˜ ìŒì•… ì¶”ì²œ. TimeLink Moving Radio.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://taolee-crypto.github.io/timelink-frontend/public/car.html">
  <meta property="og:image" content="https://taolee-crypto.github.io/timelink-frontend/public/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Moving Radio - TimeLink">
  <meta name="twitter:description" content="ì´ë™ ì¤‘ BPM ê¸°ë°˜ ìŒì•… ì¶”ì²œ. TimeLink Moving Radio.">
  <meta name="description" content="ì´ë™ ì¤‘ BPM ê¸°ë°˜ ìŒì•… ì¶”ì²œ. TimeLink Moving Radio.">
  <link rel="canonical" href="https://taolee-crypto.github.io/timelink-frontend/public/car.html">
</head>
<body>

<nav class="navbar">
  <a href="index.html" class="logo"><div class="logo-icon">âš¡</div><div>Time<span>Link</span></div></a>
  <div id="global-controls" style="display:flex;align-items:center;gap:6px;margin-left:auto;margin-right:12px;"><div id="lang-selector"></div><div id="currency-selector"></div></div>
  <div class="nav-right" id="nav-guest">
    <a href="login.html" class="btn btn-outline btn-sm" data-i18n="nav_login">ë¡œê·¸ì¸</a>
    <a href="signup.html" class="btn btn-primary btn-sm" data-i18n="nav_start">ì‹œì‘í•˜ê¸°</a>
  </div>
  <div class="nav-right hidden" id="nav-auth">
    <div class="balance">
      <div class="balance-item"><span class="balance-label">TL</span><span class="balance-value" id="balance-tl">10,000</span></div>
      <div class="balance-item"><span class="balance-label">TLC</span><span class="balance-value" id="balance-tlc">0.0000</span></div>
    </div>
    <div class="avatar" onclick="toggleDropdown()">
      <span id="avatar-letter">U</span>
      <div class="dropdown" id="dropdown">
        <a href="wallet.html" class="dropdown-item" data-i18n="tab_wallet">ğŸ‘› ì§€ê°‘</a>
        <a href="library.html" class="dropdown-item" data-i18n="tab_library">ğŸ” ë¼ì´ë¸ŒëŸ¬ë¦¬</a>
        <a href="create.html" class="dropdown-item" data-i18n="tab_upload">ğŸ“¤ ì—…ë¡œë“œ</a>
        <a href="dashboard.html" class="dropdown-item" data-i18n="tab_dashboard">ğŸ“Š ëŒ€ì‹œë³´ë“œ</a>
        <div class="dropdown-divider"></div>
        <a href="charge.html" class="dropdown-item charge">ğŸ’³ TL ì¶©ì „</a>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item danger" onclick="logout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</div>
      </div>
    </div>
  </div>
</nav>

<div class="tabs">
  <a href="index.html" class="tab" data-i18n="tab_home">ğŸ  í™ˆ</a>
  <a href="shareplace.html" class="tab" data-i18n="tab_shareplace">ğŸ›ï¸ SharePlace</a>
  <a href="library.html" class="tab" data-i18n="tab_library">ğŸ” ë¼ì´ë¸ŒëŸ¬ë¦¬</a>
  <a href="create.html" class="tab" data-i18n="tab_upload">ğŸ“¤ ì—…ë¡œë“œ</a>
  <a href="radio.html" class="tab" data-i18n="tab_radio">â˜• ì¹´í˜ë°©ì†¡</a>
  <a href="car.html" class="tab active" data-i18n="tab_car">ğŸ§ Moving Radio</a>
  <a href="ads.html" class="tab" data-i18n="tab_ads">ğŸ“£ ê´‘ê³ </a>
  <a href="wallet.html" class="tab" data-i18n="tab_wallet">ğŸ‘› ì§€ê°‘</a>
  <a href="chart.html" class="tab" data-i18n="tab_chart">ğŸ“Š ì°¨íŠ¸</a>
  <a href="dashboard.html" class="tab" data-i18n="tab_dashboard">ğŸ“Š ëŒ€ì‹œë³´ë“œ</a>
</div>

<div class="container">

  <!-- í™œë™ ìœ í˜• ì„ íƒ -->
  <div class="activity-header">
    <h1 style="font-size:22px;font-weight:800;margin-bottom:4px;" data-i18n="tab_car">ğŸ§ Moving Radio</h1>
    <p style="color:#6b7280;font-size:14px;">ì´ë™ ì¤‘ ìµœì í™”ëœ ìŒì•… â€” BPM, í™œë™ì— ë§ê²Œ ìë™ íë ˆì´ì…˜</p>
  </div>

  <!-- í™œë™ ìœ í˜• ì„ íƒ -->
  <div class="activity-selector">
    <button class="activity-btn" onclick="setActivity(this,'drive')" data-i18n="car_drive">ğŸš— ë“œë¼ì´ë¸Œ</button>
    <button class="activity-btn active" onclick="setActivity(this,'walk')" data-i18n="car_walk_act">ğŸš¶ ê±·ê¸°</button>
    <button class="activity-btn" onclick="setActivity(this,'run')" data-i18n="car_run">ğŸƒ ëŸ¬ë‹</button>
    <button class="activity-btn" onclick="setActivity(this,'cycle')" data-i18n="car_cycle">ğŸš´ ìì „ê±°</button>
  </div>

  <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
  <div class="car-layout">

    <!-- ì™¼ìª½: í”Œë ˆì´ì–´ + ì„¤ì • -->
    <div class="car-left">

      <!-- ë¯¸ë‹ˆ í”Œë ˆì´ì–´ -->
      <div class="car-player-card">
        <div class="car-now-playing">
          <div class="car-album-art" id="car-album">ğŸµ</div>
          <div class="car-track-info">
            <div class="car-track-title" id="car-title">Sunset Groove</div>
            <div class="car-track-artist" id="car-artist">Chill Collective</div>
            <div class="car-bpm-badge" id="car-bpm">â™© BPM 90 Â· Lo-Fi</div>
          </div>
        </div>
        <div class="car-progress-area">
          <div class="car-progress-bar" onclick="seekCar(event,this)">
            <div class="car-progress-fill" id="car-progress" style="width:35%"></div>
          </div>
          <div style="display:flex;justify-content:space-between;font-size:12px;color:#6b7280;margin-top:4px;">
            <span id="car-current">1:18</span><span id="car-total">3:42</span>
          </div>
        </div>
        <div class="car-controls">
          <button class="car-ctrl-btn" onclick="prevCarTrack()">â®</button>
          <button class="car-ctrl-btn" id="car-shuffle-btn" onclick="toggleCarShuffle()" title="ì…”í”Œ">ğŸ”€</button>
          <button class="car-play-btn" id="car-play-btn" onclick="toggleCarPlay()">â¸</button>
          <button class="car-ctrl-btn" id="car-repeat-btn" onclick="toggleCarRepeat()" title="ë°˜ë³µ">ğŸ”</button>
          <button class="car-ctrl-btn" onclick="nextCarTrack()">â­</button>
        </div>
      </div>

      <!-- ì´ë™ ì„¤ì • -->
      <div class="car-settings-card">
        <div class="car-settings-title" data-i18n="car_setup">âš™ï¸ ì´ë™ ì„¤ì •</div>

        <div class="car-setting-row">
          <div class="car-setting-label" data-i18n="car_bpm_auto">BPM ìë™ ë§ì¶¤</div>
          <label class="toggle-switch">
            <input type="checkbox" id="bpm-auto" checked onchange="toggleBpmAuto(this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="bpm-slider-row" id="bpm-slider-row">
          <span style="font-size:13px;color:#6b7280;">BPM</span>
          <input type="range" min="60" max="180" value="90" id="bpm-range" oninput="updateBPM(this.value)" style="flex:1;">
          <span class="bpm-value" id="bpm-val">90</span>
        </div>

        <div class="car-setting-row">
          <div class="car-setting-label" data-i18n="car_autoplay">ìë™ ì¬ìƒ</div>
          <label class="toggle-switch">
            <input type="checkbox" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="car-setting-row">
          <div class="car-setting-label" data-i18n="car_crossfade">í¬ë¡œìŠ¤í˜ì´ë“œ</div>
          <label class="toggle-switch">
            <input type="checkbox">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="car-setting-row">
          <div class="car-setting-label" data-i18n="car_no_signal">ì‹ í˜¸ ì—†ìŒ ì‹œ ì¬ìƒ ìœ ì§€</div>
          <label class="toggle-switch">
            <input type="checkbox" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div style="margin-top:16px;padding-top:16px;border-top:1px solid #f1f5f9;">
          <div style="font-size:13px;font-weight:700;margin-bottom:10px;" data-i18n="car_my_route">ğŸ“ ë‚´ ë£¨íŠ¸ ì €ì¥</div>
          <div class="saved-routes" id="saved-routes">
            <div class="route-chip active">ì§‘â†’íšŒì‚¬ (35ë¶„)</div>
            <div class="route-chip">ì§‘â†’í—¬ìŠ¤ì¥ (15ë¶„)</div>
            <div class="route-chip" onclick="addRoute()">+ ì¶”ê°€</div>
          </div>
        </div>
      </div>

      <!-- SharePlaceì—ì„œ ì„ íƒ -->
      <div class="car-settings-card">
        <div class="car-settings-title" data-i18n="car_shareplace">ğŸ›ï¸ SharePlaceì—ì„œ ì„ íƒ</div>
        <div style="background:#f8fafc;border-radius:10px;overflow:hidden;border:1px solid #e5e7eb;">
          <div style="padding:10px 12px;border-bottom:1px solid #e5e7eb;">
            <input type="text" placeholder="ğŸ” SharePlace ê²€ìƒ‰..." style="width:100%;border:none;background:transparent;font-size:14px;font-family:inherit;outline:none;" oninput="searchSP(this.value)">
          </div>
          <div id="car-sp-list">
            <div class="sp-track" onclick="addToCarQueue(this)" data-id="1">
              <div class="sp-track-thumb" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed);">ğŸµ</div>
              <div class="sp-track-info"><div class="sp-track-title">Sunset Groove</div><div class="sp-track-artist">Chill Â· BPM 90</div></div>
              <div class="sp-track-genre">Lo-Fi</div>
              <button class="btn btn-outline btn-sm" style="font-size:11px;" data-i18n="car_add_to_queue">+ ì¶”ê°€</button>
            </div>
            <div class="sp-track" onclick="addToCarQueue(this)" data-id="2">
              <div class="sp-track-thumb" style="background:linear-gradient(135deg,#f59e0b,#d97706);">ğŸƒ</div>
              <div class="sp-track-info"><div class="sp-track-title">Morning Run</div><div class="sp-track-artist">Energy Â· BPM 140</div></div>
              <div class="sp-track-genre">Electronic</div>
              <button class="btn btn-outline btn-sm" style="font-size:11px;" data-i18n="car_add_to_queue">+ ì¶”ê°€</button>
            </div>
            <div class="sp-track" onclick="addToCarQueue(this)" data-id="3">
              <div class="sp-track-thumb" style="background:linear-gradient(135deg,#10b981,#059669);">ğŸš—</div>
              <div class="sp-track-info"><div class="sp-track-title">Highway Drive</div><div class="sp-track-artist">Rock Â· BPM 120</div></div>
              <div class="sp-track-genre">Rock</div>
              <button class="btn btn-outline btn-sm" style="font-size:11px;" data-i18n="car_add_to_queue">+ ì¶”ê°€</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ì˜¤ë¥¸ìª½: ì¶”ì²œ íŠ¸ë™ + ëŒ€ê¸°ì—´ -->
    <div class="car-right">
      <!-- ì¶”ì²œ íŠ¸ë™ -->
      <div class="car-card">
        <div class="car-card-title">ğŸµ ì¶”ì²œ íŠ¸ë™ <small style="font-size:12px;font-weight:500;color:#6b7280;" id="recommend-mode">ê±·ê¸° ìµœì í™”</small></div>
        <div id="rec-track-list">
          <div class="rec-track" onclick="playRecTrack(this,0)">
            <div class="rec-num">1</div>
            <div class="sp-track-thumb" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed);width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;">ğŸµ</div>
            <div style="flex:1;"><div class="rec-title">Sunset Groove</div><div class="rec-meta">Chill Collective Â· BPM 90</div></div>
            <div class="rec-bpm-badge">BPM 90</div>
            <button class="btn btn-outline" style="font-size:11px;padding:4px 8px;" onclick="event.stopPropagation();addToCarQueue(this.closest('.rec-track'))">+</button>
          </div>
          <div class="rec-track" onclick="playRecTrack(this,1)">
            <div class="rec-num">2</div>
            <div class="sp-track-thumb" style="background:linear-gradient(135deg,#10b981,#059669);width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;">ğŸ¸</div>
            <div style="flex:1;"><div class="rec-title">Seoul Nights</div><div class="rec-meta">K-Indie Band Â· BPM 95</div></div>
            <div class="rec-bpm-badge">BPM 95</div>
            <button class="btn btn-outline" style="font-size:11px;padding:4px 8px;" onclick="event.stopPropagation();addToCarQueue(this.closest('.rec-track'))">+</button>
          </div>
          <div class="rec-track" onclick="playRecTrack(this,2)">
            <div class="rec-num">3</div>
            <div class="sp-track-thumb" style="background:linear-gradient(135deg,#f59e0b,#d97706);width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;">ğŸ¹</div>
            <div style="flex:1;"><div class="rec-title">Jazz Morning</div><div class="rec-meta">Blue Note Trio Â· BPM 85</div></div>
            <div class="rec-bpm-badge">BPM 85</div>
            <button class="btn btn-outline" style="font-size:11px;padding:4px 8px;" onclick="event.stopPropagation();addToCarQueue(this.closest('.rec-track'))">+</button>
          </div>
          <div class="rec-track" onclick="playRecTrack(this,3)">
            <div class="rec-num">4</div>
            <div class="sp-track-thumb" style="background:linear-gradient(135deg,#ef4444,#dc2626);width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;">ğŸ¤</div>
            <div style="flex:1;"><div class="rec-title">City Rain</div><div class="rec-meta">Urban Soul Â· BPM 88</div></div>
            <div class="rec-bpm-badge">BPM 88</div>
            <button class="btn btn-outline" style="font-size:11px;padding:4px 8px;" onclick="event.stopPropagation();addToCarQueue(this.closest('.rec-track'))">+</button>
          </div>
          <div class="rec-track" onclick="playRecTrack(this,4)">
            <div class="rec-num">5</div>
            <div class="sp-track-thumb" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;">ğŸŒŠ</div>
            <div style="flex:1;"><div class="rec-title">Ocean Drive</div><div class="rec-meta">Chillwave Â· BPM 92</div></div>
            <div class="rec-bpm-badge">BPM 92</div>
            <button class="btn btn-outline" style="font-size:11px;padding:4px 8px;" onclick="event.stopPropagation();addToCarQueue(this.closest('.rec-track'))">+</button>
          </div>
        </div>
        <button class="btn btn-outline" style="width:100%;margin-top:12px;font-size:13px;" onclick="shuffleAll()">ğŸ”€ ì „ì²´ ì…”í”Œ ì¬ìƒ</button>
      </div>

      <!-- ì¬ìƒ ëŒ€ê¸°ì—´ -->
      <div class="car-card">
        <div class="car-card-title" data-i18n="car_queue_title">ğŸ“‹ ì¬ìƒ ëŒ€ê¸°ì—´ <span id="queue-count" style="background:#ede9fe;color:#7c3aed;font-size:12px;padding:2px 8px;border-radius:10px;margin-left:8px;">0</span></div>
        <div id="car-queue" style="min-height:60px;">
          <div id="queue-empty" style="text-align:center;padding:20px;color:#9ca3af;font-size:13px;">ëŒ€ê¸°ì—´ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</div>
        </div>
        <button class="btn btn-outline" style="width:100%;margin-top:12px;font-size:13px;" onclick="clearQueue()">ëŒ€ê¸°ì—´ ë¹„ìš°ê¸°</button>
      </div>
    </div>
  </div>

</div>

<footer class="page-footer">
  <div class="footer-grid">
    <div class="footer-col">
      <div class="footer-logo"><span style="background:#8b5cf6;border-radius:6px;padding:2px 8px;color:white;font-weight:800;">âš¡</span> TimeLink</div>
      <p class="footer-tagline" data-i18n="footer_slogan">ì°½ì‘ìë¥¼ ìœ„í•œ ìƒˆë¡œìš´ ìˆ˜ìµ í”Œë«í¼</p>
    </div>
    <div class="footer-col">
      <div class="footer-col-title" data-i18n="footer_service">ì„œë¹„ìŠ¤</div>
      <a href="shareplace.html">ğŸ›ï¸ SharePlace</a>
      <a href="creator.html" data-i18n="footer_creator">ğŸµ ì°½ì‘ì í”„ë¡œê·¸ë¨</a>
      <a href="pricing.html" data-i18n="footer_pricing">ğŸ’³ ìš”ê¸ˆì œ</a>
      <a href="radio.html">â˜• ì¹´í˜ë°©ì†¡</a>
    </div>
    <div class="footer-col">
      <div class="footer-col-title" data-i18n="footer_company">íšŒì‚¬</div>
      <a href="about.html" data-i18n="footer_about">ğŸ¢ íšŒì‚¬ ì†Œê°œ</a>
      <a href="tokenomics.html" data-i18n="footer_tokenomics">âš¡ í† í° ê²½ì œ</a>
      <a href="poc.html" data-i18n="footer_poc">ğŸ“Š ê¸°ì—¬ë„ ì‹œìŠ¤í…œ</a>
      <a href="roadmap.html" data-i18n="footer_roadmap">ğŸ—ºï¸ ë¡œë“œë§µ</a>
      <a href="faq.html" data-i18n="footer_faq">â“ FAQ</a>
    </div>
    <div class="footer-col">
      <div class="footer-col-title" data-i18n="footer_legal">ë²•ë¬´</div>
      <a href="terms.html" data-i18n="page_terms">ì´ìš©ì•½ê´€</a>
      <a href="privacy.html" data-i18n="footer_privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      <a href="copyright.html" data-i18n="page_copyright">ì €ì‘ê¶Œ ì •ì±…</a>
      <a href="copyright.html#report" style="color:#ef4444;" data-i18n="footer_report">ì €ì‘ê¶Œ ì¹¨í•´ ì‹ ê³ </a>
    </div>
  </div>
  <div class="footer-bottom">âš–ï¸ ëª¨ë“  íŒŒì¼ì˜ ì°½ì‘ê¶Œì€ ì°½ì‘ìì—ê²Œ ìˆìŠµë‹ˆë‹¤. Â© 2025 TimeLink. All rights reserved.</div>
</footer>

<script>
// ëª¨ë“œ ì„¤ì •
const modeData = {
  walk:  { bpm: 95,  desc: 'ê±·ê¸° Â· ì‚°ì±…ì— ìµœì ', ai: 'í˜„ì¬ Walk Modeì— ë§ëŠ” 85â€“110 BPM íŠ¸ë™ì„ ì¶”ì²œí•˜ê³  ìˆìŠµë‹ˆë‹¤.' },
  run:   { bpm: 155, desc: 'ë‹¬ë¦¬ê¸° Â· ìš´ë™ì— ìµœì ', ai: 'Run Mode: 140â€“180 BPM ê³ ì—ë„ˆì§€ íŠ¸ë™ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.' },
  drive: { bpm: 115, desc: 'ë“œë¼ì´ë¸Œì— ìµœì ', ai: 'Drive Mode: 100â€“130 BPM ë¦¬ë“œë¯¸ì»¬í•œ íŠ¸ë™ì„ ì¶”ì²œí•©ë‹ˆë‹¤.' },
  focus: { bpm: 70,  desc: 'ì§‘ì¤‘ Â· ë…ì„œì— ìµœì ', ai: 'Focus Mode: 60â€“80 BPM ë¡œìš°í…œí¬ íŠ¸ë™ìœ¼ë¡œ ì§‘ì¤‘ë ¥ì„ ë†’ì…ë‹ˆë‹¤.' },
};

function setMode(btn, mode) {
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  const d = modeData[mode];
  document.getElementById('bpm-slider').value = d.bpm;
  updateBPM(d.bpm);
  document.getElementById('ai-msg').textContent = d.ai;
}

function updateBPM(val) {
  document.getElementById('bpm-display').textContent = val + ' BPM';
  const v = parseInt(val);
  let desc = 'ì§‘ì¤‘ Â· ëª…ìƒ';
  if (v >= 80 && v < 100) desc = 'ê±·ê¸° Â· ì‚°ì±…ì— ìµœì ';
  else if (v >= 100 && v < 130) desc = 'ë¹ ë¥¸ ê±·ê¸° Â· ë“œë¼ì´ë¸Œ';
  else if (v >= 130 && v < 160) desc = 'ë‹¬ë¦¬ê¸° Â· ìš´ë™';
  else if (v >= 160) desc = 'ê³ ê°•ë„ íŠ¸ë ˆì´ë‹';
  document.getElementById('bpm-desc').textContent = desc;
}

// í”Œë ˆì´ì–´
let isPlaying = true;
let currentIdx = 0;
const tracks = [
  { title: 'Midnight Drive', artist: 'DJ Horizon', emoji: 'ğŸŒŒ', duration: '3:28' },
  { title: 'Ocean Walk', artist: 'Wave Collective', emoji: 'ğŸŒŠ', duration: '4:02' },
  { title: 'Urban Pulse', artist: 'Metro Sound', emoji: 'ğŸ”¥', duration: '3:15' },
  { title: 'Night Rider', artist: 'Neon City', emoji: 'ğŸŒ™', duration: '3:55' },
  { title: 'Run Free', artist: 'Pulse Runner', emoji: 'âš¡', duration: '3:40' },
  { title: 'Spring Morning', artist: 'Acoustic Garden', emoji: 'ğŸŒ¸', duration: '4:18' },
  { title: 'Street Beat', artist: 'Urban Folk', emoji: 'ğŸ¸', duration: '3:22' },
  { title: 'Hyperdrive', artist: 'Synthwave X', emoji: 'ğŸš€', duration: '4:05' },
];

function playTrack(el, idx) {
  document.querySelectorAll('.track-item').forEach((t, i) => {
    t.classList.remove('active');
    t.querySelector('.track-num').textContent = i + 1;
  });
  el.classList.add('active');
  el.querySelector('.track-num').textContent = 'â–¶';
  currentIdx = idx;
  const t = tracks[idx];
  document.getElementById('now-title').textContent = t.title;
  document.getElementById('now-artist').textContent = t.artist + ' Â· Electronic';
  document.getElementById('album-art').textContent = t.emoji;
  document.getElementById('tot-time').textContent = t.duration;
  document.getElementById('progress').style.width = '0%';
  isPlaying = true;
  document.getElementById('play-btn').textContent = 'â¸';
  document.getElementById('album-art').classList.add('playing');
}

function togglePlay() {
  isPlaying = !isPlaying;
  document.getElementById('play-btn').textContent = isPlaying ? 'â¸' : 'â–¶';
  const art = document.getElementById('album-art');
  isPlaying ? art.classList.add('playing') : art.classList.remove('playing');
}

function nextTrack() {
  const items = document.querySelectorAll('.track-item');
  currentIdx = (currentIdx + 1) % items.length;
  playTrack(items[currentIdx], currentIdx);
}

function prevTrack() {
  const items = document.querySelectorAll('.track-item');
  currentIdx = (currentIdx - 1 + items.length) % items.length;
  playTrack(items[currentIdx], currentIdx);
}

function shuffleAll() {
  const items = document.querySelectorAll('.track-item');
  const rand = Math.floor(Math.random() * items.length);
  playTrack(items[rand], rand);
}

let shuffleOn = false;
function toggleShuffle() {
  shuffleOn = !shuffleOn;
  document.getElementById('shuffle-btn').style.opacity = shuffleOn ? '1' : '0.5';
}

function toggleChip(el) {
  el.classList.toggle('active');
}

function seekTrack(e, bar) {
  const pct = e.offsetX / bar.offsetWidth * 100;
  document.getElementById('progress').style.width = pct + '%';
}

// ì§„í–‰ ë°” ìë™ ì—…ë°ì´íŠ¸ (ë°ëª¨)
let prog = 35;
setInterval(() => {
  if (isPlaying) {
    prog = (prog + 0.05) % 100;
    document.getElementById('progress').style.width = prog + '%';
  }
}, 300);

// ë„¤ë¹„ê²Œì´ì…˜
function toggleDropdown() { document.getElementById('dropdown')?.classList.toggle('show'); }
document.addEventListener('click', function(e) { if (!e.target.closest('.avatar')) document.getElementById('dropdown')?.classList.remove('show'); });
function logout() { localStorage.removeItem('tl_user'); window.location.href = 'index.html'; }
(function() {
  const user = JSON.parse(localStorage.getItem('tl_user') || 'null');
  if (user) {
    document.getElementById('nav-auth')?.classList.remove('hidden');
    document.getElementById('nav-guest')?.classList.add('hidden');
    const tl = document.getElementById('balance-tl'); if (tl) tl.textContent = (user.tl || 10000).toLocaleString();
    const tlc = document.getElementById('balance-tlc'); if (tlc) tlc.textContent = (user.tlc || 0).toFixed(4);
    const av = document.getElementById('avatar-letter'); if (av) av.textContent = (user.username || 'U').charAt(0).toUpperCase();
  } else {
    document.getElementById('nav-auth')?.classList.add('hidden');
    document.getElementById('nav-guest')?.classList.remove('hidden');
  }
})();
</script>
<script src="tl-economy.js"></script>
<script src="i18n.js"></script>
<script src="currency.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  // ì–¸ì–´ ì„ íƒê¸° ì‚½ì…
  if (typeof I18N !== "undefined") {
    I18N.renderSelector("lang-selector");
  }
  // í†µí™” ì„ íƒê¸° ì‚½ì…
  if (typeof CURRENCY !== "undefined") {
    CURRENCY.renderSelector("currency-selector");
  }
});
</script>
<script>
// â”€â”€ ê³µí†µ ì¸ì¦ & ê¸€ë¡œë²Œ ì´ˆê¸°í™” â”€â”€
(function(){
  var currentUser = null;
  try { currentUser = JSON.parse(localStorage.getItem('tl_user') || 'null'); } catch(e){}

  function toggleDropdown(){ var d=document.getElementById('dropdown'); if(d) d.classList.toggle('show'); }
  window.toggleDropdown = toggleDropdown;

  function logout(){ localStorage.removeItem('tl_user'); localStorage.removeItem('auth_token'); window.location.href='index.html'; }
  window.logout = logout;

  function updateNavbar(){
    var navAuth=document.getElementById('nav-auth');
    var navGuest=document.getElementById('nav-guest');
    var balTl=document.getElementById('balance-tl');
    var balTlc=document.getElementById('balance-tlc');
    var avL=document.getElementById('avatar-letter');
    if(currentUser){
      if(navAuth) navAuth.classList.remove('hidden');
      if(navGuest) navGuest.classList.add('hidden');
      if(balTl) balTl.textContent = (currentUser.tl||0).toLocaleString();
      if(balTlc) balTlc.textContent = parseFloat(currentUser.tlc||0).toFixed(4);
      if(avL) avL.textContent = (currentUser.username||'U').charAt(0).toUpperCase();
    } else {
      if(navAuth) navAuth.classList.add('hidden');
      if(navGuest) navGuest.classList.remove('hidden');
    }
  }
  window.updateNavbar = updateNavbar;

  document.addEventListener('click', function(e){
    if(!e.target.closest('.avatar') && !e.target.closest('#dropdown')){
      var d=document.getElementById('dropdown');
      if(d) d.classList.remove('show');
    }
  });

  document.addEventListener('DOMContentLoaded', function(){
    updateNavbar();
    if(typeof I18N!=='undefined'){ I18N.lang=I18N.detect(); I18N.renderSelector('lang-selector'); I18N.applyAll(); }
    if(typeof CURRENCY!=='undefined'){ CURRENCY.current=CURRENCY.detect(); CURRENCY.renderSelector('currency-selector'); CURRENCY.applyAll(); }
  });
})();
</script>

<script>
const BPM_MAP = { drive: 110, walk: 90, run: 145, cycle: 120 };
const MOOD_MAP = { drive: 'ë“œë¼ì´ë¸Œ ìµœì í™”', walk: 'ê±·ê¸° ìµœì í™”', run: 'ëŸ¬ë‹ ìµœì í™”', cycle: 'ë¼ì´ë”© ìµœì í™”' };
let currentActivity = 'walk';
let carPlaying = true;
let carQueue = [];
let carShuffle = false;
let carRepeat = false;

function setActivity(btn, mode) {
  document.querySelectorAll('.activity-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  currentActivity = mode;
  const bpm = BPM_MAP[mode];
  document.getElementById('bpm-range').value = bpm;
  document.getElementById('bpm-val').textContent = bpm;
  document.getElementById('car-bpm').textContent = `â™© BPM ${bpm}`;
  document.getElementById('recommend-mode').textContent = MOOD_MAP[mode];
}

function toggleCarPlay() {
  carPlaying = !carPlaying;
  document.getElementById('car-play-btn').textContent = carPlaying ? 'â¸' : 'â–¶';
}

function toggleCarShuffle() {
  carShuffle = !carShuffle;
  document.getElementById('car-shuffle-btn').style.color = carShuffle ? '#8b5cf6' : '';
}

function toggleCarRepeat() {
  carRepeat = !carRepeat;
  document.getElementById('car-repeat-btn').style.color = carRepeat ? '#8b5cf6' : '';
}

function nextCarTrack() { showToast('ë‹¤ìŒ íŠ¸ë™'); }
function prevCarTrack() { showToast('ì´ì „ íŠ¸ë™'); }

function updateBPM(val) {
  document.getElementById('bpm-val').textContent = val;
  document.getElementById('car-bpm').textContent = `â™© BPM ${val}`;
}

function toggleBpmAuto(checked) {
  document.getElementById('bpm-slider-row').style.display = checked ? 'flex' : 'none';
}

function seekCar(e, bar) {
  const pct = (e.offsetX / bar.offsetWidth) * 100;
  document.getElementById('car-progress').style.width = pct + '%';
}

function addToCarQueue(el) {
  const title = el.querySelector('.sp-track-title, .rec-title')?.textContent || 'íŠ¸ë™';
  const artist = el.querySelector('.sp-track-artist, .rec-meta')?.textContent || '';
  carQueue.push({ title, artist });
  renderCarQueue();
}

function renderCarQueue() {
  const qEl = document.getElementById('car-queue');
  const countEl = document.getElementById('queue-count');
  countEl.textContent = carQueue.length;
  if (!carQueue.length) {
    qEl.innerHTML = '<div id="queue-empty" style="text-align:center;padding:20px;color:#9ca3af;font-size:13px;">ëŒ€ê¸°ì—´ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</div>';
    return;
  }
  qEl.innerHTML = carQueue.map((t,i) => `
    <div class="queue-item">
      <span style="color:#9ca3af;font-size:12px;width:16px;">${i+1}</span>
      <div style="flex:1;"><div style="font-size:13px;font-weight:600;">${t.title}</div><div style="font-size:11px;color:#6b7280;">${t.artist}</div></div>
      <button onclick="removeFromQueue(${i})" style="background:none;border:none;color:#ef4444;cursor:pointer;">Ã—</button>
    </div>
  `).join('');
}

function removeFromQueue(i) { carQueue.splice(i,1); renderCarQueue(); }
function clearQueue() { carQueue = []; renderCarQueue(); }

function playRecTrack(el, idx) {
  document.querySelectorAll('.rec-track').forEach(t => t.classList.remove('active-track'));
  el.classList.add('active-track');
  const title = el.querySelector('.rec-title')?.textContent;
  const artist = el.querySelector('.rec-meta')?.textContent;
  document.getElementById('car-title').textContent = title;
  document.getElementById('car-artist').textContent = artist;
}

function shuffleAll() {
  showToast('ğŸ”€ ì „ì²´ ì…”í”Œ ì¬ìƒ ì‹œì‘');
  carPlaying = true;
  document.getElementById('car-play-btn').textContent = 'â¸';
}

function searchSP(val) { /* SharePlace API ì—°ë™ */ }
function addRoute() { showToast('ë£¨íŠ¸ ì €ì¥ ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘'); }

function showToast(msg, type='info') {
  const t = document.createElement('div');
  t.textContent = msg;
  t.style.cssText = `position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:${type==='error'?'#ef4444':type==='success'?'#10b981':'#0f172a'};color:white;padding:12px 20px;border-radius:10px;font-size:14px;font-weight:600;z-index:9999;opacity:0;transition:opacity 0.3s;white-space:nowrap;`;
  document.body.appendChild(t);
  setTimeout(() => t.style.opacity='1', 10);
  setTimeout(() => { t.style.opacity='0'; setTimeout(() => t.remove(),300); }, 2000);
}

// ì§„í–‰ë°” ì‹œë®¬ë ˆì´ì…˜
setInterval(() => {
  if (!carPlaying) return;
  const prog = document.getElementById('car-progress');
  if (prog) {
    let w = parseFloat(prog.style.width) || 35;
    w = (w + 0.03) % 100;
    prog.style.width = w + '%';
  }
}, 1000);
</script>
</body>
</html>
