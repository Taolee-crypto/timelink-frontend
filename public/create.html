<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI ìŒì› ë“±ë¡ ë° ì—…ë¡œë“œ - TimeLink</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Inter', sans-serif; background: #f8f9fa; color: #1f2937; line-height: 1.5; padding: 24px;
}
.container { max-width: 1000px; margin: 0 auto; }

/* ë„¤ë¹„ê²Œì´ì…˜ */
.navbar {
  background: white; border-bottom: 1px solid #e5e7eb; padding: 0 24px; height: 64px;
  display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0;
  z-index: 100; margin-bottom: 24px; border-radius: 16px; box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}
.logo {
  display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 800;
  color: #1f2937; text-decoration: none;
}
.logo-icon { width: 32px; height: 32px; background: #10b981; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; }
.logo span { color: #10b981; }
.nav-right { display: flex; align-items: center; gap: 12px; }
.balance {
  background: #f3f4f6; border-radius: 999px; padding: 6px 16px; display: flex; align-items: center; gap: 16px;
}
.balance-item { display: flex; align-items: center; gap: 6px; font-size: 14px; }
.balance-label { color: #6b7280; font-weight: 500; }
.balance-value { font-weight: 700; color: #10b981; font-family: monospace; }
.avatar {
  width: 36px; height: 36px; background: #10b981; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;
  cursor: pointer; position: relative;
}
.dropdown {
  position: absolute; top: 100%; right: 0; margin-top: 8px; background: white;
  border: 1px solid #e5e7eb; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
  width: 200px; display: none; z-index: 1000;
}
.dropdown.show { display: block; }
.dropdown-item { padding: 12px 16px; cursor: pointer; transition: all 0.2s; font-size: 14px; color: #1f2937; text-decoration: none; display: block; }
.dropdown-item:hover { background: #f3f4f6; }

/* íƒ­ ë©”ë‰´ */
.tabs {
  display: flex; gap: 8px; margin-bottom: 24px; background: white; padding: 8px; border-radius: 999px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}
.tab {
  flex: 1; padding: 12px 24px; border-radius: 999px; font-weight: 600; cursor: pointer;
  text-align: center; transition: all 0.2s; border: none; background: transparent; color: #6b7280;
}
.tab.active { background: #10b981; color: white; }

/* ì¹´ë“œ */
.card {
  background: white; border-radius: 24px; padding: 32px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
  margin-bottom: 24px;
}
.section-title {
  font-size: 20px; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 8px;
}
.badge {
  background: #10b981; color: white; padding: 4px 12px; border-radius: 999px; font-size: 12px; font-weight: 600;
}

/* í”Œë«í¼ ê·¸ë¦¬ë“œ */
.platform-grid {
  display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; margin-bottom: 32px;
}
.platform-btn {
  padding: 16px 8px; border: 2px solid #e5e7eb; border-radius: 16px; background: white;
  cursor: pointer; transition: all 0.2s; text-align: center;
}
.platform-btn:hover { border-color: #10b981; background: #f0fdf4; transform: translateY(-2px); }
.platform-btn.active { border-color: #10b981; background: #f0fdf4; box-shadow: 0 4px 6px -1px rgba(16,185,129,0.2); }
.platform-icon { font-size: 24px; margin-bottom: 8px; }
.platform-name { font-weight: 600; font-size: 13px; margin-bottom: 2px; }
.platform-type { font-size: 10px; color: #6b7280; }

/* ì¸ì¦ ì„¹ì…˜ */
.auth-section {
  background: #f8fafc; border-radius: 20px; padding: 24px; margin-bottom: 24px; border: 1px solid #e5e7eb;
}
.auth-header {
  display: flex; align-items: center; gap: 12px; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;
}
.auth-header-icon {
  width: 48px; height: 48px; background: #10b981; border-radius: 12px;
  display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;
}
.auth-header-title { flex: 1; }
.auth-header-title h3 { font-size: 18px; font-weight: 700; margin-bottom: 4px; }
.auth-header-title p { color: #6b7280; font-size: 14px; }

/* ì…ë ¥ ê·¸ë¦¬ë“œ */
.input-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 24px;
}
.input-card {
  background: white; border-radius: 16px; padding: 20px; border: 2px dashed #e5e7eb; transition: all 0.2s;
}
.input-card:hover { border-color: #10b981; }
.input-card.has-image { border-color: #10b981; border-style: solid; background: #f0fdf4; }
.input-label {
  display: flex; align-items: center; gap: 8px; font-weight: 600; font-size: 14px; margin-bottom: 16px; color: #1f2937;
}
.input-label .step {
  width: 24px; height: 24px; background: #10b981; color: white; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700;
}
.input-field { margin-bottom: 16px; }
.input-field input {
  width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 12px; font-size: 14px;
  outline: none; transition: all 0.2s;
}
.input-field input:focus { border-color: #10b981; box-shadow: 0 0 0 3px rgba(16,185,129,0.1); }

/* ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ì—­ */
.image-upload-area {
  border: 2px dashed #e5e7eb; border-radius: 12px; padding: 20px; text-align: center;
  cursor: pointer; transition: all 0.2s; background: #f9fafb; min-height: 140px;
  display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;
}
.image-upload-area:hover { border-color: #10b981; background: #f0fdf4; }
.image-upload-area.has-image { border-color: #10b981; border-style: solid; background: #f0fdf4; padding: 8px; }
.upload-icon { font-size: 32px; margin-bottom: 8px; color: #6b7280; }
.upload-text { font-weight: 600; font-size: 14px; margin-bottom: 4px; }
.upload-hint { font-size: 11px; color: #6b7280; }
.upload-hint strong { color: #10b981; }

/* ì´ë¯¸ì§€ í”„ë¦¬ë·° */
.image-preview {
  width: 100%; max-height: 120px; object-fit: contain; border-radius: 8px; margin-bottom: 8px;
}
.image-filename {
  font-size: 11px; color: #10b981; font-weight: 600; white-space: nowrap; overflow: hidden;
  text-overflow: ellipsis; max-width: 100%; padding: 4px 8px; background: white; border-radius: 999px;
}
.remove-image {
  position: absolute; top: 4px; right: 4px; width: 24px; height: 24px; background: #ef4444;
  color: white; border: none; border-radius: 50%; cursor: pointer; display: flex;
  align-items: center; justify-content: center; font-size: 12px; font-weight: 700;
  opacity: 0; transition: opacity 0.2s;
}
.image-upload-area:hover .remove-image { opacity: 1; }

/* ì˜¤ë””ì˜¤ ì—…ë¡œë“œ ì˜ì—­ */
.audio-upload-area {
  border: 2px dashed #10b981; border-radius: 20px; padding: 40px; text-align: center;
  cursor: pointer; transition: all 0.2s; background: #f0fdf4; margin-bottom: 24px;
}
.audio-upload-area:hover {
  background: #d1fae5; transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(16,185,129,0.2);
}
.audio-icon { font-size: 48px; margin-bottom: 16px; color: #10b981; }
.audio-text { font-weight: 700; font-size: 18px; margin-bottom: 8px; }
.audio-hint { color: #6b7280; font-size: 14px; }
.audio-preview {
  display: flex; align-items: center; gap: 16px; background: white; border-radius: 16px;
  padding: 20px; margin-top: 20px;
}
.audio-info { flex: 1; }
.audio-title { font-weight: 700; font-size: 16px; margin-bottom: 4px; }
.audio-meta { color: #6b7280; font-size: 13px; }

/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
.progress-bar { height: 4px; background: #e5e7eb; border-radius: 2px; overflow: hidden; margin: 20px 0; }
.progress-fill { height: 100%; background: #10b981; width: 0%; transition: width 0.3s; }

/* ë²„íŠ¼ */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 12px 24px; border-radius: 999px; font-weight: 600; font-size: 14px;
  cursor: pointer; transition: all 0.2s; border: none; text-decoration: none;
}
.btn-primary {
  background: #10b981; color: white; width: 100%; padding: 16px; font-size: 16px;
}
.btn-primary:hover { background: #059669; transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgba(16,185,129,0.3); }
.btn-outline { background: white; color: #1f2937; border: 1px solid #e5e7eb; }
.btn-outline:hover { background: #f3f4f6; }
.btn-sm { padding: 8px 16px; font-size: 13px; }

/* OCR ê²°ê³¼ */
.ocr-result {
  background: #f0fdf4; border-radius: 12px; padding: 16px; margin-top: 20px; display: none;
}
.ocr-result.show { display: block; }
.ocr-item {
  display: flex; align-items: center; gap: 8px; padding: 8px 0; border-bottom: 1px solid #d1fae5;
}
.ocr-item:last-child { border-bottom: none; }
.ocr-check { color: #10b981; font-weight: 700; }
.ocr-label { flex: 1; font-size: 13px; }
.ocr-detail { color: #6b7280; font-size: 12px; }

/* ì¸ì¦ ë°°ì§€ */
.auth-badge {
  display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; border-radius: 999px;
  font-size: 11px; font-weight: 600; background: #f3f4f6; color: #4b5563;
}
.auth-badge.verified { background: #d1fae5; color: #065f46; }

/* ì €ì‘ê¶Œ ë°°ë„ˆ */
.creation-rights-banner {
  background: #e0f2fe; border: 1px solid #7dd3fc; border-radius: 12px;
  padding: 16px 20px; margin: 0 24px 16px 24px; display: flex; align-items: center; gap: 16px;
}
</style>
</head>
<body>
<div class="creation-rights-banner">
  <div style="font-size: 24px;">ğŸ¨</div>
  <div style="flex: 1;">
    <div style="font-weight: 700; margin-bottom: 4px;">ì°½ì‘ê¶Œ ë³´í˜¸ ì •ì±…</div>
    <div style="font-size: 13px;">ëª¨ë“  íŒŒì¼ì˜ ì°½ì‘ê¶Œì€ ì°½ì‘ìì—ê²Œ ìˆìŠµë‹ˆë‹¤. ë¬´ë‹¨ ë„ìš© ì‹œ ë²•ì  ì¡°ì¹˜ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
  </div>
  <a href="creation-rights-policy.html" style="color: #0284c7; font-weight: 600; text-decoration: none;">ìì„¸íˆ</a>
</div>

<nav class="navbar">
  <a href="index.html" class="logo"><div class="logo-icon">âš¡</div><div>Time<span>Link</span></div></a>
  <div class="nav-right">
    <div class="balance"><span>TL <strong id="balance-tl">10,000</strong></span><span style="color:#10b981" id="balance-tlc">0.0000</span></div>
    <div class="avatar" onclick="toggleDropdown()"><span id="avatar-letter">D</span>
      <div class="dropdown" id="dropdown">
        <a href="wallet.html" class="dropdown-item">ğŸ‘› ë‚´ ì§€ê°‘</a>
        <a href="library.html" class="dropdown-item">ğŸ” ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬</a>
        <a href="create.html" class="dropdown-item">ğŸ“¤ ì—…ë¡œë“œ</a>
        <a href="settings.html" class="dropdown-item">âš™ï¸ ì„¤ì •</a>
        <div class="dropdown-item danger" onclick="logout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</div>
      </div>
    </div>
  </div>
</nav>

<div class="container">
  <div class="tabs">
    <button class="tab active" onclick="switchTab('ai')">ğŸ¤– AI ìŒì› ë“±ë¡</button>
    <button class="tab" onclick="switchTab('direct')">ğŸ“¤ ì§ì ‘ ì—…ë¡œë“œ</button>
  </div>

  <!-- AI ìŒì› ë“±ë¡ íƒ­ -->
  <div id="ai-tab" class="tab-content">
    <div class="card">
      <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
        <div><h1 style="font-size: 28px; font-weight: 800; margin-bottom: 4px;">ğŸ¤– AI ìŒì› ë“±ë¡</h1><p style="color: #6b7280;">AI í”Œë«í¼ì—ì„œ ìƒì„±í•œ ìŒì›ì„ 3ë‹¨ê³„ ì¸ì¦ìœ¼ë¡œ TL íŒŒì¼ë¡œ ë³€í™˜í•˜ì„¸ìš”</p></div>
        <span class="badge">ìœ ë£Œ íšŒì› ì „ìš©</span>
      </div>

      <!-- AI í”Œë«í¼ ì„ íƒ -->
      <div class="platform-grid">
        <div class="platform-btn active" data-platform="suno"><div class="platform-icon">ğŸµ</div><div class="platform-name">Suno</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="udio"><div class="platform-icon">ğŸ¶</div><div class="platform-name">Udio</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="mubert"><div class="platform-icon">ğŸŒŠ</div><div class="platform-name">Mubert</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="aiva"><div class="platform-icon">ğŸ»</div><div class="platform-name">AIVA</div><div class="platform-type">í´ë˜ì‹</div></div>
        <div class="platform-btn" data-platform="elevenlabs"><div class="platform-icon">ğŸ—£ï¸</div><div class="platform-name">ElevenLabs</div><div class="platform-type">ë³´ì´ìŠ¤</div></div>
        <div class="platform-btn" data-platform="beatoven"><div class="platform-icon">ğŸ¹</div><div class="platform-name">Beatoven</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="soundraw"><div class="platform-icon">ğŸ¸</div><div class="platform-name">Soundraw</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="boomy"><div class="platform-icon">ğŸ¥</div><div class="platform-name">Boomy</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="loudly"><div class="platform-icon">ğŸ“¢</div><div class="platform-name">Loudly</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="amper"><div class="platform-icon">ğŸ”Š</div><div class="platform-name">Amper</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="stable"><div class="platform-icon">ğŸ™ï¸</div><div class="platform-name">Stable Audio</div><div class="platform-type">ìŒì•…</div></div>
        <div class="platform-btn" data-platform="riffusion"><div class="platform-icon">ğŸ¸</div><div class="platform-name">Riffusion</div><div class="platform-type">ìŒì•…</div></div>
      </div>

      <!-- 3ë‹¨ê³„ ì¸ì¦ ì„¹ì…˜ -->
      <div class="auth-section">
        <div class="auth-header">
          <div class="auth-header-icon" id="ai-platform-icon">ğŸµ</div>
          <div class="auth-header-title"><h3>êµ¬ë… ì¸ì¦ â€” <span id="ai-platform-name">Suno</span></h3><p>3ê°€ì§€ ì¦ë¹™ ìë£Œë¥¼ ëª¨ë‘ ì œì¶œí•´ì•¼ ì¸ì¦ë©ë‹ˆë‹¤</p></div>
        </div>

        <div class="input-grid">
          <!-- 1. í”„ë¡œí•„ ì¸ì¦ -->
          <div class="input-card" id="ai-step1-card">
            <div class="input-label"><span class="step">1</span>í”„ë¡œí•„ ì¸ì¦</div>
            <div class="input-field"><input type="url" id="ai-profile-url" placeholder="https://suno.com/@username"></div>
            <div class="image-upload-area" id="ai-profile-area" onclick="document.getElementById('ai-profile-file').click()" ondragover="event.preventDefault()" ondrop="handleAIDrop(event, 'profile')">
              <input type="file" id="ai-profile-file" accept="image/*" style="display:none" onchange="handleAIFile(this, 'profile')">
              <div class="upload-icon">ğŸ“¸</div><div class="upload-text">í”„ë¡œí•„ í™”ë©´ ìº¡ì²˜</div><div class="upload-hint">í´ë¦­ Â· ë“œë˜ê·¸ Â· <strong>Ctrl+V</strong></div>
              <div class="image-filename" id="ai-profile-filename"></div>
            </div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 8px; text-align: center;">í”„ë¡œí•„ URL + ê³„ì •ëª…ì´ ë³´ì´ëŠ” í™”ë©´</div>
          </div>

          <!-- 2. ê²°ì œ ì¦ëª… -->
          <div class="input-card" id="ai-step2-card">
            <div class="input-label"><span class="step">2</span>ê²°ì œ ì¦ëª…</div>
            <div class="input-field"><input type="email" id="ai-payment-email" placeholder="ê²°ì œ ì´ë©”ì¼ (ì„ íƒ)"></div>
            <div class="image-upload-area" id="ai-payment-area" onclick="document.getElementById('ai-payment-file').click()" ondragover="event.preventDefault()" ondrop="handleAIDrop(event, 'payment')">
              <input type="file" id="ai-payment-file" accept="image/*" style="display:none" onchange="handleAIFile(this, 'payment')">
              <div class="upload-icon">ğŸ’³</div><div class="upload-text">ê²°ì œ ì˜ìˆ˜ì¦/ë‚´ì—­</div><div class="upload-hint">í´ë¦­ Â· ë“œë˜ê·¸ Â· <strong>Ctrl+V</strong></div>
              <div class="image-filename" id="ai-payment-filename"></div>
            </div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 8px; text-align: center;">êµ¬ë… ê²°ì œ ë‚´ì—­ Â· ì˜ìˆ˜ì¦ Â· ì¹´ë“œ ëª…ì„¸ì„œ</div>
          </div>

          <!-- 3. ìŒì› ìƒì„± ì¦ëª… -->
          <div class="input-card" id="ai-step3-card">
            <div class="input-label"><span class="step">3</span>ìƒì„± ì¦ëª…</div>
            <div class="input-field"><input type="url" id="ai-song-url" placeholder="https://suno.com/song/..."></div>
            <div class="image-upload-area" id="ai-song-area" onclick="document.getElementById('ai-song-file').click()" ondragover="event.preventDefault()" ondrop="handleAIDrop(event, 'song')">
              <input type="file" id="ai-song-file" accept="image/*" style="display:none" onchange="handleAIFile(this, 'song')">
              <div class="upload-icon">ğŸµ</div><div class="upload-text">ìƒì„± í™”ë©´ ìº¡ì²˜</div><div class="upload-hint">í´ë¦­ Â· ë“œë˜ê·¸ Â· <strong>Ctrl+V</strong></div>
              <div class="image-filename" id="ai-song-filename"></div>
            </div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 8px; text-align: center;">ê³¡ ì œëª© Â· ìƒì„± ì¼ì‹œ Â· ê³„ì •ëª… í¬í•¨</div>
          </div>
        </div>

        <!-- í”Œëœ ì„ íƒ -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
          <div><label style="font-size: 12px; font-weight: 600; color: #6b7280;">êµ¬ë… í”Œëœ</label>
            <select id="ai-plan-select" style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 12px;">
              <option value="pro">Pro</option><option value="premier">Premier</option><option value="creator">Creator</option><option value="business">Business</option>
            </select>
          </div>
          <div><label style="font-size: 12px; font-weight: 600; color: #6b7280;">êµ¬ë… ì‹œì‘ì¼</label>
            <input type="month" id="ai-subscription-month" style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 12px;" value="2026-02">
          </div>
        </div>

        <!-- AI ìƒì„± ìŒì› íŒŒì¼ ì—…ë¡œë“œ -->
        <div style="margin-bottom: 20px;">
          <label style="font-size: 12px; font-weight: 600; color: #6b7280;">ğŸµ AI ìƒì„± ìŒì› íŒŒì¼</label>
          <div class="audio-upload-area" id="ai-audio-area" onclick="document.getElementById('ai-audio-file').click()" ondragover="event.preventDefault()" ondrop="handleAIAudioDrop(event)">
            <input type="file" id="ai-audio-file" accept="audio/*" style="display:none" onchange="handleAIAudioFile(this)">
            <div class="audio-icon">ğŸµ</div><div class="audio-text">AI ìƒì„± ìŒì› íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</div><div class="audio-hint">MP3, WAV, FLAC Â· ìµœëŒ€ 100MB</div>
          </div>
          <div id="ai-audio-preview" class="audio-preview" style="display: none;">
            <div style="font-size: 32px;">ğŸµ</div>
            <div class="audio-info"><div class="audio-title" id="ai-audio-title">audio_file.mp3</div><div class="audio-meta" id="ai-audio-size">0 MB</div></div>
            <button class="btn btn-outline btn-sm" onclick="removeAIAudio()">âœ•</button>
          </div>
        </div>

        <!-- OCR ê²°ê³¼ -->
        <div class="ocr-result" id="ai-ocr-result">
          <div style="font-weight: 600; margin-bottom: 12px;">ğŸ” AI OCR ë¶„ì„ ê²°ê³¼</div>
          <div id="ai-ocr-items"></div>
        </div>

        <!-- ì§„í–‰ ìƒíƒœ -->
        <div class="progress-bar"><div class="progress-fill" id="ai-progress-fill" style="width: 0%"></div></div>
        <button class="btn btn-primary" id="ai-verify-btn" onclick="verifyAI()">ğŸ” AI OCR ì¸ì¦ ë¶„ì„ ì‹œì‘</button>
      </div>

      <!-- ë³€í™˜ ë¯¸ë¦¬ë³´ê¸° -->
      <div id="ai-preview-section" style="display: none; background: #f8fafc; border-radius: 20px; padding: 24px; margin-top: 24px;">
        <div style="display: flex; gap: 20px; align-items: center;">
          <div style="width: 80px; height: 80px; background: #10b981; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 36px; color: white;" id="ai-preview-icon">ğŸµ</div>
          <div style="flex: 1;">
            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;" id="ai-preview-title">AI Generated Track</div>
            <div style="color: #6b7280; font-size: 14px; margin-bottom: 8px;" id="ai-preview-artist">Suno Â· Pro í”Œëœ</div>
            <div style="display: flex; gap: 16px;">
              <div><span style="font-size: 11px; color: #6b7280;">ê¸¸ì´</span><br><span style="font-weight: 600;" id="ai-preview-duration">3:24</span></div>
              <div><span style="font-size: 11px; color: #6b7280;">ìƒì„±ì¼</span><br><span style="font-weight: 600;" id="ai-preview-date">2026-02</span></div>
              <div><span style="font-size: 11px; color: #6b7280;">ë³´ìƒ</span><br><span style="font-weight: 600; color: #10b981;" id="ai-preview-reward">+1,000 TL</span></div>
            </div>
            <div style="margin-top: 12px;"><span class="auth-badge verified" id="ai-preview-badge">âœ… ì¸ì¦ ì™„ë£Œ</span></div>
          </div>
        </div>
        <div style="display: flex; gap: 12px; margin-top: 20px; justify-content: flex-end;">
          <button class="btn btn-outline" onclick="cancelAIPreview()">ì·¨ì†Œ</button>
          <button class="btn btn-primary" onclick="convertAIToTrack()">âœ¨ TL íŒŒì¼ë¡œ ë³€í™˜í•˜ê¸°</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ì§ì ‘ ì—…ë¡œë“œ íƒ­ -->
  <div id="direct-tab" class="tab-content" style="display: none;">
    <div class="card">
      <h1 style="font-size: 28px; font-weight: 800; margin-bottom: 16px;">ğŸ“¤ ì§ì ‘ ì—…ë¡œë“œ</h1>
      <p style="color: #6b7280; margin-bottom: 32px;">ë‚´ê°€ ë§Œë“  ìŒì›/ì˜ìƒì„ ì§ì ‘ ì—…ë¡œë“œí•˜ê³  TLì„ ì¶©ì „í•˜ì„¸ìš”</p>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 24px;">
        <div class="platform-btn active" onclick="selectUploadType('audio')"><div style="font-size: 32px;">ğŸµ</div><div style="font-weight: 700;">TL3 Audio</div><div style="font-size: 12px;">MP3, WAV, FLAC</div></div>
        <div class="platform-btn" onclick="selectUploadType('video')"><div style="font-size: 32px;">ğŸ¬</div><div style="font-weight: 700;">TL4 Video</div><div style="font-size: 12px;">MP4, MOV, WebM</div></div>
      </div>

      <div class="audio-upload-area" id="direct-upload-area" onclick="document.getElementById('direct-file').click()" ondragover="event.preventDefault()" ondrop="handleDirectDrop(event)">
        <input type="file" id="direct-file" accept="audio/*,video/*" style="display:none" onchange="handleDirectFile(this)">
        <div class="audio-icon">ğŸ“‚</div><div class="audio-text">íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ</div><div class="audio-hint">ì˜¤ë””ì˜¤/ì˜ìƒ Â· ìµœëŒ€ 500MB</div>
      </div>

      <div id="direct-preview" class="audio-preview" style="display: none;">
        <div style="font-size: 32px;" id="direct-file-icon">ğŸµ</div>
        <div class="audio-info"><div class="audio-title" id="direct-filename">filename.mp3</div><div class="audio-meta" id="direct-filesize">0 MB</div></div>
        <button class="btn btn-outline btn-sm" onclick="removeDirectFile()">âœ•</button>
      </div>

      <div style="margin-top: 24px;">
        <div style="margin-bottom: 16px;"><label>ì œëª© *</label><input type="text" id="direct-title" style="width:100%; padding:12px; border:1px solid #e5e7eb; border-radius:12px;" placeholder="íŠ¸ë™ / ì˜ìƒ ì œëª©"></div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
          <div><label>ì¹´í…Œê³ ë¦¬</label><select id="direct-category" style="width:100%; padding:12px; border:1px solid #e5e7eb; border-radius:12px;"><option value="K-POP">K-POP</option><option value="Electronic">Electronic</option><option value="Hip-Hop">Hip-Hop</option></select></div>
          <div><label>ìˆ˜ìµ ëª¨ë¸</label><select id="direct-model" style="width:100%; padding:12px; border:1px solid #e5e7eb; border-radius:12px;"><option value="70-30">7:3 (70% ì¦‰ì‹œ TL)</option><option value="50-50">5:5 (50% TLC ì±„êµ´)</option></select></div>
        </div>

        <div style="background: #f3f4f6; border-radius: 16px; padding: 20px; margin-bottom: 24px;">
          <div style="font-weight: 700; margin-bottom: 12px;">ğŸ’° íŒŒì¼ì— TL ì¶©ì „</div>
          <div style="display: flex; gap: 8px; margin-bottom: 12px;">
            <input type="number" id="direct-tl" value="1000" min="100" style="flex:1; padding:12px; border:1px solid #e5e7eb; border-radius:12px;">
            <button class="btn btn-outline btn-sm" onclick="document.getElementById('direct-tl').value=500">500</button>
            <button class="btn btn-outline btn-sm" onclick="document.getElementById('direct-tl').value=1000">1K</button>
          </div>
          <div style="font-size: 14px; color: #6b7280;">ë‚´ ì”ê³ : <span class="text-green" id="direct-balance">10,000</span> TL</div>
        </div>

        <button class="btn btn-primary" id="direct-upload-btn" onclick="uploadDirect()" disabled>íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</button>
      </div>
    </div>
  </div>
</div>

<!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
<div class="toast" id="toast" style="position: fixed; bottom: 24px; right: 24px; background: white; border-radius: 12px; padding: 16px 24px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); display: none; align-items: center; gap: 12px; z-index: 1000; border-left: 4px solid #10b981;">
  <div class="toast-icon" id="toast-icon">âœ…</div><div class="toast-message" id="toast-message">ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤</div>
</div>

<script>
// ì „ì—­ ìƒíƒœ
const state = {
  ai: {
    platform: 'suno',
    images: { profile: { file: null, url: null }, payment: { file: null, url: null }, song: { file: null, url: null } },
    audioFile: null,
    urls: { profile: '', song: '' },
    email: '',
    plan: 'pro',
    month: '2026-02',
    verified: false
  },
  direct: { file: null, type: 'audio', title: '', category: 'K-POP', model: '70-30', tl: 1000 },
  wallet: { tl: 10000, tlc: 0 }
};

const platforms = {
  suno: { name: 'Suno', icon: 'ğŸµ' }, udio: { name: 'Udio', icon: 'ğŸ¶' }, mubert: { name: 'Mubert', icon: 'ğŸŒŠ' },
  aiva: { name: 'AIVA', icon: 'ğŸ»' }, elevenlabs: { name: 'ElevenLabs', icon: 'ğŸ—£ï¸' }, beatoven: { name: 'Beatoven', icon: 'ğŸ¹' },
  soundraw: { name: 'Soundraw', icon: 'ğŸ¸' }, boomy: { name: 'Boomy', icon: 'ğŸ¥' }, loudly: { name: 'Loudly', icon: 'ğŸ“¢' },
  amper: { name: 'Amper', icon: 'ğŸ”Š' }, stable: { name: 'Stable Audio', icon: 'ğŸ™ï¸' }, riffusion: { name: 'Riffusion', icon: 'ğŸ¸' }
};

function $(id) { return document.getElementById(id); }

function showToast(message, type = 'success') {
  const toast = $('toast');
  $('toast-icon').textContent = type === 'success' ? 'âœ…' : 'âŒ';
  $('toast-message').textContent = message;
  toast.style.display = 'flex';
  setTimeout(() => { toast.style.display = 'none'; }, 3000);
}

function loadUser() {
  const user = JSON.parse(localStorage.getItem('tl_user') || '{}');
  if (user.tl) state.wallet.tl = user.tl;
  $('balance-tl').textContent = state.wallet.tl.toLocaleString();
  $('balance-tlc').textContent = (user.tlc || 0).toFixed(4);
  $('avatar-letter').textContent = (user.username || 'D').charAt(0).toUpperCase();
  $('direct-balance').textContent = state.wallet.tl.toLocaleString();
}
loadUser();

function toggleDropdown() { $('dropdown').classList.toggle('show'); }
document.addEventListener('click', (e) => { if (!e.target.closest('.avatar')) $('dropdown').classList.remove('show'); });
function logout() { localStorage.removeItem('tl_user'); window.location.href = 'index.html'; }

function switchTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
  if (tab === 'ai') { document.querySelector('.tab:first-child').classList.add('active'); $('ai-tab').style.display = 'block'; }
  else { document.querySelector('.tab:last-child').classList.add('active'); $('direct-tab').style.display = 'block'; }
}

// í”Œë«í¼ ì„ íƒ
document.querySelectorAll('[data-platform]').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('[data-platform]').forEach(b => b.classList.remove('active'));
    this.classList.add('active');
    state.ai.platform = this.dataset.platform;
    $('ai-platform-icon').textContent = platforms[state.ai.platform].icon;
    $('ai-platform-name').textContent = platforms[state.ai.platform].name;
  });
});

// ì´ë¯¸ì§€ ì—…ë¡œë“œ
function handleAIFile(input, type) { if (input.files?.[0]) handleAIImage(input.files[0], type); }
function handleAIDrop(e, type) { e.preventDefault(); if (e.dataTransfer.files?.[0]) handleAIImage(e.dataTransfer.files[0], type); }

function handleAIImage(file, type) {
  if (!file.type.startsWith('image/')) { showToast('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ê°€ëŠ¥', 'error'); return; }
  const reader = new FileReader();
  reader.onload = function(e) {
    state.ai.images[type] = { file, url: e.target.result };
    const area = $(`ai-${type}-area`), filename = $(`ai-${type}-filename`), card = $(`ai-step${type==='profile'?'1':type==='payment'?'2':'3'}-card`);
    const existing = area.querySelector('img'); if (existing) existing.remove();
    const img = document.createElement('img'); img.src = e.target.result; img.className = 'image-preview';
    area.insertBefore(img, area.firstChild);
    filename.textContent = file.name;
    area.classList.add('has-image'); card.classList.add('has-image');
    if (!area.querySelector('.remove-image')) {
      const rm = document.createElement('button'); rm.className = 'remove-image'; rm.innerHTML = 'âœ•';
      rm.onclick = (ev) => { ev.stopPropagation(); removeAIImage(type); };
      area.appendChild(rm);
    }
    updateAIProgress();
  };
  reader.readAsDataURL(file);
}

function removeAIImage(type) {
  state.ai.images[type] = { file: null, url: null };
  const area = $(`ai-${type}-area`), filename = $(`ai-${type}-filename`), card = $(`ai-step${type==='profile'?'1':type==='payment'?'2':'3'}-card`);
  area.querySelector('img')?.remove(); area.querySelector('.remove-image')?.remove();
  filename.textContent = '';
  area.classList.remove('has-image'); card.classList.remove('has-image');
  updateAIProgress();
}

function handleAIAudioFile(input) { if (input.files?.[0]) handleAIAudio(input.files[0]); }
function handleAIAudioDrop(e) { e.preventDefault(); if (e.dataTransfer.files?.[0]) handleAIAudio(e.dataTransfer.files[0]); }

function handleAIAudio(file) {
  if (!file.type.startsWith('audio/')) { showToast('ì˜¤ë””ì˜¤ íŒŒì¼ë§Œ ê°€ëŠ¥', 'error'); return; }
  state.ai.audioFile = file;
  $('ai-audio-area').style.display = 'none';
  $('ai-audio-preview').style.display = 'flex';
  $('ai-audio-title').textContent = file.name;
  $('ai-audio-size').textContent = (file.size / 1024 / 1024).toFixed(1) + ' MB';
  updateAIProgress();
}

function removeAIAudio() {
  state.ai.audioFile = null;
  $('ai-audio-area').style.display = 'block';
  $('ai-audio-preview').style.display = 'none';
  $('ai-audio-file').value = '';
  updateAIProgress();
}

function updateAIProgress() {
  let completed = 0;
  if (state.ai.images.profile.url) completed++;
  if (state.ai.images.payment.url) completed++;
  if (state.ai.images.song.url) completed++;
  if (state.ai.audioFile) completed++;
  $('ai-progress-fill').style.width = (completed / 4 * 100) + '%';
}

function verifyAI() {
  if (!state.ai.images.profile.url || !state.ai.images.payment.url || !state.ai.images.song.url || !state.ai.audioFile) {
    showToast('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error'); return;
  }
  const btn = $('ai-verify-btn');
  btn.disabled = true; btn.textContent = 'ğŸ” AI OCR ë¶„ì„ ì¤‘...';
  setTimeout(() => {
    const items = [
      { check: 'âœ…', label: 'í”„ë¡œí•„ URL í™•ì¸', detail: $('ai-profile-url').value || 'https://suno.com/@creator' },
      { check: 'âœ…', label: 'ê³„ì •ëª… ì¸ì‹', detail: '@creator' },
      { check: 'âœ…', label: 'êµ¬ë… ìƒíƒœ í™•ì¸', detail: `${platforms[state.ai.platform].name} ${state.ai.plan} í”Œëœ` },
      { check: 'âœ…', label: 'ê²°ì œ ë‚´ì—­ ì¸ì‹', detail: `${state.ai.month} êµ¬ë… ì™„ë£Œ` },
      { check: 'âœ…', label: 'ìŒì› ìƒì„± ì¼ì‹œ', detail: '2026-02-25 14:32:45' }
    ];
    $('ai-ocr-items').innerHTML = items.map(i => `<div class="ocr-item"><span class="ocr-check">${i.check}</span><span class="ocr-label">${i.label}</span><span class="ocr-detail">${i.detail}</span></div>`).join('');
    $('ai-ocr-result').classList.add('show');
    
    $('ai-preview-icon').textContent = platforms[state.ai.platform].icon;
    $('ai-preview-title').textContent = state.ai.audioFile?.name.replace(/\.[^/.]+$/, '') || 'AI Generated Track';
    $('ai-preview-artist').textContent = `${platforms[state.ai.platform].name} Â· ${state.ai.plan} í”Œëœ`;
    $('ai-preview-duration').textContent = '3:24';
    $('ai-preview-date').textContent = state.ai.month.replace('-', '.');
    $('ai-preview-section').style.display = 'block';
    
    btn.disabled = false; btn.textContent = 'ğŸ” AI OCR ì¸ì¦ ë¶„ì„ ì‹œì‘';
    state.ai.verified = true;
    showToast('âœ… AI OCR ì¸ì¦ ì™„ë£Œ!');
  }, 2000);
}

function cancelAIPreview() { $('ai-preview-section').style.display = 'none'; $('ai-ocr-result').classList.remove('show'); }

function convertAIToTrack() {
  const myFiles = JSON.parse(localStorage.getItem('tl_myfiles') || '[]');
  const newTrack = {
    id: 'ai_' + Date.now(),
    title: $('ai-preview-title').textContent,
    artist: platforms[state.ai.platform].name,
    genre: 'Electronic',
    type: 'audio',
    fileTL: 1000,
    maxFileTL: 1000,
    pulse: 0,
    url: state.ai.audioFile ? URL.createObjectURL(state.ai.audioFile) : 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
    source: state.ai.platform,
    authStatus: 'verified',
    shared: false,
    createdAt: Date.now()
  };
  myFiles.unshift(newTrack);
  localStorage.setItem('tl_myfiles', JSON.stringify(myFiles));
  
  const user = JSON.parse(localStorage.getItem('tl_user') || '{}');
  user.tl = (user.tl || 10000) + 1000;
  localStorage.setItem('tl_user', JSON.stringify(user));
  
  showToast(`âœ¨ ${platforms[state.ai.platform].name} ìŒì› ë³€í™˜ ì™„ë£Œ! +1,000 TL ì§€ê¸‰`);
  setTimeout(() => { window.location.href = 'library.html'; }, 2000);
}

function selectUploadType(type) { state.direct.type = type; }
function handleDirectFile(input) { if (input.files?.[0]) handleDirectUpload(input.files[0]); }
function handleDirectDrop(e) { e.preventDefault(); if (e.dataTransfer.files?.[0]) handleDirectUpload(e.dataTransfer.files[0]); }

function handleDirectUpload(file) {
  if (file.size > 500*1024*1024) { showToast('500MB ì´ˆê³¼', 'error'); return; }
  state.direct.file = file;
  $('direct-upload-area').style.display = 'none';
  $('direct-preview').style.display = 'flex';
  $('direct-file-icon').textContent = file.type.startsWith('video/') ? 'ğŸ¬' : 'ğŸµ';
  $('direct-filename').textContent = file.name;
  $('direct-filesize').textContent = (file.size / 1024 / 1024).toFixed(1) + ' MB';
  $('direct-upload-btn').disabled = false;
  $('direct-upload-btn').textContent = 'ì—…ë¡œë“œí•˜ê¸°';
}

function removeDirectFile() {
  state.direct.file = null;
  $('direct-upload-area').style.display = 'block';
  $('direct-preview').style.display = 'none';
  $('direct-file').value = '';
  $('direct-upload-btn').disabled = true;
  $('direct-upload-btn').textContent = 'íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”';
}

function uploadDirect() {
  if (!state.direct.file) { showToast('íŒŒì¼ ì„ íƒ', 'error'); return; }
  const title = $('direct-title').value.trim();
  if (!title) { showToast('ì œëª© ì…ë ¥', 'error'); return; }
  const tl = parseInt($('direct-tl').value) || 1000;
  const user = JSON.parse(localStorage.getItem('tl_user') || '{}');
  if (tl > (user.tl || 10000)) { showToast('ì”ê³  ë¶€ì¡±', 'error'); return; }
  
  const myFiles = JSON.parse(localStorage.getItem('tl_myfiles') || '[]');
  const newFile = {
    id: 'local_' + Date.now(),
    title: title,
    artist: user.username || 'ë‚˜',
    genre: $('direct-category').value,
    type: state.direct.type,
    fileTL: tl,
    maxFileTL: tl,
    pulse: 0,
    url: URL.createObjectURL(state.direct.file),
    authStatus: 'unverified',
    shared: false,
    createdAt: Date.now()
  };
  myFiles.unshift(newFile);
  localStorage.setItem('tl_myfiles', JSON.stringify(myFiles));
  user.tl = (user.tl || 10000) - tl;
  localStorage.setItem('tl_user', JSON.stringify(user));
  showToast('âœ… ì—…ë¡œë“œ ì™„ë£Œ!');
  setTimeout(() => { window.location.href = 'library.html'; }, 1500);
}

// ë¶™ì—¬ë„£ê¸°
document.addEventListener('paste', (e) => {
  const items = e.clipboardData.items;
  for (let i = 0; i < items.length; i++) {
    if (items[i].type.indexOf('image') !== -1) {
      const file = items[i].getAsFile();
      if ($('ai-tab').style.display !== 'none') {
        if (!state.ai.images.profile.url) handleAIImage(file, 'profile');
        else if (!state.ai.images.payment.url) handleAIImage(file, 'payment');
        else if (!state.ai.images.song.url) handleAIImage(file, 'song');
      }
      e.preventDefault(); break;
    }
  }
});

// ì…ë ¥ ì´ë²¤íŠ¸
$('ai-profile-url')?.addEventListener('input', e => state.ai.urls.profile = e.target.value);
$('ai-song-url')?.addEventListener('input', e => state.ai.urls.song = e.target.value);
$('ai-payment-email')?.addEventListener('input', e => state.ai.email = e.target.value);
$('ai-plan-select')?.addEventListener('change', e => state.ai.plan = e.target.value);
$('ai-subscription-month')?.addEventListener('change', e => state.ai.month = e.target.value);
$('direct-title')?.addEventListener('input', e => state.direct.title = e.target.value);
$('direct-tl')?.addEventListener('input', e => state.direct.tl = parseInt(e.target.value) || 1000);
</script>

<div style="background: #f9fafb; border-top: 1px solid #e5e7eb; padding: 20px 24px; margin-top: 40px; text-align: center; font-size: 12px; color: #6b7280;">
  <div style="max-width: 1200px; margin: 0 auto;">
    <div style="display: flex; justify-content: center; gap: 24px; margin-bottom: 12px; flex-wrap: wrap;">
      <a href="#" style="color: #4b5563; text-decoration: none;">ì €ì‘ê¶Œ ì •ì±…</a>
      <a href="#" style="color: #4b5563; text-decoration: none;">ì´ìš©ì•½ê´€</a>
      <a href="#" style="color: #4b5563; text-decoration: none;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      <a href="#" style="color: #ef4444; text-decoration: none;">ì €ì‘ê¶Œ ì¹¨í•´ ì‹ ê³ </a>
    </div>
    <div>âš–ï¸ ëª¨ë“  ë¯¸ì¸ì¦ íŒŒì¼ì˜ ë²•ì  ì±…ì„ì€ ì—…ë¡œë”ì—ê²Œ 100% ìˆìŠµë‹ˆë‹¤. ì €ì‘ê¶Œ ë³´í˜¸ë¥¼ ìœ„í•´ AI ìœ ì‚¬ë„ ê²€ì‚¬ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤.</div>
  </div>
</div>
</body>
</html>