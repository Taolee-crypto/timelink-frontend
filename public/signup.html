<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>íšŒì›ê°€ì… - TimeLink</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<!--
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  [DB í…Œì´ë¸” ì„¤ê³„ - ì¶”í›„ ë°±ì—”ë“œ êµ¬í˜„ ì‹œ ì‚¬ìš©]

  TABLE: users
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  id                BIGINT AUTO_INCREMENT PRIMARY KEY
  uid               VARCHAR(64) UNIQUE          -- Google UID ë˜ëŠ” ìì²´ ë°œê¸‰
  email             VARCHAR(255) UNIQUE NOT NULL
  email_verified    BOOLEAN DEFAULT FALSE
  username          VARCHAR(50) UNIQUE NOT NULL
  password_hash     VARCHAR(255)                -- bcrypt, Google ë¡œê·¸ì¸ ì‹œ NULL
  auth_provider     ENUM("google","email")      -- ë¡œê·¸ì¸ ë°©ì‹

  -- ê°œì¸ ì •ë³´ (ìˆ˜ìµ ì •ì‚°ìš© / ì•”í˜¸í™” ì €ì¥)
  real_name         VARCHAR(100)                -- ì‹¤ëª…
  birth_date        DATE                        -- ìƒë…„ì›”ì¼
  phone             VARCHAR(20)                 -- ì „í™”ë²ˆí˜¸
  phone_verified    BOOLEAN DEFAULT FALSE
  nationality       VARCHAR(10)                 -- êµ­ì  ì½”ë“œ (KR, US ...)
  country           VARCHAR(10)                 -- ê±°ì£¼ êµ­ê°€

  -- ê³„ì • ìœ í˜•
  account_type      ENUM("personal","business") DEFAULT "personal"
  business_name     VARCHAR(200)                -- ì‚¬ì—…ìëª…
  business_no       VARCHAR(20)                 -- ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸

  -- ìˆ˜ìµ ì •ì‚° ê³„ì¢Œ (ì•”í˜¸í™” ì €ì¥ í•„ìˆ˜)
  bank_name         VARCHAR(50)
  bank_account      VARCHAR(255)                -- AES-256 ì•”í˜¸í™”
  bank_holder       VARCHAR(100)
  account_verified  BOOLEAN DEFAULT FALSE       -- 1ì› ì¸ì¦ ì—¬ë¶€

  -- TL / TLC ì”ì•¡
  tl_balance        BIGINT DEFAULT 10000
  tlc_balance       DECIMAL(18,8) DEFAULT 0

  -- ë³¸ì¸ì¸ì¦ (ì†¡ê¸ˆ ì‹œ í•„ìš”)
  identity_verified BOOLEAN DEFAULT FALSE       -- PASS/ì•„ì´í•€ ì¸ì¦ ì—¬ë¶€
  identity_method   VARCHAR(50)                 -- pass, ipin, bank
  identity_at       DATETIME

  -- ë§ˆì¼€íŒ…
  marketing_agree   BOOLEAN DEFAULT FALSE

  -- ë©”íƒ€
  created_at        DATETIME DEFAULT NOW()
  updated_at        DATETIME
  last_login_at     DATETIME
  status            ENUM("active","suspended","deleted") DEFAULT "active"
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Inter, sans-serif; background: #f8fafc; color: #0f172a; line-height: 1.5; min-height: 100vh; }
.navbar { background: white; border-bottom: 1px solid #e2e8f0; padding: 0 24px; height: 64px; display: flex; align-items: center; justify-content: space-between; }
.logo { display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 800; text-decoration: none; color: #0f172a; }
.logo-icon { width: 32px; height: 32px; background: #8b5cf6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; }
.logo span { color: #8b5cf6; }
.main-content { display: flex; align-items: flex-start; justify-content: center; min-height: calc(100vh - 64px); padding: 40px 20px 80px; }
.signup-card { background: white; border-radius: 24px; padding: 40px; width: 100%; max-width: 520px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); }

/* ì§„í–‰ ë°” */
.progress-bar { display: flex; align-items: center; margin-bottom: 36px; }
.step-dot { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; flex-shrink: 0; transition: all 0.3s; }
.step-dot.done { background: #8b5cf6; color: white; }
.step-dot.active { background: #8b5cf6; color: white; box-shadow: 0 0 0 4px #ede9fe; }
.step-dot.pending { background: #f1f5f9; color: #9ca3af; }
.step-line { flex: 1; height: 2px; background: #f1f5f9; margin: 0 4px; transition: background 0.3s; }
.step-line.done { background: #8b5cf6; }
.step { display: none; }
.step.active { display: block; }
.step-title { font-size: 22px; font-weight: 800; margin-bottom: 6px; }
.step-desc { font-size: 14px; color: #6b7280; margin-bottom: 28px; }

/* ì…ë ¥ */
.input-group { margin-bottom: 16px; }
.input-label { font-size: 13px; font-weight: 700; color: #374151; margin-bottom: 6px; display: block; }
.required { color: #ef4444; margin-left: 2px; }
.optional { color: #9ca3af; font-weight: 400; font-size: 12px; margin-left: 4px; }
.input-field { width: 100%; padding: 12px 16px; border: 1.5px solid #e5e7eb; border-radius: 10px; font-size: 14px; font-family: Inter, sans-serif; outline: none; transition: border-color 0.2s; }
.input-field:focus { border-color: #8b5cf6; box-shadow: 0 0 0 3px rgba(139,92,246,0.1); }
.input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.input-hint { font-size: 12px; color: #9ca3af; margin-top: 4px; }
.input-hint.err { color: #ef4444; }
.btn-primary { width: 100%; padding: 14px; background: #8b5cf6; color: white; border: none; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.2s; font-family: Inter, sans-serif; margin-top: 8px; }
.btn-primary:hover { background: #7c3aed; }
.btn-secondary { width: 100%; padding: 12px; background: white; color: #6b7280; border: 1.5px solid #e5e7eb; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; font-family: Inter, sans-serif; margin-top: 8px; }
.btn-google { width: 100%; padding: 14px; background: white; color: #374151; border: 1.5px solid #e5e7eb; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; font-family: Inter, sans-serif; display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 16px; transition: all 0.2s; }
.btn-google:hover { background: #f9fafb; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
.divider { display: flex; align-items: center; gap: 12px; margin: 16px 0; color: #9ca3af; font-size: 13px; }
.divider::before, .divider::after { content: ""; flex: 1; height: 1px; background: #f1f5f9; }
.gmail-verified { background: #d1fae5; border: 1px solid #6ee7b7; border-radius: 12px; padding: 16px; display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
.gmail-check { width: 36px; height: 36px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; flex-shrink: 0; }
.type-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
.type-card { border: 2px solid #e5e7eb; border-radius: 16px; padding: 24px 16px; text-align: center; cursor: pointer; transition: all 0.2s; }
.type-card:hover { border-color: #c4b5fd; }
.type-card.selected { border-color: #8b5cf6; background: #faf5ff; }
.type-card .icon { font-size: 36px; margin-bottom: 10px; }
.type-card h3 { font-size: 16px; font-weight: 700; margin-bottom: 4px; }
.type-card p { font-size: 12px; color: #6b7280; }
.check-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 0; border-bottom: 1px solid #f1f5f9; }
.check-item:last-child { border-bottom: none; }
.check-item input { width: 18px; height: 18px; accent-color: #8b5cf6; flex-shrink: 0; margin-top: 2px; cursor: pointer; }
.check-item label { font-size: 14px; cursor: pointer; flex: 1; }
.check-item label a { color: #8b5cf6; text-decoration: none; }
.check-all { border-bottom: 2px solid #e5e7eb !important; }
.check-all label { font-weight: 700; }
.skip-notice { background: #fef3c7; border-radius: 10px; padding: 12px 16px; font-size: 13px; color: #92400e; margin-bottom: 16px; }
.success-box { text-align: center; padding: 20px 0; }
.tl-grant { background: linear-gradient(135deg, #ede9fe, #faf5ff); border-radius: 16px; padding: 20px; margin: 20px 0; }
.tl-amount { font-size: 36px; font-weight: 800; color: #8b5cf6; }
select.input-field { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 14px center; padding-right: 36px; }
.hidden { display: none !important; }
</style>
<script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

<nav class="navbar">
  <a href="index.html" class="logo"><div class="logo-icon">âš¡</div><div>Time<span>Link</span></div></a>
  <a href="login.html" style="font-size:14px;color:#6b7280;text-decoration:none;">ì´ë¯¸ ê³„ì •ì´ ìˆë‚˜ìš”? <strong style="color:#8b5cf6;">ë¡œê·¸ì¸</strong></a>
</nav>

<div class="main-content">
  <div class="signup-card">

    <div class="progress-bar" id="progress-bar">
      <div class="step-dot active" id="dot-1">1</div>
      <div class="step-line" id="line-1"></div>
      <div class="step-dot pending" id="dot-2">2</div>
      <div class="step-line" id="line-2"></div>
      <div class="step-dot pending" id="dot-3">3</div>
      <div class="step-line" id="line-3"></div>
      <div class="step-dot pending" id="dot-4">4</div>
      <div class="step-line" id="line-4"></div>
      <div class="step-dot pending" id="dot-5">5</div>
      <div class="step-line" id="line-5"></div>
      <div class="step-dot pending" id="dot-6">âœ“</div>
    </div>

    <!-- STEP 1: Gmail ì¸ì¦ -->
    <div class="step active" id="step-1">
      <div class="step-title">Gmailë¡œ ë³¸ì¸ í™•ì¸</div>
      <div class="step-desc">Google ê³„ì •ìœ¼ë¡œ ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•˜ì„¸ìš”. ìˆ˜ìµ ì •ì‚° ì‹œ ë³¸ì¸ í™•ì¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</div>
      <!-- Google Identity Services ê³µì‹ ë²„íŠ¼ -->
      <!-- âš ï¸ CLIENT_IDë¥¼ Google Cloud Consoleì—ì„œ ë°œê¸‰ë°›ì€ ê°’ìœ¼ë¡œ êµì²´í•˜ì„¸ìš” -->
      <div id="g_id_onload"
        data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
        data-context="signup"
        data-ux_mode="popup"
        data-callback="handleGoogleCallback"
        data-auto_prompt="false">
      </div>
      <div class="g_id_signin"
        data-type="standard"
        data-shape="rectangular"
        data-theme="outline"
        data-text="continue_with"
        data-size="large"
        data-locale="ko"
        data-width="440"
        style="display:flex; justify-content:center; margin-bottom:16px;">
      </div>
      <!-- Client ID ë¯¸ì„¤ì • ì‹œ í´ë°± ë²„íŠ¼ -->
      <div id="google-fallback" style="display:none;">
        <button class="btn-google" onclick="googleAuthDemo()">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Google ê³„ì •ìœ¼ë¡œ ê³„ì†í•˜ê¸° (ë°ëª¨)
        </button>
      </div>
      <div class="divider">ë˜ëŠ” ì´ë©”ì¼ë¡œ ì§ì ‘ ê°€ì…</div>
      <div class="input-group">
        <label class="input-label">ì´ë©”ì¼ ì£¼ì†Œ <span class="required">*</span></label>
        <div style="display:flex;gap:8px;">
          <input type="email" id="email" class="input-field" placeholder="example@gmail.com" style="flex:1;">
          <button onclick="sendVerifyCode()" style="padding:12px 16px;background:#8b5cf6;color:white;border:none;border-radius:10px;font-size:13px;font-weight:700;cursor:pointer;white-space:nowrap;font-family:Inter,sans-serif;" id="send-btn">ì¸ì¦ì½”ë“œ ë°œì†¡</button>
        </div>
      </div>
      <div class="input-group hidden" id="verify-group">
        <label class="input-label">ì¸ì¦ ì½”ë“œ <span class="required">*</span></label>
        <div style="display:flex;gap:8px;">
          <input type="text" id="verify-code" class="input-field" placeholder="6ìë¦¬ ì½”ë“œ" maxlength="6" style="flex:1;letter-spacing:4px;font-size:18px;font-weight:700;text-align:center;">
          <button onclick="checkCode()" style="padding:12px 16px;background:#10b981;color:white;border:none;border-radius:10px;font-size:13px;font-weight:700;cursor:pointer;font-family:Inter,sans-serif;">í™•ì¸</button>
        </div>
        <div class="input-hint" id="code-hint">ì´ë©”ì¼ë¡œ ë°œì†¡ëœ 6ìë¦¬ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ë°ëª¨ ì½”ë“œ: <strong>123456</strong>)</div>
      </div>
    </div>

    <!-- STEP 2: ê¸°ë³¸ ì •ë³´ -->
    <div class="step" id="step-2">
      <div class="step-title">ê¸°ë³¸ ì •ë³´ ì…ë ¥</div>
      <div class="step-desc">í”Œë«í¼ì—ì„œ ì‚¬ìš©í•  ë‹‰ë„¤ì„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ì„¸ìš”.</div>
      <div class="gmail-verified hidden" id="gmail-badge">
        <div class="gmail-check">âœ“</div>
        <div><strong id="gmail-email-display" style="display:block;font-weight:700;font-size:14px;color:#065f46;"></strong><span style="font-size:13px;color:#059669;">ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ</span></div>
      </div>
      <div class="input-group">
        <label class="input-label">ë‹‰ë„¤ì„ <span class="required">*</span></label>
        <input type="text" id="username" class="input-field" placeholder="ì‚¬ìš©í•  ë‹‰ë„¤ì„ (2~20ì)">
        <div class="input-hint">ë‹¤ë¥¸ ì°½ì‘ìë“¤ì—ê²Œ ë³´ì´ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.</div>
      </div>
      <div class="input-group">
        <label class="input-label">ë¹„ë°€ë²ˆí˜¸ <span class="required">*</span></label>
        <input type="password" id="password" class="input-field" placeholder="8ì ì´ìƒ, ì˜ë¬¸+ìˆ«ì í¬í•¨">
      </div>
      <div class="input-group">
        <label class="input-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="required">*</span></label>
        <input type="password" id="password-confirm" class="input-field" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥">
        <div class="input-hint err hidden" id="pw-error">ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
      </div>
      <button class="btn-primary" onclick="goStep(3)">ë‹¤ìŒ â†’</button>
    </div>

    <!-- STEP 3: ê°œì¸ ì •ë³´ -->
    <div class="step" id="step-3">
      <div class="step-title">ê°œì¸ ì •ë³´</div>
      <div class="step-desc">ìˆ˜ìµ ì •ì‚° ë° ì €ì‘ê¶Œ ê´€ë¦¬ë¥¼ ìœ„í•œ ì •ë³´ì…ë‹ˆë‹¤. ì•”í˜¸í™”ë˜ì–´ ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤.</div>
      <div class="input-row">
        <div class="input-group">
          <label class="input-label">ì‹¤ëª… <span class="required">*</span></label>
          <input type="text" id="real-name" class="input-field" placeholder="í™ê¸¸ë™">
        </div>
        <div class="input-group">
          <label class="input-label">ìƒë…„ì›”ì¼ <span class="required">*</span></label>
          <input type="date" id="birth-date" class="input-field">
        </div>
      </div>
      <div class="input-group">
        <label class="input-label">ì „í™”ë²ˆí˜¸ <span class="required">*</span></label>
        <div style="display:flex;gap:8px;">
          <input type="tel" id="phone" class="input-field" placeholder="010-0000-0000" style="flex:1;">
          <button onclick="alert('ğŸ“± PASS ì¸ì¦ì€ ì¶”í›„ ì—°ë™ ì˜ˆì •ì…ë‹ˆë‹¤.')" style="padding:12px 14px;background:#f1f5f9;color:#6b7280;border:none;border-radius:10px;font-size:12px;font-weight:700;cursor:pointer;white-space:nowrap;font-family:Inter,sans-serif;">ì¸ì¦<br><span style="font-size:10px;">(ì¶”í›„)</span></button>
        </div>
        <div class="input-hint">ì†¡ê¸ˆ ì‹œ ë³¸ì¸ì¸ì¦ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</div>
      </div>
      <div class="input-row">
        <div class="input-group">
          <label class="input-label">êµ­ì  <span class="required">*</span></label>
          <select id="nationality" class="input-field">
            <option value="">ì„ íƒ</option>
            <option value="KR" selected>ğŸ‡°ğŸ‡· ëŒ€í•œë¯¼êµ­</option>
            <option value="US">ğŸ‡ºğŸ‡¸ ë¯¸êµ­</option>
            <option value="JP">ğŸ‡¯ğŸ‡µ ì¼ë³¸</option>
            <option value="CN">ğŸ‡¨ğŸ‡³ ì¤‘êµ­</option>
            <option value="GB">ğŸ‡¬ğŸ‡§ ì˜êµ­</option>
            <option value="OTHER">ê¸°íƒ€</option>
          </select>
        </div>
        <div class="input-group">
          <label class="input-label">ê±°ì£¼ êµ­ê°€ <span class="required">*</span></label>
          <select id="country" class="input-field">
            <option value="">ì„ íƒ</option>
            <option value="KR" selected>ğŸ‡°ğŸ‡· ëŒ€í•œë¯¼êµ­</option>
            <option value="US">ğŸ‡ºğŸ‡¸ ë¯¸êµ­</option>
            <option value="JP">ğŸ‡¯ğŸ‡µ ì¼ë³¸</option>
            <option value="CN">ğŸ‡¨ğŸ‡³ ì¤‘êµ­</option>
            <option value="GB">ğŸ‡¬ğŸ‡§ ì˜êµ­</option>
            <option value="OTHER">ê¸°íƒ€</option>
          </select>
        </div>
      </div>
      <button class="btn-primary" onclick="goStep(4)">ë‹¤ìŒ â†’</button>
      <button class="btn-secondary" onclick="goStep(2)">â† ì´ì „</button>
    </div>

    <!-- STEP 4: ê³„ì • ìœ í˜• -->
    <div class="step" id="step-4">
      <div class="step-title">ê³„ì • ìœ í˜• ì„ íƒ</div>
      <div class="step-desc">ì–´ë–¤ ëª©ì ìœ¼ë¡œ TimeLinkë¥¼ ì‚¬ìš©í•˜ì‹¤ ê±´ê°€ìš”? ë‚˜ì¤‘ì— ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
      <div class="type-grid">
        <div class="type-card selected" id="type-personal" onclick="selectType('personal')">
          <div class="icon">ğŸµ</div>
          <h3>ê°œì¸ ì°½ì‘ì</h3>
          <p>ìŒì•…, ì˜ìƒ, ê°•ì˜ë¥¼ ë§Œë“¤ê³  ìˆ˜ìµì„ ì°½ì¶œí•˜ëŠ” ê°œì¸</p>
        </div>
        <div class="type-card" id="type-business" onclick="selectType('business')">
          <div class="icon">ğŸ¢</div>
          <h3>ì‚¬ì—…ì</h3>
          <p>ì¹´í˜, ë§¤ì¥ ë“± ì‚¬ì—…ìë“±ë¡ì¦ì´ ìˆëŠ” ê²½ìš°</p>
        </div>
      </div>
      <div class="hidden" id="business-fields">
        <div class="input-group">
          <label class="input-label">ì‚¬ì—…ìëª… <span class="required">*</span></label>
          <input type="text" id="business-name" class="input-field" placeholder="ìƒí˜¸ëª…">
        </div>
        <div class="input-group">
          <label class="input-label">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ <span class="required">*</span></label>
          <input type="text" id="business-no" class="input-field" placeholder="000-00-00000">
        </div>
      </div>
      <button class="btn-primary" onclick="goStep(5)">ë‹¤ìŒ â†’</button>
      <button class="btn-secondary" onclick="goStep(3)">â† ì´ì „</button>
    </div>

    <!-- STEP 5: ì •ì‚° ê³„ì¢Œ -->
    <div class="step" id="step-5">
      <div class="step-title">ìˆ˜ìµ ì •ì‚° ê³„ì¢Œ</div>
      <div class="step-desc">TL ìˆ˜ìµì„ í˜„ê¸ˆìœ¼ë¡œ ë°›ê¸° ìœ„í•œ ê³„ì¢Œì…ë‹ˆë‹¤. ì§€ê¸ˆ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.</div>
      <div class="skip-notice">ğŸ’¡ ì§€ê¸ˆì€ ê±´ë„ˆë›°ê³  ë‚˜ì¤‘ì— <strong>ì§€ê°‘ â†’ ê³„ì¢Œ ì„¤ì •</strong>ì—ì„œ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ TL ì¶œê¸ˆì´ ì œí•œë©ë‹ˆë‹¤.</div>
      <div class="input-row">
        <div class="input-group">
          <label class="input-label">ì€í–‰ëª… <span class="optional">(ì„ íƒ)</span></label>
          <select id="bank-name" class="input-field">
            <option value="">ì„ íƒ ì•ˆ í•¨</option>
            <option>ì¹´ì¹´ì˜¤ë±…í¬</option><option>í† ìŠ¤ë±…í¬</option><option>êµ­ë¯¼ì€í–‰</option>
            <option>ì‹ í•œì€í–‰</option><option>ìš°ë¦¬ì€í–‰</option><option>í•˜ë‚˜ì€í–‰</option>
            <option>ë†í˜‘ì€í–‰</option><option>ê¸°ì—…ì€í–‰</option><option>SCì œì¼ì€í–‰</option>
          </select>
        </div>
        <div class="input-group">
          <label class="input-label">ì˜ˆê¸ˆì£¼ <span class="optional">(ì„ íƒ)</span></label>
          <input type="text" id="bank-holder" class="input-field" placeholder="ì‹¤ëª…ê³¼ ë™ì¼">
        </div>
      </div>
      <div class="input-group">
        <label class="input-label">ê³„ì¢Œë²ˆí˜¸ <span class="optional">(ì„ íƒ)</span></label>
        <input type="text" id="bank-account" class="input-field" placeholder="- ì—†ì´ ìˆ«ìë§Œ ì…ë ¥">
        <div class="input-hint">ê³„ì¢Œë²ˆí˜¸ëŠ” AES-256 ì•”í˜¸í™”ë˜ì–´ ì„œë²„ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.</div>
      </div>
      <button class="btn-primary" onclick="goStep(6)">ë‹¤ìŒ â†’</button>
      <button class="btn-secondary" onclick="goStep(4)">â† ì´ì „</button>
    </div>

    <!-- STEP 6: ì•½ê´€ ë™ì˜ -->
    <div class="step" id="step-6">
      <div class="step-title">ì•½ê´€ ë™ì˜</div>
      <div class="step-desc">TimeLink ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•œ ì•½ê´€ì— ë™ì˜í•´ ì£¼ì„¸ìš”.</div>
      <div style="border:1px solid #f1f5f9;border-radius:12px;padding:4px 16px;margin-bottom:20px;">
        <div class="check-item check-all">
          <input type="checkbox" id="check-all" onchange="toggleAll(this)">
          <label for="check-all">ì „ì²´ ë™ì˜ (í•„ìˆ˜ + ì„ íƒ í¬í•¨)</label>
        </div>
        <div class="check-item">
          <input type="checkbox" id="check-terms" class="chk-req">
          <label for="check-terms"><strong>[í•„ìˆ˜]</strong> <a href="terms.html" target="_blank">ì´ìš©ì•½ê´€</a> ë™ì˜</label>
        </div>
        <div class="check-item">
          <input type="checkbox" id="check-privacy" class="chk-req">
          <label for="check-privacy"><strong>[í•„ìˆ˜]</strong> <a href="privacy.html" target="_blank">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> ë™ì˜</label>
        </div>
        <div class="check-item">
          <input type="checkbox" id="check-copyright" class="chk-req">
          <label for="check-copyright"><strong>[í•„ìˆ˜]</strong> <a href="copyright.html" target="_blank">ì €ì‘ê¶Œ ì •ì±…</a> ë™ì˜</label>
        </div>
        <div class="check-item">
          <input type="checkbox" id="check-token" class="chk-req">
          <label for="check-token"><strong>[í•„ìˆ˜]</strong> TL/TLC í† í° ê²½ì œ ì‹œìŠ¤í…œ ì´ìš© ë™ì˜</label>
        </div>
        <div class="check-item">
          <input type="checkbox" id="check-marketing">
          <label for="check-marketing">[ì„ íƒ] ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜ (ì´ë©”ì¼, SMS)</label>
        </div>
        <div class="check-item">
          <input type="checkbox" id="check-identity">
          <label for="check-identity">[ì„ íƒ] ìˆ˜ìµ ì¶œê¸ˆ ì‹œ ë³¸ì¸ì¸ì¦ í•„ìš” ì‚¬í•­ ì•ˆë‚´ í™•ì¸</label>
        </div>
      </div>
      <button class="btn-primary" onclick="finalSignup()">ğŸ‰ TimeLink ì‹œì‘í•˜ê¸°</button>
      <button class="btn-secondary" onclick="goStep(5)">â† ì´ì „</button>
    </div>

    <!-- ì™„ë£Œ -->
    <div class="step" id="step-done">
      <div class="success-box">
        <div style="font-size:64px;margin-bottom:16px;">ğŸ‰</div>
        <h2 style="font-size:24px;font-weight:800;margin-bottom:8px;">ê°€ì… ì™„ë£Œ!</h2>
        <p style="color:#6b7280;margin-bottom:4px;">TimeLink ì°½ì‘ì ì»¤ë®¤ë‹ˆí‹°ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤.</p>
        <div class="tl-grant">
          <div class="tl-amount">10,000 TL</div>
          <div style="font-size:14px;color:#6b7280;">íšŒì›ê°€ì… ë³´ë„ˆìŠ¤ ì§€ê¸‰ ì™„ë£Œ âœ…</div>
        </div>
        <p style="font-size:13px;color:#9ca3af;margin-bottom:24px;">âš ï¸ TL ìˆ˜ìµ ì¶œê¸ˆì„ ìœ„í•´ì„œëŠ” ê³„ì¢Œ ë“±ë¡ ë° ë³¸ì¸ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.<br>ì§€ê°‘ ë©”ë‰´ì—ì„œ ì–¸ì œë“ ì§€ ë“±ë¡í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <a href="index.html" style="display:block;width:100%;padding:14px;background:#8b5cf6;color:white;border-radius:10px;font-size:15px;font-weight:700;text-decoration:none;text-align:center;margin-bottom:8px;">í™ˆìœ¼ë¡œ ì´ë™ â†’</a>
        <a href="create.html" style="display:block;width:100%;padding:12px;background:white;color:#8b5cf6;border:1.5px solid #8b5cf6;border-radius:10px;font-size:14px;font-weight:700;text-decoration:none;text-align:center;">ğŸ“¤ ì²« íŠ¸ë™ ì—…ë¡œë“œí•˜ê¸°</a>
      </div>
    </div>

  </div>
</div>

<script>
let currentStep = 1, gmailVerified = false, verifiedEmail = '', selectedType = 'personal';

// â”€â”€ Google OAuth ì½œë°± â”€â”€
// Google Identity Servicesê°€ JWT credentialì„ ë°˜í™˜
function handleGoogleCallback(response) {
  try {
    // JWT payload ë””ì½”ë”© (ì„œë²„ ê²€ì¦ ì—†ì´ í´ë¼ì´ì–¸íŠ¸ íŒŒì‹± - ë°ëª¨ìš©)
    // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ì„œë²„ì—ì„œ google.oauth2.id_token.verify_oauth2_token()ìœ¼ë¡œ ê²€ì¦
    const payload = JSON.parse(atob(response.credential.split('.')[1]));
    verifiedEmail = payload.email;
    gmailVerified = true;

    // ë‹‰ë„¤ì„ ìë™ ì±„ìš°ê¸°
    const suggestName = payload.name?.replace(/\s/g, '') || payload.email.split('@')[0];
    document.getElementById('username').value = suggestName;

    // ì¸ì¦ ì™„ë£Œ ë°°ì§€ ì—…ë°ì´íŠ¸
    document.getElementById('gmail-email-display').textContent = verifiedEmail;
    document.getElementById('gmail-badge').classList.remove('hidden');

    goStep(2);
  } catch(e) {
    console.error('Google ì¸ì¦ ì˜¤ë¥˜:', e);
    alert('Google ì¸ì¦ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì´ë©”ì¼ë¡œ ê°€ì…í•´ì£¼ì„¸ìš”.');
  }
}

// Client ID ë¯¸ì„¤ì • ì‹œ ë°ëª¨ ëª¨ë“œ
function googleAuthDemo() {
  verifiedEmail = 'demo@gmail.com';
  gmailVerified = true;
  document.getElementById('username').value = 'demo_user';
  goStep(2);
}

// Google GIS ë¡œë“œ í™•ì¸ - Client IDê°€ ì—†ìœ¼ë©´ í´ë°± ë²„íŠ¼ í‘œì‹œ
window.addEventListener('load', function() {
  setTimeout(function() {
    const gBtn = document.querySelector('.g_id_signin iframe');
    const clientId = document.getElementById('g_id_onload')?.getAttribute('data-client_id');
    if (!gBtn || !clientId || clientId.includes('YOUR_GOOGLE')) {
      document.getElementById('google-fallback').style.display = 'block';
    }
  }, 2000);
});

function sendVerifyCode() {
  const email = document.getElementById('email').value;
  if (!email || !email.includes('@')) { alert('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  verifiedEmail = email;
  document.getElementById('verify-group').classList.remove('hidden');
  document.getElementById('send-btn').textContent = 'ì¬ë°œì†¡';
  document.getElementById('send-btn').style.background = '#6b7280';
  alert('[ë°ëª¨] ' + email + 'ë¡œ ì¸ì¦ì½”ë“œ ë°œì†¡\ní…ŒìŠ¤íŠ¸ ì½”ë“œ: 123456');
}

function checkCode() {
  if (document.getElementById('verify-code').value === '123456') {
    gmailVerified = true;
    const hint = document.getElementById('code-hint');
    hint.textContent = 'âœ… ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ!';
    hint.style.color = '#10b981';
    setTimeout(() => goStep(2), 700);
  } else {
    const hint = document.getElementById('code-hint');
    hint.textContent = 'âŒ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
    hint.style.color = '#ef4444';
  }
}

function selectType(type) {
  selectedType = type;
  document.getElementById('type-personal').classList.toggle('selected', type === 'personal');
  document.getElementById('type-business').classList.toggle('selected', type === 'business');
  document.getElementById('business-fields').classList.toggle('hidden', type !== 'business');
}

function toggleAll(el) {
  document.querySelectorAll('#step-6 input[type=checkbox]').forEach(c => c.checked = el.checked);
}

function goStep(n) {
  if (n === 2 && !gmailVerified && !verifiedEmail) { alert('ë¨¼ì € ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.'); return; }
  if (n === 3) {
    const un = document.getElementById('username').value;
    const pw = document.getElementById('password').value;
    const pwc = document.getElementById('password-confirm').value;
    if (!un || un.length < 2) { alert('ë‹‰ë„¤ì„ì„ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if (!pw || pw.length < 8) { alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if (pw !== pwc) { document.getElementById('pw-error').classList.remove('hidden'); return; }
    document.getElementById('pw-error').classList.add('hidden');
  }
  if (n === 4) {
    if (!document.getElementById('real-name').value) { alert('ì‹¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if (!document.getElementById('birth-date').value) { alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if (!document.getElementById('phone').value) { alert('ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  }

  if (n === 'done') {
    document.getElementById('progress-bar').style.display = 'none';
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.getElementById('step-done').classList.add('active');
    return;
  }

  currentStep = n;
  document.querySelectorAll('.step').forEach((s, i) => s.classList.toggle('active', i === n - 1));

  for (let i = 1; i <= 6; i++) {
    const dot = document.getElementById('dot-' + i);
    if (i < n) { dot.className = 'step-dot done'; dot.textContent = 'âœ“'; }
    else if (i === n) { dot.className = 'step-dot active'; dot.textContent = i < 6 ? i : 'âœ“'; }
    else { dot.className = 'step-dot pending'; dot.textContent = i < 6 ? i : 'âœ“'; }
    if (i < 6) document.getElementById('line-' + i).className = 'step-line' + (i < n ? ' done' : '');
  }
  if (n === 2 && (gmailVerified || verifiedEmail)) {
    const badge = document.getElementById('gmail-badge');
    badge.classList.remove('hidden');
    document.getElementById('gmail-email-display').textContent = verifiedEmail;
  }
}

function finalSignup() {
  const req = ['check-terms', 'check-privacy', 'check-copyright', 'check-token'];
  for (const id of req) {
    if (!document.getElementById(id).checked) { alert('í•„ìˆ˜ ì•½ê´€ì— ëª¨ë‘ ë™ì˜í•´ ì£¼ì„¸ìš”.'); return; }
  }
  const user = {
    id: Date.now(),
    uid: 'tl_' + Date.now(),
    email: verifiedEmail,
    email_verified: true,
    auth_provider: gmailVerified ? 'google' : 'email',
    username: document.getElementById('username').value,
    account_type: selectedType,
    tl: 10000, tlc: 0,
    identity_verified: false,
    has_bank: !!document.getElementById('bank-account').value,
    marketing_agree: document.getElementById('check-marketing').checked,
    created_at: new Date().toISOString()
    // âš ï¸ ì‹¤ëª…, ìƒë…„ì›”ì¼, ì „í™”ë²ˆí˜¸, ê³„ì¢Œë²ˆí˜¸ëŠ” localStorage ë¯¸ì €ì¥
    // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” HTTPS + AES-256 ì•”í˜¸í™” í›„ ì„œë²„ DBì—ë§Œ ì €ì¥
  };
  localStorage.setItem('tl_user', JSON.stringify(user));
  goStep('done');
}
</script>
</body>
</html>