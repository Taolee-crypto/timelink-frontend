<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moving Radio - TimeLink</title>
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Inter', sans-serif; background: #f8f9fa; color: #1f2937; line-height: 1.5; }

/* ë„¤ë¹„ê²Œì´ì…˜ */
.navbar {
  background: white; border-bottom: 1px solid #e5e7eb; padding: 0 24px; height: 64px;
  display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100;
}
.logo { display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 800; color: #1f2937; text-decoration: none; }
.logo-icon { width: 32px; height: 32px; background: #10b981; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; }
.logo span { color: #10b981; }
.nav-right { display: flex; align-items: center; gap: 12px; }
.balance {
  background: #f3f4f6; border-radius: 999px; padding: 6px 16px; display: flex; align-items: center; gap: 16px;
}
.balance-item { display: flex; align-items: center; gap: 6px; font-size: 14px; }
.balance-label { color: #6b7280; font-weight: 500; }
.balance-value { font-weight: 700; color: #10b981; font-family: monospace; }
.car-indicator {
  background: #f3f4f6; border-radius: 999px; padding: 6px 12px; display: flex; align-items: center; gap: 4px; font-size: 13px; font-weight: 500; cursor: pointer;
}
.car-indicator.on { background: #ffedd5; color: #f59e0b; }
.avatar {
  width: 36px; height: 36px; background: #10b981; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; cursor: pointer; position: relative;
}
.dropdown {
  position: absolute; top: 100%; right: 0; margin-top: 8px; background: white; border: 1px solid #e5e7eb; border-radius: 12px;
  box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); width: 200px; display: none; z-index: 1000;
}
.dropdown.show { display: block; }
.dropdown-item { padding: 12px 16px; cursor: pointer; transition: all 0.2s; font-size: 14px; color: #1f2937; text-decoration: none; display: block; }
.dropdown-item:hover { background: #f3f4f6; }
.dropdown-item.danger { color: #ef4444; }
.dropdown-item.danger:hover { background: #fee2e2; }

/* íƒ­ ë©”ë‰´ */
.tabs {
  background: white; border-bottom: 1px solid #e5e7eb; padding: 0 24px; display: flex; gap: 4px; overflow-x: auto;
  position: sticky; top: 64px; z-index: 90;
}
.tab {
  padding: 12px 20px; font-size: 14px; font-weight: 600; color: #6b7280;
  cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; white-space: nowrap; text-decoration: none;
}
.tab:hover { color: #10b981; }
.tab.active { color: #10b981; border-bottom-color: #10b981; }

/* ë©”ì¸ ì»¨í…ì¸  */
.container { max-width: 600px; margin: 0 auto; padding: 24px; }
.card {
  background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
  transition: all 0.2s; margin-bottom: 20px;
}

/* ë²„íŠ¼ */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 10px 20px; border-radius: 999px; font-weight: 600; font-size: 14px;
  cursor: pointer; transition: all 0.2s; border: none; text-decoration: none;
}
.btn-primary { background: #10b981; color: white; }
.btn-primary:hover { background: #059669; transform: translateY(-1px); }
.btn-outline { background: white; color: #1f2937; border: 1px solid #e5e7eb; }
.btn-outline:hover { background: #f9fafb; }
.btn-sm { padding: 6px 14px; font-size: 13px; }
.btn-car { background: #ffedd5; color: #f59e0b; border: 2px solid #f59e0b; font-size: 16px; padding: 16px; }
.btn-car:hover { background: #f59e0b; color: white; }
.btn-stop { background: #fee2e2; color: #ef4444; border: 2px solid #ef4444; }
.btn-stop:hover { background: #ef4444; color: white; }

/* ê·¸ë¦¬ë“œ */
.grid-3 {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin: 20px 0;
}
.stat-item {
  background: #f3f4f6; border-radius: 12px; padding: 16px; text-align: center;
}
.stat-label { font-size: 11px; color: #6b7280; text-transform: uppercase; margin-bottom: 4px; }
.stat-value { font-size: 24px; font-weight: 700; color: #f59e0b; font-family: monospace; }

/* í† ê¸€ */
.toggle {
  display: flex; align-items: center; justify-content: space-between; padding: 16px 0; border-bottom: 1px solid #e5e7eb;
}
.toggle-switch { position: relative; width: 52px; height: 28px; cursor: pointer; }
.toggle-switch input { display: none; }
.toggle-track {
  position: absolute; inset: 0; border-radius: 14px; background: #e5e7eb; transition: all 0.2s;
}
.toggle-thumb {
  position: absolute; top: 2px; left: 2px; width: 24px; height: 24px; border-radius: 50%;
  background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s;
  display: flex; align-items: center; justify-content: center; font-size: 12px;
}
.toggle-switch input:checked + .toggle-track { background: #f59e0b; }
.toggle-switch input:checked + .toggle-track + .toggle-thumb { transform: translateX(24px); }

/* ê¸€ë¡œë²Œ ì„ íƒê¸° */
.global-selector {
  position: fixed;
  top: 80px;
  right: 24px;
  z-index: 10000;
  background: white;
  border-radius: 999px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 4px;
  display: flex;
  gap: 2px;
}
.global-selector select {
  padding: 6px 12px;
  border-radius: 999px;
  border: none;
  background: transparent;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  outline: none;
}
.global-selector select:hover {
  background: #f3f4f6;
}
</style>
</head>
<body>

<nav class="navbar">
  <a href="index.html" class="logo"><div class="logo-icon">âš¡</div><div>Time<span>Link</span></div></a>
  <div class="nav-right" id="nav-auth">
    <div class="balance"><div class="balance-item"><span class="balance-label">TL</span><span class="balance-value" id="balance-tl"><span data-currency="10000">10,000</span></span></div><div class="balance-item"><span class="balance-label">TLC</span><span class="balance-value" id="balance-tlc">0.0000</span></div></div>
    <div class="car-indicator" id="car-indicator" onclick="window.location.href='car.html'"><span>ğŸš—</span><span id="car-status">Off</span></div>
    <div class="avatar" onclick="toggleDropdown()"><span id="avatar-letter">D</span>
      <div class="dropdown" id="dropdown">
        <a href="wallet.html" class="dropdown-item">ğŸ‘› ë‚´ ì§€ê°‘</a>
        <a href="library.html" class="dropdown-item">ğŸ” ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬</a>
        <a href="create.html" class="dropdown-item">ğŸ“¤ ì—…ë¡œë“œ</a>
        <a href="dashboard.html" class="dropdown-item">ğŸ“Š ëŒ€ì‹œë³´ë“œ</a>
        <a href="settings.html" class="dropdown-item">âš™ï¸ ì„¤ì •</a>
        <div class="dropdown-item danger" onclick="logout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</div>
      </div>
    </div>
  </div>
</nav>

<!-- íƒ­ ë©”ë‰´ (dashboard.htmlê³¼ ë™ì¼í•˜ê²Œ ëŒ€ì‹œë³´ë“œ ì¶”ê°€) -->
<div class="tabs">
  <a href="index.html" class="tab"><span data-i18n="home">ğŸ  í™ˆ</span></a>
  <a href="shareplace.html" class="tab"><span data-i18n="shareplace">ğŸ›ï¸ SharePlace</span></a>
  <a href="library.html" class="tab"><span data-i18n="library">ğŸ” ë¼ì´ë¸ŒëŸ¬ë¦¬</span></a>
  <a href="create.html" class="tab"><span data-i18n="upload">ğŸ“¤ ì—…ë¡œë“œ</span></a>
  <a href="player.html" class="tab"><span data-i18n="player">ğŸ¬ í”Œë ˆì´ì–´</span></a>
  <a href="radio.html" class="tab"><span data-i18n="radio">â˜• ì¹´í˜ë°©ì†¡</span></a>
  <a href="car.html" class="tab active"><span data-i18n="moving">ğŸš— Moving Radio</span></a>
  <a href="ads.html" class="tab"><span data-i18n="ads">ğŸ“£ ê´‘ê³ </span></a>
  <a href="wallet.html" class="tab"><span data-i18n="wallet">ğŸ‘› ì§€ê°‘</span></a>
  <a href="chart.html" class="tab"><span data-i18n="chart">ğŸ“Š ì°¨íŠ¸</span></a>
  <a href="dashboard.html" class="tab"><span data-i18n="dashboard">ğŸ“Š ëŒ€ì‹œë³´ë“œ</span></a>
</div>

<!-- ë¬´ë¹™ë¼ë””ì˜¤ ë³¸ë¬¸ ì‹œì‘ -->
<div class="container">
  <!-- í˜„ì¬ ì´ë™ ìƒíƒœ ì¹´ë“œ -->
  <div class="card" style="background: linear-gradient(135deg, #0b2b26, #1a4e3d); color: white;">
    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
      <div style="font-size: 48px;">ğŸš—</div>
      <div>
        <div style="font-size: 14px; opacity: 0.8;">í˜„ì¬ ëª¨ë“œ</div>
        <div style="font-size: 28px; font-weight: 800;">Moving Radio</div>
      </div>
    </div>
    <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
      <div>
        <div style="font-size: 13px; opacity: 0.7;">ì†ë„</div>
        <div style="font-size: 24px; font-weight: 700;"><span id="speed-value">72</span> km/h</div>
      </div>
      <div>
        <div style="font-size: 13px; opacity: 0.7;">ìœ„ì¹˜</div>
        <div style="font-size: 16px; font-weight: 500;" id="location-text">ìˆ˜ë„ê¶Œ ì™¸ê³½</div>
      </div>
      <div>
        <div style="font-size: 13px; opacity: 0.7;">ì‹œê°„</div>
        <div style="font-size: 16px; font-weight: 500;" id="time-text">22:40</div>
      </div>
      <div>
        <div style="font-size: 13px; opacity: 0.7;">ë³´ìƒ ë°°ìœ¨</div>
        <div style="font-size: 24px; font-weight: 800; color: #ffd966;">2.0x</div>
      </div>
    </div>
  </div>

  <!-- í˜„ì¬ ì—°ê²°ëœ ì±„ë„ -->
  <div class="card">
    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
      <div style="background: #f59e0b; width: 8px; height: 8px; border-radius: 50%;"></div>
      <div style="font-weight: 700; font-size: 18px;">ì§€ê¸ˆ ì—°ê²°ëœ ì±„ë„</div>
    </div>
    <div style="background: #f3f4f6; border-radius: 20px; padding: 20px; text-align: center;">
      <div style="font-size: 48px; margin-bottom: 8px;" id="channel-emoji">ğŸŒƒ</div>
      <div style="font-size: 24px; font-weight: 800;" id="channel-name">Night Highway Channel</div>
      <div style="font-size: 14px; color: #6b7280; margin: 8px 0;">ì„œìš¸ Â· ë„ì¿„ Â· LA ìš´ì „ì ë™ì‹œ ì²­ì·¨ ì¤‘</div>
      <div style="display: flex; justify-content: center; gap: 12px; margin: 20px 0;">
        <span style="background: #e5e7eb; padding: 4px 12px; border-radius: 999px; font-size: 13px;">#ë“œë¼ì´ë¸Œ</span>
        <span style="background: #e5e7eb; padding: 4px 12px; border-radius: 999px; font-size: 13px;">#ì¼ë ‰íŠ¸ë¡œë‹‰</span>
        <span style="background: #e5e7eb; padding: 4px 12px; border-radius: 999px; font-size: 13px;">#ì‹¬ì•¼</span>
      </div>
      <button class="btn btn-primary" style="width: auto; padding: 12px 32px;" onclick="alert('ìŠ¤íŠ¸ë¦¬ë° ì‹œì‘ (ë°ëª¨)')">ğŸ§ ë“£ê¸°</button>
    </div>
  </div>

  <!-- ì´ë™ ëª¨ë“œ ì„ íƒ -->
  <div class="card">
    <div style="font-weight: 700; margin-bottom: 16px;">ğŸš´ ì´ë™ ëª¨ë“œ</div>
    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
      <button class="btn btn-outline btn-sm" style="flex:1;" onclick="setMovingMode('drive')">ğŸš— ìš´ì „</button>
      <button class="btn btn-outline btn-sm" style="flex:1;" onclick="setMovingMode('bike')">ğŸ ë°”ì´í¬</button>
      <button class="btn btn-outline btn-sm" style="flex:1;" onclick="setMovingMode('cycle')">ğŸš´ ë¼ì´ë”©</button>
      <button class="btn btn-outline btn-sm" style="flex:1;" onclick="setMovingMode('walk')">ğŸš¶ ë„ë³´</button>
      <button class="btn btn-outline btn-sm" style="flex:1;" onclick="setMovingMode('run')">ğŸƒ ëŸ¬ë‹</button>
      <button class="btn btn-outline btn-sm" style="flex:1;" onclick="setMovingMode('train')">ğŸš† ê¸°ì°¨</button>
    </div>
  </div>

  <!-- ì‹¤ì‹œê°„ ì±„ë„ ëª©ë¡ -->
  <div class="card">
    <div style="display: flex; justify-content: space-between; margin-bottom: 16px;">
      <div style="font-weight: 700;">ğŸ“¡ ì‹¤ì‹œê°„ ì±„ë„</div>
      <a href="#" style="color: #10b981; font-size: 14px;">ëª¨ë‘ ë³´ê¸°</a>
    </div>
    <div style="display: flex; flex-direction: column; gap: 16px;">
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="width: 40px; height: 40px; background: #f3f4f6; border-radius: 12px; display: flex; align-items: center; justify-content: center;">ğŸŒ…</div>
        <div style="flex:1;">
          <div style="font-weight: 600;">Pacific Coast Flow</div>
          <div style="font-size: 12px; color: #6b7280;">1.2k ì²­ì·¨ ì¤‘</div>
        </div>
        <span style="color: #10b981; font-weight: 600;">2.0x</span>
      </div>
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="width: 40px; height: 40px; background: #f3f4f6; border-radius: 12px; display: flex; align-items: center; justify-content: center;">ğŸœï¸</div>
        <div style="flex:1;">
          <div style="font-weight: 600;">Desert Sunset Highway</div>
          <div style="font-size: 12px; color: #6b7280;">843 ì²­ì·¨ ì¤‘</div>
        </div>
        <span style="color: #10b981; font-weight: 600;">2.0x</span>
      </div>
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="width: 40px; height: 40px; background: #f3f4f6; border-radius: 12px; display: flex; align-items: center; justify-content: center;">â˜•</div>
        <div style="flex:1;">
          <div style="font-weight: 600;">í™ëŒ€ ì¸ë””ì¹´í˜ (ì‹¤ì‹œê°„)</div>
          <div style="font-size: 12px; color: #6b7280;">ì˜¤í”„ë¼ì¸ ì¹´í˜ ì†¡ì¶œ</div>
        </div>
        <span style="color: #10b981; font-weight: 600;">2.0x</span>
      </div>
    </div>
  </div>

  <!-- ì„¸ì…˜ í†µê³„ -->
  <div class="card">
    <div style="font-weight: 700; margin-bottom: 16px;">â± ì´ë™ ì„¸ì…˜</div>
    <div class="grid-3" style="grid-template-columns: 1fr 1fr 1fr;">
      <div class="stat-item">
        <div class="stat-label">ì´ë™ ì‹œê°„</div>
        <div class="stat-value" id="moving-time">0:00</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">ì ë¦½ TL</div>
        <div class="stat-value" id="moving-earned">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">ì´ë™ ê±°ë¦¬</div>
        <div class="stat-value" id="moving-distance">0km</div>
      </div>
    </div>
    <button class="btn btn-outline btn-sm" style="margin-top: 16px;" onclick="toggleSession()" id="session-btn">â–¶ ì„¸ì…˜ ì‹œì‘</button>
  </div>

  <!-- ì² í•™ ì„¤ëª… -->
  <div class="card" style="background: #f0f9ff;">
    <div style="font-size: 14px; color: #0369a1; line-height: 1.6;">
      <span style="font-weight: 700;">ğŸ§ ê°œì¸í™” + ê³µê°„í™”</span><br>
      ë‚˜ëŠ” ìš´ì „ ì¤‘, ë‹¤ë¥¸ ì‚¬ëŒë“¤ë„ ì´ë™ ì¤‘. ê°™ì€ ì‹œê°„, ë‹¤ë¥¸ ë„ì‹œ, ê°™ì€ íë¦„. ì´ë™ ê¸°ë°˜ ê³µë™ ì²­ì·¨ ê³µê°„, ë¬´ë¹™ë¼ë””ì˜¤.
    </div>
  </div>
</div>
<!-- ë¬´ë¹™ë¼ë””ì˜¤ ë³¸ë¬¸ ë -->

<!-- í‘¸í„° (ì €ì‘ê¶Œ í†µí•©) -->
<footer class="page-footer" style="background: #f9fafb; border-top: 1px solid #e5e7eb; padding: 40px 24px; text-align: center; margin-top: 60px;">
  <div class="footer-links" style="display: flex; justify-content: center; gap: 24px; margin-bottom: 16px; flex-wrap: wrap;">
    <a href="#" style="color: #6b7280; text-decoration: none; font-size: 13px;">ì €ì‘ê¶Œ ì •ì±…</a>
    <a href="#" style="color: #6b7280; text-decoration: none; font-size: 13px;">ì´ìš©ì•½ê´€</a>
    <a href="#" style="color: #6b7280; text-decoration: none; font-size: 13px;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <a href="#" style="color: #ef4444; text-decoration: none; font-size: 13px;">ì €ì‘ê¶Œ ì¹¨í•´ ì‹ ê³ </a>
  </div>
  <div class="footer-copyright" style="font-size: 11px; color: #9ca3af;">
    <span data-i18n-copyright>âš–ï¸ ëª¨ë“  íŒŒì¼ì˜ ì°½ì‘ê¶Œì€ ì°½ì‘ìì—ê²Œ ìˆìŠµë‹ˆë‹¤. ë¬´ë‹¨ ë„ìš© ì‹œ ë²•ì  ì¡°ì¹˜ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
  </div>
</footer>

<!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ (ë¡œê·¸ì¸ ìƒíƒœ ê´€ë¦¬, ë“œë¡­ë‹¤ìš´, ë¬´ë¹™ë¼ë””ì˜¤ ê¸°ëŠ¥, ê¸€ë¡œë²Œ ë³€í™˜) -->
<script>
// ====== ë¡œê·¸ì¸ ìƒíƒœ ê´€ë¦¬ ======
let currentUser = JSON.parse(localStorage.getItem('tl_user') || 'null');
let carMode = localStorage.getItem('tl_car') === 'true';

function updateNavbar() {
  const navAuth = document.getElementById('nav-auth');
  const balanceTl = document.getElementById('balance-tl');
  const balanceTlc = document.getElementById('balance-tlc');
  const avatarLetter = document.getElementById('avatar-letter');
  const carStatus = document.getElementById('car-status');
  const carIndicator = document.getElementById('car-indicator');

  if (currentUser) {
    if (navAuth) navAuth.classList.remove('hidden');
    if (balanceTl) balanceTl.innerHTML = `<span data-currency="${currentUser.tl || 0}">${(currentUser.tl || 0).toLocaleString()}</span>`;
    if (balanceTlc) balanceTlc.textContent = (currentUser.tlc || 0).toFixed(4);
    if (avatarLetter) avatarLetter.textContent = (currentUser.username || 'U').charAt(0).toUpperCase();
  } else {
    if (navAuth) navAuth.classList.add('hidden');
    // ë¡œê·¸ì¸ ì•ˆ ëœ ê²½ìš° ì²˜ë¦¬ (í•„ìš” ì‹œ ì¶”ê°€)
  }
  if (carStatus) carStatus.textContent = carMode ? 'ON' : 'Off';
  if (carIndicator) carIndicator.className = 'car-indicator' + (carMode ? ' on' : '');
}

function toggleDropdown() {
  document.getElementById('dropdown')?.classList.toggle('show');
}

document.addEventListener('click', (e) => {
  if (!e.target.closest('.avatar')) {
    document.getElementById('dropdown')?.classList.remove('show');
  }
});

function logout() {
  localStorage.removeItem('tl_user');
  localStorage.removeItem('auth_token');
  window.location.href = 'index.html';
}

document.addEventListener('DOMContentLoaded', function() {
  updateNavbar();
  window.addEventListener('storage', function(e) {
    if (e.key === 'tl_user') {
      currentUser = JSON.parse(e.newValue || 'null');
      updateNavbar();
    }
  });
});

// ====== ë¬´ë¹™ë¼ë””ì˜¤ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ ======
let sessionActive = false;
let sessionInterval = null;
let sessionTime = 0;
let sessionEarned = 0;
let sessionDistance = 0;

function setMovingMode(mode) {
  const modeInfo = {
    drive: { speed: 72, location: 'ìˆ˜ë„ê¶Œ ì™¸ê³½', emoji: 'ğŸš—', channel: 'Night Highway Channel' },
    bike: { speed: 80, location: 'ê°•ë³€ëŒ€ë¡œ', emoji: 'ğŸ', channel: 'Rider\'s Pulse' },
    cycle: { speed: 25, location: 'í•œê°• ìì „ê±°ê¸¸', emoji: 'ğŸš´', channel: 'Bike & Beats' },
    walk: { speed: 5, location: 'ì‹œë‚´', emoji: 'ğŸš¶', channel: 'City Walk' },
    run: { speed: 10, location: 'ê³µì›', emoji: 'ğŸƒ', channel: 'Running Tempo' },
    train: { speed: 120, location: 'KTX', emoji: 'ğŸš†', channel: 'Railway Vibes' }
  };
  const info = modeInfo[mode] || modeInfo.drive;
  document.getElementById('speed-value').textContent = info.speed;
  document.getElementById('location-text').textContent = info.location;
  document.getElementById('channel-name').textContent = info.channel;
  if (mode === 'drive') document.getElementById('channel-emoji').textContent = 'ğŸŒƒ';
  else if (mode === 'bike') document.getElementById('channel-emoji').textContent = 'ğŸï¸';
  else if (mode === 'cycle') document.getElementById('channel-emoji').textContent = 'ğŸš´';
  else if (mode === 'walk') document.getElementById('channel-emoji').textContent = 'ğŸš¶';
  else if (mode === 'run') document.getElementById('channel-emoji').textContent = 'ğŸƒ';
  else if (mode === 'train') document.getElementById('channel-emoji').textContent = 'ğŸš†';
}

function toggleSession() {
  const btn = document.getElementById('session-btn');
  if (sessionActive) {
    clearInterval(sessionInterval);
    sessionActive = false;
    btn.textContent = 'â–¶ ì„¸ì…˜ ì‹œì‘';
  } else {
    sessionActive = true;
    btn.textContent = 'â¸ ì„¸ì…˜ ì¤‘ì§€';
    sessionInterval = setInterval(() => {
      sessionTime++;
      sessionEarned += 2;
      sessionDistance += 0.02;
      document.getElementById('moving-time').textContent = 
        Math.floor(sessionTime / 60) + ':' + String(sessionTime % 60).padStart(2,'0');
      document.getElementById('moving-earned').textContent = sessionEarned.toLocaleString();
      document.getElementById('moving-distance').textContent = sessionDistance.toFixed(1) + 'km';
    }, 1000);
  }
}

function updateClock() {
  const now = new Date();
  document.getElementById('time-text').textContent = 
    String(now.getHours()).padStart(2,'0') + ':' + String(now.getMinutes()).padStart(2,'0');
}
setInterval(updateClock, 60000);
updateClock();
setMovingMode('drive');

// ====== ê¸€ë¡œë²Œ ë³€í™˜ ì‹œìŠ¤í…œ (ê°„ëµ) ======
const Global = {
  lang: localStorage.getItem('global_lang') || 'ko',
  currency: localStorage.getItem('global_currency') || 'KRW',
  rates: {
    KRW: { symbol: 'â‚©', rate: 1 },
    USD: { symbol: '$', rate: 0.00075 },
    JPY: { symbol: 'Â¥', rate: 0.11 },
    EUR: { symbol: 'â‚¬', rate: 0.0007 },
    CNY: { symbol: 'Â¥', rate: 0.0054 },
    GBP: { symbol: 'Â£', rate: 0.0006 }
  },
  setLang(lang) {
    this.lang = lang;
    localStorage.setItem('global_lang', lang);
    this.updateUI();
  },
  setCurrency(curr) {
    this.currency = curr;
    localStorage.setItem('global_currency', curr);
    this.updateCurrency();
  },
  updateUI() {
    // ë²ˆì—­ í•„ìš”í•œ ìš”ì†Œ ì²˜ë¦¬ (í•„ìš”ì‹œ)
  },
  updateCurrency() {
    const curr = this.rates[this.currency];
    document.querySelectorAll('[data-currency]').forEach(el => {
      const tlValue = parseFloat(el.getAttribute('data-currency')) || 0;
      const converted = tlValue * curr.rate;
      if (el.tagName === 'INPUT') el.value = converted.toFixed(0);
      else el.textContent = curr.symbol + ' ' + converted.toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:0});
    });
  },
  createSelector() {
    if (document.querySelector('.global-selector')) return;
    const selector = document.createElement('div');
    selector.className = 'global-selector';
    selector.innerHTML = `
      <select onchange="Global.lang=this.value;localStorage.setItem('global_lang',this.value)">
        <option value="ko" ${Global.lang==='ko'?'selected':''}>ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
        <option value="en" ${Global.lang==='en'?'selected':''}>ğŸ‡ºğŸ‡¸ English</option>
      </select>
      <select onchange="Global.currency=this.value;localStorage.setItem('global_currency',this.value);Global.updateCurrency()">
        <option value="KRW" ${Global.currency==='KRW'?'selected':''}>â‚© KRW</option>
        <option value="USD" ${Global.currency==='USD'?'selected':''}>$ USD</option>
        <option value="JPY" ${Global.currency==='JPY'?'selected':''}>Â¥ JPY</option>
        <option value="EUR" ${Global.currency==='EUR'?'selected':''}>â‚¬ EUR</option>
      </select>
    `;
    document.body.appendChild(selector);
    this.updateCurrency();
  }
};

document.addEventListener('DOMContentLoaded', () => Global.createSelector());
</script>
</body>
</html>

