<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¡œê·¸ì¸ â€” TimeLink</title>
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#060610;--bd:rgba(255,255,255,.09);
  --ac:#00f5a0;--ac-d:rgba(0,245,160,.14);--ac-g:0 0 28px rgba(0,245,160,.35);
  --pu:#7b61ff;--da:#ff4f4f;
  --t1:#e8e8f5;--t2:#8888aa;--t3:#44445a;
  --rm:14px;--rf:999px;--tr:all .2s cubic-bezier(.4,0,.2,1);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Syne',sans-serif;background:var(--bg);color:var(--t1);
  min-height:100vh;display:flex;align-items:center;justify-content:center;
  padding:24px;-webkit-font-smoothing:antialiased;
}
body::before{
  content:'';position:fixed;inset:0;pointer-events:none;
  background:
    radial-gradient(ellipse 80% 60% at 30% 20%,rgba(0,245,160,.06) 0%,transparent 60%),
    radial-gradient(ellipse 60% 50% at 75% 80%,rgba(123,97,255,.07) 0%,transparent 60%);
}
.card{
  position:relative;z-index:1;width:100%;max-width:420px;
  background:rgba(255,255,255,.04);border:1px solid var(--bd);border-radius:24px;
  padding:40px 36px;backdrop-filter:blur(24px);animation:up .4s ease;
}
@keyframes up{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}

.logo{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--t1);
  justify-content:center;margin-bottom:28px}
.logo-icon{width:36px;height:36px;border-radius:9px;background:var(--ac);
  display:flex;align-items:center;justify-content:center;font-size:18px}
.logo-txt{font-size:22px;font-weight:800;letter-spacing:-.5px}
.logo-txt span{color:var(--ac)}

.ttl{font-size:24px;font-weight:800;text-align:center;margin-bottom:6px}
.sub{font-size:14px;color:var(--t2);text-align:center;margin-bottom:24px}

.hint{background:rgba(0,245,160,.07);border:1px solid rgba(0,245,160,.18);
  border-radius:var(--rm);padding:12px 14px;font-size:13px;color:var(--t2);
  text-align:center;line-height:1.55;margin-bottom:22px}
.hint strong{color:var(--ac);font-family:'JetBrains Mono',monospace}

.fg{display:flex;flex-direction:column;gap:7px;margin-bottom:16px}
.fl{font-size:11px;color:var(--t2);font-weight:700;text-transform:uppercase;letter-spacing:.5px}
.fi{
  background:rgba(255,255,255,.04);border:1px solid var(--bd);border-radius:var(--rm);
  padding:13px 16px;font-family:'Syne',sans-serif;font-size:14px;color:var(--t1);
  outline:none;transition:var(--tr);width:100%;
}
.fi:focus{border-color:var(--ac);background:rgba(0,245,160,.04);box-shadow:0 0 0 3px rgba(0,245,160,.1)}
.fi::placeholder{color:var(--t3)}

.forgot{text-align:right;margin:-8px 0 12px}
.forgot a{font-size:13px;color:var(--t2);text-decoration:none;transition:var(--tr)}
.forgot a:hover{color:var(--ac)}

.btn{
  display:flex;align-items:center;justify-content:center;gap:8px;
  padding:13px 22px;border-radius:var(--rf);font-family:'Syne',sans-serif;
  font-size:15px;font-weight:700;cursor:pointer;transition:var(--tr);
  border:none;width:100%;
}
.btn-primary{background:var(--ac);color:#060610}
.btn-primary:hover{transform:translateY(-1px);box-shadow:var(--ac-g)}
.btn-primary:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
.btn-ghost{background:transparent;color:var(--t2);border:1px solid var(--bd)}
.btn-ghost:hover{background:rgba(255,255,255,.05);color:var(--t1)}

.divider{display:flex;align-items:center;gap:12px;margin:20px 0;color:var(--t3);font-size:13px}
.divider::before,.divider::after{content:'';flex:1;height:1px;background:var(--bd)}

.footer{text-align:center;font-size:14px;color:var(--t2);margin-top:20px}
.footer a{color:var(--ac);text-decoration:none;font-weight:700}
.footer a:hover{text-decoration:underline}

#toast-box{position:fixed;bottom:28px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:8px;pointer-events:none}
.t{padding:11px 16px;border-radius:var(--rm);font-size:13px;font-weight:600;
  backdrop-filter:blur(20px);border:1px solid var(--bd);animation:ti .25s ease;max-width:300px}
.t.s{background:rgba(0,245,160,.12);color:var(--ac);border-color:rgba(0,245,160,.3)}
.t.e{background:rgba(255,79,79,.12);color:var(--da);border-color:rgba(255,79,79,.3)}
.t.i{background:rgba(123,97,255,.12);color:var(--pu);border-color:rgba(123,97,255,.3)}
@keyframes ti{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
.spin{width:18px;height:18px;border:2px solid rgba(6,6,16,.3);border-top-color:#060610;
  border-radius:50%;animation:sp .7s linear infinite;display:inline-block}
@keyframes sp{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div id="toast-box"></div>

<div class="card">
  <a class="logo" href="index.html">
    <div class="logo-icon">âš¡</div>
    <span class="logo-txt">Time<span>Link</span></span>
  </a>

  <div class="ttl">ë‹¤ì‹œ ì˜¤ì…¨êµ°ìš”</div>
  <div class="sub">ê³„ì† Pulseë¥¼ ìŒ“ì•„ë³´ì„¸ìš”</div>

  <div class="hint">
    ğŸµ ë°ëª¨ ì²´í—˜: <strong>demo@timelink.digital</strong> / <strong>demo1234</strong>
  </div>

  <form id="form">
    <div class="fg">
      <label class="fl">ì´ë©”ì¼</label>
      <input type="email" id="email" class="fi" placeholder="your@email.com" required autocomplete="email">
    </div>
    <div class="fg">
      <label class="fl">ë¹„ë°€ë²ˆí˜¸</label>
      <input type="password" id="pw" class="fi" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" required autocomplete="current-password">
    </div>
    <div class="forgot"><a href="#">ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?</a></div>
    <button type="submit" class="btn btn-primary" id="submit-btn">ë¡œê·¸ì¸</button>
  </form>

  <div class="divider">ë˜ëŠ”</div>
  <button class="btn btn-ghost" disabled style="opacity:.35;cursor:not-allowed;margin-bottom:4px">
    ğŸ’ TON Wallet ë¡œê·¸ì¸ <span style="font-size:11px;opacity:.7">(Phase 2)</span>
  </button>

  <div class="footer">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="signup.html">ë¬´ë£Œ ê°€ì… â†’</a></div>
</div>

<script>
function $(i){return document.getElementById(i)}
function toast(msg,t='i'){
  const el=document.createElement('div');
  el.className=`t ${t}`;el.textContent=msg;
  $('toast-box').prepend(el);setTimeout(()=>el.remove(),3000);
}
if(localStorage.getItem('tl_token'))window.location.href='index.html';

$('form').addEventListener('submit',async e=>{
  e.preventDefault();
  const btn=$('submit-btn');
  const email=$('email').value.trim();
  const pw=$('pw').value;
  btn.disabled=true;btn.innerHTML='<div class="spin"></div>';

  // API í˜¸ì¶œ ì‹œë„
  let loggedIn=false;
  try{
    const r=await fetch('https://api.timelink.digital/auth/login',{
      method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({email,password:pw}),signal:AbortSignal.timeout(4000)
    });
    const d=await r.json();
    if(d.token){
      localStorage.setItem('tl_token',d.token);
      localStorage.setItem('tl_user',JSON.stringify(d.user));
      loggedIn=true;
    }
  }catch{}

  // API ì‹¤íŒ¨ ì‹œ ë°ëª¨ í´ë°±
  if(!loggedIn){
    if(email.includes('@')&&pw.length>=4){
      const isBiz=JSON.parse(localStorage.getItem('tl_pending_biz')||'false');
      const user={
        username:email.split('@')[0],
        email,
        role:'listener',
        isBusiness:false,
        businessPending:false,
        tl:10000,
        tlc:0
      };
      // ë°ëª¨ ë°ì´í„°ì—ì„œ ì‚¬ì—…ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const stored=JSON.parse(localStorage.getItem('tl_signup_'+email)||'null');
      const finalUser=stored||user;
      localStorage.setItem('tl_token','demo_'+Date.now());
      localStorage.setItem('tl_user',JSON.stringify(finalUser));
      loggedIn=true;
    }else{
      toast('ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”','e');
      btn.disabled=false;btn.textContent='ë¡œê·¸ì¸';return;
    }
  }

  toast('ë¡œê·¸ì¸ ì„±ê³µ! ğŸµ','s');
  setTimeout(()=>window.location.href='index.html',700);
});
</script>
</body>
</html>
